/*! For license information please see main.1926ecde.js.LICENSE.txt */
!function(){var t={3361:function(t,n,r){"use strict";r.d(n,{Z:function(){return ie}});var a=function(){function t(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(e){e.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(n);try{r.insertRule(t,r.cssRules.length)}catch(e){0}}else n.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},t}(),o=Math.abs,i=String.fromCharCode,s=Object.assign;function u(e){return e.trim()}function c(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function d(e,t){return 0|e.charCodeAt(t)}function f(e,t,n){return e.slice(t,n)}function p(e){return e.length}function h(e){return e.length}function m(e,t){return t.push(e),e}var v=1,y=1,g=0,b=0,x=0,w="";function k(e,t,n,r,a,o,i){return{value:e,root:t,parent:n,type:r,props:a,children:o,line:v,column:y,length:i,return:""}}function S(e,t){return s(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function _(){return x=b>0?d(w,--b):0,y--,10===x&&(y=1,v--),x}function T(){return x=b<g?d(w,b++):0,y++,10===x&&(y=1,v++),x}function E(){return d(w,b)}function C(){return b}function I(e,t){return f(w,e,t)}function N(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j(e){return v=y=1,g=p(w=e),b=0,[]}function R(e){return w="",e}function A(e){return u(I(b-1,L(91===e?e+2:40===e?e+1:e)))}function M(e){for(;(x=E())&&x<33;)T();return N(e)>2||N(x)>3?"":" "}function O(e,t){for(;--t&&T()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return I(e,C()+(t<6&&32==E()&&32==T()))}function L(e){for(;T();)switch(x){case e:return b;case 34:case 39:34!==e&&39!==e&&L(x);break;case 40:41===e&&L(e);break;case 92:T()}return b}function D(e,t){for(;T()&&e+x!==57&&(e+x!==84||47!==E()););return"/*"+I(t,b-1)+"*"+i(47===e?e:T())}function P(e){for(;!N(E());)T();return I(e,b)}var F="-ms-",z="-moz-",B="-webkit-",U="comm",V="rule",G="decl",W="@import",H="@keyframes";function Z(e,t){for(var n="",r=h(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function q(e,t,n,r){switch(e.type){case W:case G:return e.return=e.return||e.value;case U:return"";case H:return e.return=e.value+"{"+Z(e.children,r)+"}";case V:e.value=e.props.join(",")}return p(n=Z(e.children,r))?e.return=e.value+"{"+n+"}":""}function X(e){return R(K("",null,null,null,[""],e=j(e),0,[0],e))}function K(e,t,n,r,a,o,s,u,f){for(var h=0,v=0,y=s,g=0,b=0,x=0,w=1,k=1,S=1,I=0,N="",j=a,R=o,L=r,F=N;k;)switch(x=I,I=T()){case 40:if(108!=x&&58==d(F,y-1)){-1!=l(F+=c(A(I),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:F+=A(I);break;case 9:case 10:case 13:case 32:F+=M(x);break;case 92:F+=O(C()-1,7);continue;case 47:switch(E()){case 42:case 47:m(Q(D(T(),C()),t,n),f);break;default:F+="/"}break;case 123*w:u[h++]=p(F)*S;case 125*w:case 59:case 0:switch(I){case 0:case 125:k=0;case 59+v:b>0&&p(F)-y&&m(b>32?J(F+";",r,n,y-1):J(c(F," ","")+";",r,n,y-2),f);break;case 59:F+=";";default:if(m(L=Y(F,t,n,h,v,a,u,N,j=[],R=[],y),o),123===I)if(0===v)K(F,t,L,L,j,o,y,u,R);else switch(99===g&&110===d(F,3)?100:g){case 100:case 109:case 115:K(e,L,L,r&&m(Y(e,L,L,0,0,a,u,N,a,j=[],y),R),a,R,y,u,r?j:R);break;default:K(F,L,L,L,[""],R,0,u,R)}}h=v=b=0,w=S=1,N=F="",y=s;break;case 58:y=1+p(F),b=x;default:if(w<1)if(123==I)--w;else if(125==I&&0==w++&&125==_())continue;switch(F+=i(I),I*w){case 38:S=v>0?1:(F+="\f",-1);break;case 44:u[h++]=(p(F)-1)*S,S=1;break;case 64:45===E()&&(F+=A(T())),g=E(),v=y=p(N=F+=P(C())),I++;break;case 45:45===x&&2==p(F)&&(w=0)}}return o}function Y(e,t,n,r,a,i,s,l,d,p,m){for(var v=a-1,y=0===a?i:[""],g=h(y),b=0,x=0,w=0;b<r;++b)for(var S=0,_=f(e,v+1,v=o(x=s[b])),T=e;S<g;++S)(T=u(x>0?y[S]+" "+_:c(_,/&\f/g,y[S])))&&(d[w++]=T);return k(e,t,n,0===a?V:l,d,p,m)}function Q(e,t,n){return k(e,t,n,U,i(x),f(e,2,-2),0)}function J(e,t,n,r){return k(e,t,n,G,f(e,0,r),f(e,r+1,-1),r)}var $=function(e,t,n){for(var r=0,a=0;r=a,a=E(),38===r&&12===a&&(t[n]=1),!N(a);)T();return I(e,b)},ee=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(N(r)){case 0:38===r&&12===E()&&(t[n]=1),e[n]+=$(b-1,t,n);break;case 2:e[n]+=A(r);break;case 4:if(44===r){e[++n]=58===E()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=T());return e}(j(e),t))},te=new WeakMap,ne=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||te.get(n))&&!r){te.set(e,!0);for(var a=[],o=ee(t,a),i=n.props,s=0,u=0;s<o.length;s++)for(var c=0;c<i.length;c++,u++)e.props[u]=a[s]?o[s].replace(/&\f/g,i[c]):i[c]+" "+o[s]}}},re=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ae(e,t){switch(function(e,t){return 45^d(e,0)?(((t<<2^d(e,0))<<2^d(e,1))<<2^d(e,2))<<2^d(e,3):0}(e,t)){case 5103:return B+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return B+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return B+e+z+e+F+e+e;case 6828:case 4268:return B+e+F+e+e;case 6165:return B+e+F+"flex-"+e+e;case 5187:return B+e+c(e,/(\w+).+(:[^]+)/,B+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return B+e+F+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return B+e+F+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return B+e+F+c(e,"shrink","negative")+e;case 5292:return B+e+F+c(e,"basis","preferred-size")+e;case 6060:return B+"box-"+c(e,"-grow","")+B+e+F+c(e,"grow","positive")+e;case 4554:return B+c(e,/([^-])(transform)/g,"$1"+B+"$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,B+"$1"),/(image-set)/,B+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,B+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,B+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+B+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,B+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(d(e,t+1)){case 109:if(45!==d(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1"+B+"$2-$3$1"+z+(108==d(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?ae(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==d(e,t+1))break;case 6444:switch(d(e,p(e)-3-(~l(e,"!important")&&10))){case 107:return c(e,":",":"+B)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+B+(45===d(e,14)?"inline-":"")+"box$3$1"+B+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(d(e,t+11)){case 114:return B+e+F+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return B+e+F+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return B+e+F+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return B+e+F+e+e}return e}var oe=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case G:e.return=ae(e.value,e.length);break;case H:return Z([S(e,{value:c(e.value,"@","@"+B)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Z([S(e,{props:[c(t,/:(read-\w+)/,":"+z+"$1")]})],r);case"::placeholder":return Z([S(e,{props:[c(t,/:(plac\w+)/,":"+B+"input-$1")]}),S(e,{props:[c(t,/:(plac\w+)/,":"+z+"$1")]}),S(e,{props:[c(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||oe;var o,i,s={},u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var c,l,d=[q,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],f=function(e){var t=h(e);return function(n,r,a,o){for(var i="",s=0;s<t;s++)i+=e[s](n,r,a,o)||"";return i}}([ne,re].concat(r,d));i=function(e,t,n,r){c=n,Z(X(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new a({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return p.sheet.hydrate(u),p}},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},9140:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(9797),i=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,o.Z)((function(e){return u(e)?e:e.replace(i,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===a[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=f(e,t,n[a])+";";else for(var o in n){var i=n[o];if("object"!==typeof i)null!=t&&void 0!==t[i]?r+=o+"{"+t[i]+"}":c(i)&&(r+=l(o)+":"+d(o,i)+";");else if(!Array.isArray(i)||"string"!==typeof i[0]||null!=t&&void 0!==t[i[0]]){var s=f(e,t,i);switch(o){case"animation":case"animationName":r+=l(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var u=0;u<i.length;u++)c(i[u])&&(r+=l(o)+":"+d(o,i[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=p,o=n(e);return p=a,f(e,t,o)}}if(null==t)return n;var i=t[n];return void 0!==i?i:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,o="";p=void 0;var i=e[0];null==i||void 0===i.raw?(a=!1,o+=f(n,t,i)):o+=i[0];for(var s=1;s<e.length;s++)o+=f(n,t,e[s]),a&&(o+=i[s]);h.lastIndex=0;for(var u,c="";null!==(u=h.exec(o));)c+="-"+u[1];return{name:r(o)+c,styles:o,next:p}}},2561:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return i}});var a=n(2791),o=!!(r||(r=n.t(a,2))).useInsertionEffect&&(r||(r=n.t(a,2))).useInsertionEffect,i=o||function(e){return e()};o||a.useLayoutEffect},1131:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=i},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(1256)},9259:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(7462),a=n(3366),o=n(2791),i=n(8182),s=n(4419),u=n(4036),c=n(1402),l=n(6934),d=n(5878),f=n(1217);function p(e){return(0,f.Z)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var h=n(184),m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],v=(0,l.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r,a,o,i,s,u,c,l,d,f,p,h,m,v,y,g=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=g.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(o=g.typography)||null==(i=o.pxToRem)?void 0:i.call(o,20))||"1.25rem",medium:(null==(s=g.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=g.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(f=(g.vars||g).palette)||null==(p=f[b.color])?void 0:p.main)?d:{action:null==(h=(g.vars||g).palette)||null==(m=h.action)?void 0:m.active,disabled:null==(v=(g.vars||g).palette)||null==(y=v.action)?void 0:y.disabled,inherit:void 0}[b.color]}})),y=o.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),o=n.children,l=n.className,d=n.color,f=void 0===d?"inherit":d,y=n.component,g=void 0===y?"svg":y,b=n.fontSize,x=void 0===b?"medium":b,w=n.htmlColor,k=n.inheritViewBox,S=void 0!==k&&k,_=n.titleAccess,T=n.viewBox,E=void 0===T?"0 0 24 24":T,C=(0,a.Z)(n,m),I=(0,r.Z)({},n,{color:f,component:g,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:S,viewBox:E}),N={};S||(N.viewBox=E);var j=function(e){var t=e.color,n=e.fontSize,r=e.classes,a={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,s.Z)(a,p,r)}(I);return(0,h.jsxs)(v,(0,r.Z)({as:g,className:(0,i.Z)(j.root,l),focusable:"false",color:w,"aria-hidden":!_||void 0,role:_?"img":void 0,ref:t},N,C,{ownerState:I,children:[o,_?(0,h.jsx)("title",{children:_}):null]}))}));y.muiName="SvgIcon";var g=y},6532:function(e,t){"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case i:case f:case p:return e;default:switch(e=e&&e.$$typeof){case l:case c:case d:case m:case h:case u:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference")},8457:function(e,t,n){"use strict";n(6532)},1979:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var r=n(7462),a=n(3366),o=n(6189),i=n(2466),s=n(5080),u=n(7416),c=n(104),l=n(4942);function d(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var f=n(2065),p={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},m={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},v={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},x={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},w=["mode","contrastThreshold","tonalOffset"],k={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:p.white,default:p.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},S={text:{primary:p.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:p.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(e,t,n,r){var a=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,f.$n)(e.main,a):"dark"===t&&(e.dark=(0,f._j)(e.main,o)))}function T(e){var t=e.mode,n=void 0===t?"light":t,s=e.contrastThreshold,u=void 0===s?3:s,c=e.tonalOffset,l=void 0===c?.2:c,d=(0,a.Z)(e,w),T=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(n),E=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[500],light:m[300],dark:m[700]}}(n),C=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[500],light:v[300],dark:v[700]}:{main:v[700],light:v[400],dark:v[800]}}(n),I=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(n),N=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:x[400],light:x[300],dark:x[700]}:{main:x[800],light:x[500],dark:x[900]}}(n),j=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:"#ed6c02",light:y[500],dark:y[900]}}(n);function R(e){return(0,f.mi)(e,S.text.primary)>=u?S.text.primary:k.text.primary}var A=function(e){var t=e.color,n=e.name,a=e.mainShade,i=void 0===a?500:a,s=e.lightShade,u=void 0===s?300:s,c=e.darkShade,d=void 0===c?700:c;if(!(t=(0,r.Z)({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return _(t,"light",u,l),_(t,"dark",d,l),t.contrastText||(t.contrastText=R(t.main)),t},M={dark:S,light:k};return(0,i.Z)((0,r.Z)({common:(0,r.Z)({},p),mode:n,primary:A({color:T,name:"primary"}),secondary:A({color:E,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:C,name:"error"}),warning:A({color:j,name:"warning"}),info:A({color:I,name:"info"}),success:A({color:N,name:"success"}),grey:h,contrastThreshold:u,getContrastText:R,augmentColor:A,tonalOffset:l},M[n]),d)}var E=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var C={textTransform:"uppercase"},I='"Roboto", "Helvetica", "Arial", sans-serif';function N(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?I:o,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,d=void 0===l?300:l,f=n.fontWeightRegular,p=void 0===f?400:f,h=n.fontWeightMedium,m=void 0===h?500:h,v=n.fontWeightBold,y=void 0===v?700:v,g=n.htmlFontSize,b=void 0===g?16:g,x=n.allVariants,w=n.pxToRem,k=(0,a.Z)(n,E);var S=c/14,_=w||function(e){return"".concat(e/b*S,"rem")},T=function(e,t,n,a,o){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:_(t),lineHeight:n},s===I?{letterSpacing:"".concat((i=a/t,Math.round(1e5*i)/1e5),"em")}:{},o,x);var i},N={h1:T(d,96,1.167,-1.5),h2:T(d,60,1.2,-.5),h3:T(p,48,1.167,0),h4:T(p,34,1.235,.25),h5:T(p,24,1.334,0),h6:T(m,20,1.6,.15),subtitle1:T(p,16,1.75,.15),subtitle2:T(m,14,1.57,.1),body1:T(p,16,1.5,.15),body2:T(p,14,1.43,.15),button:T(m,14,1.75,.4,C),caption:T(p,12,1.66,.4),overline:T(p,12,2.66,1,C)};return(0,i.Z)((0,r.Z)({htmlFontSize:b,pxToRem:_,fontFamily:s,fontSize:c,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:y},N),k,{clone:!1})}var j=.2,R=.14,A=.12;function M(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(j,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(R,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(A,")")].join(",")}var O=["none",M(0,2,1,-1,0,1,1,0,0,1,3,0),M(0,3,1,-2,0,2,2,0,0,1,5,0),M(0,3,3,-2,0,3,4,0,0,1,8,0),M(0,2,4,-1,0,4,5,0,0,1,10,0),M(0,3,5,-1,0,5,8,0,0,1,14,0),M(0,3,5,-1,0,6,10,0,0,1,18,0),M(0,4,5,-2,0,7,10,1,0,2,16,1),M(0,5,5,-3,0,8,10,1,0,3,14,2),M(0,5,6,-3,0,9,12,1,0,3,16,2),M(0,6,6,-3,0,10,14,1,0,4,18,3),M(0,6,7,-4,0,11,15,1,0,4,20,3),M(0,7,8,-4,0,12,17,2,0,5,22,4),M(0,7,8,-4,0,13,19,2,0,5,24,4),M(0,7,9,-4,0,14,21,2,0,5,26,4),M(0,8,9,-5,0,15,22,2,0,6,28,5),M(0,8,10,-5,0,16,24,2,0,6,30,5),M(0,8,11,-5,0,17,26,2,0,6,32,5),M(0,9,11,-5,0,18,28,2,0,7,34,6),M(0,9,12,-6,0,19,29,2,0,7,36,6),M(0,10,13,-6,0,20,31,3,0,8,38,7),M(0,10,13,-6,0,21,33,3,0,8,40,7),M(0,10,14,-6,0,22,35,3,0,8,42,7),M(0,11,14,-7,0,23,36,3,0,9,44,8),M(0,11,15,-7,0,24,38,3,0,9,46,8)],L=n(1314),D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},P=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,l=e.palette,f=void 0===l?{}:l,p=e.transitions,h=void 0===p?{}:p,m=e.typography,v=void 0===m?{}:m,y=(0,a.Z)(e,P);if(e.vars)throw new Error((0,o.Z)(18));var g=T(f),b=(0,s.Z)(e),x=(0,i.Z)(b,{mixins:d(b.breakpoints,n),palette:g,shadows:O.slice(),typography:N(g,v),transitions:(0,L.ZP)(h),zIndex:(0,r.Z)({},D)});x=(0,i.Z)(x,y);for(var w=arguments.length,k=new Array(w>1?w-1:0),S=1;S<w;S++)k[S-1]=arguments[S];return(x=k.reduce((function(e,t){return(0,i.Z)(e,t)}),x)).unstable_sxConfig=(0,r.Z)({},u.Z,null==y?void 0:y.unstable_sxConfig),x.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},x}var z=F},1314:function(e,t,n){"use strict";n.d(t,{ZP:function(){return l},x9:function(){return s}});var r=n(3366),a=n(7462),o=["duration","easing","delay"],i={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function u(e){return"".concat(Math.round(e),"ms")}function c(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function l(e){var t=(0,a.Z)({},i,e.easing),n=(0,a.Z)({},s,e.duration);return(0,a.Z)({getAutoHeightDuration:c,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.duration,s=void 0===i?n.standard:i,c=a.easing,l=void 0===c?t.easeInOut:c,d=a.delay,f=void 0===d?0:d;(0,r.Z)(a,o);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:u(s)," ").concat(l," ").concat("string"===typeof f?f:u(f))})).join(",")}},e,{easing:t,duration:n})}},6482:function(e,t,n){"use strict";var r=(0,n(1979).Z)();t.Z=r},6934:function(e,t,n){"use strict";n.d(t,{FO:function(){return o}});var r=n(4046),a=n(6482),o=function(e){return(0,r.x9)(e)&&"classes"!==e},i=(0,r.ZP)({defaultTheme:a.Z,rootShouldForwardProp:o});t.ZP=i},1402:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7078),a=n(6482);function o(e){var t=e.props,n=e.name;return(0,r.Z)({props:t,name:n,defaultTheme:a.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},4223:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7462),a=n(2791),o=n(9259),i=n(184);function s(e,t){function n(n,a){return(0,i.jsx)(o.Z,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:a},n,{children:e}))}return n.muiName=o.Z.muiName,a.memo(a.forwardRef(n))}},1256:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return i.Z},debounce:function(){return s},deprecatedPropType:function(){return u},isMuiElement:function(){return d},ownerDocument:function(){return p},ownerWindow:function(){return h},requirePropFactory:function(){return m},setRef:function(){return v},unstable_ClassNameGenerator:function(){return C},unstable_useEnhancedEffect:function(){return y},unstable_useId:function(){return w},unsupportedProp:function(){return k},useControlled:function(){return S.Z},useEventCallback:function(){return _.Z},useForkRef:function(){return T.Z},useIsFocusVisible:function(){return E.Z}});var r=n(5902),a=n(4036);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))},i=n(4223);var s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){e.apply(r,o)}),n)}return r.clear=function(){clearTimeout(t)},r};var u=function(e,t){return function(){return null}},c=n(2791),l=n.t(c,2);var d=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function f(e){return e&&e.ownerDocument||document}var p=f;var h=function(e){return f(e).defaultView||window};n(7462);var m=function(e,t){return function(){return null}},v=n(2971).Z,y=n(5721).Z,g=n(9439),b=0;var x=l.useId;var w=function(e){if(void 0!==x){var t=x();return null!=e?e:t}return function(e){var t=c.useState(e),n=(0,g.Z)(t,2),r=n[0],a=n[1],o=e||r;return c.useEffect((function(){null==r&&a("mui-".concat(b+=1))}),[r]),o}(e)};var k=function(e,t,n,r,a){return null},S=n(8744),_=n(6868),T=n(4843),E=n(3031),C={configure:function(e){r.Z.configure(e)}}},8744:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9439),a=n(2791);var o=function(e){var t=e.controlled,n=e.default,o=(e.name,e.state,a.useRef(void 0!==t).current),i=a.useState(n),s=(0,r.Z)(i,2),u=s[0],c=s[1];return[o?t:u,a.useCallback((function(e){o||c(e)}),[])]}},6868:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(5721);var o=function(e){var t=r.useRef(e);return(0,a.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},4843:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2791),a=n(2971);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,a.Z)(t,e)}))}}),t)}},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,a=n(2791),o=!0,i=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function l(){"hidden"===this.visibilityState&&i&&(o=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(i=!0,window.clearTimeout(r),r=window.setTimeout((function(){i=!1}),100),t.current=!1,!0)},ref:e}}},1125:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S},Co:function(){return _}});var r=n(2791),a=n(7462),o=n(9797),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,o.Z)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),u=n(3361),c=n(9140),l=n(2561),d=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,u.Z)({key:"css"}):null);d.Provider;var f=function(e){return(0,r.forwardRef)((function(t,n){var a=(0,r.useContext)(d);return e(t,a,n)}))},p=(0,r.createContext)({});var h=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},m=s,v=function(e){return"theme"!==e},y=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?m:v},g=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},b=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;h(t,n,r);(0,l.L)((function(){return function(e,t,n){h(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)}));return null},x=function e(t,n){var o,i,s=t.__emotion_real===t,u=s&&t.__emotion_base||t;void 0!==n&&(o=n.label,i=n.target);var l=g(t,n,s),d=l||y(u),h=!d("as");return function(){var m=arguments,v=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&v.push("label:"+o+";"),null==m[0]||void 0===m[0].raw)v.push.apply(v,m);else{0,v.push(m[0][0]);for(var x=m.length,w=1;w<x;w++)v.push(m[w],m[0][w])}var k=f((function(e,t,n){var a=h&&e.as||u,o="",s=[],f=e;if(null==e.theme){for(var m in f={},e)f[m]=e[m];f.theme=(0,r.useContext)(p)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var g=(0,c.O)(v.concat(s),t.registered,f);o+=t.key+"-"+g.name,void 0!==i&&(o+=" "+i);var x=h&&void 0===l?y(a):d,w={};for(var k in e)h&&"as"===k||x(k)&&(w[k]=e[k]);return w.className=o,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(b,{cache:t,serialized:g,isStringTag:"string"===typeof a}),(0,r.createElement)(a,w))}));return k.displayName=void 0!==o?o:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",k.defaultProps=t.defaultProps,k.__emotion_real=k,k.__emotion_base=u,k.__emotion_styles=v,k.__emotion_forwardProp=l,Object.defineProperty(k,"toString",{value:function(){return"."+i}}),k.withComponent=function(t,r){return e(t,(0,a.Z)({},n,r,{shouldForwardProp:g(k,r,!0)})).apply(void 0,v)},k}},w=x.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){w[e]=w(e)}));var k=w;function S(e,t){return k(e,t)}var _=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},1184:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},VO:function(){return r},W8:function(){return i},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,n){var o=e.theme||{};if(Array.isArray(t)){var i=o.breakpoints||a;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var s=o.breakpoints||a;return Object.keys(t).reduce((function(e,a){if(-1!==Object.keys(s.values||r).indexOf(a)){e[s.up(a)]=n(t[a],a)}else{var o=a;e[o]=t[o]}return e}),{})}return n(t)}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{$n:function(){return d},Fq:function(){return c},_j:function(){return l},mi:function(){return u}});var r=n(6189);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var a,i=e.substring(t+1,e.length-1);if("color"===n){if(a=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error((0,r.Z)(10,a))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:a}}function i(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){var t=(e=o(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),i({type:c,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=o(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,i(e)}function l(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return i(e)}function d(e,t){if(e=o(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return i(e)}},4046:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S},x9:function(){return w}});var r=n(3433),a=n(9439),o=n(3366),i=n(7462),s=n(1125),u=n(5080),c=n(7312),l=["variant"];function d(e){return 0===e.length}function f(e){var t=e.variant,n=(0,o.Z)(e,l),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?d(r)?e[t]:(0,c.Z)(e[t]):"".concat(d(r)?t:(0,c.Z)(t)).concat((0,c.Z)(e[t].toString()))})),r}var p=n(104),h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],v=["theme"];function y(e){return 0===Object.keys(e).length}var g=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},b=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=f(e.props);r[t]=e.style})),r},x=function(e,t,n,r){var a,o,i=e.ownerState,s=void 0===i?{}:i,u=[],c=null==n||null==(a=n.components)||null==(o=a[r])?void 0:o.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[f(n.props)])})),u};function w(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var k=(0,u.Z)();function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?k:t,u=e.rootShouldForwardProp,c=void 0===u?w:u,l=e.slotShouldForwardProp,d=void 0===l?w:l,f=function(e){var t=y(e.theme)?n:e.theme;return(0,p.Z)((0,i.Z)({},e,{theme:t}))};return f.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var u=t.name,l=t.slot,p=t.skipVariantsResolver,k=t.skipSx,S=t.overridesResolver,_=(0,o.Z)(t,h),T=void 0!==p?p:l&&"Root"!==l||!1,E=k||!1;var C=w;"Root"===l?C=c:l?C=d:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);var I=(0,s.ZP)(e,(0,i.Z)({shouldForwardProp:C,label:undefined},_)),N=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),c=1;c<t;c++)s[c-1]=arguments[c];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,o.Z)(t,m);return e((0,i.Z)({theme:y(r)?n:r},a))}:e})):[],d=e;u&&S&&l.push((function(e){var t=y(e.theme)?n:e.theme,r=g(u,t);if(r){var o={};return Object.entries(r).forEach((function(n){var r=(0,a.Z)(n,2),s=r[0],u=r[1];o[s]="function"===typeof u?u((0,i.Z)({},e,{theme:t})):u})),S(e,o)}return null})),u&&!T&&l.push((function(e){var t=y(e.theme)?n:e.theme;return x(e,b(u,t),t,u)})),E||l.push(f);var p=l.length-s.length;if(Array.isArray(e)&&p>0){var h=new Array(p).fill("");(d=[].concat((0,r.Z)(e),(0,r.Z)(h))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(h))}else"function"===typeof e&&e.__emotion_real!==e&&(d=function(t){var r=t.theme,a=(0,o.Z)(t,v);return e((0,i.Z)({theme:y(r)?n:r},a))});return I.apply(void 0,[d].concat((0,r.Z)(l)))};return I.withConfig&&(N.withConfig=I.withConfig),N}}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(7462),a=n(3366),o=n(2466),i=n(4942),s=["values","unit","step"],u=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,i.Z)({},t.key,t.val))}),{})};var c={borderRadius:4},l=n(5682);var d=n(104),f=n(7416),p=["breakpoints","palette","spacing","shape"];var h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,i=e.palette,h=void 0===i?{}:i,m=e.spacing,v=e.shape,y=void 0===v?{}:v,g=(0,a.Z)(e,p),b=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,o=e.unit,i=void 0===o?"px":o,c=e.step,l=void 0===c?5:c,d=(0,a.Z)(e,s),f=u(n),p=Object.keys(f);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function m(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(i,")")}function v(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-l/100).concat(i,")")}return(0,r.Z)({keys:p,values:f,up:h,down:m,between:v,only:function(e){return p.indexOf(e)+1<p.length?v(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?m(p[t]):v(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},d)}(n),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(m),w=(0,o.Z)({breakpoints:b,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},h),spacing:x,shape:(0,r.Z)({},c,y)},g),k=arguments.length,S=new Array(k>1?k-1:0),_=1;_<k;_++)S[_-1]=arguments[_];return(w=S.reduce((function(e,t){return(0,o.Z)(e,t)}),w)).unstable_sxConfig=(0,r.Z)({},f.Z,null==g?void 0:g.unstable_sxConfig),w.unstable_sx=function(e){return(0,d.Z)({sx:e,theme:this})},w}},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return m},eI:function(){return h},NA:function(){return v},e6:function(){return b},o3:function(){return x}});var r=n(9439),a=n(1184),o=n(8529),i=n(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],o=n[1],i=s[a],l=u[o]||"";return Array.isArray(l)?l.map((function(e){return i+e})):[i+l]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(d,f);function h(e,t,n,r){var a,i=null!=(a=(0,o.DW)(e,t,!1))?a:n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function m(e){return h(e,"spacing",8)}function v(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function y(e,t,n,r){if(-1===t.indexOf(n))return null;var o=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=v(t,n),e}),{})}}(l(n),r),i=e[n];return(0,a.k9)(e,i,o)}function g(e,t){var n=m(e.theme);return Object.keys(e).map((function(r){return y(e,t,r,n)})).reduce(i.Z,{})}function b(e){return g(e,d)}function x(e){return g(e,f)}function w(e){return g(e,p)}b.propTypes={},b.filterProps=d,x.propTypes={},x.filterProps=f,w.propTypes={},w.filterProps=p},8529:function(e,t,n){"use strict";n.d(t,{DW:function(){return i},Jq:function(){return s}});var r=n(4942),a=n(7312),o=n(1184);function i(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:i(e,n)||a,t&&(r=t(r,a,e)),r}t.ZP=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,c=e.themeKey,l=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=i(e.theme,c)||{};return(0,o.k9)(e,n,(function(e){var n=s(d,l,e);return e===n&&"string"===typeof e&&(n=s(d,l,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return d.propTypes={},d.filterProps=[t],d}},7416:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(5682),a=n(8529),o=n(8247);var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,o.Z)(t,r[n](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a},s=n(1184);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,a.ZP)({prop:"border",themeKey:"borders",transform:u}),l=(0,a.ZP)({prop:"borderTop",themeKey:"borders",transform:u}),d=(0,a.ZP)({prop:"borderRight",themeKey:"borders",transform:u}),f=(0,a.ZP)({prop:"borderBottom",themeKey:"borders",transform:u}),p=(0,a.ZP)({prop:"borderLeft",themeKey:"borders",transform:u}),h=(0,a.ZP)({prop:"borderColor",themeKey:"palette"}),m=(0,a.ZP)({prop:"borderTopColor",themeKey:"palette"}),v=(0,a.ZP)({prop:"borderRightColor",themeKey:"palette"}),y=(0,a.ZP)({prop:"borderBottomColor",themeKey:"palette"}),g=(0,a.ZP)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,r.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,r.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];i(c,l,d,f,p,h,m,v,y,g,b);var x=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,r.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,r.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["gap"];var w=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,r.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,r.NA)(t,e)}}))}return null};w.propTypes={},w.filterProps=["columnGap"];var k=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,r.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,r.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["rowGap"];i(x,w,k,(0,a.ZP)({prop:"gridColumn"}),(0,a.ZP)({prop:"gridRow"}),(0,a.ZP)({prop:"gridAutoFlow"}),(0,a.ZP)({prop:"gridAutoColumns"}),(0,a.ZP)({prop:"gridAutoRows"}),(0,a.ZP)({prop:"gridTemplateColumns"}),(0,a.ZP)({prop:"gridTemplateRows"}),(0,a.ZP)({prop:"gridTemplateAreas"}),(0,a.ZP)({prop:"gridArea"}));function S(e,t){return"grey"===t?t:e}i((0,a.ZP)({prop:"color",themeKey:"palette",transform:S}),(0,a.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,a.ZP)({prop:"backgroundColor",themeKey:"palette",transform:S}));function _(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var T=(0,a.ZP)({prop:"width",transform:_}),E=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||s.VO[t]||_(t)}}))}return null};E.filterProps=["maxWidth"];var C=(0,a.ZP)({prop:"minWidth",transform:_}),I=(0,a.ZP)({prop:"height",transform:_}),N=(0,a.ZP)({prop:"maxHeight",transform:_}),j=(0,a.ZP)({prop:"minHeight",transform:_}),R=((0,a.ZP)({prop:"size",cssProperty:"width",transform:_}),(0,a.ZP)({prop:"size",cssProperty:"height",transform:_}),i(T,E,C,I,N,j,(0,a.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:u},borderTop:{themeKey:"borders",transform:u},borderRight:{themeKey:"borders",transform:u},borderBottom:{themeKey:"borders",transform:u},borderLeft:{themeKey:"borders",transform:u},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:b},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:x},rowGap:{style:k},columnGap:{style:w},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:_},maxWidth:{style:E},minWidth:{transform:_},height:{transform:_},maxHeight:{transform:_},minHeight:{transform:_},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,t,n){"use strict";var r=n(4942),a=n(7312),o=n(8247),i=n(8529),s=n(1184),u=n(7416);var c=function(){function e(e,t,n,o){var u,c=(u={},(0,r.Z)(u,e,t),(0,r.Z)(u,"theme",n),u),l=o[e];if(!l)return(0,r.Z)({},e,t);var d=l.cssProperty,f=void 0===d?e:d,p=l.themeKey,h=l.transform,m=l.style;if(null==t)return null;var v=(0,i.DW)(n,p)||{};if(m)return m(c);return(0,s.k9)(c,t,(function(t){var n=(0,i.Jq)(v,h,t);return t===n&&"string"===typeof t&&(n=(0,i.Jq)(v,h,"".concat(e).concat("default"===t?"":(0,a.Z)(t)),t)),!1===f?n:(0,r.Z)({},f,n)}))}return function t(n){var a,i=n||{},c=i.sx,l=i.theme,d=void 0===l?{}:l;if(!c)return null;var f=null!=(a=d.unstable_sxConfig)?a:u.Z;function p(n){var a=n;if("function"===typeof n)a=n(d);else if("object"!==typeof n)return n;if(!a)return null;var i=(0,s.W8)(d.breakpoints),u=Object.keys(i),c=i;return Object.keys(a).forEach((function(n){var i,u,l=(i=a[n],u=d,"function"===typeof i?i(u):i);if(null!==l&&void 0!==l)if("object"===typeof l)if(f[n])c=(0,o.Z)(c,e(n,l,d,f));else{var p=(0,s.k9)({theme:d},l,(function(e){return(0,r.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}(p,l)?c=(0,o.Z)(c,p):c[n]=t({sx:l,theme:d})}else c=(0,o.Z)(c,e(n,l,d,f))})),(0,s.L7)(u,c)}return Array.isArray(c)?c.map(p):p(c)}}();c.filterProps=["sx"],t.Z=c},886:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(5080),a=n(2791);var o=a.createContext(null);var i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=a.useContext(o);return n&&(e=n,0!==Object.keys(e).length)?n:t},s=(0,r.Z)();var u=function(){return i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s)}},7078:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5735);var a=n(886);function o(e){var t=e.props,n=e.name,o=e.defaultTheme,i=function(e){var t=e.theme,n=e.name,a=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,a):a}({theme:(0,a.Z)(o),name:n,props:t});return i}},5902:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6189);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return a},Z:function(){return i}});var r=n(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e){if(!a(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=o(e[n])})),t}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e&&a(e[r])?s[r]=i(e[r],t[r],n):n.clone?s[r]=a(t[r])?o(t[r]):t[r]:s[r]=t[r])})),s}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1217:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5902),a={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",o=a[t];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(e),"-").concat(t)}},5878:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1217);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a={};return t.forEach((function(t){a[t]=(0,r.Z)(e,t,n)})),a}},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(o){if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.Z)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){var i=e[o]||{},s=t[o];n[o]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[o]=(0,r.Z)({},s),Object.keys(i).forEach((function(e){n[o][e]=a(i[e],s[e])}))):n[o]=s:n[o]=i}else void 0===n[o]&&(n[o]=e[o])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=a},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},2110:function(t,n,r){"use strict";var a=r(8309),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function c(e){return a.isMemo(e)?s:u[e.$$typeof]||o}u[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[a.Memo]=s;var l=Object.defineProperty,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;t.exports=function t(n,r,a){if("string"!==typeof r){if(m){var o=h(r);o&&o!==m&&t(n,o,a)}var s=d(r);f&&(s=s.concat(f(r)));for(var u=c(n),v=c(r),y=0;y<s.length;++y){var g=s[y];if(!i[g]&&(!a||!a[g])&&(!v||!v[g])&&(!u||!u[g])){var b=p(r,g);try{l(n,g,b)}catch(e){}}}}return n}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case o:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===l},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===i},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===i||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},2193:function(e){e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},8987:function(t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var o={},i={};function s(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(i[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=c(e,e<0?-1:0,!1),a&&(o[e]=n),n)}function u(e,t){if(isNaN(e))return t?g:y;if(t){if(e<0)return g;if(e>=h)return S}else{if(e<=-m)return _;if(e+1>=m)return k}return e<0?u(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var a=u(l(n,8)),o=y,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),c=parseInt(e.substring(i,i+s),n);if(s<8){var f=u(l(n,s));o=o.mul(f).add(u(c))}else o=(o=o.mul(a)).add(u(c))}return o.unsigned=t,o}function f(e,t){return"number"===typeof e?u(e,t):"string"===typeof e?d(e,t):c(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=f;var p=4294967296,h=p*p,m=h/2,v=s(1<<24),y=s(0);r.ZERO=y;var g=s(0,!0);r.UZERO=g;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var w=s(-1);r.NEG_ONE=w;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var S=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var _=c(0,-2147483648,!1);r.MIN_VALUE=_;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(l(e,6),this.unsigned),o=this,i="";;){var s=o.div(a),c=(o.sub(s.mul(a)).toInt()>>>0).toString(e);if((o=s).isZero())return c+i;for(;c.length<6;)c="0"+c;i=""+c+i}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return a(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(a(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(b)},T.neg=T.negate,T.add=function(e){a(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,p=0,h=0;return p+=(h+=o+(65535&e.low))>>>16,d+=(p+=r+u)>>>16,l+=(d+=n+s)>>>16,l+=t+i,c((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return a(e)||(e=f(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return y;if(a(e)||(e=f(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(_))return e.isOdd()?_:y;if(e.eq(_))return this.isOdd()?_:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,m=0,g=0,b=0;return g+=(b+=i*p)>>>16,m+=(g+=o*p)>>>16,g&=65535,m+=(g+=i*d)>>>16,h+=(m+=r*p)>>>16,m&=65535,h+=(m+=o*d)>>>16,m&=65535,h+=(m+=i*l)>>>16,h+=t*p+r*d+o*l+i*s,c((g&=65535)<<16|(b&=65535),(h&=65535)<<16|(m&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(a(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return x;o=g}else{if(this.eq(_))return e.eq(b)||e.eq(w)?_:e.eq(_)?b:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:w:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(_))return this.unsigned?g:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),s=i<=48?1:l(2,i-48),d=u(t),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=u(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=b),o=o.add(d),r=r.sub(p)}return o},T.div=T.divide,T.modulo=function(e){return a(e)||(e=f(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(e){return a(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return a(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return a(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},2024:function(t,n,r){var a=r(7061).default;!function(e){t.exports=e()}((function(){return function e(t,n,r){function a(i,s){if(!n[i]){if(!t[i]){var u=void 0;if(!s&&u)return require(i,!0);if(o)return o(i,!0);throw(s=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",s}u=n[i]={exports:{}},t[i][0].call(u.exports,(function(e){return a(t[i][1][e]||e)}),u,u.exports,e,t,n,r)}return n[i].exports}for(var o=void 0,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){"use strict";n.byteLength=function(e){return 3*((e=c(e))[0]+(e=e[1]))/4-e},n.toByteArray=function(e){var t,n,r=(i=c(e))[0],i=i[1],s=new o(function(e,t){return 3*(e+t)/4-t}(r,i)),u=0,l=0<i?r-4:r;for(n=0;n<l;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===i&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,s[u++]=255&t),1===i&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,a=n%3,o=[],i=0,s=n-a;i<s;i+=16383)o.push(function(e,t,n){for(var a,o=[],i=t;i<n;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(a));return o.join("")}(e,i,s<i+16383?s:i+16383));return 1==a?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2==a&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=i.length;s<u;++s)r[s]=i[s],a[i.charCodeAt(s)]=s;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),a=e("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,i=(n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50,2147483647);function s(e){if(i<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');return e=new Uint8Array(e),Object.setPrototypeOf(e,t.prototype),e}function t(e,t,n){if("number"!=typeof e)return u(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function u(e,n,r){if("string"==typeof e){var a=e,o=n;if(t.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))return(a=(u=s(i=0|p(a,o))).write(a,o))!==i?u.slice(0,a):u;throw new TypeError("Unknown encoding: "+o)}if(ArrayBuffer.isView(e))return d(e);if(null!=e){if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)){var i=e,u=r;if((a=n)<0||i.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');return i=void 0===a&&void 0===u?new Uint8Array(i):void 0===u?new Uint8Array(i,a):new Uint8Array(i,a,u),Object.setPrototypeOf(i,t.prototype),i}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(o=e.valueOf&&e.valueOf())&&o!==e)return t.from(o,n,r);var c=function(e){var n,r;return t.isBuffer(e)?(0!==(r=s(n=0|f(e.length))).length&&e.copy(r,0,0,n),r):void 0!==e.length?"number"!=typeof e.length||A(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),s(e<0?0:0|f(e))}function d(e){for(var t=e.length<0?0:0|f(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function p(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,a=2<arguments.length&&!0===arguments[2];if(!a&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(o)return a?-1:I(e).length;n=(""+n).toLowerCase(),o=!0}}function h(e,t,n){var a,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=t,s=n,u=this.length;(!s||s<0||u<s)&&(s=u);for(var c="",l=i=!i||i<0?0:i;l<s;++l)c+=M[this[l]];return c;case"utf8":case"utf-8":return x(this,t,n);case"ascii":u=t;var d=n,f="";d=Math.min(this.length,d);for(var p=u;p<d;++p)f+=String.fromCharCode(127&this[p]);return f;case"latin1":case"binary":i=t;var h=n,m="";h=Math.min(this.length,h);for(var v=i;v<h;++v)m+=String.fromCharCode(this[v]);return m;case"base64":return y=this,a=n,0===(g=t)&&a===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(g,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,g=n,b=this.slice(y,g),w="",k=0;k<b.length;k+=2)w+=String.fromCharCode(b[k]+256*b[k+1]);return w;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,n,r,a,o){if(0===e.length)return-1;if("string"==typeof r?(a=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=A(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=t.from(n,a)),t.isBuffer(n))return 0===n.length?-1:y(e,n,r,a,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,n,r):y(e,[n],r,a,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,a){var o=1,i=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i/=o=2,s/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a)for(var c=-1,l=n;l<i;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===s)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=i<n+s?i-s:n;0<=l;l--){for(var d=!0,f=0;f<s;f++)if(u(e,l+f)!==u(t,f)){d=!1;break}if(d)return l}return-1}function g(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return j(function(e,t){for(var n,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,r%=256,a.push(r),a.push(n);return a}(t,e.length-n),e,n,r)}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o,i,s,u,c=e[a],l=null,d=239<c?4:223<c?3:191<c?2:1;if(a+d<=n)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[a+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[a+1],i=e[a+2],128==(192&o)&&128==(192&i)&&2047<(u=(15&c)<<12|(63&o)<<6|63&i)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[a+1],i=e[a+2],s=e[a+3],128==(192&o)&&128==(192&i)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&i)<<6|63&s)&&u<1114112&&(l=u)}null===l?(l=65533,d=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=d}var f=r,p=f.length;if(p<=w)return String.fromCharCode.apply(String,f);for(var h="",m=0;m<p;)h+=String.fromCharCode.apply(String,f.slice(m,m+=w));return h}n.kMaxLength=i,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=u,Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return c(e),e<=0||void 0===t?s(e):"string"==typeof n?s(e).fill(t,n):s(e).fill(t)},t.allocUnsafe=l,t.allocUnsafeSlow=l,t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(R(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),R(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,a=n.length,o=0,i=Math.min(r,a);o<i;++o)if(e[o]!==n[o]){r=e[o],a=n[o];break}return r<a?-1:a<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);if(void 0===n)for(o=n=0;o<e.length;++o)n+=e[o].length;for(var r=t.allocUnsafe(n),a=0,o=0;o<e.length;++o){var i=e[o];if(R(i,Uint8Array)&&(i=t.from(i)),!t.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},t.byteLength=p,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):h.apply(this,arguments)},t.prototype.equals=function(e){if(t.isBuffer(e))return this===e||0===t.compare(this,e);throw new TypeError("Argument must be a Buffer")},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(e,n,r,a,o){if(R(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),(n=void 0===n?0:n)<0||r>e.length||a<0||o>this.length)throw new RangeError("out of range index");if(o<=a&&r<=n)return 0;if(o<=a)return-1;if(r<=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(a>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(i,s),c=this.slice(a,o),l=e.slice(n,r),d=0;d<u;++d)if(c[d]!==l[d]){i=c[d],s=l[d];break}return i<s?-1:s<i?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,i,s,u=!1;;)switch(r){case"hex":var c=e,l=t,d=n,f=(l=Number(l)||0,this.length-l);(!d||f<(d=Number(d)))&&(d=f),(f=c.length)/2<d&&(d=f/2);for(var p=0;p<d;++p){var h=parseInt(c.substr(2*p,2),16);if(A(h))return p;this[l+p]=h}return p;case"utf8":case"utf-8":return f=t,s=n,j(I(e,(i=this).length-f),i,f,s);case"ascii":case"latin1":case"binary":return g(this,e,t,n);case"base64":return i=this,s=t,o=n,j(N(e),i,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,n,r,a,o,i){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<n||n<i)throw new RangeError('"value" argument is out of bounds');if(r+a>e.length)throw new RangeError("Index out of range")}function _(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,o){return t=+t,n>>>=0,o||_(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,o){return t=+t,n>>>=0,o||_(e,0,n,8),a.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e),r=this.subarray(e,n);return Object.setPrototypeOf(r,t.prototype),r},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=t,a=1,o=this[e+--r];0<r&&(a*=256);)o+=this[e+--r]*a;return(a*=128)<=o&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},t.prototype.readInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),a.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),a.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),a.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),a.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[t+a]=255&e;0<=--a&&(o*=256);)this[t+a]=e/o&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=0,o=1,i=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/o>>0)-i&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=n-1,o=1,i=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/o>>0)-i&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,a){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,a||0===a||(a=this.length),n>=e.length&&(n=e.length),(a=0<a&&a<r?r:a)===r)return 0;if(0===e.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);var o=(a=e.length-n<a-r?e.length-n+r:a)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,a);else if(this===e&&r<n&&n<a)for(var i=o-1;0<=i;--i)e[i+n]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,a),n);return o},t.prototype.fill=function(e,n,r,a){if("string"==typeof e){if("string"==typeof n?(a=n,n=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===a&&o<128||"latin1"===a)&&(e=o))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");var i;if(!(r<=n))if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(i=n;i<r;++i)this[i]=e;else{var s=t.isBuffer(e)?e:t.from(e,a),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-n;++i)this[i+n]=s[i%u]}return this};var C=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if(55295<(n=e.charCodeAt(i))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(i+1===r){-1<(t-=3)&&o.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&o.push(239,191,189);if(a=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function N(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function A(e){return e!=e}var M=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],6:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e)||null===e)return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},{"../internals/is-object":74}],7:[function(e,t,n){var r=e("../internals/well-known-symbol"),a=e("../internals/object-create"),o=(e=e("../internals/object-define-property"),r("unscopables")),i=Array.prototype;null==i[o]&&e.f(i,o,{configurable:!0,value:a(null)}),t.exports=function(e){i[o][e]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,t,n){t.exports=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},{}],10:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e))return e;throw TypeError(String(e)+" is not an object")}},{"../internals/is-object":74}],11:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(e,t,n){"use strict";function r(e){return u(e)&&c(E,l(e))}var a,o=e("../internals/array-buffer-native"),i=e("../internals/descriptors"),s=e("../internals/global"),u=e("../internals/is-object"),c=e("../internals/has"),l=e("../internals/classof"),d=e("../internals/create-non-enumerable-property"),f=e("../internals/redefine"),p=e("../internals/object-define-property").f,h=e("../internals/object-get-prototype-of"),m=e("../internals/object-set-prototype-of"),v=e("../internals/well-known-symbol"),y=(e=e("../internals/uid"),s.Int8Array),g=y&&y.prototype,b=(b=s.Uint8ClampedArray)&&b.prototype,x=y&&h(y),w=g&&h(g),k=Object.prototype,S=k.isPrototypeOf,_=(v=v("toStringTag"),e("TYPED_ARRAY_TAG")),T=o&&!!m&&"Opera"!==l(s.opera),E=(e=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(a in E)s[a]||(T=!1);if((!T||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},T))for(a in E)s[a]&&m(s[a],x);if((!T||!w||w===k)&&(w=x.prototype,T))for(a in E)s[a]&&m(s[a].prototype,w);if(T&&h(b)!==w&&m(b,w),i&&!c(w,v))for(a in e=!0,p(w,v,{get:function(){return u(this)?this[_]:void 0}}),E)s[a]&&d(s[a],_,a);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:e&&_,aTypedArray:function(e){if(r(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(m){if(S.call(x,e))return e}else for(var t in E)if(c(E,a)&&(t=s[t])&&(e===t||S.call(t,e)))return e;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in E)(r=s[r])&&c(r.prototype,e)&&delete r.prototype[e];w[e]&&!n||f(w,e,!n&&T&&g[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,a;if(i){if(m){if(n)for(r in E)(a=s[r])&&c(a,e)&&delete a[e];if(x[e]&&!n)return;try{return f(x,e,!n&&T&&y[e]||t)}catch(e){}}for(r in E)!(a=s[r])||a[e]&&!n||f(a,e,t)}},isView:function(e){return"DataView"===(e=l(e))||c(E,e)},isTypedArray:r,TypedArray:x,TypedArrayPrototype:w}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function a(e){return[255&e,e>>8&255]}function o(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function i(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return B(e,23,4)}function u(e){return B(e,52,8)}function c(e,t){E(e[M],t,{get:function(){return N(this)[t]}})}function l(e,t,n,r){if((n=w(n))+t>(e=N(e)).byteLength)throw z(O);var a=N(e.buffer).bytes;n+=e.byteOffset,e=a.slice(n,n+t);return r?e:e.reverse()}function d(e,t,n,r,a,o){if((n=w(n))+t>(e=N(e)).byteLength)throw z(O);for(var i=N(e.buffer).bytes,s=n+e.byteOffset,u=r(+a),c=0;c<t;c++)i[s+c]=u[o?c:t-c-1]}var f=e("../internals/global"),p=e("../internals/descriptors"),h=e("../internals/array-buffer-native"),m=e("../internals/create-non-enumerable-property"),v=e("../internals/redefine-all"),y=e("../internals/fails"),g=e("../internals/an-instance"),b=e("../internals/to-integer"),x=e("../internals/to-length"),w=e("../internals/to-index"),k=e("../internals/ieee754"),S=e("../internals/object-get-prototype-of"),_=e("../internals/object-set-prototype-of"),T=e("../internals/object-get-own-property-names").f,E=e("../internals/object-define-property").f,C=e("../internals/array-fill"),I=e("../internals/set-to-string-tag"),N=(e=e("../internals/internal-state")).get,j=e.set,R="ArrayBuffer",A="DataView",M="prototype",O="Wrong index",L=f[R],D=L,P=f[A],F=(e=P&&P[M],Object.prototype),z=f.RangeError,B=k.pack,U=k.unpack;if(h){if(!y((function(){L(1)}))||!y((function(){new L(-1)}))||y((function(){return new L,new L(1.5),new L(NaN),L.name!=R}))){f=(D=function(e){return g(this,D),new L(w(e))})[M]=L[M];for(var V,G=T(L),W=0;G.length>W;)(V=G[W++])in D||m(D,V,L[V]);f.constructor=D}_&&S(e)!==F&&_(e,F);k=new P(new D(2));var H=e.setInt8;k.setInt8(0,2147483648),k.setInt8(1,2147483649),!k.getInt8(0)&&k.getInt8(1)||v(e,{setInt8:function(e,t){H.call(this,e,t<<24>>24)},setUint8:function(e,t){H.call(this,e,t<<24>>24)}},{unsafe:!0})}else D=function(e){g(this,D,R),e=w(e),j(this,{bytes:C.call(new Array(e),0),byteLength:e}),p||(this.byteLength=e)},P=function(e,t,n){g(this,P,A),g(e,D,A);var r=N(e).byteLength;if((t=b(t))<0||r<t)throw z("Wrong offset");if(r<t+(n=void 0===n?r-t:x(n)))throw z("Wrong length");j(this,{buffer:e,byteLength:n,byteOffset:t}),p||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},p&&(c(D,"byteLength"),c(P,"buffer"),c(P,"byteLength"),c(P,"byteOffset")),v(P[M],{getInt8:function(e){return l(this,1,e)[0]<<24>>24},getUint8:function(e){return l(this,1,e)[0]},getInt16:function(e){return((e=l(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0])<<16>>16},getUint16:function(e){return(e=l(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0]},getInt32:function(e){return i(l(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return i(l(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return U(l(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return U(l(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){d(this,1,e,r,t)},setUint8:function(e,t){d(this,1,e,r,t)},setInt16:function(e,t){d(this,2,e,a,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){d(this,2,e,a,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){d(this,4,e,o,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){d(this,4,e,o,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){d(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){d(this,8,e,u,t,2<arguments.length?arguments[2]:void 0)}});I(D,R),I(P,A),t.exports={ArrayBuffer:D,DataView:P}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,t,n){"use strict";var r=e("../internals/to-object"),a=e("../internals/to-absolute-index"),o=e("../internals/to-length"),i=Math.min;t.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),u=a(e,s),c=a(t,s),l=i((void 0===(e=2<arguments.length?arguments[2]:void 0)?s:a(e,s))-c,s-u),d=1;for(c<u&&u<c+l&&(d=-1,c+=l-1,u+=l-1);0<l--;)c in n?n[u]=n[c]:delete n[u],u+=d,c+=d;return n}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,t,n){"use strict";var r=e("../internals/to-object"),a=e("../internals/to-absolute-index"),o=e("../internals/to-length");t.exports=function(e){for(var t,n=r(this),i=o(n.length),s=a(1<(t=arguments.length)?arguments[1]:void 0,i),u=void 0===(t=2<t?arguments[2]:void 0)?i:a(t,i);s<u;)n[s++]=e;return n}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,a=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),a=a("forEach"),e=e("forEach");t.exports=a&&e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),a=e("../internals/to-object"),o=e("../internals/call-with-safe-iteration-closing"),i=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),u=e("../internals/create-property"),c=e("../internals/get-iterator-method");t.exports=function(e){var t,n,l,d,f,p,h=a(e),m=(e="function"==typeof this?this:Array,arguments.length),v=1<m?arguments[1]:void 0,y=void 0!==v,g=c(h),b=0;if(y&&(v=r(v,2<m?arguments[2]:void 0,2)),null==g||e==Array&&i(g))for(n=new e(t=s(h.length));b<t;b++)p=y?v(h[b],b):h[b],u(n,b,p);else for(f=(d=g.call(h)).next,n=new e;!(l=f.call(d)).done;b++)p=y?o(d,v,[l.value,b],!0):l.value,u(n,b,p);return n.length=b,n}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,t,n){function r(e){return function(t,n,r){var s,u=a(t),c=o(u.length),l=i(r,c);if(e&&n!=n){for(;l<c;)if((s=u[l++])!=s)return!0}else for(;l<c;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}var a=e("../internals/to-indexed-object"),o=e("../internals/to-length"),i=e("../internals/to-absolute-index");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,t,n){function r(e){var t=1==e,n=2==e,r=3==e,l=4==e,d=6==e,f=5==e||d;return function(p,h,m,v){for(var y,g,b=i(p),x=o(b),w=a(h,m,3),k=s(x.length),S=0,_=(h=v||u,t?h(p,k):n?h(p,0):void 0);S<k;S++)if((f||S in x)&&(g=w(y=x[S],S,b),e))if(t)_[S]=g;else if(g)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:c.call(_,y)}else if(l)return!1;return d?-1:r||l?l:_}}var a=e("../internals/function-bind-context"),o=e("../internals/indexed-object"),i=e("../internals/to-object"),s=e("../internals/to-length"),u=e("../internals/array-species-create"),c=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),a=e("../internals/to-integer"),o=e("../internals/to-length"),i=e("../internals/array-method-is-strict"),s=(e=e("../internals/array-method-uses-to-length"),Math.min),u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0;i=i("lastIndexOf"),e=e("indexOf",{ACCESSORS:!0,1:0});t.exports=!c&&i&&e?u:function(e){if(c)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),i=n-1;for((i=1<arguments.length?s(i,a(arguments[1])):i)<0&&(i=n+i);0<=i;i--)if(i in t&&t[i]===e)return i||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/well-known-symbol"),o=e("../internals/engine-v8-version"),i=a("species");t.exports=function(e){return 51<=o||!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":51}],23:[function(e,t,n){function r(e){throw e}var a=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/has"),s=Object.defineProperty,u={};t.exports=function(e,t){var n,c,l,d;return i(u,e)?u[e]:(n=[][e],c=!!i(t=t||{},"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:r,d=i(t,1)?t[1]:void 0,u[e]=!!n&&!o((function(){if(c&&!a)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:r}):e[1]=1,n.call(e,l,d)})))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,t,n){function r(e){return function(t,n,r,u){a(n);var c=o(t),l=i(c),d=s(c.length),f=e?d-1:0,p=e?-1:1;if(r<2)for(;;){if(f in l){u=l[f],f+=p;break}if(f+=p,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=f:f<d;f+=p)f in l&&(u=n(u,l[f],f,c));return u}}var a=e("../internals/a-function"),o=e("../internals/to-object"),i=e("../internals/indexed-object"),s=e("../internals/to-length");t.exports={left:r(!1),right:r(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/is-array"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return new(void 0===(n=a(e)&&("function"==typeof(n=e.constructor)&&(n===Array||a(n.prototype))||r(n)&&null===(n=n[o]))?void 0:n)?Array:n)(0===t?0:t)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){throw void 0!==(a=e.return)&&r(a.call(e)),t}}},{"../internals/an-object":10}],27:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),a=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){a=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},{"../internals/well-known-symbol":146}],28:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],29:[function(e,t,n){var r=e("../internals/to-string-tag-support"),a=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),i="Arguments"==a(function(){return arguments}());t.exports=r?a:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),o))?t:i?a(e):"Object"==(t=a(e))&&"function"==typeof e.callee?"Arguments":t}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,a=e("../internals/object-create"),o=e("../internals/redefine-all"),i=e("../internals/function-bind-context"),s=e("../internals/an-instance"),u=e("../internals/iterate"),c=e("../internals/define-iterator"),l=e("../internals/set-species"),d=e("../internals/descriptors"),f=e("../internals/internal-metadata").fastKey,p=(e=e("../internals/internal-state")).set,h=e.getterFor;t.exports={getConstructor:function(e,t,n,c){function l(e,t,n){var r,a=y(e),o=m(e,t);return o?o.value=n:(a.last=o={index:r=f(t,!0),key:t,value:n,previous:t=a.last,next:void 0,removed:!1},a.first||(a.first=o),t&&(t.next=o),d?a.size++:e.size++,"F"!==r&&(a.index[r]=o)),e}function m(e,t){e=y(e);var n,r=f(t);if("F"!==r)return e.index[r];for(n=e.first;n;n=n.next)if(n.key==t)return n}var v=e((function(e,r){s(e,v,t),p(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=r&&u(r,e[c],e,n)})),y=h(t);return o(v.prototype,{clear:function(){for(var e=y(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t,n,r=y(this);return(e=m(this,e))&&(t=e.next,n=e.previous,delete r.index[e.index],e.removed=!0,n&&(n.next=t),t&&(t.previous=n),r.first==e&&(r.first=t),r.last==e&&(r.last=n),d?r.size--:this.size--),!!e},forEach:function(e){for(var t,n=y(this),r=i(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!m(this,e)}}),o(v.prototype,n?{get:function(e){return(e=m(this,e))&&e.value},set:function(e,t){return l(this,0===e?0:e,t)}}:{add:function(e){return l(this,e=0===e?0:e,e)}}),d&&r(v.prototype,"size",{get:function(){return y(this).size}}),v},setStrong:function(e,t,n){var r=t+" Iterator",a=h(t),o=h(r);c(e,t,(function(e,t){p(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),l(t)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(e,t,n){"use strict";function r(e){return e.frozen||(e.frozen=new a)}function a(){this.entries=[]}function o(e,t){return v(e.entries,(function(e){return e[0]===t}))}var i=e("../internals/redefine-all"),s=e("../internals/internal-metadata").getWeakData,u=e("../internals/an-object"),c=e("../internals/is-object"),l=e("../internals/an-instance"),d=e("../internals/iterate"),f=e("../internals/array-iteration"),p=e("../internals/has"),h=(e=e("../internals/internal-state")).set,m=e.getterFor,v=f.find,y=f.findIndex,g=0;a.prototype={get:function(e){if(e=o(this,e))return e[1]},has:function(e){return!!o(this,e)},set:function(e,t){var n=o(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,n,a){function o(e,t,n){var a=v(e),o=s(u(t),!0);return!0===o?r(a).set(t,n):o[a.id]=n,e}var f=e((function(e,r){l(e,f,t),h(e,{type:t,id:g++,frozen:void 0}),null!=r&&d(r,e[a],e,n)})),v=m(t);return i(f.prototype,{delete:function(e){var t,n=v(this);return!!c(e)&&(!0===(t=s(e))?r(n).delete(e):t&&p(t,n.id)&&delete t[n.id])},has:function(e){var t,n=v(this);return!!c(e)&&(!0===(t=s(e))?r(n).has(e):t&&p(t,n.id))}}),i(f.prototype,n?{get:function(e){var t,n=v(this);if(c(e))return!0===(t=s(e))?r(n).get(e):t?t[n.id]:void 0},set:function(e,t){return o(this,e,t)}}:{add:function(e){return o(this,e,!0)}}),f}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/global"),o=e("../internals/is-forced"),i=e("../internals/redefine"),s=e("../internals/internal-metadata"),u=e("../internals/iterate"),c=e("../internals/an-instance"),l=e("../internals/is-object"),d=e("../internals/fails"),f=e("../internals/check-correctness-of-iteration"),p=e("../internals/set-to-string-tag"),h=e("../internals/inherit-if-required");t.exports=function(e,t,n){function m(e){var t=T[e];i(T,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(k&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return k&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(k&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var v,y,g,b,x,w=-1!==e.indexOf("Map"),k=-1!==e.indexOf("Weak"),S=w?"set":"add",_=a[e],T=_&&_.prototype,E=_,C={};return o(e,"function"!=typeof _||!(k||T.forEach&&!d((function(){(new _).entries().next()}))))?(E=n.getConstructor(t,e,w,S),s.REQUIRED=!0):o(e,!0)&&(y=(v=new E)[S](k?{}:-0,1)!=v,g=d((function(){v.has(1)})),b=f((function(e){new _(e)})),x=!k&&d((function(){for(var e=new _,t=5;t--;)e[S](t,t);return!e.has(-0)})),b||(((E=t((function(t,n){return c(t,E,e),t=h(new _,t,E),null!=n&&u(n,t[S],t,w),t}))).prototype=T).constructor=E),(g||x)&&(m("delete"),m("has"),w&&m("get")),(x||y)&&m(S),k&&T.clear&&delete T.clear),C[e]=E,r({global:!0,forced:E!=_},C),p(E,e),k||n.setStrong(E,e,w),E}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),i=e("../internals/object-define-property");t.exports=function(e,t){for(var n=a(t),s=i.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,"/./"[t](n)}catch(e){}}return!1}},{"../internals/well-known-symbol":146}],35:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":51}],36:[function(e,t,n){var r=e("../internals/require-object-coercible"),a=/"/g;t.exports=function(e,t,n,o){e=String(r(e));var i="<"+t;return""!==n&&(i+=" "+n+'="'+String(o).replace(a,"&quot;")+'"'),i+">"+e+"</"+t+">"}},{"../internals/require-object-coercible":113}],37:[function(e,t,n){"use strict";function r(){return this}var a=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),u=e("../internals/iterators");t.exports=function(e,t,n){return t+=" Iterator",e.prototype=o(a,{next:i(1,n)}),s(e,t,!1,!0),u[t]=r,e}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return a.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],40:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),a=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=function(e,t,n){(t=r(t))in e?a.f(e,t,o(0,n)):e[t]=n}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(e,t,n){"use strict";function r(){return this}var a=e("../internals/export"),o=e("../internals/create-iterator-constructor"),i=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),u=e("../internals/set-to-string-tag"),c=e("../internals/create-non-enumerable-property"),l=e("../internals/redefine"),d=e("../internals/well-known-symbol"),f=e("../internals/is-pure"),p=e("../internals/iterators"),h=(e=e("../internals/iterators-core")).IteratorPrototype,m=e.BUGGY_SAFARI_ITERATORS,v=d("iterator"),y="values",g="entries";t.exports=function(e,t,n,d,b,x,w){function k(e){if(e===b&&I)return I;if(!m&&e in E)return E[e];switch(e){case"keys":case y:case g:return function(){return new n(this,e)}}return function(){return new n(this)}}o(n,t,d);d=t+" Iterator";var S,_,T=!1,E=e.prototype,C=E[v]||E["@@iterator"]||b&&E[b],I=!m&&C||k(b),N="Array"==t&&E.entries||C;if(N&&(N=i(N.call(new e)),h!==Object.prototype&&N.next&&(f||i(N)===h||(s?s(N,h):"function"!=typeof N[v]&&c(N,v,r)),u(N,d,!0,!0),f&&(p[d]=r))),b==y&&C&&C.name!==y&&(T=!0,I=function(){return C.call(this)}),f&&!w||E[v]===I||c(E,v,I),p[t]=I,b)if(S={values:k(y),keys:x?I:k("keys"),entries:k(g)},w)for(_ in S)!m&&!T&&_ in E||l(E,_,S[_]);else a({target:t,proto:!0,forced:m||T},S);return S}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(e,t,n){var r=e("../internals/path"),a=e("../internals/has"),o=e("../internals/well-known-symbol-wrapped"),i=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||i(t,e,{value:o.f(e)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":51}],44:[function(e,t,n){var r=e("../internals/global"),a=(e=e("../internals/is-object"),r.document),o=e(a)&&e(a.createElement);t.exports=function(e){return o?a.createElement(e):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,t,n){e=e("../internals/engine-user-agent"),t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(e,t,n){var r,a,o=e("../internals/global");e=e("../internals/engine-user-agent");(o=(o=(o=o.process)&&o.versions)&&o.v8)?a=(r=o.split("."))[0]+r[1]:e&&(!(r=e.match(/Edge\/(\d+)/))||74<=r[1])&&(r=e.match(/Chrome\/(\d+)/))&&(a=r[1]),t.exports=a&&+a},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),i=e("../internals/redefine"),s=e("../internals/set-global"),u=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,l,d,f=e.target,p=e.global,h=e.stat,m=p?r:h?r[f]||s(f,{}):(r[f]||{}).prototype;if(m)for(n in t){if(l=t[n],d=e.noTargetGet?(d=a(m,n))&&d.value:m[n],!c(p?n:f+(h?".":"#")+n,e.forced)&&void 0!==d){if(typeof l==typeof d)continue;u(l,d)}(e.sham||d&&d.sham)&&o(l,"sham",!0),i(m,n,l,e)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],52:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),a=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),u=o("species"),c=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),d=!!/./[e=o("replace")]&&""===/./[e]("a","$0"),f=!a((function(){var e=(t=/(?:)/).exec,t=(t.exec=function(){return e.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]}));t.exports=function(e,t,n,p){var h,m,v=o(e),y=!a((function(){var t={};return t[v]=function(){return 7},7!=""[e](t)})),g=y&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[u]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return t=!0,null},n[v](""),!t}));y&&g&&("replace"!==e||c&&l&&!d)&&("split"!==e||f)||(h=/./[v],n=(g=n(v,""[e],(function(e,t,n,r,a){return t.exec===i?y&&!a?{done:!0,value:h.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}))[0],m=g[1],r(String.prototype,e,n),r(RegExp.prototype,v,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})),p&&s(RegExp.prototype[v],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return Object.isExtensible(Object.preventExtensions({}))}))},{"../internals/fails":51}],54:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":5}],55:[function(e,t,n){"use strict";var r=e("../internals/a-function"),a=e("../internals/is-object"),o=[].slice,i={};t.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),s=function r(){var a=n.concat(o.call(arguments));if(this instanceof r){var s=t,u=a.length,c=a;if(!(u in i)){for(var l=[],d=0;d<u;d++)l[d]="a["+d+"]";i[u]=Function("C,a","return new C("+l.join(",")+")")}return i[u](s,c)}return t.apply(e,a)};return a(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,t,n){function r(e){return"function"==typeof e?e:void 0}var a=e("../internals/path"),o=e("../internals/global");t.exports=function(e,t){return arguments.length<2?r(a[e])||r(o[e]):a[e]&&a[e][t]||o[e]&&o[e][t]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,t,n){var r=e("../internals/classof"),a=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||a[r(e)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/get-iterator-method");t.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,t,n){(function(e){function n(e){return e&&e.Math==Math&&e}t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],61:[function(e,t,n){t.exports={}},{}],62:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":59}],63:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,t,n){var r=Math.abs,a=Math.pow,o=Math.floor,i=Math.log,s=Math.LN2;t.exports={pack:function(e,t,n){var u,c,l,d=new Array(n),f=8*n-t-1,p=(n=(1<<f)-1)>>1,h=23===t?a(2,-24)-a(2,-77):0,m=e<0||0===e&&1/e<0?1:0,v=0;for((e=r(e))!=e||e===1/0?(c=e!=e?1:0,u=n):(u=o(i(e)/s),e*(l=a(2,-u))<1&&(u--,l*=2),2<=(e+=1<=u+p?h/l:h*a(2,1-p))*l&&(u++,l/=2),n<=u+p?(c=0,u=n):1<=u+p?(c=(e*l-1)*a(2,t),u+=p):(c=e*a(2,p-1)*a(2,t),u=0));8<=t;d[v++]=255&c,c/=256,t-=8);for(u=u<<t|c,f+=t;0<f;d[v++]=255&u,u/=256,f-=8);return d[--v]|=128*m,d},unpack:function(e,t){var n,r,o=e.length,i=(1<<(r=8*o-t-1))-1,s=i>>1,u=r-7,c=o-1,l=127&(r=e[c--]);for(r>>=7;0<u;l=256*l+e[c],c--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=t;0<u;n=256*n+e[c],c--,u-=8);if(0===l)l=1-s;else{if(l===i)return n?NaN:r?-1/0:1/0;n+=a(2,t),l-=s}return(r?-1:1)*n*a(2,l-t)}}},{}],66:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/classof-raw"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?o.call(e,""):Object(e)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){return a&&"function"==typeof(t=t.constructor)&&t!==n&&r(t=t.prototype)&&t!==n.prototype&&a(e,t),e}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(e,t,n){e=e("../internals/shared-store");var r=Function.toString;"function"!=typeof e.inspectSource&&(e.inspectSource=function(e){return r.call(e)}),t.exports=e.inspectSource},{"../internals/shared-store":119}],69:[function(e,t,n){function r(e){s(e,l,{value:{objectID:"O"+ ++d,weakData:{}}})}var a=e("../internals/hidden-keys"),o=e("../internals/is-object"),i=e("../internals/has"),s=e("../internals/object-define-property").f,u=e("../internals/uid"),c=e("../internals/freezing"),l=u("meta"),d=0,f=Object.isExtensible||function(){return!0},p=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,l)){if(!f(e))return"F";if(!t)return"E";r(e)}return e[l].objectID},getWeakData:function(e,t){if(!i(e,l)){if(!f(e))return!0;if(!t)return!1;r(e)}return e[l].weakData},onFreeze:function(e){return c&&p.REQUIRED&&f(e)&&!i(e,l)&&r(e),e}};a[l]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(e,t,n){var r,a,o,i,s,u,c,l,d=e("../internals/native-weak-map"),f=e("../internals/global"),p=e("../internals/is-object"),h=e("../internals/create-non-enumerable-property"),m=e("../internals/has"),v=e("../internals/shared-key");e=e("../internals/hidden-keys"),f=f.WeakMap;c=d?(r=new f,a=r.get,o=r.has,i=r.set,s=function(e,t){return i.call(r,e,t),t},u=function(e){return a.call(r,e)||{}},function(e){return o.call(r,e)}):(e[l=v("state")]=!0,s=function(e,t){return h(e,l,t),t},u=function(e){return m(e,l)?e[l]:{}},function(e){return m(e,l)}),t.exports={set:s,get:u,has:c,enforce:function(e){return c(e)?u(e):s(e,{})},getterFor:function(e){return function(t){if(p(t)&&(t=u(t)).type===e)return t;throw TypeError("Incompatible receiver, "+e+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,t,n){var r=e("../internals/well-known-symbol"),a=e("../internals/iterators"),o=r("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(a.Array===e||i[o]===e)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":28}],73:[function(e,t,n){function r(e,t){return(e=s[i(e)])==c||e!=u&&("function"==typeof t?a(t):!!t)}var a=e("../internals/fails"),o=/#|\.prototype\./,i=r.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=r.data={},u=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},{"../internals/fails":51}],74:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],75:[function(e,t,n){t.exports=!1},{}],76:[function(e,t,n){var r=e("../internals/is-object"),a=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,t,n){function r(e,t){this.stopped=e,this.result=t}var a=e("../internals/an-object"),o=e("../internals/is-array-iterator-method"),i=e("../internals/to-length"),s=e("../internals/function-bind-context"),u=e("../internals/get-iterator-method"),c=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,n,l,d){var f,p,h,m,v,y,g=s(t,n,l?2:1);if(d)f=e;else{if("function"!=typeof(t=u(e)))throw TypeError("Target is not iterable");if(o(t)){for(p=0,h=i(e.length);p<h;p++)if((m=l?g(a(y=e[p])[0],y[1]):g(e[p]))&&m instanceof r)return m;return new r(!1)}f=t.call(e)}for(v=f.next;!(y=v.call(f)).done;)if("object"==typeof(m=c(f,g,y.value,l))&&m&&m instanceof r)return m;return new r(!1)}).stop=function(e){return new r(!0,e)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(e,t,n){"use strict";var r,a,o=e("../internals/object-get-prototype-of"),i=e("../internals/create-non-enumerable-property"),s=e("../internals/has"),u=e("../internals/well-known-symbol"),c=(e=e("../internals/is-pure"),u=u("iterator"),!1);[].keys&&("next"in(a=[].keys())?(o=o(o(a)))!==Object.prototype&&(r=o):c=!0),null==r&&(r={}),e||s(r,u)||i(r,u,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:c}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,t,n){t.exports={}},{}],80:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],81:[function(e,t,n){var r,a,o,i,s,u,c,l,d=e("../internals/global"),f=e("../internals/object-get-own-property-descriptor").f,p=e("../internals/classof-raw"),h=e("../internals/task").set,m=(e=e("../internals/engine-is-ios"),d.MutationObserver||d.WebKitMutationObserver),v=d.process,y=d.Promise,g="process"==p(v);p=f(d,"queueMicrotask");(f=p&&p.value)||(r=function(){var e,t;for(g&&(e=v.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(e){throw a?i():o=void 0,e}}o=void 0,e&&e.enter()},i=g?function(){v.nextTick(r)}:m&&!e?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,function(){l.call(c,r)}):function(){h.call(d,r)}),t.exports=f||function(e){e={fn:e,next:void 0},o&&(o.next=e),a||(a=e,i()),o=e}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,t,n){e=e("../internals/global"),t.exports=e.Promise},{"../internals/global":59}],83:[function(e,t,n){e=e("../internals/fails"),t.exports=!!Object.getOwnPropertySymbols&&!e((function(){return!String(Symbol())}))},{"../internals/fails":51}],84:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/well-known-symbol"),o=e("../internals/is-pure"),i=a("iterator");t.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[i]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(e,t,n){var r=e("../internals/global");e=e("../internals/inspect-source"),r=r.WeakMap;t.exports="function"==typeof r&&/native code/.test(e(r))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=a(t),this.reject=a(n)}var a=e("../internals/a-function");t.exports.f=function(e){return new r(e)}},{"../internals/a-function":5}],87:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":76}],88:[function(e,t,n){var r=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},{"../internals/global":59}],89:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),a=e("../internals/fails"),o=e("../internals/object-keys"),i=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),u=e("../internals/to-object"),c=e("../internals/indexed-object"),l=Object.assign,d=Object.defineProperty;t.exports=!l||a((function(){var e,t,n,a;return!(!r||1===l({b:1},l(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},a="abcdefghijklmnopqrst",(e={})[n=Symbol()]=7,a.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||o(l({},t)).join("")!=a)}))?function(e,t){for(var n=u(e),a=arguments.length,l=1,d=i.f,f=s.f;l<a;)for(var p,h=c(arguments[l++]),m=d?o(h).concat(d(h)):o(h),v=m.length,y=0;y<v;)p=m[y++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:l},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(e,t,n){function r(){}var a,o=e("../internals/an-object"),i=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),u=e("../internals/hidden-keys"),c=e("../internals/html"),l=e("../internals/document-create-element"),d=(e=e("../internals/shared-key"),"prototype"),f="script",p=e("IE_PROTO"),h=function(e){return"<"+f+">"+e+"</"+f+">"},m=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch(e){}m=a?((e=a).write(h("")),e.close(),t=e.parentWindow.Object,e=null,t):(e=l("iframe"),t="java"+f+":",e.style.display="none",c.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F);for(var e,t,n=s.length;n--;)delete m[d][s[n]];return m()};u[p]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(r[d]=o(e),n=new r,r[d]=null,n[p]=e):n=m(),void 0===t?n:i(n,t)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-define-property"),o=e("../internals/an-object"),i=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=i(t),s=r.length,u=0;u<s;)a.f(e,n=r[u++],t[n]);return e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),i=e("../internals/to-primitive"),s=Object.defineProperty;n.f=r?s:function(e,t,n){if(o(e),t=i(t,!0),o(n),a)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),i=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),u=e("../internals/has"),c=e("../internals/ie8-dom-define"),l=Object.getOwnPropertyDescriptor;n.f=r?l:function(e,t){if(e=i(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!a.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,t,n){var r=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-names").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){if(!i||"[object Window]"!=o.call(e))return a(r(e));try{return a(e)}catch(e){return i.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,t,n){var r=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],97:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/to-object"),o=e("../internals/shared-key"),i=(e=e("../internals/correct-prototype-getter"),o("IE_PROTO")),s=Object.prototype;t.exports=e?Object.getPrototypeOf:function(e){return e=a(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,t,n){var r=e("../internals/has"),a=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,i=e("../internals/hidden-keys");t.exports=function(e,t){var n,s=a(e),u=0,c=[];for(n in s)!r(i,n)&&r(s,n)&&c.push(n);for(;t.length>u;)!r(s,n=t[u++])||~o(c,n)||c.push(n);return c}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,t,n){var r=e("../internals/object-keys-internal"),a=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,a)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);n.f=o?function(e){return!!(e=a(this,e))&&e.enumerable}:r},{}],101:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,o){return r(n),a(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),a=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,t,n){var r=e("../internals/get-built-in"),a=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),i=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=a.f(i(e)),n=o.f;return n?t.concat(n(e)):t}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,t,n){e=e("../internals/global"),t.exports=e},{"../internals/global":59}],105:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],106:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(e,t){return r(e),a(t)&&t.constructor===e?t:((0,(e=o.f(e)).resolve)(t),e.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},{"../internals/redefine":108}],108:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),i=e("../internals/set-global"),s=e("../internals/inspect-source"),u=(e=e("../internals/internal-state")).get,c=e.enforce,l=String(String).split("String");(t.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable;s=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||a(n,"name",t),c(n).source=l.join("string"==typeof t?t:"")),e===r?d?e[t]=n:i(t,n):(u?!s&&e[t]&&(d=!0):delete e[t],d?e[t]=n:a(e,t,n))})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,t,n){var r=e("./classof-raw"),a=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(e,t,n){"use strict";var r,a,o=e("./regexp-flags"),i=(e=e("./regexp-sticky-helpers"),RegExp.prototype.exec),s=String.prototype.replace,u=i,c=(r=/a/,a=/b*/g,i.call(r,"a"),i.call(a,"a"),0!==r.lastIndex||0!==a.lastIndex),l=e.UNSUPPORTED_Y||e.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];t.exports=u=c||d||l?function(e){var t,n,r,a,u=this,f=l&&u.sticky,p=o.call(u),h=u.source,m=0,v=e;return f&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),v=String(e).slice(u.lastIndex),0<u.lastIndex&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,m++),n=new RegExp("^(?:"+h+")",p)),d&&(n=new RegExp("^"+h+"$(?!\\s)",p)),c&&(t=u.lastIndex),r=i.call(f?n:u,v),f?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:c&&r&&(u.lastIndex=u.global?r.index+r[0].length:t),d&&r&&1<r.length&&s.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r}:u},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":10}],112:[function(e,t,n){"use strict";function r(e,t){return RegExp(e,t)}e=e("./fails"),n.UNSUPPORTED_Y=e((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=e((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":51}],113:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],114:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],115:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/create-non-enumerable-property");t.exports=function(t,n){try{a(r,t,n)}catch(e){r[t]=n}return n}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),a=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),i=e("../internals/descriptors"),s=o("species");t.exports=function(e){e=r(e);var t=a.f;i&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,t,n){var r=e("../internals/object-define-property").f,a=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,t,n){var r=e("../internals/shared"),a=e("../internals/uid"),o=r("keys");t.exports=function(e){return o[e]||(o[e]=a(e))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(e,t,n){var r=e("../internals/global"),a=(e=e("../internals/set-global"),"__core-js_shared__");r=r[a]||e(a,{});t.exports=r},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,t,n){var r=e("../internals/is-pure"),a=e("../internals/shared-store");(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,t,n){var r=e("../internals/an-object"),a=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){return void 0===(e=r(e).constructor)||null==(e=r(e)[o])?t:a(e)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,t,n){var r=e("../internals/fails");t.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}))}},{"../internals/fails":51}],123:[function(e,t,n){function r(e){return function(t,n){t=String(o(t)),n=a(n);var r,i=t.length;return n<0||i<=n?e?"":void 0:(r=t.charCodeAt(n))<55296||56319<r||n+1===i||(i=t.charCodeAt(n+1))<56320||57343<i?e?t.charAt(n):r:e?t.slice(n,n+2):i-56320+(r-55296<<10)+65536}}var a=e("../internals/to-integer"),o=e("../internals/require-object-coercible");t.exports={codeAt:r(!1),charAt:r(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,t,n){"use strict";function r(e){return e+22+75*(e<26)}function a(e){var t,n=[],a=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a,o=e.charCodeAt(n++);55296<=o&&o<=56319&&n<r?56320==(64512&(a=e.charCodeAt(n++)))?t.push(((1023&o)<<10)+(1023&a)+65536):(t.push(o),n--):t.push(o)}return t}(e)).length,l=128,d=0,v=72;for(x=0;x<e.length;x++)(t=e[x])<128&&n.push(m(t));var y=n.length,g=y;for(y&&n.push("-");g<a;){for(var b=o,x=0;x<e.length;x++)l<=(t=e[x])&&t<b&&(b=t);var w=g+1;if(b-l>h((o-d)/w))throw RangeError(f);for(d+=(b-l)*w,l=b,x=0;x<e.length;x++){if((t=e[x])<l&&++d>o)throw RangeError(f);if(t==l){for(var k=d,S=i;;S+=i){var _=S<=v?1:v+s<=S?s:S-v;if(k<_)break;var T=k-_,E=i-_;n.push(m(r(_+T%E))),k=h(T/E)}n.push(m(r(k))),v=function(e,t,n){var r=0;for(e=n?h(e/c):e>>1,e+=h(e/t);p*s>>1<e;r+=i)e=h(e/p);return h(r+(p+1)*e/(e+u))}(d,w,g==y),d=0,++g}}++d,++l}return n.join("")}var o=2147483647,i=36,s=26,u=38,c=700,l=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,f="Overflow: input needs wider integers to process",p=i-1,h=Math.floor,m=String.fromCharCode;t.exports=function(e){for(var t,n=[],r=e.toLowerCase().replace(d,".").split("."),o=0;o<r.length;o++)t=r[o],n.push(l.test(t)?"xn--"+a(t):t);return n.join(".")}},{}],125:[function(e,t,n){"use strict";var r=e("../internals/to-integer"),a=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(a(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,t,n){var r=e("../internals/fails"),a=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!a[e]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[e]()||a[e].name!==e}))}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(e,t,n){function r(e){return function(t){return t=String(a(t)),1&e&&(t=t.replace(o,"")),2&e?t.replace(i,""):t}}var a=e("../internals/require-object-coercible"),o=(e="["+e("../internals/whitespaces")+"]",RegExp("^"+e+e+"*")),i=RegExp(e+e+"*$");t.exports={start:r(1),end:r(2),trim:r(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(e,t,n){function r(e){return function(){k(e)}}function a(e){k(e.data)}function o(e){s.postMessage(e+"",p.protocol+"//"+p.host)}var i,s=e("../internals/global"),u=e("../internals/fails"),c=e("../internals/classof-raw"),l=e("../internals/function-bind-context"),d=e("../internals/html"),f=e("../internals/document-create-element"),p=(e=e("../internals/engine-is-ios"),s.location),h=s.setImmediate,m=s.clearImmediate,v=s.process,y=s.MessageChannel,g=s.Dispatch,b=0,x={},w="onreadystatechange",k=function(e){var t;x.hasOwnProperty(e)&&(t=x[e],delete x[e],t())};h&&m||(h=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return x[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(b),b},m=function(e){delete x[e]},"process"==c(v)?i=function(e){v.nextTick(r(e))}:g&&g.now?i=function(e){g.now(r(e))}:y&&!e?(e=(c=new y).port2,c.port1.onmessage=a,i=l(e.postMessage,e,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||u(o)||"file:"===p.protocol?i=w in f("script")?function(e){d.appendChild(f("script"))[w]=function(){d.removeChild(this),k(e)}}:function(e){setTimeout(r(e),0)}:(i=o,s.addEventListener("message",a,!1))),t.exports={set:h,clear:m}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":28}],130:[function(e,t,n){var r=e("../internals/to-integer"),a=Math.max,o=Math.min;t.exports=function(e,t){return(e=r(e))<0?a(e+t,0):o(e,t)}},{"../internals/to-integer":133}],131:[function(e,t,n){var r=e("../internals/to-integer"),a=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;e=r(e);var t=a(e);if(e!==t)throw RangeError("Wrong length or index");return t}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,t,n){var r=e("../internals/indexed-object"),a=e("../internals/require-object-coercible");t.exports=function(e){return r(a(e))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,t,n){var r=Math.ceil,a=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?a:r)(e)}},{}],134:[function(e,t,n){var r=e("../internals/to-integer"),a=Math.min;t.exports=function(e){return 0<e?a(r(e),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":113}],136:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){if((e=r(e))%t)throw RangeError("Wrong offset");return e}},{"../internals/to-positive-integer":137}],137:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){if((e=r(e))<0)throw RangeError("The argument can't be less than 0");return e}},{"../internals/to-integer":133}],138:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e))||"function"==typeof(n=e.valueOf)&&!r(a=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":146}],140:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,a=new(q(e))(r);n<r;)a[n]=t[n++];return a}function a(e,t){P(e,t,{get:function(){return L(this)[t]}})}function o(e){return e instanceof U||"ArrayBuffer"==(e=S(e))||"SharedArrayBuffer"==e}function i(e,t){return X(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function s(e,t){return i(e,t=w(t,!0))?v(2,e[t]):F(e,t)}function u(e,t,n){return!(i(e,t=w(t,!0))&&_(n)&&k(n,"value"))||k(n,"get")||k(n,"set")||n.configurable||k(n,"writable")&&!n.writable||k(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)}var c=e("../internals/export"),l=e("../internals/global"),d=e("../internals/descriptors"),f=e("../internals/typed-array-constructors-require-wrappers"),p=e("../internals/array-buffer-view-core"),h=e("../internals/array-buffer"),m=e("../internals/an-instance"),v=e("../internals/create-property-descriptor"),y=e("../internals/create-non-enumerable-property"),g=e("../internals/to-length"),b=e("../internals/to-index"),x=e("../internals/to-offset"),w=e("../internals/to-primitive"),k=e("../internals/has"),S=e("../internals/classof"),_=e("../internals/is-object"),T=e("../internals/object-create"),E=e("../internals/object-set-prototype-of"),C=e("../internals/object-get-own-property-names").f,I=e("../internals/typed-array-from"),N=e("../internals/array-iteration").forEach,j=e("../internals/set-species"),R=e("../internals/object-define-property"),A=e("../internals/object-get-own-property-descriptor"),M=e("../internals/internal-state"),O=e("../internals/inherit-if-required"),L=M.get,D=M.set,P=R.f,F=A.f,z=Math.round,B=l.RangeError,U=h.ArrayBuffer,V=h.DataView,G=p.NATIVE_ARRAY_BUFFER_VIEWS,W=p.TYPED_ARRAY_TAG,H=p.TypedArray,Z=p.TypedArrayPrototype,q=p.aTypedArrayConstructor,X=p.isTypedArray,K="BYTES_PER_ELEMENT",Y="Wrong length";d?(G||(A.f=s,R.f=u,a(Z,"buffer"),a(Z,"byteOffset"),a(Z,"byteLength"),a(Z,"length")),c({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:s,defineProperty:u}),t.exports=function(e,t,n){function a(e,t){P(e,t,{get:function(){var e=this,n=t;return(e=L(e)).view[u](n*i+e.byteOffset,!0)},set:function(e){var r=this,a=t;r=L(r),n&&(e=(e=z(e))<0?0:255<e?255:255&e),r.view[d](a*i+r.byteOffset,e,!0)},enumerable:!0})}var i=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=l[s],h=p,v=(e=h&&h.prototype,{});G?f&&(h=t((function(e,t,n,a){return m(e,h,s),O(_(t)?o(t)?void 0!==a?new p(t,x(n,i),a):void 0!==n?new p(t,x(n,i)):new p(t):X(t)?r(h,t):I.call(h,t):new p(b(t)),e,h)})),E&&E(h,H),N(C(p),(function(e){e in h||y(h,e,p[e])})),h.prototype=e):(h=t((function(e,t,n,u){m(e,h,s);var c,l,d=0,f=0;if(_(t)){if(!o(t))return X(t)?r(h,t):I.call(h,t);var p=t;f=x(n,i),n=t.byteLength;if(void 0===u){if(n%i)throw B(Y);if((c=n-f)<0)throw B(Y)}else if(n<(c=g(u)*i)+f)throw B(Y);l=c/i}else l=b(t),p=new U(c=l*i);for(D(e,{buffer:p,byteOffset:f,byteLength:c,length:l,view:new V(p)});d<l;)a(e,d++)})),E&&E(h,H),e=h.prototype=T(Z)),e.constructor!==h&&y(e,"constructor",h),W&&y(e,W,s),v[s]=h,c({global:!0,forced:h!=p,sham:!G},v),K in h||y(h,K,i),K in e||y(e,K,i),j(s)}):t.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/fails"),o=e("../internals/check-correctness-of-iteration"),i=(e=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,r.ArrayBuffer),s=r.Int8Array;t.exports=!e||!a((function(){s(1)}))||!a((function(){new s(-1)}))||!o((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||a((function(){return 1!==new s(new i(2),1,void 0).length}))},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(e,t,n){var r=e("../internals/to-object"),a=e("../internals/to-length"),o=e("../internals/get-iterator-method"),i=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),u=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,n,c,l,d,f,p=r(e),h=arguments.length,m=1<h?arguments[1]:void 0,v=void 0!==m,y=o(p);if(null!=y&&!i(y))for(f=(d=y.call(p)).next,p=[];!(l=f.call(d)).done;)p.push(l.value);for(v&&2<h&&(m=s(m,arguments[2],2)),n=a(p.length),c=new(u(this))(n),t=0;t<n;t++)c[t]=v?m(p[t],t):p[t];return c}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,t,n){var r=0,a=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+a).toString(36)}},{}],144:[function(e,t,n){e=e("../internals/native-symbol"),t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":83}],145:[function(e,t,n){e=e("../internals/well-known-symbol"),n.f=e},{"../internals/well-known-symbol":146}],146:[function(e,t,n){var r=e("../internals/global"),a=e("../internals/shared"),o=e("../internals/has"),i=e("../internals/uid"),s=e("../internals/native-symbol"),u=(e=e("../internals/use-symbol-as-uid"),a("wks")),c=r.Symbol,l=e?c:c&&c.withoutSetter||i;t.exports=function(e){return o(u,e)||(s&&o(c,e)?u[e]=c[e]:u[e]=l("Symbol."+e)),u[e]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,t,n){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],148:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/global"),o=e("../internals/array-buffer"),i=(e=e("../internals/set-species"),"ArrayBuffer");o=o[i];r({global:!0,forced:a[i]!==o},{ArrayBuffer:o}),e(i)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/fails"),o=e("../internals/is-array"),i=e("../internals/is-object"),s=e("../internals/to-object"),u=e("../internals/to-length"),c=e("../internals/create-property"),l=e("../internals/array-species-create"),d=e("../internals/array-method-has-species-support"),f=e("../internals/well-known-symbol"),p=(e=e("../internals/engine-v8-version"),f("isConcatSpreadable")),h=9007199254740991,m="Maximum allowed index exceeded";f=51<=e||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),e=d("concat");r({target:"Array",proto:!0,forced:!f||!e},{concat:function(e){for(var t,n,r,a,d,f=s(this),v=l(f,0),y=0,g=-1,b=arguments.length;g<b;g++)if(d=void 0,i(a=r=-1===g?f:arguments[g])&&(void 0!==(d=a[p])?d:o(a))){if(n=u(r.length),h<y+n)throw TypeError(m);for(t=0;t<n;t++,y++)t in r&&c(v,y,r[t])}else{if(h<=y)throw TypeError(m);c(v,y++,r)}return v.length=y,v}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-copy-within");e=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{copyWithin:a}),e("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").every,o=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),o=o("every"),e=e("every");r({target:"Array",proto:!0,forced:!o||!e},{every:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-fill");e=e("../internals/add-to-unscopables");r({target:"Array",proto:!0},{fill:a}),e("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").filter,o=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),o=o("filter"),e=e("filter");r({target:"Array",proto:!0,forced:!o||!e},{filter:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/array-for-each");r({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:a})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-includes").includes,o=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-includes").indexOf,o=e("../internals/array-method-is-strict"),i=(e=e("../internals/array-method-uses-to-length"),[].indexOf),s=!!i&&1/[1].indexOf(1,-0)<0;o=o("indexOf"),e=e("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:s||!o||!e},{indexOf:function(e){return s?i.apply(this,arguments)||0:a(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),a=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),i=e("../internals/internal-state"),s=(e=e("../internals/define-iterator"),"Array Iterator"),u=i.set,c=i.getterFor(s);t.exports=e(Array,"Array",(function(e,t){u(this,{type:s,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/indexed-object"),o=e("../internals/to-indexed-object"),i=(e=e("../internals/array-method-is-strict"),[].join);a=a!=Object,e=e("join",",");r({target:"Array",proto:!0,forced:a||!e},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(e,t,n){e("../internals/export")({target:"Array",proto:!0,forced:(e=e("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:e})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").map,o=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),o=o("map"),e=e("map");r({target:"Array",proto:!0,forced:!o||!e},{map:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/is-object"),o=e("../internals/is-array"),i=e("../internals/to-absolute-index"),s=e("../internals/to-length"),u=e("../internals/to-indexed-object"),c=e("../internals/create-property"),l=e("../internals/well-known-symbol"),d=e("../internals/array-method-has-species-support"),f=(e=e("../internals/array-method-uses-to-length"),d=d("slice"),e=e("slice",{ACCESSORS:!0,0:0,1:2}),l("species")),p=[].slice,h=Math.max;r({target:"Array",proto:!0,forced:!d||!e},{slice:function(e,t){var n,r,l,d=u(this),m=s(d.length),v=i(e,m),y=i(void 0===t?m:t,m);if(o(d)&&((n="function"==typeof(n=d.constructor)&&(n===Array||o(n.prototype))||a(n)&&null===(n=n[f])?void 0:n)===Array||void 0===n))return p.call(d,v,y);for(r=new(void 0===n?Array:n)(h(y-v,0)),l=0;v<y;v++,l++)v in d&&c(r,l,d[v]);return r.length=l,r}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/array-iteration").some,o=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),o=o("some"),e=e("some");r({target:"Array",proto:!0,forced:!o||!e},{some:function(e){return a(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/to-absolute-index"),o=e("../internals/to-integer"),i=e("../internals/to-length"),s=e("../internals/to-object"),u=e("../internals/array-species-create"),c=e("../internals/create-property"),l=e("../internals/array-method-has-species-support"),d=(e=e("../internals/array-method-uses-to-length"),l=l("splice"),e=e("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),f=Math.min;r({target:"Array",proto:!0,forced:!l||!e},{splice:function(e,t){var n,r,l,p,h,m,v=s(this),y=i(v.length),g=a(e,y);if(0===(e=arguments.length)?n=r=0:r=1===e?(n=0,y-g):(n=e-2,f(d(o(t),0),y-g)),9007199254740991<y+n-r)throw TypeError("Maximum allowed length exceeded");for(l=u(v,r),p=0;p<r;p++)(h=g+p)in v&&c(l,p,v[h]);if(n<(l.length=r)){for(p=g;p<y-r;p++)m=p+n,(h=p+r)in v?v[m]=v[h]:delete v[m];for(p=y;y-r+n<p;p--)delete v[p-1]}else if(r<n)for(p=y-r;g<p;p--)m=p+n-1,(h=p+r-1)in v?v[m]=v[h]:delete v[m];for(p=0;p<n;p++)v[p+g]=arguments[p+2];return v.length=y-r+n,l}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(e,t,n){var r=e("../internals/descriptors"),a=(e=e("../internals/object-define-property").f,Function.prototype),o=a.toString,i=/^\s*function ([^ (]*)/;!r||"name"in a||e(a,"name",{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong");t.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(e,t,n){e=e("../internals/export");var r=Math.hypot,a=Math.abs,o=Math.sqrt;e({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,u=arguments.length,c=0;s<u;)c<(n=a(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=0<n?(r=n/c)*r:n;return c===1/0?1/0:c*o(i)}})},{"../internals/export":50}],168:[function(e,t,n){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(e,t,n){"use strict";function r(e){var t,n,r,a,o,i,s,u=d(e,!1);if("string"==typeof u&&2<u.length)if(43===(e=(u=y(u)).charCodeAt(0))||45===e){if(88===(t=u.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(o=(a=u.slice(2)).length,i=0;i<o;i++)if((s=a.charCodeAt(i))<48||r<s)return NaN;return parseInt(a,n)}return+u}var a=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/is-forced"),s=e("../internals/redefine"),u=e("../internals/has"),c=e("../internals/classof-raw"),l=e("../internals/inherit-if-required"),d=e("../internals/to-primitive"),f=e("../internals/fails"),p=e("../internals/object-create"),h=e("../internals/object-get-own-property-names").f,m=e("../internals/object-get-own-property-descriptor").f,v=e("../internals/object-define-property").f,y=e("../internals/string-trim").trim,g="Number",b=o[g],x=b.prototype,w=c(p(x))==g;if(i(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var k,S=function e(t){t=arguments.length<1?0:t;var n=this;return n instanceof e&&(w?f((function(){x.valueOf.call(n)})):c(n)!=g)?l(new b(r(t)),n,e):r(t)},_=a?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;_.length>T;T++)u(b,k=_[T])&&!u(S,k)&&v(S,k,m(b,k));(S.prototype=x).constructor=S,s(o,g,S)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(e,t,n){"use strict";function r(e,t,n){return 0===t?n:t%2==1?r(e,t-1,n*e):r(e*e,t/2,n)}var a=e("../internals/export"),o=e("../internals/to-integer"),i=e("../internals/this-number-value"),s=e("../internals/string-repeat"),u=(e=e("../internals/fails"),1..toFixed),c=Math.floor;a({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e((function(){u.call({})}))},{toFixed:function(e){function t(e,t){for(var n=-1,r=t;++n<6;)r+=e*f[n],f[n]=r%1e7,r=c(r/1e7)}function n(e){for(var t=6,n=0;0<=--t;)n+=f[t],f[t]=c(n/e),n=n%e*1e7}function a(){for(var e,t=6,n="";0<=--t;)""===n&&0!==t&&0===f[t]||(e=String(f[t]),n=""===n?e:n+s.call("0",7-e.length)+e);return n}var u,l,d=i(this),f=(e=o(e),[0,0,0,0,0,0]),p="",h="0";if(e<0||20<e)throw RangeError("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||1e21<=d)return String(d);if(d<0&&(p="-",d=-d),1e-21<d)if(d=(u=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(d*r(2,69,1))-69)<0?d*r(2,-u,1):d/r(2,u,1),d*=4503599627370496,0<(u=52-u)){for(t(0,d),l=e;7<=l;)t(1e7,0),l-=7;for(t(r(10,l,1),0),l=u-1;23<=l;)n(1<<23),l-=23;n(1<<l),t(1,1),n(2),h=a()}else t(0,d),t(1<<-u,0),h=a()+s.call("0",e);return 0<e?p+((d=h.length)<=e?"0."+s.call("0",e-d)+h:h.slice(0,d-e)+"."+h.slice(d-e)):p+h}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(e,t,n){var r=e("../internals/export");e=e("../internals/object-assign");r({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/fails"),o=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-descriptor").f;e=e("../internals/descriptors"),a=a((function(){i(1)}));r({target:"Object",stat:!0,forced:!e||a,sham:!e},{getOwnPropertyDescriptor:function(e,t){return i(o(e),t)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/fails");e=e("../internals/object-get-own-property-names-external").f;r({target:"Object",stat:!0,forced:a((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:e})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/fails"),o=e("../internals/to-object"),i=e("../internals/object-get-prototype-of");e=e("../internals/correct-prototype-getter");r({target:"Object",stat:!0,forced:a((function(){i(1)})),sham:!e},{getPrototypeOf:function(e){return i(o(e))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/to-object"),o=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(e){return o(a(e))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(e,t,n){var r=e("../internals/to-string-tag-support"),a=e("../internals/redefine");e=e("../internals/object-to-string");r||a(Object.prototype,"toString",e,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(e,t,n){"use strict";var r,a,o,i,s=e("../internals/export"),u=e("../internals/is-pure"),c=e("../internals/global"),l=e("../internals/get-built-in"),d=e("../internals/native-promise-constructor"),f=e("../internals/redefine"),p=e("../internals/redefine-all"),h=e("../internals/set-to-string-tag"),m=e("../internals/set-species"),v=e("../internals/is-object"),y=e("../internals/a-function"),g=e("../internals/an-instance"),b=e("../internals/classof-raw"),x=e("../internals/inspect-source"),w=e("../internals/iterate"),k=e("../internals/check-correctness-of-iteration"),S=e("../internals/species-constructor"),_=e("../internals/task").set,T=e("../internals/microtask"),E=e("../internals/promise-resolve"),C=e("../internals/host-report-errors"),I=e("../internals/new-promise-capability"),N=e("../internals/perform"),j=e("../internals/internal-state"),R=e("../internals/is-forced"),A=e("../internals/well-known-symbol"),M=e("../internals/engine-v8-version"),O=A("species"),L="Promise",D=j.get,P=j.set,F=j.getterFor(L),z=d,B=c.TypeError,U=c.document,V=c.process,G=l("fetch"),W=I.f,H=W,Z="process"==b(V),q=!!(U&&U.createEvent&&c.dispatchEvent),X="unhandledrejection",K=(e=R(L,(function(){var e,t;if(x(z)===String(z)){if(66===M)return!0;if(!Z&&"function"!=typeof PromiseRejectionEvent)return!0}return!(!u||z.prototype.finally)||!(51<=M&&/native code/.test(z))&&(t=function(e){e((function(){}),(function(){}))},((e=z.resolve(1)).constructor={})[O]=t,!(e.then((function(){}))instanceof t))})),A=e||!k((function(e){z.all(e).catch((function(){}))})),function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t}),Y=function(e,t,n){var r;t.notified||(t.notified=!0,r=t.reactions,T((function(){for(var a,o,i=t.value,s=1==t.state,u=0;r.length>u;){var l,d,f,p=r[u++],h=s?p.ok:p.fail,m=p.resolve,v=p.reject,y=p.domain;try{h?(s||(2===t.rejection&&function(e,t){_.call(c,(function(){Z?V.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))}(e,t),t.rejection=1),!0===h?l=i:(y&&y.enter(),l=h(i),y&&(y.exit(),f=!0)),l===p.promise?v(B("Promise-chain cycle")):(d=K(l))?d.call(l,m,v):m(l)):v(i)}catch(i){y&&!f&&y.exit(),v(i)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&(a=e,o=t,_.call(c,(function(){var e=o.value,t=J(o);if(t&&(t=N((function(){Z?V.emit("unhandledRejection",e,a):Q(X,a,e)})),o.rejection=Z||J(o)?2:1,t.error))throw t.value})))})))},Q=function(e,t,n){var r;q?((r=U.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},(t=c["on"+e])?t(r):e===X&&C("Unhandled promise rejection",n)},J=function(e){return 1!==e.rejection&&!e.parent},$=function(e,t,n,r){return function(a){e(t,n,a,r)}},ee=function(e,t,n,r){t.done||(t.done=!0,(t=r||t).value=n,t.state=2,Y(e,t,!0))},te=function e(t,n,r,a){if(!n.done){n.done=!0,a&&(n=a);try{if(t===r)throw B("Promise can't be resolved itself");var o=K(r);o?T((function(){var a={done:!1};try{o.call(r,$(e,t,a,n),$(ee,t,a,n))}catch(r){ee(t,a,r,n)}})):(n.value=r,n.state=1,Y(t,n,!1))}catch(r){ee(t,{done:!1},r,n)}}};e&&(z=function(e){g(this,z,L),y(e),r.call(this);var t=D(this);try{e($(te,this,t),$(ee,this,t))}catch(e){ee(this,t,e)}},(r=function(e){P(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(z.prototype,{then:function(e,t){var n=F(this),r=W(S(this,z));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Z?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r,t=D(e);this.promise=e,this.resolve=$(te,e,t),this.reject=$(ee,e,t)},I.f=W=function(e){return e===z||e===o?new a:H(e)},u||"function"!=typeof d||(i=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new z((function(e,t){i.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(z,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:e},{Promise:z}),h(z,L,!1,!0),m(L),o=l(L),s({target:L,stat:!0,forced:e},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),s({target:L,stat:!0,forced:u||e},{resolve:function(e){return E(u&&this===o?z:this,e)}}),s({target:L,stat:!0,forced:A},{all:function(e){var t=this,n=W(t),r=n.resolve,a=n.reject,o=N((function(){var n=y(t.resolve),o=[],i=0,s=1;w(e,(function(e){var u=i++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=W(t),r=n.reject,a=N((function(){var a=y(t.resolve);w(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(e,t,n){var r=e("../internals/export"),a=e("../internals/get-built-in"),o=e("../internals/a-function"),i=e("../internals/an-object"),s=e("../internals/is-object"),u=e("../internals/object-create"),c=e("../internals/function-bind"),l=(e=e("../internals/fails"),a("Reflect","construct")),d=e((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),f=!e((function(){l((function(){}))}));r({target:"Reflect",stat:!0,forced:a=d||f,sham:a},{construct:function(e,t){o(e),i(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}return r=n.prototype,n=u(s(r)?r:Object.prototype),r=Function.apply.call(e,n,t),s(r)?r:n}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,t,n){var r=e("../internals/descriptors"),a=e("../internals/global"),o=e("../internals/is-forced"),i=e("../internals/inherit-if-required"),s=e("../internals/object-define-property").f,u=e("../internals/object-get-own-property-names").f,c=e("../internals/is-regexp"),l=e("../internals/regexp-flags"),d=e("../internals/regexp-sticky-helpers"),f=e("../internals/redefine"),p=e("../internals/fails"),h=e("../internals/internal-state").set,m=e("../internals/set-species"),v=e("../internals/well-known-symbol")("match"),y=a.RegExp,g=y.prototype,b=/a/g,x=/a/g,w=new y(b)!==b,k=d.UNSUPPORTED_Y;if(r&&o("RegExp",!w||k||p((function(){return x[v]=!1,y(b)!=b||y(x)==x||"/a/i"!=y(b,"i")})))){for(var S=function e(t,n){var r,a=this instanceof e,o=c(t),s=void 0===n;return!a&&o&&t.constructor===e&&s?t:(w?o&&!s&&(t=t.source):t instanceof e&&(s&&(n=l.call(t)),t=t.source),k&&(r=!!n&&-1<n.indexOf("y"))&&(n=n.replace(/y/g,"")),o=i(w?new y(t,n):y(t,n),a?this:g,e),k&&r&&h(o,{sticky:r}),o)},_=u(y),T=0;_.length>T;)!function(e){e in S||s(S,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})}(_[T++]);(g.constructor=S).prototype=g,f(a,"RegExp",S)}m("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/regexp-exec");r({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(e,t,n){"use strict";var r=e("../internals/redefine"),a=e("../internals/an-object"),o=e("../internals/fails"),i=e("../internals/regexp-flags"),s=(e="toString",RegExp.prototype),u=s[e],c=(o=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),u.name!=e);(o||c)&&r(RegExp.prototype,e,(function(){var e=a(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?i.call(e):n)}),{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong");t.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/to-length"),i=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible"),u=e("../internals/correct-is-regexp-logic"),c=(e=e("../internals/is-pure"),"".endsWith),l=Math.min;u=u("endsWith");r({target:"String",proto:!0,forced:!(!e&&!u&&(r=a(String.prototype,"endsWith"))&&!r.writable)&&!u},{endsWith:function(e){var t=String(s(this)),n=(i(e),1<arguments.length?arguments[1]:void 0),r=o(t.length);n=void 0===n?r:l(o(n),r),r=String(e);return c?c.call(t,r,n):t.slice(n-r.length,n)===r}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/not-a-regexp"),o=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(o(this)).indexOf(a(e),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,a=e("../internals/internal-state"),o=(e=e("../internals/define-iterator"),"String Iterator"),i=a.set,s=a.getterFor(o);e(String,"String",(function(e){i(this,{type:o,string:String(e),index:0})}),(function(){var e=s(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=r(t,n),e.index+=t.length,{value:t,done:!1})}))},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),o=e("../internals/to-length"),i=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),u=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=i(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=a(e),c=String(this);if(!i.global)return u(i,c);for(var l=i.unicode,d=[],f=i.lastIndex=0;null!==(p=u(i,c));){var p=String(p[0]);""===(d[f]=p)&&(i.lastIndex=s(c,o(i.lastIndex),l)),f++}return 0===f?null:d}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,t,n){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),o=e("../internals/to-object"),i=e("../internals/to-length"),s=e("../internals/to-integer"),u=e("../internals/require-object-coercible"),c=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract"),d=Math.max,f=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,g=v?"$":"$0";return[function(n,r){var a=u(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!v&&y||"string"==typeof r&&-1===r.indexOf(g)){var u=n(t,e,this,r);if(u.done)return u.value}for(var b,x=a(e),w=String(this),k="function"==typeof r,S=(k||(r=String(r)),x.global),_=(S&&(b=x.unicode,x.lastIndex=0),[]);null!==(N=l(x,w))&&(_.push(N),S);)""===String(N[0])&&(x.lastIndex=c(w,i(x.lastIndex),b));for(var T,E="",C=0,I=0;I<_.length;I++){for(var N=_[I],j=String(N[0]),R=d(f(s(N.index),w.length),0),A=[],M=1;M<N.length;M++)A.push(void 0===(T=N[M])?T:String(T));var O=N.groups,L=k?(L=[j].concat(A,R,w),void 0!==O&&L.push(O),String(r.apply(void 0,L))):function(e,n,r,a,i,s){var u=r+e.length,c=a.length,l=m;return void 0!==i&&(i=o(i),l=h),t.call(s,l,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=i[o.slice(1,-1)];break;default:var l,d=+o;if(0==d)return t;if(c<d)return 0!==(l=p(d/10))&&l<=c?void 0===a[l-1]?o.charAt(1):a[l-1]+o.charAt(1):t;s=a[d-1]}return void 0===s?"":s}))}(j,w,R,A,O,r);C<=R&&(E+=w.slice(C,R)+L,C=R+j.length)}return E+w.slice(C)}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/an-object"),o=e("../internals/require-object-coercible"),i=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r,o=n(t,e,this);return o.done?o.value:(o=a(e),e=String(this),r=o.lastIndex,i(r,0)||(o.lastIndex=0),e=s(o,e),i(o.lastIndex,r)||(o.lastIndex=r),null===e?-1:e.index)}]}))},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),a=e("../internals/is-regexp"),o=e("../internals/an-object"),i=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),u=e("../internals/advance-string-index"),c=e("../internals/to-length"),l=e("../internals/regexp-exec-abstract"),d=e("../internals/regexp-exec"),f=(e=e("../internals/fails"),[].push),p=Math.min,h=4294967295,m=!e((function(){return!RegExp(h,"y")}));r("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(i(this)),o=void 0===n?h:n>>>0;if(0==o)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,o);for(var s,u,c,l=[],p=(n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),0),m=new RegExp(e.source,n+"g");(s=d.call(m,r))&&!(p<(u=m.lastIndex)&&(l.push(r.slice(p,s.index)),1<s.length&&s.index<r.length&&f.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var a=i(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,a,n):r.call(String(a),t,n)},function(e,a){if((i=n(r,e,this,a,r!==t)).done)return i.value;var i=o(e),d=String(this),f=(e=s(i,RegExp),i.unicode),v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(m?"y":"g"),y=new e(m?i:"^(?:"+i.source+")",v),g=void 0===a?h:a>>>0;if(0==g)return[];if(0===d.length)return null===l(y,d)?[d]:[];for(var b=0,x=0,w=[];x<d.length;){y.lastIndex=m?x:0;var k,S=l(y,m?d:d.slice(x));if(null===S||(k=p(c(y.lastIndex+(m?0:x)),d.length))===b)x=u(d,x,f);else{if(w.push(d.slice(b,x)),w.length===g)return w;for(var _=1;_<=S.length-1;_++)if(w.push(S[_]),w.length===g)return w;x=b=k}}return w.push(d.slice(b)),w}]}),!m)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return a(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(e,t,n){"use strict";var r=e("../internals/export"),a=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return a(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(e,t,n){"use strict";var r,a,o,i,s,u=e("../internals/export"),c=e("../internals/descriptors"),l=e("../internals/global"),d=e("../internals/has"),f=e("../internals/is-object"),p=e("../internals/object-define-property").f,h=(e=e("../internals/copy-constructor-properties"),l.Symbol);!c||"function"!=typeof h||"description"in h.prototype&&void 0===h().description||(r={},e(a=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof a?new h(e):void 0===e?h():h(e);return""===e&&(r[t]=!0),t},h),(l=a.prototype=h.prototype).constructor=a,o=l.toString,i="Symbol(test)"==String(h("test")),s=/^Symbol\((.*)\)[^)]+$/,p(l,"description",{configurable:!0,get:function(){var e=f(this)?this.valueOf():this,t=o.call(e);return d(r,e)?"":""===(e=i?t.slice(7,-1):t.replace(s,"$1"))?void 0:e}}),u({global:!0,forced:!0},{Symbol:a}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,t,n){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(e,t,n){"use strict";function r(e,t){var n=te[e]=S(K[H]);return Z(n,{type:W,tag:e,description:t}),d||(n.description=t),n}function a(e,t){g(e);var n=x(t);t=_(n).concat(le(n));return V(t,(function(t){d&&!ce.call(n,t)||ue(e,t,n[t])})),e}function o(e,t){var n;e=x(e),t=w(t,!0);if(e!==X||!m(te,t)||m(ne,t))return!(n=Q(e,t))||!m(te,t)||m(e,G)&&e[G][t]||(n.enumerable=!0),n}function i(e){e=$(x(e));var t=[];return V(e,(function(e){m(te,e)||m(L,e)||t.push(e)})),t}var s=e("../internals/export"),u=e("../internals/global"),c=e("../internals/get-built-in"),l=e("../internals/is-pure"),d=e("../internals/descriptors"),f=e("../internals/native-symbol"),p=e("../internals/use-symbol-as-uid"),h=e("../internals/fails"),m=e("../internals/has"),v=e("../internals/is-array"),y=e("../internals/is-object"),g=e("../internals/an-object"),b=e("../internals/to-object"),x=e("../internals/to-indexed-object"),w=e("../internals/to-primitive"),k=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),_=e("../internals/object-keys"),T=e("../internals/object-get-own-property-names"),E=e("../internals/object-get-own-property-names-external"),C=e("../internals/object-get-own-property-symbols"),I=e("../internals/object-get-own-property-descriptor"),N=e("../internals/object-define-property"),j=e("../internals/object-property-is-enumerable"),R=e("../internals/create-non-enumerable-property"),A=e("../internals/redefine"),M=e("../internals/shared"),O=e("../internals/shared-key"),L=e("../internals/hidden-keys"),D=e("../internals/uid"),P=e("../internals/well-known-symbol"),F=e("../internals/well-known-symbol-wrapped"),z=e("../internals/define-well-known-symbol"),B=e("../internals/set-to-string-tag"),U=e("../internals/internal-state"),V=e("../internals/array-iteration").forEach,G=O("hidden"),W="Symbol",H="prototype",Z=(e=P("toPrimitive"),U.set),q=U.getterFor(W),X=Object[H],K=u.Symbol,Y=c("JSON","stringify"),Q=I.f,J=N.f,$=E.f,ee=j.f,te=M("symbols"),ne=M("op-symbols"),re=M("string-to-symbol-registry"),ae=M("symbol-to-string-registry"),oe=(O=M("wks"),!(U=u.QObject)||!U[H]||!U[H].findChild),ie=d&&h((function(){return 7!=S(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Q(X,t);r&&delete X[t],J(e,t,n),r&&e!==X&&J(X,t,r)}:J,se=p?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof K},ue=function e(t,n,r){return t===X&&e(ne,n,r),g(t),n=w(n,!0),g(r),(m(te,n)?(r.enumerable?(m(t,G)&&t[G][n]&&(t[G][n]=!1),r=S(r,{enumerable:k(0,!1)})):(m(t,G)||J(t,G,k(1,{})),t[G][n]=!0),ie):J)(t,n,r)},ce=function(e){e=w(e,!0);var t=ee.call(this,e);return!(this===X&&m(te,e)&&!m(ne,e))&&(!(t||!m(this,e)||!m(te,e)||m(this,G)&&this[G][e])||t)},le=function(e){var t=e===X,n=(e=$(t?ne:x(e)),[]);return V(e,(function(e){!m(te,e)||t&&!m(X,e)||n.push(te[e])})),n};f||(A((K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=D(e);return d&&oe&&ie(X,t,{configurable:!0,set:function e(n){this===X&&e.call(ne,n),m(this,G)&&m(this[G],t)&&(this[G][t]=!1),ie(this,t,k(1,n))}}),r(t,e)})[H],"toString",(function(){return q(this).tag})),A(K,"withoutSetter",(function(e){return r(D(e),e)})),j.f=ce,N.f=ue,I.f=o,T.f=E.f=i,C.f=le,F.f=function(e){return r(P(e),e)},d&&(J(K[H],"description",{configurable:!0,get:function(){return q(this).description}}),l||A(X,"propertyIsEnumerable",ce,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:K}),V(_(O),(function(e){z(e)})),s({target:W,stat:!0,forced:!f},{for:function(e){var t;e=String(e);return m(re,e)?re[e]:(t=K(e),re[e]=t,ae[t]=e,t)},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(m(ae,e))return ae[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),s({target:"Object",stat:!0,forced:!f,sham:!d},{create:function(e,t){return void 0===t?S(e):a(S(e),t)},defineProperty:ue,defineProperties:a,getOwnPropertyDescriptor:o}),s({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:i,getOwnPropertySymbols:le}),s({target:"Object",stat:!0,forced:h((function(){C.f(1)}))},{getOwnPropertySymbols:function(e){return C.f(b(e))}}),Y&&s({target:"JSON",stat:!0,forced:!f||h((function(){var e=K();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,a=[e],o=1;o<arguments.length;)a.push(arguments[o++]);if((y(r=t)||void 0!==e)&&!se(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),a[1]=t,Y.apply(null,a)}}),K[H][e]||R(K[H],e,K[H].valueOf),B(K,W),L[G]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-copy-within"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return a.call(o(this),e,t,2<arguments.length?arguments[2]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-fill"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return a.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").filter,o=e("../internals/species-constructor"),i=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=a(i(this),e,1<arguments.length?arguments[1]:void 0),n=(e=o(this,this.constructor),0),r=t.length,u=new(s(e))(r);n<r;)u[n]=t[n++];return u}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,t,n){e("../internals/typed-array-constructor")("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],204:[function(e,t,n){e("../internals/typed-array-constructor")("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],205:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-includes").indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,t,n){e("../internals/typed-array-constructor")("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],209:[function(e,t,n){e("../internals/typed-array-constructor")("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],210:[function(e,t,n){"use strict";function r(){return s.call(l(this))}var a=e("../internals/global"),o=e("../internals/array-buffer-view-core"),i=e("../modules/es.array.iterator"),s=(e=e("../internals/well-known-symbol")("iterator"),a=a.Uint8Array,i.values),u=i.keys,c=i.entries,l=o.aTypedArray;i=o.exportTypedArrayMethod,a=!!(o=a&&a.prototype[e])&&("values"==o.name||null==o.name);i("entries",(function(){return c.call(l(this))})),i("keys",(function(){return u.call(l(this))})),i("values",r,!a),i(e,r,!a)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,a=(e=e.exportTypedArrayMethod,[].join);e("join",(function(e){return a.apply(r(this),arguments)}))},{"../internals/array-buffer-view-core":12}],212:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-last-index-of"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return a.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").map,o=e("../internals/species-constructor"),i=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return a(i(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return a(o(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-reduce").left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return a(o(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,a=(e=e.exportTypedArrayMethod,Math.floor);e("reverse",(function(){for(var e,t=r(this).length,n=a(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this}))},{"../internals/array-buffer-view-core":12}],217:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/to-length"),o=e("../internals/to-offset"),i=e("../internals/to-object"),s=(e=e("../internals/fails"),r.aTypedArray);(0,r.exportTypedArrayMethod)("set",(function(e){s(this);var t=o(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=i(e),u=a(r.length),c=0;if(n<u+t)throw RangeError("Wrong length");for(;c<u;)this[t+c]=r[c++]}),e((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/species-constructor"),o=(e=e("../internals/fails"),r.aTypedArray),i=r.aTypedArrayConstructor,s=(r=r.exportTypedArrayMethod,[].slice);r("slice",(function(e,t){for(var n=s.call(o(this),e,t),r=(e=a(this,this.constructor),0),u=n.length,c=new(i(e))(u);r<u;)c[r]=n[r++];return c}),e((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/array-iteration").some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return a(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,a=(e=e.exportTypedArrayMethod,[].sort);e("sort",(function(e){return a.call(r(this),e)}))},{"../internals/array-buffer-view-core":12}],221:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),a=e("../internals/to-length"),o=e("../internals/to-absolute-index"),i=e("../internals/species-constructor"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length;e=o(e,r);return new(i(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,a((void 0===t?r:o(t,r))-e))}))},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(e,t,n){"use strict";var r=e("../internals/global"),a=e("../internals/array-buffer-view-core"),o=(e=e("../internals/fails"),r.Int8Array),i=a.aTypedArray,s=(r=a.exportTypedArrayMethod,[].toLocaleString),u=[].slice,c=!!o&&e((function(){s.call(new o(1))}));r("toLocaleString",(function(){return s.apply(c?u.call(i(this)):i(this),arguments)}),e((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!e((function(){o.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,a=e("../internals/fails"),o=(e=(e=e("../internals/global").Uint8Array)&&e.prototype||{},[].toString),i=[].join;a((function(){o.call({})}))&&(o=function(){return i.call(this)}),a=e.toString!=o;r("toString",o,a)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(e,t,n){e("../internals/typed-array-constructor")("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],225:[function(e,t,n){e("../internals/typed-array-constructor")("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],226:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":140}],227:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{"../internals/typed-array-constructor":140}],228:[function(e,t,n){"use strict";function r(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}var a,o,i,s,u,c=e("../internals/global"),l=e("../internals/redefine-all"),d=e("../internals/internal-metadata"),f=e("../internals/collection"),p=e("../internals/collection-weak"),h=e("../internals/is-object"),m=e("../internals/internal-state").enforce,v=(e=e("../internals/native-weak-map"),c=!c.ActiveXObject&&"ActiveXObject"in c,Object.isExtensible);t=t.exports=f("WeakMap",r,p);e&&c&&(a=p.getConstructor(r,"WeakMap",!0),d.REQUIRED=!0,f=t.prototype,o=f.delete,i=f.has,s=f.get,u=f.set,l(f,{delete:function(e){var t;return h(e)&&!v(e)?((t=m(this)).frozen||(t.frozen=new a),o.call(this,e)||t.frozen.delete(e)):o.call(this,e)},has:function(e){var t;return h(e)&&!v(e)?((t=m(this)).frozen||(t.frozen=new a),i.call(this,e)||t.frozen.has(e)):i.call(this,e)},get:function(e){var t;return!h(e)||v(e)||((t=m(this)).frozen||(t.frozen=new a),i.call(this,e))?s.call(this,e):t.frozen.get(e)},set:function(e,t){var n;return!h(e)||v(e)||((n=m(this)).frozen||(n.frozen=new a),i.call(this,e))?u.call(this,e,t):n.frozen.set(e,t),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(e,t,n){var r,a=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../internals/array-for-each"),s=e("../internals/create-non-enumerable-property");for(r in o){var u;if((u=(u=a[r])&&u.prototype)&&u.forEach!==i)try{s(u,"forEach",i)}catch(e){u.forEach=i}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(e,t,n){var r,a=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../modules/es.array.iterator"),s=e("../internals/create-non-enumerable-property"),u=(e=e("../internals/well-known-symbol"))("iterator"),c=e("toStringTag"),l=i.values;for(r in o){var d=a[r],f=d&&d.prototype;if(f){if(f[u]!==l)try{s(f,u,l)}catch(e){f[u]=l}if(f[c]||s(f,c,r),o[r])for(var p in i)if(f[p]!==i[p])try{s(f,p,i[p])}catch(e){f[p]=i[p]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(e,t,n){"use strict";function r(t){try{return decodeURIComponent(t)}catch(e){return t}}function a(e){return F[e]}function o(e){return encodeURIComponent(e).replace(P,a)}function i(e){this.entries.length=0,z(this.entries,e)}function s(e,t){if(e<t)throw TypeError("Not enough arguments")}function u(){y(this,u,N);var e,t,n,r,a,o,s,c,l=0<arguments.length?arguments[0]:void 0,d=[];if(R(this,{type:N,entries:d,updateURL:function(){},updateSearchParams:i}),void 0!==l)if(k(l))if("function"==typeof(e=E(l)))for(n=(t=e.call(l)).next;!(r=n.call(t)).done;){if((o=(a=(r=T(w(r.value))).next).call(r)).done||(s=a.call(r)).done||!a.call(r).done)throw TypeError("Expected sequence with length 2");d.push({key:o.value+"",value:s.value+""})}else for(c in l)g(l,c)&&d.push({key:c,value:l[c]+""});else z(d,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")}e("../modules/es.array.iterator");var c=e("../internals/export"),l=e("../internals/get-built-in"),d=e("../internals/native-url"),f=e("../internals/redefine"),p=e("../internals/redefine-all"),h=e("../internals/set-to-string-tag"),m=e("../internals/create-iterator-constructor"),v=e("../internals/internal-state"),y=e("../internals/an-instance"),g=e("../internals/has"),b=e("../internals/function-bind-context"),x=e("../internals/classof"),w=e("../internals/an-object"),k=e("../internals/is-object"),S=e("../internals/object-create"),_=e("../internals/create-property-descriptor"),T=e("../internals/get-iterator"),E=e("../internals/get-iterator-method"),C=(e=e("../internals/well-known-symbol"),l("fetch")),I=l("Headers"),N=(l=e("iterator"),"URLSearchParams"),j=N+"Iterator",R=v.set,A=v.getterFor(N),M=v.getterFor(j),O=/\+/g,L=Array(4),D=function(e){var t,n=e.replace(O," "),a=4;try{return decodeURIComponent(n)}catch(e){for(;a;)n=n.replace((t=a--,L[t-1]||(L[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),r);return n}},P=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},z=function(e,t){if(t)for(var n,r=t.split("&"),a=0;a<r.length;)(n=r[a++]).length&&(n=n.split("="),e.push({key:D(n.shift()),value:D(n.join("="))}))},B=m((function(e,t){R(this,{type:j,iterator:T(A(e).entries),kind:t})}),"Iterator",(function(){var e,t=(e=M(this)).kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e}));p(e=u.prototype,{append:function(e,t){s(arguments.length,2);var n=A(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){s(arguments.length,1);for(var t=A(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){s(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){s(arguments.length,1);for(var t=A(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){s(arguments.length,1);for(var t=A(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){s(arguments.length,1);for(var n,r=A(this),a=r.entries,o=!1,i=e+"",u=t+"",c=0;c<a.length;c++)(n=a[c]).key===i&&(o?a.splice(c--,1):(o=!0,n.value=u));o||a.push({key:i,value:u}),r.updateURL()},sort:function(){for(var e,t,n=A(this),r=n.entries,a=r.slice(),o=r.length=0;o<a.length;o++){for(e=a[o],t=0;t<o;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===o&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,n=A(this).entries,r=b(e,1<arguments.length?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),f(e,l,e.entries),f(e,"toString",(function(){for(var e,t=A(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(o(e.key)+"="+o(e.value));return n.join("&")}),{enumerable:!0}),h(u,N),c({global:!0,forced:!d},{URLSearchParams:u}),d||"function"!=typeof C||"function"!=typeof I||c({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r;e=[e];return 1<arguments.length&&(k(t=arguments[1])&&(n=t.body,x(n)===N&&((r=t.headers?new I(t.headers):new I).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=S(t,{body:_(0,String(n)),headers:_(0,r)}))),e.push(t)),C.apply(this,e)}}),t.exports={URLSearchParams:u,getState:A}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(e,t,n){"use strict";function r(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=j(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",r=X(e),n=0;n<8;n++)a&&0===e[n]||(a=a&&!1,r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function a(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function o(e,t,n,r){var a,o,i,s=n||ue,c=0,l="",d=!1,f=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(H,"")),t=t.replace(Z,""),a=x(t);c<=a.length;){switch(o=a[c],s){case ue:if(!o||!D.test(o)){if(n)return M;s=le;continue}l+=o.toLowerCase(),s=ce;break;case ce:if(o&&(P.test(o)||"+"==o||"-"==o||"."==o))l+=o.toLowerCase();else{if(":"!=o){if(n)return M;l="",s=le,c=0;continue}if(n&&(te(e)!=g(ee,l)||"file"==l&&(ne(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,n)return void(te(e)&&ee[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?s=we:te(e)&&r&&r.scheme==e.scheme?s=de:te(e)?s=me:"/"==a[c+1]?(s=fe,c++):(e.cannotBeABaseURL=!0,e.path.push(""),s=Ee)}break;case le:if(!r||r.cannotBeABaseURL&&"#"!=o)return M;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,s=Ie;break}s="file"==r.scheme?we:pe;continue;case de:if("/"!=o||"/"!=a[c+1]){s=pe;continue}s=ve,c++;break;case fe:if("/"==o){s=ye;break}s=Te;continue;case pe:if(e.scheme=r.scheme,o==u)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&te(e))s=he;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",s=Ce;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),s=Te;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=Ie}break;case he:if(!te(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,s=Te;continue}s=ye}else s=ve;break;case me:if(s=ve,"/"!=o||"/"!=l.charAt(c+1))continue;c++;break;case ve:if("/"==o||"\\"==o)break;s=ye;continue;case ye:if("@"==o){d&&(l="%40"+l);d=!0;for(var h=x(l),m=0;m<h.length;m++){var v=h[m];":"!=v||p?(v=$(v,J),p?e.password+=v:e.username+=v):p=!0}l=""}else if(o==u||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)){if(d&&""==l)return A;c-=x(l).length+1,l="",s=ge}else l+=o;break;case ge:case be:if(n&&"file"==e.scheme){s=Se;continue}if(":"!=o||f){if(o==u||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)){if(te(e)&&""==l)return O;if(n&&""==l&&(ne(e)||null!==e.port))return;if(i=q(e,l))return i;if(l="",s=_e,n)return;continue}"["==o?f=!0:"]"==o&&(f=!1),l+=o}else{if(""==l)return O;if(i=q(e,l))return i;if(l="",s=xe,n==be)return}break;case xe:if(!F.test(o)){if(o==u||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)||n){if(""!=l){var y=parseInt(l,10);if(65535<y)return L;e.port=te(e)&&y===ee[e.scheme]?null:y,l=""}if(n)return;s=_e;continue}return L}l+=o;break;case we:if(e.scheme="file","/"==o||"\\"==o)s=ke;else{if(!r||"file"!=r.scheme){s=Te;continue}if(o==u)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",s=Ce;else{if("#"!=o){ae(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),oe(e)),s=Te;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=Ie}}break;case ke:if("/"==o||"\\"==o){s=Se;break}r&&"file"==r.scheme&&!ae(a.slice(c).join(""))&&(re(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),s=Te;continue;case Se:if(o==u||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&re(l))s=Te;else{if(""==l){if(e.host="",n)return}else{if(i=q(e,l))return i;if("localhost"==e.host&&(e.host=""),n)return;l=""}s=_e}continue}l+=o;break;case _e:if(te(e)){if(s=Te,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=u&&(s=Te,"/"!=o))continue}else e.fragment="",s=Ie;else e.query="",s=Ce;break;case Te:if(o==u||"/"==o||"\\"==o&&te(e)||!n&&("?"==o||"#"==o)){if(se(l)?(oe(e),"/"==o||"\\"==o&&te(e)||e.path.push("")):ie(l)?"/"==o||"\\"==o&&te(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&re(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(o==u||"?"==o||"#"==o))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",s=Ce):"#"==o&&(e.fragment="",s=Ie)}else l+=$(o,Q);break;case Ee:"?"==o?(e.query="",s=Ce):"#"==o?(e.fragment="",s=Ie):o!=u&&(e.path[0]+=$(o,K));break;case Ce:n||"#"!=o?o!=u&&("'"==o&&te(e)?e.query+="%27":e.query+="#"==o?"%23":$(o,K)):(e.fragment="",s=Ie);break;case Ie:o!=u&&(e.fragment+=$(o,Y))}c++}}function i(e){var t,n,r=y(this,i,"URL"),a=1<arguments.length?arguments[1]:void 0,s=(e=String(e),I(r,{type:"URL"}));if(void 0!==a)if(a instanceof i)t=N(a);else if(n=o(t={},String(a)))throw TypeError(n);if(n=o(s,e,null,t))throw TypeError(n);var u=s.searchParams=new E;(a=C(u)).updateSearchParams(s.query),a.updateURL=function(){s.query=String(u)||null},f||(r.href=Ne.call(r),r.origin=je.call(r),r.protocol=Re.call(r),r.username=Ae.call(r),r.password=Me.call(r),r.host=Oe.call(r),r.hostname=Le.call(r),r.port=De.call(r),r.pathname=Pe.call(r),r.search=Fe.call(r),r.searchParams=ze.call(r),r.hash=Be.call(r))}function s(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}}e("../modules/es.string.iterator");var u,c,l,d=e("../internals/export"),f=e("../internals/descriptors"),p=e("../internals/native-url"),h=e("../internals/global"),m=e("../internals/object-define-properties"),v=e("../internals/redefine"),y=e("../internals/an-instance"),g=e("../internals/has"),b=e("../internals/object-assign"),x=e("../internals/array-from"),w=e("../internals/string-multibyte").codeAt,k=e("../internals/string-punycode-to-ascii"),S=e("../internals/set-to-string-tag"),_=e("../modules/web.url-search-params"),T=(e=e("../internals/internal-state"),h.URL),E=_.URLSearchParams,C=_.getState,I=e.set,N=e.getterFor("URL"),j=Math.floor,R=Math.pow,A="Invalid authority",M="Invalid scheme",O="Invalid host",L="Invalid port",D=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,F=/\d/,z=/^(0x|0X)/,B=/^[0-7]+$/,U=/^\d+$/,V=/^[\dA-Fa-f]+$/,G=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,W=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,H=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Z=/[\u0009\u000A\u000D]/g,q=function(e,t){var n,r,a;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(n=function(e){var t,n,r,a,o,i,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&V.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,c>6)return;for(r=0;f();){if(a=null,r>0){if(!("."==f()&&r<4))return;d++}if(!F.test(f()))return;for(;F.test(f());){if(o=parseInt(f(),10),null===a)a=o;else{if(0==a)return;a=10*a+o}if(a>255)return;d++}u[c]=256*u[c]+a,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(i=c-l,c=7;0!=c&&i>0;)s=u[c],u[c--]=u[l+i-1],u[l+--i]=s;else if(8!=c)return;return u}(t.slice(1,-1)))?void(e.host=n):O;if(te(e))return t=k(t),G.test(t)||null===(n=function(e){var t,n,r,a,o,i,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(o=10,a.length>1&&"0"==a.charAt(0)&&(o=z.test(a)?16:8,a=a.slice(8==o?1:2)),""===a)i=0;else{if(!(10==o?U:8==o?B:V).test(a))return e;i=parseInt(a,o)}n.push(i)}for(r=0;r<t;r++)if(i=n[r],r==t-1){if(i>=R(256,5-t))return null}else if(i>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*R(256,3-r);return s}(t))?O:void(e.host=n);if(W.test(t))return O;for(n="",r=x(t),a=0;a<r.length;a++)n+=$(r[a],K);e.host=n},X=function(e){for(var t=null,n=1,r=null,a=0,o=0;o<8;o++)0!==e[o]?(n<a&&(t=r,n=a),r=null,a=0):(null===r&&(r=o),++a);return n<a&&(t=r,n=a),t},K={},Y=b({},K,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=b({},Y,{"#":1,"?":1,"{":1,"}":1}),J=b({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var n=w(e,0);return 32<n&&n<127&&!g(t,e)?e:encodeURIComponent(e)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},te=function(e){return g(ee,e.scheme)},ne=function(e){return""!=e.username||""!=e.password},re=function(e,t){return 2==e.length&&D.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)},ae=function(e){return 1<e.length&&re(e.slice(0,2))&&(2==e.length||"/"===(e=e.charAt(2))||"\\"===e||"?"===e||"#"===e)},oe=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&re(t[0],!0)||t.pop()},ie=function(e){return"."===e||"%2e"===e.toLowerCase()},se=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},ue={},ce={},le={},de={},fe={},pe={},he={},me={},ve={},ye={},ge={},be={},xe={},we={},ke={},Se={},_e={},Te={},Ee={},Ce={},Ie={},Ne=(h=i.prototype,function(){var e=N(this),t=e.scheme,n=e.username,a=e.password,o=e.host,i=e.port,s=e.path,u=e.query,c=e.fragment,l=t+":";return null!==o?(l+="//",ne(e)&&(l+=n+(a?":"+a:"")+"@"),l+=r(o),null!==i&&(l+=":"+i)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==u&&(l+="?"+u),null!==c&&(l+="#"+c),l}),je=function(){var e=N(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&te(e)?t+"://"+r(e.host)+(null!==n?":"+n:""):"null"},Re=function(){return N(this).scheme+":"},Ae=function(){return N(this).username},Me=function(){return N(this).password},Oe=function(){var e=(t=N(this)).host,t=t.port;return null===e?"":null===t?r(e):r(e)+":"+t},Le=function(){var e=N(this).host;return null===e?"":r(e)},De=function(){var e=N(this).port;return null===e?"":String(e)},Pe=function(){var e=N(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Fe=function(){var e=N(this).query;return e?"?"+e:""},ze=function(){return N(this).searchParams},Be=function(){var e=N(this).fragment;return e?"#"+e:""};f&&m(h,{href:s(Ne,(function(e){var t=N(this);if(e=o(t,e=String(e)))throw TypeError(e);C(t.searchParams).updateSearchParams(t.query)})),origin:s(je),protocol:s(Re,(function(e){o(N(this),String(e)+":",ue)})),username:s(Ae,(function(e){var t=N(this),n=x(String(e));if(!a(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=$(n[r],J)}})),password:s(Me,(function(e){var t=N(this),n=x(String(e));if(!a(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=$(n[r],J)}})),host:s(Oe,(function(e){var t=N(this);t.cannotBeABaseURL||o(t,String(e),ge)})),hostname:s(Le,(function(e){var t=N(this);t.cannotBeABaseURL||o(t,String(e),be)})),port:s(De,(function(e){var t=N(this);a(t)||(""==(e=String(e))?t.port=null:o(t,e,xe))})),pathname:s(Pe,(function(e){var t=N(this);t.cannotBeABaseURL||(t.path=[],o(t,e+"",_e))})),search:s(Fe,(function(e){var t=N(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",o(t,e,Ce)),C(t.searchParams).updateSearchParams(t.query)})),searchParams:s(ze),hash:s(Be,(function(e){var t=N(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",o(t,e,Ie))}))}),v(h,"toJSON",(function(){return Ne.call(this)}),{enumerable:!0}),v(h,"toString",(function(){return Ne.call(this)}),{enumerable:!0}),T&&(c=T.createObjectURL,l=T.revokeObjectURL,c&&v(i,"createObjectURL",(function(e){return c.apply(T,arguments)})),l&&v(i,"revokeObjectURL",(function(e){return l.apply(T,arguments)}))),S(i,"URL"),d({global:!0,forced:!p,sham:!f},{URL:i})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":234}],234:[function(e,t,n){(function(r,a){var o;o=function(){"use strict";function t(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,s=void 0,u=function(e,t){h[o]=e,h[o+1]=t,2===(o+=2)&&(s?s(m):b())},c="undefined"!=typeof window?window:void 0,l=(l=c||{}).MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var h=new Array(1e3);function m(){for(var e=0;e<o;e+=2)(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0;o=0}var v,y,g,b=void 0;function x(e,t){var n,r=this,a=new this.constructor(S),o=(void 0===a[k]&&D(a),r._state);return o?(n=arguments[o-1],u((function(){return O(o,a,n,r._result)}))):A(r,a,e,t),a}function w(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(I(t=new this(S),e),t)}b=d?function(){return r.nextTick(m)}:l?(y=0,d=new l(m),g=document.createTextNode(""),d.observe(g,{characterData:!0}),function(){g.data=y=++y%2}):f?((v=new MessageChannel).port1.onmessage=m,function(){return v.port2.postMessage(0)}):(void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(m)}:p()}catch(e){return p()}}:p)();var k=Math.random().toString(36).substring(2);function S(){}var _=void 0,T=1,E=2;function C(e,n,r){var a,o;n.constructor===e.constructor&&r===x&&n.constructor.resolve===w?(a=e,(o=n)._state===T?j(a,o._result):o._state===E?R(a,o._result):A(o,void 0,(function(e){return I(a,e)}),(function(e){return R(a,e)}))):void 0!==r&&t(r)?function(e,t,n){u((function(e){var r=!1,a=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,(t!==n?I:j)(e,n))}),(function(t){r||(r=!0,R(e,t))}),e._label);!r&&a&&(r=!0,R(e,a))}),e)}(e,n,r):j(e,n)}function I(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)j(e,t);else{n=void 0;try{n=t.then}catch(t){return void R(e,t)}C(e,t,n)}var n}function N(e){e._onerror&&e._onerror(e._result),M(e)}function j(e,t){e._state===_&&(e._result=t,e._state=T,0!==e._subscribers.length&&u(M,e))}function R(e,t){e._state===_&&(e._state=E,e._result=t,u(N,e))}function A(e,t,n,r){var a=e._subscribers,o=a.length;e._onerror=null,a[o]=t,a[o+T]=n,a[o+E]=r,0===o&&e._state&&u(M,e)}function M(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,a=void 0,o=e._result,i=0;i<t.length;i+=3)r=t[i],a=t[i+n],r?O(n,r,a,o):a(o);e._subscribers.length=0}}function O(e,n,r,a){var o=t(r),i=void 0,s=void 0,u=!0;if(o){try{i=r(a)}catch(e){u=!1,s=e}if(n===i)return void R(n,new TypeError("A promises callback cannot return that same promise."))}else i=a;n._state===_&&(o&&u?I(n,i):!1===u?R(n,s):e===T?j(n,i):e===E&&R(n,i))}var L=0;function D(e){e[k]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}F.prototype._enumerate=function(e){for(var t=0;this._state===_&&t<e.length;t++)this._eachEntry(e[t],t)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var a,o=void 0,i=void 0,s=!1;try{o=e.then}catch(t){s=!0,i=t}o===x&&e._state!==_?this._settledAt(e._state,t,e._result):"function"!=typeof o?(this._remaining--,this._result[t]=e):n===z?(a=new n(S),s?R(a,i):C(a,e,o),this._willSettleAt(a,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},F.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===_&&(this._remaining--,e===E?R(r,n):this._result[t]=n),0===this._remaining&&j(r,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,(function(e){return n._settledAt(T,t,e)}),(function(e){return n._settledAt(E,t,e)}))};var P=F;function F(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[k]||D(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||j(this.promise,this._result)):R(this.promise,new Error("Array Methods must be provided an Array"))}B.prototype.catch=function(e){return this.then(null,e)},B.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)};var z=B;function B(e){if(this[k]=L++,this._result=this._state=void 0,this._subscribers=[],S!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof B))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e((function(e){I(t,e)}),(function(e){R(t,e)}))}catch(e){R(t,e)}}}return z.prototype.then=x,z.all=function(e){return new P(this,e).promise},z.race=function(e){var t=this;return n(e)?new t((function(n,r){for(var a=e.length,o=0;o<a;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},z.resolve=w,z.reject=function(e){var t=new this(S);return R(t,e),t},z._setScheduler=function(e){s=e},z._setAsap=function(e){u=e},z._asap=u,z.polyfill=function(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z},z.Promise=z},"object"==typeof n&&void 0!==t?t.exports=o():this.ES6Promise=o()}).call(this,e("_process"),"undefined"!=typeof r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:243}],235:[function(e,t,n){var r;r=function(e,t){"use strict";var n=5e3,r="callback";function a(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(e){(e=document.getElementById(e))&&document.getElementsByTagName("head")[0].removeChild(e)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,s=t.timeout||n,u=t.jsonpCallback||r,c=void 0;return new Promise((function(n,r){var l=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),d=u+"_"+l,f=(window[l]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),c&&clearTimeout(c),o(d),a(l)},i+=-1===i.indexOf("?")?"?":"&",document.createElement("script"));f.setAttribute("src",""+i+u+"="+l),t.charset&&f.setAttribute("charset",t.charset),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),c=setTimeout((function(){r(new Error("JSONP request to "+e+" timed out")),a(l),o(d),window[l]=function(){a(l)}}),s),f.onerror=function(){r(new Error("JSONP request to "+e+" failed")),a(l),o(d),c&&clearTimeout(c)}}))}},void 0!==n&&void 0!==t?r(0,t):(r(r={exports:{}},r),this.fetchJsonp=r.exports)},{}],236:[function(e,t,n){var r=function(e){"use strict";var t,n,r,a,o,i,s,u,c,l;if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)))return l=e.document,t=function(){return e.URL||e.webkitURL||e},n=l.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,a=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},4e4,s=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=(c=function(c,l,d){d||(c=u(c));var f,p,h=this,m=(d="application/octet-stream"===c.type,function(){for(var e=h,t="writestart progress write writeend".split(" "),n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){i(e)}}});h.readyState=h.INIT,r?(f=t().createObjectURL(c),setTimeout((function(){var e,t;n.href=f,n.download=l,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),m(),s(f),h.readyState=h.DONE}))):(o||d&&a)&&e.FileReader?((p=new FileReader).onloadend=function(){var t=o?p.result:p.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,m()},p.readAsDataURL(c),h.readyState=h.INIT):(f=f||t().createObjectURL(c),!d&&e.open(f,"_blank")||(e.location.href=f),h.readyState=h.DONE,m(),s(f))}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],237:[function(e,t,n){var r,a=Object.defineProperty,o=(a(n,"__esModule",{value:!0}),n),i={GIFEncoder:function(){return k},applyPalette:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb565";if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<t.length)throw new Error("applyPalette() only works with 256 colors or less");var r=new Uint32Array(e.buffer),a=r.length,o="rgb444"===n?4096:65536,i=new Uint8Array(a),s=new Array(o);if("rgba4444"===n)for(var u=0;u<a;u++){var c,l=(c=r[u])>>24&255,h=c>>16&255,m=c>>8&255,v=(v=f(c=255&c,m,h,l))in s?s[v]:s[v]=function(e,t,n,r,a){for(var o=0,i=1e100,s=0;s<a.length;s++){var u=a[s],c=b(u[3]-r);c>i||((c+=b(u[0]-e))>i||((c+=b(u[1]-t))>i||((c+=b(u[2]-n))>i||(i=c,o=s))))}return o}(c,m,h,l,t);i[u]=v}else for(var y="rgb444"===n?p:d,g=0;g<a;g++){var x,w=(x=r[g])>>16&255,k=x>>8&255,S=(S=y(x=255&x,k,w))in s?s[S]:s[S]=function(e,t,n,r){for(var a=0,o=1e100,i=0;i<r.length;i++){var s=r[i],u=b(s[0]-e);u>o||((u+=b(s[1]-t))>o||((u+=b(s[2]-n))>o||(o=u,a=i)))}return a}(x,k,w,t);i[g]=S}return i}},default:function(){return C},nearestColor:function(){return function(e,t){return e[x(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:y)]}},nearestColorIndex:function(){return x},nearestColorIndexWithDistance:function(){return w},prequantize:function(){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.roundRGB,r=void 0===n?5:n,a=t.roundAlpha,o=void 0===a?10:a,i=t.oneBitAlpha,s=void 0===i?null:i,u=new Uint32Array(e.buffer),c=0;c<u.length;c++){var l=(p=u[c])>>24&255,d=p>>16&255,f=p>>8&255,p=255&p;l=g(l,o),s&&(l=l<=("number"==typeof s?s:127)?0:255),p=g(p,r),f=g(f,r),d=g(d,r),u[c]=l<<24|d<<16|f<<8|p<<0}}},quantize:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.format,a=void 0===r?"rgb565":r,o=n.clearAlpha,i=void 0===o||o,s=n.clearAlphaColor,u=void 0===s?0:s,c=n.clearAlphaThreshold,l=void 0===c?0:c,y=n.oneBitAlpha,g=void 0!==y&&y;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");e=new Uint32Array(e.buffer);for(var b=!1!==n.useSqrt,x="rgba4444"===a,w=function(e,t){var n=new Array("rgb444"===t?4096:65536),r=e.length;if("rgba4444"===t)for(var a=0;a<r;++a){var o,i=(o=e[a])>>24&255,s=o>>16&255,u=o>>8&255,c=f(o=255&o,u,s,i),l=c in n?n[c]:n[c]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=o,l.gc+=u,l.bc+=s,l.ac+=i,l.cnt++}else if("rgb444"===t)for(var h=0;h<r;++h){var m,v=(m=e[h])>>16&255,y=m>>8&255,g=p(m=255&m,y,v),b=g in n?n[g]:n[g]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};b.rc+=m,b.gc+=y,b.bc+=v,b.cnt++}else for(var x=0;x<r;++x){var w,k=(w=e[x])>>16&255,S=w>>8&255,_=d(w=255&w,S,k),T=_ in n?n[_]:n[_]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};T.rc+=w,T.gc+=S,T.bc+=k,T.cnt++}return n}(e,a),k=w.length,S=k-1,_=new Uint32Array(k+1),T=0,E=0;E<k;++E){var C=w[E];null!=C&&(F=1/C.cnt,x&&(C.ac*=F),C.rc*=F,C.gc*=F,C.bc*=F,w[T++]=C)}m(t)/T<.022&&(b=!1);var I,N,j;for(E=0;E<T-1;++E)w[E].fw=E+1,w[E+1].bk=E,b&&(w[E].cnt=Math.sqrt(w[E].cnt));for(b&&(w[E].cnt=Math.sqrt(w[E].cnt)),E=0;E<T;++E){v(w,E,!1);var R=w[E].err;for(N=++_[0];1<N&&!(w[I=_[j=N>>1]].err<=R);N=j)_[N]=I;_[N]=E}var A,M=T-t;for(E=0;E<M;){for(;;){var O=_[1];if((A=w[O]).tm>=A.mtm&&w[A.nn].mtm<=A.tm)break;for(A.mtm==S?O=_[1]=_[_[0]--]:(v(w,O,!1),A.tm=E),R=w[O].err,N=1;(j=N+N)<=_[0]&&(j<_[0]&&w[_[j]].err>w[_[j+1]].err&&j++,!(R<=w[I=_[j]].err));N=j)_[N]=I;_[N]=O}var L=w[A.nn],D=A.cnt,P=L.cnt,F=1/(D+P);x&&(A.ac=F*(D*A.ac+P*L.ac)),A.rc=F*(D*A.rc+P*L.rc),A.gc=F*(D*A.gc+P*L.gc),A.bc=F*(D*A.bc+P*L.bc),A.cnt+=L.cnt,A.mtm=++E,w[L.bk].fw=L.fw,w[L.fw].bk=L.bk,L.mtm=S}var z=[];for(E=0;;0){var B=h(Math.round(w[E].rc),0,255),U=h(Math.round(w[E].gc),0,255),V=h(Math.round(w[E].bc),0,255),G=255;x&&(G=h(Math.round(w[E].ac),0,255),g&&(G=G<=(W="number"==typeof g?g:127)?0:255),i&&G<=l&&(B=U=V=u,G=0));var W=x?[B,U,V,G]:[B,U,V];if(function(e,t){for(var n=0;n<e.length;n++){var r=(a=e[n])[0]===t[0]&&a[1]===t[1]&&a[2]===t[2],a=!(4<=a.length&&4<=t.length)||a[3]===t[3];if(r&&a)return!0}return!1}(z,W)||z.push(W),0==(E=w[E].fw))break}return z}},snapColorsToPalette:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(e.length&&t.length)for(var r=e.map((function(e){return e.slice(0,3)})),a=n*n,o=e[0].length,i=0;i<t.length;i++){var s,u=t[i],c=(s=w(r,(u=u.length<o?[u[0],u[1],u[2],255]:u.length>o?u.slice(0,3):u.slice()).slice(0,3),y))[0];0<(s=s[1])&&s<=a&&(e[c]=u)}}}};for(r in i)a(o,r,{get:i[r],enumerable:!0});var s={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function u(){var e=0,t=new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:256);return{get buffer(){return t.buffer},reset:function(){e=0},bytesView:function(){return t.subarray(0,e)},bytes:function(){return t.slice(0,e)},writeByte:function(r){n(e+1),t[e]=r,e++},writeBytes:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.length;n(e+o);for(var i=0;i<o;i++)t[e++]=r[i+a]},writeBytesView:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.byteLength;n(e+o),t.set(r.subarray(a,a+o),e),e+=o}};function n(n){var r=t.length;if(!(n<=r)){n=Math.max(n,r*(r<1048576?2:1.125)>>>0),0!=r&&(n=Math.max(n,256));var a=t;t=new Uint8Array(n),0<e&&t.set(a.subarray(0,e),0)}}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],l=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u(512),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Uint8Array(256),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Int32Array(5003),s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Int32Array(5003);return function(e){var t=i.length;e=Math.max(2,e);o.fill(0),s.fill(0),i.fill(-1);for(var r=0,u=0,l=e+1,d=l,f=!1,p=d,h=(1<<p)-1,m=1<<l-1,v=1+m,y=2+m,g=0,b=n[0],x=0,w=t;w<65536;w*=2)++x;x=8-x,a.writeByte(e),I(m);for(var k=n.length,S=1;S<k;S++)e:{var _=n[S],T=(_<<12)+b,E=_<<x^b;if(i[E]===T)b=s[E];else{for(var C=0===E?1:t-E;0<=i[E];)if((E-=C)<0&&(E+=t),i[E]===T){b=s[E];break e}I(b),b=_,y<4096?(s[E]=y++,i[E]=T):(i.fill(-1),y=2+m,f=!0,I(m))}}return I(b),I(v),a.writeByte(0),a.bytesView();function I(e){for(r&=c[u],0<u?r|=e<<u:r=e,u+=p;8<=u;)o[g++]=255&r,254<=g&&(a.writeByte(g),a.writeBytesView(o,0,g),g=0),r>>=8,u-=8;if((y>h||f)&&(f?(h=(1<<(p=d))-1,f=!1):(++p,h=12===p?1<<p:(1<<p)-1)),e==v){for(;0<u;)o[g++]=255&r,254<=g&&(a.writeByte(g),a.writeBytesView(o,0,g),g=0),r>>=8,u-=8;0<g&&(a.writeByte(g),a.writeBytesView(o,0,g),g=0)}}}(r)};function d(e,t,n){return e<<8&63488|t<<2&992|n>>3}function f(e,t,n,r){return e>>4|240&t|(240&n)<<4|(240&r)<<8}function p(e,t,n){return e>>4<<8|240&t|n>>4}function h(e,t,n){return e<t?t:n<e?n:e}function m(e){return e*e}function v(e,t,n){for(var r=0,a=1e100,o=e[t],i=o.cnt,s=o.ac,u=o.rc,c=o.gc,l=o.bc,d=o.fw;0!=d;d=e[d].fw){var f,p,h=e[d];a<=(p=i*(p=h.cnt)/(i+p))||(f=0,n&&a<=(f+=p*m(h.ac-s))||a<=(f+=p*m(h.rc-u))||a<=(f+=p*m(h.gc-c))||a<=(f+=p*m(h.bc-l))||(a=f,r=d))}o.err=a,o.nn=r}function y(e,t){for(var n=0,r=0;r<e.length;r++){var a=e[r]-t[r];n+=a*a}return n}function g(e,t){return 1<t?Math.round(e/t)*t:e}function b(e){return e*e}function x(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=1/0,a=-1,o=0;o<e.length;o++){var i=n(t,e[o]);i<r&&(r=i,a=o)}return a}function w(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=1/0,a=-1,o=0;o<e.length;o++){var i=n(t,e[o]);i<r&&(r=i,a=o)}return[a,r]}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialCapacity,n=void 0===t?4096:t,r=e.auto,a=void 0===r||r,o=u(n),i=new Uint8Array(256),c=new Int32Array(5003),d=new Int32Array(5003),f=!1;return{reset:function(){o.reset(),f=!1},finish:function(){o.writeByte(s.trailer)},bytes:function(){return o.bytes()},bytesView:function(){return o.bytesView()},get buffer(){return o.buffer},get stream(){return o},writeHeader:p,writeFrame:function(e,t,n){return function(r){var s,u,h=r,m=h.transparent,v=void 0!==m&&m,y=h.transparentIndex,g=void 0===y?0:y,b=h.delay,x=void 0===b?0:b,w=h.palette,k=void 0===w?null:w,C=h.repeat,I=void 0===C?0:C,N=h.colorDepth,j=void 0===N?8:N,R=h.dispose,A=void 0===R?-1:R,M=!1;if(a?f||(M=!0,p(),f=!0):M=Boolean(r.first),t=Math.max(0,Math.floor(t)),n=Math.max(0,Math.floor(n)),M){if(!k)throw new Error("First frame must include a { palette } option");r=o;var O=t,L=n;P=128|(P=void 0===j?8:j)-1<<4|(F=E((F=k).length)-1),_(r,O),_(r,L),r.writeBytes([P,0,0]),S(o,k),0<=I&&(O=I,(F=o).writeByte(33),F.writeByte(255),F.writeByte(11),T(F,"NETSCAPE2.0"),F.writeByte(3),F.writeByte(1),_(F,O),F.writeByte(0))}var D,P=A,F=(I=L=Math.round(x/10),O=v,g);(r=o).writeByte(33),r.writeByte(249),r.writeByte(4),F<0&&(F=0,O=!1),O=O?(D=1,2):D=0,0<=P&&(O=7&P),O<<=2,r.writeByte(0|O|D),_(r,I),r.writeByte(F||0),r.writeByte(0),x=Boolean(k)&&!M;v=t,g=n,D=x?k:null,(A=o).writeByte(44),_(A,0),_(A,0),_(A,v),_(A,g),D?(v=E(D.length)-1,A.writeByte(128|v)):A.writeByte(0),x&&S(o,k),l(g=(s=[o,e,t,n,j,i,c,d])[2],v=s[3],r=s[1],A=void 0===(u=s[4])?8:u,I=s[0],x=s[5],k=s[6],e=s[7])}(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}};function p(){T(o,"GIF89a")}}function S(e,t){for(var n=1<<E(t.length),r=0;r<n;r++){var a=[0,0,0];r<t.length&&(a=t[r]),e.writeByte(a[0]),e.writeByte(a[1]),e.writeByte(a[2])}}function _(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function T(e,t){for(var n=0;n<t.length;n++)e.writeByte(t.charCodeAt(n))}function E(e){return Math.max(Math.ceil(Math.log2(e)),1)}var C=k},{}],238:[function(e,t,n){n.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,u=(1<<s)-1,c=u>>1,l=-7,d=n?a-1:0,f=n?-1:1;a=e[t+d];for(d+=f,o=a&(1<<-l)-1,a>>=-l,l+=s;0<l;o=256*o+e[t+d],d+=f,l-=8);for(i=o&(1<<-l)-1,o>>=-l,l+=r;0<l;i=256*i+e[t+d],d+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return i?NaN:1/0*(a?-1:1);i+=Math.pow(2,r),o-=c}return(a?-1:1)*i*Math.pow(2,o-r)},n.write=function(e,t,n,r,a,o){var i,s,u=8*o-a-1,c=(1<<u)-1,l=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1;o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-i))<1&&(i--,r*=2),2<=(t+=1<=i+l?d/r:d*Math.pow(2,1-l))*r&&(i++,r/=2),c<=i+l?(s=0,i=c):1<=i+l?(s=(t*r-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));8<=a;e[n+f]=255&s,f+=p,s/=256,a-=8);for(i=i<<a|s,u+=a;0<u;e[n+f]=255&i,f+=p,i/=256,u-=8);e[n+f-p]|=128*o}},{}],239:[function(e,t,n){"use strict";var r;function a(e,t){return e.b===t.b&&e.a===t.a}function o(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function i(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?r<a?t.a-e.a+r/(r+a)*(e.a-n.a):t.a-n.a+a/(r+a)*(n.a-e.a):0}function s(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?(t.a-n.a)*r+(t.a-e.a)*a:0}function u(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function c(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?r<a?t.b-e.b+r/(r+a)*(e.b-n.b):t.b-n.b+a/(r+a)*(n.b-e.b):0}function l(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?(t.b-n.b)*r+(t.b-e.b)*a:0}function d(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function f(e){var t=y(e.b);return b(t,e.c),b(t.b,e.c),x(t,e.a),t}function p(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,k(t.a,e.a)),t.d!==e.d&&(n=!0,S(t.d,e.d)),g(t,e),r||(b(t,e.a),e.a.c=e),n||(x(t,e.d),e.d.a=e))}function h(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,S(e.d,e.b.d)),e.c===e?k(e.a,null):(e.b.d.a=e.b.e,e.a.c=e.c,g(e,e.b.e),n||x(e,e.d)),t.c===t?(k(t.a,null),S(t.d,null)):(e.d.a=t.b.e,t.a.c=t.c,g(t,t.b.e)),w(e)}function m(e){var t=y(e),n=t.b;return g(t,e.e),t.a=e.b.a,b(n,t.a),t.d=n.d=e.d,t=t.b,g(e.b,e.b.b.e),g(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function v(e,t){var n=!1,r=y(e),a=r.b;return t.d!==e.d&&(n=!0,S(t.d,e.d)),g(r,e.e),g(a,t),r.a=e.b.a,a.a=t.a,r.d=a.d=e.d,e.d.a=a,n||x(r,e.d),r}function y(e){var t=new K,n=new K,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function g(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function b(e,t){var n=t.f,r=new Q(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function x(e,t){var n=t.d,r=new X(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function w(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function k(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function S(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function _(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])?2:t}function T(e,t){e.f+=t.f,e.b.f+=t.b.f}function E(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?o(t.a,n.a)?s(n.b.a,t.a,n.a)<=0:0<=s(t.b.a,n.a,t.a):s(n.b.a,e,n.a)<=0:n.b.a===e?0<=s(t.b.a,e,t.a):(t=i(t.b.a,e,t.a),(e=i(n.b.a,e,n.a))<=t)}function C(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function I(e,t){h(e.a),e.c=!1,(e.a=t).i=e}function N(e){for(var t=e.a.a;(e=ce(e)).a.a===t;);return e.c&&(I(e,t=v(ue(e).a.b,e.a.e)),e=ce(e)),e}function j(e,t,n){var r=new se;return r.a=n,r.e=G(e.f,t.e,r),n.i=r}function R(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function A(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,C(e)}function M(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=ue(e),a=r.a;if(a.a!==t.a){if(!r.c){A(e);break}I(r,a=v(t.c.b,a.b))}t.c!==a&&(p(a.b.e,a),p(t,a)),A(e),t=r.a,e=r}return t}function O(e,t,n,r,a,o){for(var i=!0;j(e,t,n.b),(n=n.c)!==r;);for(null===a&&(a=ue(t).a.b.c);(n=(r=ue(t)).a.b).a===a.a;)n.c!==a&&(p(n.b.e,n),p(a.b.e,n)),r.f=t.f-n.f,r.d=R(e,r.f),t.b=!0,!i&&F(e,t)&&(T(n,a),C(t),h(a)),i=!1,t=r,a=n;t.b=!0,o&&B(e,t)}function L(e,t,n,r,a){var o=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(o,n,r,e.c)||null,null===t.d&&(a?e.n||(q(e,100156),e.n=!0):t.d=n[0])}function D(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,L(e,t.a,r,[.5,.5,0,0],!1),p(t,n)}function P(e,t,n,r,a){var o=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),i=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),s=a+1;r[a]=.5*i/(o+i),r[s]=.5*o/(o+i),e.g[0]+=r[a]*t.g[0]+r[s]*n.g[0],e.g[1]+=r[a]*t.g[1]+r[s]*n.g[1],e.g[2]+=r[a]*t.g[2]+r[s]*n.g[2]}function F(e,t){var n=ue(t),r=t.a,i=n.a;if(o(r.a,i.a)){if(0<s(i.b.a,r.a,i.a))return;if(a(r.a,i.a)){if(r.a!==i.a){n=e.e;var u=r.a.h;if(0<=u){var c=(n=n.b).d,l=n.e,d=n.c,f=d[u];c[f]=c[n.a],(d[c[f]]=f)<=--n.a&&(f<=1||o(l[c[f>>1]],l[c[f]])?oe:ie)(n,f),l[u]=null,d[u]=n.b,n.b=u}else for(n.c[-(u+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;D(e,i.b.e,r)}}else m(i.b),p(r,i.b.e),t.b=n.b=!0}else{if(s(r.b.a,i.a,r.a)<0)return;ce(t).b=t.b=!0,m(r.b),p(i.b.e,r)}return 1}function z(e,t){var n=ue(t),r=t.a,f=n.a,h=r.a,v=f.a,y=r.b.a,g=f.b.a,b=new Q;if(s(y,e.a,h),s(g,e.a,v),!(h===v||Math.min(h.a,y.a)>Math.max(v.a,g.a))){if(o(h,v)){if(0<s(g,h,v))return}else if(s(y,v,h)<0)return;var x,w,k=y,S=h,_=g,T=v;if(o(k,S)||(x=k,k=S,S=x),o(_,T)||(x=_,_=T,T=x),o(k,_)||(x=k,k=_,_=x,x=S,S=T,T=x),o(_,S)?o(S,T)?((x=i(k,_,S))+(w=i(_,S,T))<0&&(x=-x,w=-w),b.b=d(x,_.b,w,S.b)):((x=s(k,_,S))+(w=-s(k,T,S))<0&&(x=-x,w=-w),b.b=d(x,_.b,w,T.b)):b.b=(_.b+S.b)/2,u(k,S)||(x=k,k=S,S=x),u(_,T)||(x=_,_=T,T=x),u(k,_)||(x=k,k=_,_=x,x=S,S=T,T=x),u(_,S)?u(S,T)?((x=c(k,_,S))+(w=c(_,S,T))<0&&(x=-x,w=-w),b.a=d(x,_.a,w,S.a)):((x=l(k,_,S))+(w=-l(k,T,S))<0&&(x=-x,w=-w),b.a=d(x,_.a,w,T.a)):b.a=(_.a+S.a)/2,o(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),k=o(h,v)?h:v,o(k,b)&&(b.b=k.b,b.a=k.a),a(b,h)||a(b,v))return F(e,t),0;if(!a(y,e.a)&&0<=s(y,e.a,b)||!a(g,e.a)&&s(g,e.a,b)<=0){if(g===e.a)m(r.b),p(f.b,r),r=ue(t=N(t)).a,M(e,ue(t),n),O(e,t,r.b.e,r,r,!0);else{if(y!==e.a)return 0<=s(y,e.a,b)&&(ce(t).b=t.b=!0,m(r.b),r.a.b=e.a.b,r.a.a=e.a.a),void(s(g,e.a,b)<=0&&(t.b=n.b=!0,m(f.b),f.a.b=e.a.b,f.a.a=e.a.a));for(m(f.b),p(r.e,f.b.e),v=(h=n=t).a.b.a;(h=ce(h)).a.b.a===v;);h=ue(t=h).a.b.c,n.a=f.b.e,O(e,t,(f=M(e,n,null)).c,r.b.c,h,!0)}return 1}m(r.b),m(f.b),p(f.b.e,r),r.a.b=b.b,r.a.a=b.a,r.a.h=$(e.e,r.a),r=r.a,f=[0,0,0,0],b=[h.d,y.d,v.d,g.d],r.g[0]=r.g[1]=r.g[2]=0,P(r,h,y,f,0),P(r,v,g,f,2),L(e,r,b,f,!0),ce(t).b=t.b=n.b=!0}}function B(e,t){for(var n=ue(t);;){for(;n.b;)n=ue(t=n);if(!t.b&&(null===(t=ce(n=t))||!t.b))break;t.b=!1;var r=t.a,a=n.a;if(i=r.b.a!==a.b.a)e:{var i,u=ue(i=t),c=i.a,l=u.a,d=void 0;if(o(c.b.a,l.b.a)){if(s(c.b.a,l.b.a,c.a)<0){i=!1;break e}ce(i).b=i.b=!0,d=m(c),p(l.b,d),d.d.c=i.d}else{if(0<s(l.b.a,c.b.a,l.a)){i=!1;break e}i.b=u.b=!0,d=m(l),p(c.e,l.b),d.b.d.c=i.d}i=!0}if(i&&(n.c?(C(n),h(a),a=(n=ue(t)).a):t.c&&(C(t),h(r),r=(t=ce(n)).a)),r.a!==a.a)if(r.b.a===a.b.a||t.c||n.c||r.b.a!==e.a&&a.b.a!==e.a)F(e,t);else if(z(e,t))break;r.a===a.a&&r.b.a===a.b.a&&(T(a,r),C(t),h(r),t=ce(n))}}function U(e,t){var n=new se,r=f(e.b);r.a.b=4e150,r.a.a=t,r.b.a.b=-4e150,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=G(r=e.f,r.a,n),n.e=r}function V(e){this.a=new W,this.b=e,this.c=E}function G(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new W(n,t.a,t),t.a.c=e,t.a=e}function W(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function H(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Z(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:q(e,100151),e.u(null);break;case 1:q(e,100152),e.t()}else switch(e.d){case 2:q(e,100154),e.v();break;case 1:q(e,100153),e.w()}}function q(e,t){e.p&&e.p(t,e.c)}function X(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function K(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Y(){this.c=new Q,this.a=new X,this.b=new K,this.d=new K,this.b.b=this.d,this.d.b=this.b}function Q(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function J(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new te}function $(e,t){var n,r,a;return e.e?(2*(r=++(n=e.b).a)>n.f&&(n.f*=2,n.c=ne(n.c,n.f+1)),0===n.b?a=r:(a=n.b,n.b=n.c[n.b]),n.e[a]=t,n.c[a]=r,n.d[r]=a,n.h&&ie(n,r),a):(n=e.a++,e.c[n]=t,-(n+1))}function ee(e){if(0===e.a)return ae(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&o(re(e.b),t))return ae(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function te(){this.d=ne([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ne(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function re(e){return e.e[e.d[1]]}function ae(e){var t=e.d,n=e.e,r=e.c,a=t[1],o=n[a];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[a]=null,r[a]=e.b,e.b=a,0<--e.a&&oe(e,1)),o}function oe(e,t){for(var n=e.d,r=e.e,a=e.c,i=t,s=n[i];;){var u=i<<1,c=(u<e.a&&o(r[n[u+1]],r[n[u]])&&(u+=1),n[u]);if(u>e.a||o(r[s],r[c])){a[n[i]=s]=i;break}a[n[i]=c]=i,i=u}}function ie(e,t){for(var n=e.d,r=e.e,a=e.c,i=t,s=n[i];;){var u=i>>1,c=n[u];if(0==u||o(r[c],r[s])){a[n[i]=s]=i;break}a[n[i]=c]=i,i=u}}function se(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ue(e){return e.e.c.b}function ce(e){return e.e.a.b}(r=H.prototype).x=function(){Z(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void q(this,100900)}q(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:q(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:q(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];Z(this,2);for(var a=0;a<3;++a){var o=e[a];o<-1e150&&(o=-1e150,n=!0),1e150<o&&(o=1e150,n=!0),r[a]=o}n&&q(this,100155),null===(n=this.q)?p(n=f(this.b),n.b):(m(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){Z(this,0),this.d=1,this.b=new Y,this.c=e},r.t=function(){Z(this,1),this.d=2,this.q=null},r.v=function(){Z(this,2),this.d=1},r.w=function(){Z(this,1),this.d=0;var e,t,n=!1,r=[d=this.j[0],i=this.j[1],c=this.j[2]];if(0===d&&0===i&&0===c){for(var i=[-2e150,-2e150,-2e150],u=[2e150,2e150,2e150],c=[],l=[],d=(n=this.b.c).e;d!==n;d=d.e)for(var f=0;f<3;++f){var y=d.g[f];y<u[f]&&(u[f]=y,l[f]=d),y>i[f]&&(i[f]=y,c[f]=d)}if(i[1]-u[1]>i[d=0]-u[0]&&(d=1),u[d=i[2]-u[2]>i[d]-u[d]?2:d]>=i[d])r[0]=0,r[1]=0,r[2]=1;else{for(u=l[d],c=c[d],l=[i=0,0,0],u=[u.g[0]-c.g[0],u.g[1]-c.g[1],u.g[2]-c.g[2]],f=[0,0,0],d=n.e;d!==n;d=d.e)f[0]=d.g[0]-c.g[0],f[1]=d.g[1]-c.g[1],f[2]=d.g[2]-c.g[2],l[0]=u[1]*f[2]-u[2]*f[1],l[1]=u[2]*f[0]-u[0]*f[2],l[2]=u[0]*f[1]-u[1]*f[0],i<(y=l[0]*l[0]+l[1]*l[1]+l[2]*l[2])&&(i=y,r[0]=l[0],r[1]=l[1],r[2]=l[2]);i<=0&&(r[0]=r[1]=r[2]=0,r[_(u)]=1)}n=!0}for(l=_(r),d=this.b.c,i=(l+1)%3,c=(l+2)%3,l=0<r[l]?1:-1,r=d.e;r!==d;r=r.e)r.b=r.g[i],r.a=l*r.g[c];if(n){for(r=0,d=(n=this.b.a).b;d!==n;d=d.b)if(!((i=d.a).f<=0))for(;r+=(i.a.b-i.b.a.b)*(i.a.a+i.b.a.a),(i=i.e)!==d.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,d=(r=this.b.b).h;d!==r;d=n)n=d.h,i=d.e,a(d.a,d.b.a)&&d.e.e!==d&&(D(this,i,d),h(d),i=(d=i).e),i.e===d&&(i!==d&&(i!==n&&i!==n.b||(n=n.h),h(i)),d!==n&&d!==n.b||(n=n.h),h(d));for(this.e=r=new J,d=(n=this.b.c).e;d!==n;d=d.e)d.h=$(r,d);var b=r;b.d=[];for(var x=0;x<b.a;x++)b.d[x]=x;b.d.sort(function(e){return function(t,n){return o(e[t],e[n])?1:-1}}(b.c)),b.e=!0;for(var S=b.b,E=S.a;1<=E;--E)oe(S,E);for(S.h=!0,this.f=new V(this),U(this,-4e150),U(this,4e150);null!==(r=ee(this.e));){for(;;){e:if(0===(d=this.e).a)n=re(d.b);else if(n=d.c[d.d[d.a-1]],0!==d.b.a&&o(d=re(d.b),n)){n=d;break e}if(null===n||!a(n,r))break;n=ee(this.e),D(this,r.c,n.c)}!function e(t,n){for(var r,i=(t.a=n).c;null===i.i;)if((i=i.c)===n.c){i=t;var u=n;(y=new se).a=u.c.b;for(var c=(l=i.f).a;null!==(c=c.a).b&&!l.c(l.b,y,c.b););var l,d,f=ue(l=c.b),y=l.a;c=f.a;return void(0===s(y.b.a,u,y.a)?a((y=l.a).a,u)||a(y.b.a,u)||(m(y.b),l.c&&(h(y.c),l.c=!1),p(u.c,y),e(i,u)):(d=o(c.b.a,y.b.a)?l:f,f=void 0,l.d||d.c?(f=d===l?v(u.c.b,y.e):v(c.b.c.b,u.c).b,d.c?I(d,f):((l=j(y=i,l,f)).f=ce(l).f+l.a.f,l.d=R(y,l.f)),e(i,u)):O(i,l,u.c,u.c,null,!0)))}l=(y=ue(i=N(i.i))).a,(y=M(t,y,null)).c===l?(y=(l=y).c,c=ue(i),f=i.a,d=c.a,r=!1,f.b.a!==d.b.a&&z(t,i),a(f.a,t.a)&&(p(y.b.e,f),y=ue(i=N(i)).a,M(t,ue(i),c),r=!0),a(d.a,t.a)&&(p(l,d.b.e),l=M(t,c,null),r=!0),r?O(t,i,l.c,y,y,!0):(u=o(d.a,f.a)?d.b.e:f,O(t,i,u=v(l.c.b,u),u.c,u.c,!1),u.b.i.c=!0,B(t,i))):O(t,i,y.c,l,l,!0)}(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,C(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,d=(r=this.b).a.b;d!==r.a;d=n)n=d.b,(d=d.a).e.e===d&&(T(d.c,d),h(d));if(!this.n){if(r=this.b,this.m)for(d=r.b.h;d!==r.b;d=n)n=d.h,d.b.d.c!==d.d.c?d.f=d.d.c?1:-1:h(d);else for(d=r.a.b;d!==r.a;d=n)if(n=d.b,d.c){for(d=d.a;o(d.b.a,d.a);d=d.c.b);for(;o(d.a,d.b.a);d=d.e);for(i=d.c.b,c=void 0;d.e!==i;)if(o(d.b.a,i.a)){for(;i.e!==d&&(o((t=i.e).b.a,t.a)||s(i.a,i.b.a,i.e.b.a)<=0);)i=(c=v(i.e,i)).b;i=i.c.b}else{for(;i.e!==d&&(o((e=d.c.b).a,e.b.a)||0<=s(d.b.a,d.a,d.c.b.a));)d=(c=v(d,d.c.b)).b;d=d.e}for(;i.e.e!==d;)i=(c=v(i.e,i)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),d=n.a;this.k&&this.k(d.a.d,this.c),(d=d.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,d=!1,i=-1,c=r.a.d;c!==r.a;c=c.d)if(c.c)for(d||(this.h&&this.h(4,this.c),d=!0),l=c.a;n&&(i!==(u=l.b.d.c?0:1)&&(i=u,this.l&&this.l(!!i,this.c))),this.k&&this.k(l.a.d,this.c),(l=l.e)!==c.a;);d&&this.i&&this.i(this.c)}if(this.r){for(d=(r=this.b).a.b;d!==r.a;d=n)if(n=d.b,!d.c){for(c=(i=d.a).e,l=void 0;c=(l=c).e,(l.d=null)===l.b.d&&(l.c===l?k(l.a,null):(l.a.c=l.c,g(l,l.b.e)),(u=l.b).c===u?k(u.a,null):(u.a.c=u.c,g(u,u.b.e)),w(l)),l!==i;);i=d.d,((d=d.b).d=i).b=d}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:H,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},H.prototype.gluDeleteTess=H.prototype.x,H.prototype.gluTessProperty=H.prototype.B,H.prototype.gluGetTessProperty=H.prototype.y,H.prototype.gluTessNormal=H.prototype.A,H.prototype.gluTessCallback=H.prototype.z,H.prototype.gluTessVertex=H.prototype.C,H.prototype.gluTessBeginPolygon=H.prototype.u,H.prototype.gluTessBeginContour=H.prototype.t,H.prototype.gluTessEndContour=H.prototype.v,H.prototype.gluTessEndPolygon=H.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],240:[function(e,t,n){"use strict";function r(e,t,n,r){for(var a=e[t++],o=1<<a,i=1+o,s=1+i,u=a+1,c=(1<<u)-1,l=0,d=0,f=0,p=e[t++],h=new Int32Array(4096),m=null;;){for(;l<16&&0!==p;)d|=e[t++]<<l,l+=8,1===p?p=e[t++]:--p;if(l<u)break;var v=d&c;if(d>>=u,l-=u,v==o)s=1+i,c=(1<<(u=a+1))-1,m=null;else{if(v==i)break;for(var y=v<s?v:m,g=0,b=y;o<b;)b=h[b]>>8,++g;var x=b;if(r<f+g+(y!==v?1:0))return void console.log("Warning, gif stream longer than expected.");n[f++]=x;var w=f+=g;for(y!==v&&(n[f++]=x),b=y;g--;)b=h[b],n[--w]=255&b,b>>=8;null!==m&&s<4096&&(h[s++]=m<<8|x,c+1<=s&&u<12&&(++u,c=c<<1|1)),m=v}}f!==r&&console.log("Warning, gif stream shorter than expected.")}try{n.GifWriter=function(e,t,n,r){var a=0,o=void 0===(r=void 0===r?{}:r).loop?null:r.loop,i=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function s(e){if((e=e.length)<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var u=0,c=0;if(null!==i){for(var l=s(i);l>>=1;)++u;if(l=1<<u,--u,void 0!==r.background){if(l<=(c=r.background))throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=(null!==i?128:0)|u,e[a++]=c,e[a++]=0,null!==i)for(var d=0,f=i.length;d<f;++d){var p=i[d];e[a++]=p>>16&255,e[a++]=p>>8&255,e[a++]=255&p}if(null!==o){if(o<0||65535<o)throw new Error("Loop count invalid.");e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&o,e[a++]=o>>8&255,e[a++]=0}var h=!1;this.addFrame=function(t,n,r,o,u,c){if(!0===h&&(--a,h=!1),c=void 0===c?{}:c,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||o<=0||65535<r||65535<o)throw new Error("Width/Height invalid.");if(u.length<r*o)throw new Error("Not enough pixels for the frame size.");var l=!0,d=c.palette;if(null==d&&(l=!1,d=i),null==d)throw new Error("Must supply either a local or global palette.");for(var f=s(d),p=0;f>>=1;)++p;f=1<<p;var m=void 0===c.delay?0:c.delay,v=void 0===c.disposal?0:c.disposal;if(v<0||3<v)throw new Error("Disposal out of range.");var y=!1,g=0;if(void 0!==c.transparent&&null!==c.transparent&&(y=!0,(g=c.transparent)<0||f<=g))throw new Error("Transparent color index.");if(0===v&&!y&&0===m||(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=v<<2|(!0===y?1:0),e[a++]=255&m,e[a++]=m>>8&255,e[a++]=g,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&o,e[a++]=o>>8&255,e[a++]=!0===l?128|p-1:0,!0===l)for(var b=0,x=d.length;b<x;++b){var w=d[b];e[a++]=w>>16&255,e[a++]=w>>8&255,e[a++]=255&w}return a=function(e,t,n,r){e[t++]=n;var a=t++,o=1<<n,i=o-1,s=1+o,u=1+s,c=n+1,l=0,d=0;function f(n){for(;n<=l;)e[t++]=255&d,d>>=8,l-=8,t===a+256&&(e[a]=255,a=t++)}function p(e){d|=e<<l,l+=c,f(8)}var h=r[0]&i,m={};p(o);for(var v=1,y=r.length;v<y;++v){var g=r[v]&i,b=h<<8|g,x=m[b];if(void 0===x){for(d|=h<<l,l+=c;8<=l;)e[t++]=255&d,d>>=8,l-=8,t===a+256&&(e[a]=255,a=t++);4096===u?(p(o),u=1+s,c=n+1,m={}):(1<<c<=u&&++c,m[b]=u++),h=g}else h=x}return p(h),p(s),f(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}(e,a,p<2?2:p,u)},this.end=function(){return!1===h&&(e[a++]=59,h=!0),a},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return a},this.setOutputBufferPosition=function(e){a=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,o=e[t++],i=1<<1+(7&o),s=(e[t++],e[t++],null),u=null,c=(o>>7&&(s=t,t+=3*(u=i)),!0),l=[],d=0,f=null,p=0,h=null;for(this.width=n,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(v=e[t++])))throw Error("Invalid block size");if(0===v)break;t+=v}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];d=e[t++]|e[t++]<<8,f=e[t++];0==(1&m)&&(f=null),p=m>>2&7,t++;break;case 254:for(;;){if(!(0<=(v=e[t++])))throw Error("Invalid block size");if(0===v)break;t+=v}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v,y=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,w=(T=e[t++])>>6&1,k=s,S=u,_=!1,T=(T>>7&&(_=!0,k=t,t+=3*(S=1<<1+(7&T))),t);for(t++;;){if(!(0<=(v=e[t++])))throw Error("Invalid block size");if(0===v)break;t+=v}l.push({x:y,y:g,width:b,height:x,has_local_palette:_,palette_offset:k,palette_size:S,data_offset:T,data_length:t-T,transparent_index:f,interlaced:!!w,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return h},this.frameInfo=function(e){if(e<0||e>=l.length)throw new Error("Frame index out of range.");return l[e]},this.decodeAndBlitFrameBGRA=function(t,a){for(var o=(t=this.frameInfo(t)).width*t.height,i=new Uint8Array(o),s=(r(e,t.data_offset,i,o),t.palette_offset),u=t.transparent_index,c=(null===u&&(u=256),t.width),l=n-c,d=c,f=4*(t.y*n+t.x),p=4*((t.y+t.height)*n+t.x),h=f,m=4*l,v=(!0===t.interlaced&&(m+=4*n*7),8),y=0,g=i.length;y<g;++y){var b,x,w=i[y];0===d&&(d=c,p<=(h+=m)&&(m=4*l+4*n*(v-1),h=f+(c+l)*(v<<1),v>>=1)),w===u?h+=4:(b=e[s+3*w],x=e[s+3*w+1],w=e[s+3*w+2],a[h++]=w,a[h++]=x,a[h++]=b,a[h++]=255),--d}},this.decodeAndBlitFrameRGBA=function(t,a){for(var o=(t=this.frameInfo(t)).width*t.height,i=new Uint8Array(o),s=(r(e,t.data_offset,i,o),t.palette_offset),u=t.transparent_index,c=(null===u&&(u=256),t.width),l=n-c,d=c,f=4*(t.y*n+t.x),p=4*((t.y+t.height)*n+t.x),h=f,m=4*l,v=(!0===t.interlaced&&(m+=4*n*7),8),y=0,g=i.length;y<g;++y){var b,x,w=i[y];0===d&&(d=c,p<=(h+=m)&&(m=4*l+4*n*(v-1),h=f+(c+l)*(v<<1),v>>=1)),w===u?h+=4:(b=e[s+3*w],x=e[s+3*w+1],w=e[s+3*w+2],a[h++]=b,a[h++]=x,a[h++]=w,a[h++]=255),--d}}}}catch(e){}},{}],241:[function(e,t,n){(function(r){var a;a=function(t){"use strict";function n(e){if(null==this)throw TypeError();var t,n=String(this),r=n.length;if(!((e=(e=e?Number(e):0)!=e?0:e)<0||r<=e))return 55296<=(t=n.charCodeAt(e))&&t<=56319&&e+1<r&&56320<=(r=n.charCodeAt(e+1))&&r<=57343?1024*(t-55296)+r-56320+65536:t}String.prototype.codePointAt||((a=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?a(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var a,o=0;function i(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function s(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new i,this.dtree=new i}var u=new i,c=new i,l=new Uint8Array(30),d=new Uint16Array(30),f=new Uint8Array(30),p=new Uint16Array(30),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new i,v=new Uint8Array(320);function y(e,t,n,r){for(var a,o=0;o<n;++o)e[o]=0;for(o=0;o<30-n;++o)e[o+n]=o/n|0;for(a=r,o=0;o<30;++o)t[o]=a,a+=1<<e[o]}var g=new Uint16Array(16);function b(e,t,n,r){for(var a,o=0;o<16;++o)e.table[o]=0;for(o=0;o<r;++o)e.table[t[n+o]]++;for(o=a=e.table[0]=0;o<16;++o)g[o]=a,a+=e.table[o];for(o=0;o<r;++o)t[n+o]&&(e.trans[g[t[n+o]]++]=o)}function x(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function w(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,a=0,o=e.tag;r=2*r+(1&o),o>>>=1,n+=t.table[++a],0<=(r-=t.table[a]););return e.tag=o,e.bitcount-=a,t.trans[n+r]}function k(e,t,n){for(;;){if(256===(i=w(e,t)))return o;if(i<256)e.dest[e.destLen++]=i;else for(var r,a=x(e,l[i-=257],d[i]),i=w(e,n),s=r=e.destLen-x(e,f[i],p[i]);s<r+a;++s)e.dest[e.destLen++]=e.dest[s]}}for(var S=u,_=c,T=0;T<7;++T)S.table[T]=0;for(S.table[7]=24,S.table[8]=152,S.table[9]=112,T=0;T<24;++T)S.trans[T]=256+T;for(T=0;T<144;++T)S.trans[24+T]=T;for(T=0;T<8;++T)S.trans[168+T]=280+T;for(T=0;T<112;++T)S.trans[176+T]=144+T;for(T=0;T<5;++T)_.table[T]=0;for(_.table[5]=32,T=0;T<32;++T)_.trans[T]=T;y(l,d,4,3),y(f,p,2,1),l[28]=0,d[28]=258;var E=function(e,t){var n,r,a,i=new s(e,t);do{switch(void 0,(r=i).bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7),a=1&r.tag,r.tag>>>=1,r=a,x(i,2,0)){case 0:n=function(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*e.source[e.sourceIndex+1]+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,o}(i);break;case 1:n=k(i,u,c);break;case 2:C=E=T=I=l=_=void 0;for(var l,d=i,f=i.ltree,p=i.dtree,y=x(d,5,257),g=x(d,5,1),S=x(d,4,4),_=0;_<19;++_)v[_]=0;for(_=0;_<S;++_){var T=x(d,3,0);v[h[_]]=T}for(b(m,v,0,19),l=0;l<y+g;){var E=w(d,m);switch(E){case 16:for(var C=v[l-1],I=x(d,2,3);I;--I)v[l++]=C;break;case 17:for(I=x(d,3,3);I;--I)v[l++]=0;break;case 18:for(I=x(d,7,11);I;--I)v[l++]=0;break;default:v[l++]=E}}b(f,v,0,y),b(p,v,y,g),n=k(i,i.ltree,i.dtree);break;default:n=-3}if(n!==o)throw new Error("Data error")}while(!r);return i.destLen<i.dest.length?"function"==typeof i.dest.slice?i.dest.slice(0,i.destLen):i.dest.subarray(0,i.destLen):i.dest};function C(e,t,n,r,a){return Math.pow(1-a,3)*e+3*Math.pow(1-a,2)*a*t+3*(1-a)*Math.pow(a,2)*n+Math.pow(a,3)*r}function I(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function N(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function j(e){throw new Error(e)}function R(e,t){e||j(t)}I.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},I.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},I.prototype.addX=function(e){this.addPoint(e,null)},I.prototype.addY=function(e){this.addPoint(null,e)},I.prototype.addBezier=function(e,t,n,r,a,o,i,s){var u=[e,t],c=[n,r],l=[a,o],d=[i,s];this.addPoint(e,t),this.addPoint(i,s);for(var f=0;f<=1;f++){var p,h=6*u[f]-12*c[f]+6*l[f],m=-3*u[f]+9*c[f]-9*l[f]+3*d[f],v=3*c[f]-3*u[f];0==m?0==h||0<(p=-v/h)&&p<1&&(0===f&&this.addX(C(u[f],c[f],l[f],d[f],p)),1===f&&this.addY(C(u[f],c[f],l[f],d[f],p))):(p=Math.pow(h,2)-4*v*m)<0||(0<(v=(-h+Math.sqrt(p))/(2*m))&&v<1&&(0===f&&this.addX(C(u[f],c[f],l[f],d[f],v)),1===f&&this.addY(C(u[f],c[f],l[f],d[f],v))),0<(v=(-h-Math.sqrt(p))/(2*m))&&v<1&&(0===f&&this.addX(C(u[f],c[f],l[f],d[f],v)),1===f&&this.addY(C(u[f],c[f],l[f],d[f],v))))}},I.prototype.addQuad=function(e,t,n,r,a,o){n=e+2/3*(n-e),r=t+2/3*(r-t),this.addBezier(e,t,n,r,n+1/3*(a-e),r+1/3*(o-t),a,o)},N.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},N.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},N.prototype.curveTo=N.prototype.bezierCurveTo=function(e,t,n,r,a,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:a,y:o})},N.prototype.quadTo=N.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},N.prototype.close=N.prototype.closePath=function(){this.commands.push({type:"Z"})},N.prototype.extend=function(e){var t;if(e.commands)e=e.commands;else if(e instanceof I)return t=e,this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close();Array.prototype.push.apply(this.commands,e)},N.prototype.getBoundingBox=function(){for(var e=new I,t=0,n=0,r=0,a=0,o=0;o<this.commands.length;o++){var i=this.commands[o];switch(i.type){case"M":e.addPoint(i.x,i.y),t=r=i.x,n=a=i.y;break;case"L":e.addPoint(i.x,i.y),r=i.x,a=i.y;break;case"Q":e.addQuad(r,a,i.x1,i.y1,i.x,i.y),r=i.x,a=i.y;break;case"C":e.addBezier(r,a,i.x1,i.y1,i.x2,i.y2,i.x,i.y),r=i.x,a=i.y;break;case"Z":r=t,a=n;break;default:throw new Error("Unexpected path command "+i.type)}}return e.isEmpty()&&e.addPoint(0,0),e},N.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},N.prototype.toPathData=function(e){function t(){for(var t=arguments,n="",r=0;r<arguments.length;r+=1){var a=t[r];0<=a&&0<r&&(n+=" "),n+=Math.round(a)===a?""+Math.round(a):a.toFixed(e)}return n}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var a=this.commands[r];"M"===a.type?n+="M"+t(a.x,a.y):"L"===a.type?n+="L"+t(a.x,a.y):"C"===a.type?n+="C"+t(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+t(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},N.prototype.toSVG=function(e){var t=(t='<path d="')+this.toPathData(e)+'"';return this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},N.prototype.toDOMElement=function(e){e=this.toPathData(e);var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};var A={fail:j,argument:R,assert:R},M={},O={},L={};function D(e){return function(){return e}}O.BYTE=function(e){return A.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},L.BYTE=D(1),O.CHAR=function(e){return[e.charCodeAt(0)]},L.CHAR=D(1),O.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},L.CHARARRAY=function(e){return e.length},O.USHORT=function(e){return[e>>8&255,255&e]},L.USHORT=D(2),O.SHORT=function(e){return[(e=32768<=e?-(65536-e):e)>>8&255,255&e]},L.SHORT=D(2),O.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},L.UINT24=D(3),O.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},L.ULONG=D(4),O.LONG=function(e){return[(e=2147483648<=e?-(4294967296-e):e)>>24&255,e>>16&255,e>>8&255,255&e]},L.LONG=D(4),O.FIXED=O.ULONG,L.FIXED=L.ULONG,O.FWORD=O.SHORT,L.FWORD=L.SHORT,O.UFWORD=O.USHORT,L.UFWORD=L.USHORT,O.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},L.LONGDATETIME=D(8),O.TAG=function(e){return A.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},L.TAG=D(4),O.Card8=O.BYTE,L.Card8=L.BYTE,O.Card16=O.USHORT,L.Card16=L.USHORT,O.OffSize=O.BYTE,L.OffSize=L.BYTE,O.SID=O.USHORT,L.SID=L.USHORT,O.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?O.NUMBER16(e):O.NUMBER32(e)},L.NUMBER=function(e){return O.NUMBER(e).length},O.NUMBER16=function(e){return[28,e>>8&255,255&e]},L.NUMBER16=D(3),O.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},L.NUMBER32=D(5),O.REAL=function(e){for(var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t),r=(n&&(n=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length)),t=(Math.round(e*n)/n).toString()),""),a=0,o=t.length;a<o;a+=1){var i=t[a];r+="e"===i?"-"===t[++a]?"c":"b":"."===i?"a":"-"===i?"e":i}for(var s=[30],u=0,c=(r+=1&r.length?"f":"ff").length;u<c;u+=2)s.push(parseInt(r.substr(u,2),16));return s},L.REAL=function(e){return O.REAL(e).length},O.NAME=O.CHARARRAY,L.NAME=L.CHARARRAY,O.STRING=O.CHARARRAY,L.STRING=L.CHARARRAY,M.UTF8=function(e,t,n){for(var r=[],a=n,o=0;o<a;o++,t+=1)r[o]=e.getUint8(t);return String.fromCharCode.apply(null,r)},M.UTF16=function(e,t,n){for(var r=[],a=n/2,o=0;o<a;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)},O.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},L.UTF16=function(e){return 2*e.length};var P,F={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"},z=(M.MACSTRING=function(e,t,n,r){var a=F[r];if(void 0!==a){for(var o="",i=0;i<n;i++){var s=e.getUint8(t+i);o+=s<=127?String.fromCharCode(s):a[127&s]}return o}},"function"==typeof WeakMap&&new WeakMap);function B(e){return-128<=e&&e<=127}O.MACSTRING=function(e,t){var n=function(e){if(!P)for(var t in P={},F)P[t]=new String(t);var n=P[e];if(void 0!==n){if(z){var r=z.get(n);if(void 0!==r)return r}var a=F[e];if(void 0!==a){for(var o={},i=0;i<a.length;i++)o[a.charCodeAt(i)]=i+128;return z&&z.set(n,o),o}}}(t);if(void 0!==n){for(var r=[],a=0;a<e.length;a++){var o=e.charCodeAt(a);if(128<=o&&void 0===(o=n[o]))return;r[a]=o}return r}},L.MACSTRING=function(e,t){return void 0!==(e=O.MACSTRING(e,t))?e.length:0},O.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=(0===r?function(e,t,n){for(var r=0,a=e.length;t<a&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}:-128<=r&&r<=127?function(e,t,n){for(var r=0,a=e.length,o=t;o<a&&r<64;){var i=e[o];if(!B(i))break;if(0===i&&o+1<a&&0===e[o+1])break;++o,++r}n.push(r-1);for(var s=t;s<o;++s)n.push(e[s]+256&255);return o}:function(e,t,n){for(var r=0,a=e.length,o=t;o<a&&r<64;){var i=e[o];if(0===i)break;if(B(i)&&o+1<a&&B(e[o+1]))break;++o,++r}n.push(64|r-1);for(var s=t;s<o;++s){var u=e[s];n.push(u+65536>>8&255,u+256&255)}return o})(e,t,n)}return n},O.INDEX=function(e){for(var t=1,n=[t],r=[],a=0;a<e.length;a+=1){var o=O.OBJECT(e[a]);Array.prototype.push.apply(r,o),t+=o.length,n.push(t)}if(0===r.length)return[0,0];for(var i=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,O.BYTE,O.USHORT,O.UINT24,O.ULONG][s],c=0;c<n.length;c+=1){var l=u(n[c]);Array.prototype.push.apply(i,l)}return Array.prototype.concat(O.Card16(e.length),O.OffSize(s),i,r)},L.INDEX=function(e){return O.INDEX(e).length},O.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var o=parseInt(n[a],0),i=e[o];t=(t=t.concat(O.OPERAND(i.value,i.type))).concat(O.OPERATOR(o))}return t},L.DICT=function(e){return O.DICT(e).length},O.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},O.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)A.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(O.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(O.NUMBER(e));else if("offset"===t)n=n.concat(O.NUMBER32(e));else if("number"===t)n=n.concat(O.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(O.REAL(e))}return n},O.OP=O.BYTE,L.OP=L.BYTE;var U="function"==typeof WeakMap&&new WeakMap;function V(e,t,n){for(var r=0;r<t.length;r+=1){var a=t[r];this[a.name]=a.value}if(this.tableName=e,this.fields=t,n)for(var o=Object.keys(n),i=0;i<o.length;i+=1){var s=o[i],u=n[s];void 0!==this[s]&&(this[s]=u)}}function G(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<t.length;a++)r[a+1]={name:e+a,type:"USHORT",value:t[a]};return r}function W(e,t,n){var r=t.length,a=new Array(r+1);a[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)a[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return a}function H(e,t,n){var r=t.length,a=[];a[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)a=a.concat(n(t[o],o));return a}function Z(e){1===e.format?V.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(G("glyph",e.glyphs))):A.assert(!1,"Can't create coverage table format 2 yet.")}function q(e){V.call(this,"scriptListTable",H("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return A.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new V("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new V("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(G("featureIndex",r.featureIndexes)))}].concat(H("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new V("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(G("featureIndex",n.featureIndexes)))}]}))))}]})))}function X(e){V.call(this,"featureListTable",H("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new V("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(G("lookupListIndex",n.lookupListIndexes)))}]})))}function K(e,t){V.call(this,"lookupListTable",W("lookup",e,(function(e){var n=t[e.lookupType];return A.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new V("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(W("subtable",e.subtables,n)))})))}O.CHARSTRING=function(e){if(U){var t=U.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,a=0;a<r;a+=1){var o=e[a];n=n.concat(O[o.type](o.value))}return U&&U.set(e,n),n},L.CHARSTRING=function(e){return O.CHARSTRING(e).length},O.OBJECT=function(e){var t=O[e.type];return A.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},L.OBJECT=function(e){var t=L[e.type];return A.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},O.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],a=[],o=0;o<n;o+=1){var i=e.fields[o],s=O[i.type],u=(A.argument(void 0!==s,"No encoding function for field type "+i.type+" ("+i.name+")"),e[i.name]);s=s(u=void 0===u?i.value:u);"TABLE"===i.type?(a.push(t.length),t=t.concat([0,0]),r.push(s)):t=t.concat(s)}for(var c=0;c<r.length;c+=1){var l=a[c],d=t.length;A.argument(d<65536,"Table "+e.tableName+" too big."),t[l]=d>>8,t[l+1]=255&d,t=t.concat(r[c])}return t},L.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var a=e.fields[r],o=L[a.type],i=(A.argument(void 0!==o,"No sizeOf function for field type "+a.type+" ("+a.name+")"),e[a.name]);t+=o(i=void 0===i?a.value:i),"TABLE"===a.type&&(t+=2)}return t},O.RECORD=O.TABLE,L.RECORD=L.TABLE,O.LITERAL=function(e){return e},L.LITERAL=function(e){return e.length},V.prototype.encode=function(){return O.TABLE(this)},V.prototype.sizeOf=function(){return L.TABLE(this)};var Y={Table:V,Record:V,Coverage:(Z.prototype=Object.create(V.prototype)).constructor=Z,ScriptList:(q.prototype=Object.create(V.prototype)).constructor=q,FeatureList:(X.prototype=Object.create(V.prototype)).constructor=X,LookupList:(K.prototype=Object.create(V.prototype)).constructor=K,ushortList:G,tableList:W,recordList:H};function Q(e,t){return e.getUint8(t)}function J(e,t){return e.getUint16(t,!1)}function $(e,t){return e.getUint32(t,!1)}function ee(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var te={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ne(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ne.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ne.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ne.prototype.parseCard8=ne.prototype.parseByte,ne.prototype.parseCard16=ne.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ne.prototype.parseSID=ne.prototype.parseUShort,ne.prototype.parseOffset16=ne.prototype.parseUShort,ne.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ne.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ne.prototype.parseOffset32=ne.prototype.parseULong=function(){var e=$(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ne.prototype.parseFixed=function(){var e=ee(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ne.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var a=0;a<e;a++)r+=String.fromCharCode(t.getUint8(n+a));return r},ne.prototype.parseTag=function(){return this.parseString(4)},ne.prototype.parseLongDateTime=function(){var e=$(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ne.prototype.parseVersion=function(e){var t=J(this.data,this.offset+this.relativeOffset),n=J(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+n/(e=void 0===e?4096:e)/10},ne.prototype.skip=function(e,t){this.relativeOffset+=te[e]*(t=void 0===t?1:t)},ne.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ne.prototype.parseOffset16List=ne.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ne.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ne.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint8(r++);return this.relativeOffset+=e,t},ne.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ne.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ne.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var o={},i=0;i<r.length;i++){var s=r[i],u=t[s];o[s]=u.call(this)}n[a]=o}return n},ne.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var o={},i=0;i<r.length;i++){var s=r[i],u=t[s];o[s]=u.call(this)}n[a]=o}return n},ne.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r],o=e[a];n[a]=o.call(this)}return n},ne.prototype.parseValueRecord=function(e){var t;if(0!==(e=void 0===e?this.parseUShort():e))return t={},1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t},ne.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ne.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ne(this.data,this.offset+t).parseStruct(e)},ne.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ne(this.data,this.offset+t).parseStruct(e)},ne.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,a=new Array(n),o=0;o<n;o++){var i=t[o];if(0===i)a[o]=void 0;else if(this.relativeOffset=i,e){for(var s=this.parseOffset16List(),u=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=i+s[c],u[c]=e.call(this);a[o]=u}else a[o]=this.parseUShortList()}return this.relativeOffset=r,a},ne.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),a=0;a<n;a++)r[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},ne.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ne.uShort,end:ne.uShort,classId:ne.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ne.list=function(e,t){return function(){return this.parseList(e,t)}},ne.list32=function(e,t){return function(){return this.parseList32(e,t)}},ne.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ne.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ne.pointer=function(e){return function(){return this.parsePointer(e)}},ne.pointer32=function(e){return function(){return this.parsePointer32(e)}},ne.tag=ne.prototype.parseTag,ne.byte=ne.prototype.parseByte,ne.uShort=ne.offset16=ne.prototype.parseUShort,ne.uShortList=ne.prototype.parseUShortList,ne.uLong=ne.offset32=ne.prototype.parseULong,ne.uLongList=ne.prototype.parseULongList,ne.struct=ne.prototype.parseStruct,ne.coverage=ne.prototype.parseCoverage,ne.classDef=ne.prototype.parseClassDef;var re={reserved:ne.uShort,reqFeatureIndex:ne.uShort,featureIndexes:ne.uShortList},ae=(ne.prototype.parseScriptList=function(){return this.parsePointer(ne.recordList({tag:ne.tag,script:ne.pointer({defaultLangSys:ne.pointer(re),langSysRecords:ne.recordList({tag:ne.tag,langSys:ne.pointer(re)})})}))||[]},ne.prototype.parseFeatureList=function(){return this.parsePointer(ne.recordList({tag:ne.tag,feature:ne.pointer({featureParams:ne.offset16,lookupListIndexes:ne.uShortList})}))||[]},ne.prototype.parseLookupList=function(e){return this.parsePointer(ne.list(ne.pointer((function(){var t=this.parseUShort(),n=(A.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown."),this.parseUShort()),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ne.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ne.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return A.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ne.offset32,featureTableSubstitutionOffset:ne.offset32})}))||[]},{getByte:Q,getCard8:Q,getUShort:J,getCard16:J,getShort:function(e,t){return e.getInt16(t,!1)},getULong:$,getFixed:ee,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,a=0;a<n;a+=1)r=(r<<=8)+e.getUint8(t+a);return r},getBytes:function(e,t,n){for(var r=[],a=t;a<n;a+=1)r.push(e.getUint8(a));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ne}),oe={parse:function(e,t){for(var n={},r=(n.version=ae.getUShort(e,t),A.argument(0===n.version,"cmap table version should be 0."),n.numTables=ae.getUShort(e,t+2),-1),a=n.numTables-1;0<=a;--a){var o=ae.getUShort(e,t+4+8*a),i=ae.getUShort(e,t+4+8*a+2);if(3===o&&(0===i||1===i||10===i)||0===o&&(0===i||1===i||2===i||3===i||4===i)){r=ae.getULong(e,t+4+8*a+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ae.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format){var u,c=n,l=s;l.parseUShort(),c.length=l.parseULong(),c.language=l.parseULong(),c.groupCount=u=l.parseULong(),c.glyphIndexMap={};for(var d=0;d<u;d+=1)for(var f=l.parseULong(),p=l.parseULong(),h=l.parseULong(),m=f;m<=p;m+=1)c.glyphIndexMap[m]=h,h++}else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");var v=n,y=e,g=t,b=r;v.length=s.parseUShort(),v.language=s.parseUShort(),v.segCount=x=s.parseUShort()>>1,s.skip("uShort",3),v.glyphIndexMap={};for(var x,w=new ae.Parser(y,g+b+14),k=new ae.Parser(y,g+b+16+2*x),S=new ae.Parser(y,g+b+16+4*x),_=new ae.Parser(y,g+b+16+6*x),T=g+b+16+8*x,E=0;E<x-1;E+=1)for(var C=void 0,I=w.parseUShort(),N=k.parseUShort(),j=S.parseShort(),R=_.parseUShort(),M=N;M<=I;M+=1)0!==R?(T=(T=_.offset+_.relativeOffset-2)+R+2*(M-N),0!==(C=ae.getUShort(y,T))&&(C=C+j&65535)):C=M+j&65535,v.glyphIndexMap[M]=C}return n},make:function(e){for(var t=!0,n=e.length-1;0<n;--n)if(65535<e.get(n).unicode){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}var r,a,o=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}],i=(o=(o=t?o:o.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Y.Table("cmap",o));for(i.segments=[],n=0;n<e.length;n+=1){for(var s=e.get(n),u=0;u<s.unicodes.length;u+=1)r=s.unicodes[u],a=n,i.segments.push({end:r,start:r,delta:-(r-a),offset:0,glyphIndex:a});i.segments=i.segments.sort((function(e,t){return e.start-t.start}))}i.segments.push({end:65535,start:65535,delta:1,offset:0});var c=i.segments.length,l=0,d=[],f=[],p=[],h=[],m=[],v=[];for(n=0;n<c;n+=1){var y=i.segments[n];y.end<=65535&&y.start<=65535?(d=d.concat({name:"end_"+n,type:"USHORT",value:y.end}),f=f.concat({name:"start_"+n,type:"USHORT",value:y.start}),p=p.concat({name:"idDelta_"+n,type:"SHORT",value:y.delta}),h=h.concat({name:"idRangeOffset_"+n,type:"USHORT",value:y.offset}),void 0!==y.glyphId&&(m=m.concat({name:"glyph_"+n,type:"USHORT",value:y.glyphId}))):l+=1,t||void 0===y.glyphIndex||(v=(v=(v=v.concat({name:"cmap12Start_"+n,type:"ULONG",value:y.start})).concat({name:"cmap12End_"+n,type:"ULONG",value:y.end})).concat({name:"cmap12Glyph_"+n,type:"ULONG",value:y.glyphIndex}))}return i.segCountX2=2*(c-l),i.searchRange=2*Math.pow(2,Math.floor(Math.log(c-l)/Math.log(2))),i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(d),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(f),i.fields=i.fields.concat(p),i.fields=i.fields.concat(h),i.fields=i.fields.concat(m),i.cmap4Length=14+2*d.length+2+2*f.length+2*p.length+2*h.length+2*m.length,t||(o=16+4*v.length,i.cmap12Offset=20+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:o},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:v.length/3}]),i.fields=i.fields.concat(v)),i}},ie=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],ue=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ce=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function le(e){this.font=e}function de(e){this.cmap=e}function fe(e,t){this.encoding=e,this.charset=t}function pe(e){switch(e.version){case 1:this.names=ce.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<ce.length?this.names[t]=ce[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-ce.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=ce[n+e.glyphNameIndex[n]];break;default:this.names=[]}}le.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var a=n.get(r),o=0;o<a.unicodes.length;o+=1)if(a.unicodes[o]===t)return r;return null},de.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},fe.prototype.charToGlyphIndex=function(e){return e=e.codePointAt(0),e=this.encoding[e],this.charset.indexOf(e)},pe.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},pe.prototype.glyphIndexToName=function(e){return this.names[e]};var he=function(e,t,n,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.stroke()};function me(e){this.bindConstructorValues(e)}function ve(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function ye(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}me.prototype.bindConstructorValues=function(e){var t;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(e=e.path,t=e||new N,{configurable:!0,get:function(){return t="function"==typeof t?t():t},set:function(e){t=e}}))},me.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},me.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},me.prototype.getPath=function(e,t,n,r,a){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;for(var o,i,s=(r=r||{}).xScale,u=r.yScale,c=((o=r.hinting&&a&&a.hinting?this.path&&a.hinting.exec(this,n):o)?(i=a.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),s=u=1):(i=this.path.commands,r=1/this.path.unitsPerEm*n,void 0===s&&(s=r),void 0===u&&(u=r)),new N),l=0;l<i.length;l+=1){var d=i[l];"M"===d.type?c.moveTo(e+d.x*s,t+-d.y*u):"L"===d.type?c.lineTo(e+d.x*s,t+-d.y*u):"Q"===d.type?c.quadraticCurveTo(e+d.x1*s,t+-d.y1*u,e+d.x*s,t+-d.y*u):"C"===d.type?c.curveTo(e+d.x1*s,t+-d.y1*u,e+d.x2*s,t+-d.y2*u,e+d.x*s,t+-d.y*u):"Z"===d.type&&c.closePath()}return c},me.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return A.argument(0===t.length,"There are still points left in the current contour."),e},me.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];"Z"!==a.type&&(t.push(a.x),n.push(a.y)),"Q"!==a.type&&"C"!==a.type||(t.push(a.x1),n.push(a.y1)),"C"===a.type&&(t.push(a.x2),n.push(a.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},me.prototype.draw=function(e,t,n,r,a){this.getPath(t,n,r,a).draw(e)},me.prototype.drawPoints=function(e,t,n,r){function a(t,n,r,a){var o=2*Math.PI;e.beginPath();for(var i=0;i<t.length;i+=1)e.moveTo(n+t[i].x*a,r+t[i].y*a),e.arc(n+t[i].x*a,r+t[i].y*a,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0;r=1/this.path.unitsPerEm*(r=void 0!==r?r:24);for(var o=[],i=[],s=this.path,u=0;u<s.commands.length;u+=1){var c=s.commands[u];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&i.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&i.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",a(o,t,n,r),e.fillStyle="red",a(i,t,n,r)},me.prototype.drawMetrics=function(e,t,n,r){t=void 0!==t?t:0,n=void 0!==n?n:0,r=1/this.path.unitsPerEm*(r=void 0!==r?r:24),e.lineWidth=1,e.strokeStyle="black",he(e,t,-1e4,t,1e4),he(e,-1e4,n,1e4,n);var a=this.xMin||0,o=this.yMin||0,i=this.xMax||0,s=this.yMax||0,u=this.advanceWidth||0;e.strokeStyle="blue",he(e,t+a*r,-1e4,t+a*r,1e4),he(e,t+i*r,-1e4,t+i*r,1e4),he(e,-1e4,n+-o*r,1e4,n+-o*r),he(e,-1e4,n+-s*r,1e4,n+-s*r),e.strokeStyle="green",he(e,t+u*r,-1e4,t+u*r,1e4)},ye.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},ye.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var ge={GlyphSet:ye,glyphLoader:function(e,t){return new me({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,a,o){return function(){var i=new me({index:t,font:e});return i.path=function(){n(i,r,a);var t=o(e.glyphs,i);return t.unitsPerEm=e.unitsPerEm,t},ve(i,"xMin","_xMin"),ve(i,"xMax","_xMax"),ve(i,"yMin","_yMin"),ve(i,"yMax","_yMax"),i}},cffGlyphLoader:function(e,t,n,r){return function(){var a=new me({index:t,font:e});return a.path=function(){var t=n(e,a,r);return t.unitsPerEm=e.unitsPerEm,t},a}}};function be(e){return e=e.length<1240?107:e.length<33900?1131:32768}function xe(e,t,n){var r,a=[],o=[],i=ae.getCard16(e,t);if(0!==i){for(var s=ae.getByte(e,t+2),u=t+(i+1)*s+2,c=t+3,l=0;l<i+1;l+=1)a.push(ae.getOffset(e,c,s)),c+=s;r=u+a[i]}else r=t+2;for(var d=0;d<a.length-1;d+=1){var f=ae.getBytes(e,u+a[d],u+a[d+1]);n&&(f=n(f)),o.push(f)}return{objects:o,startOffset:t,endOffset:r}}function we(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t){for(var n=e,r="",a=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var o=(i=n.parseByte())>>4,i=15&i;if(15==o)break;if(r+=a[o],15==i)break;r+=a[i]}return parseFloat(r)}if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function ke(e,t,n){var r=new ae.Parser(e,t=void 0!==t?t:0),a=[],o=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var i=r.parseByte();i<=21?(12===i&&(i=1200+r.parseByte()),a.push([i,o]),o=[]):o.push(we(r,i))}for(var s=a,u={},c=0;c<s.length;c+=1){var l=s[c][0],d=s[c][1],f=1===d.length?d[0]:d;if(u.hasOwnProperty(l)&&!isNaN(u[l]))throw new Error("Object "+u+" already has key "+l);u[l]=f}return u}function Se(e,t){return t<=390?ie[t]:e[t-391]}function _e(e,t,n){for(var r,a={},o=0;o<t.length;o+=1){var i=t[o];if(Array.isArray(i.type)){var s=[];s.length=i.type.length;for(var u=0;u<i.type.length;u++)void 0===(r=void 0!==e[i.op]?e[i.op][u]:void 0)&&(r=void 0!==i.value&&void 0!==i.value[u]?i.value[u]:null),"SID"===i.type[u]&&(r=Se(n,r)),s[u]=r;a[i.name]=s}else void 0===(r=e[i.op])&&(r=void 0!==i.value?i.value:null),"SID"===i.type&&(r=Se(n,r)),a[i.name]=r}return a}var Te=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ee=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Ce(e,t,n,r){return _e(ke(e,t,n),Ee,r)}function Ie(e,t,n,r){for(var a=[],o=0;o<n.length;o+=1){var i,s=((i=(s=r,_e(ke(i=new DataView(new Uint8Array(n[o]).buffer),0,i.byteLength),Te,s)))._subrs=[],i._subrsBias=0,i.private[0]),u=i.private[1];0!==s&&0!==u&&(s=Ce(e,u+t,s,r),i._defaultWidthX=s.defaultWidthX,i._nominalWidthX=s.nominalWidthX,0!==s.subrs&&(u=xe(e,u+s.subrs+t),i._subrs=u.objects,i._subrsBias=be(i._subrs)),i._privateDict=s),a.push(i)}return a}function Ne(e,t,n){var r,a,o,i,s,u,c,l,d,f=new N,p=[],h=0,m=!1,v=!1,y=0,g=0,b=(d=(e.isCIDFont?(s=e.tables.cff.topDict._fdSelect[t.index],s=e.tables.cff.topDict._fdArray[s],u=s._subrs,c=s._subrsBias,l=s._defaultWidthX,s):(u=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,l=e.tables.cff.topDict._defaultWidthX,e.tables.cff.topDict))._nominalWidthX,l);function x(e,t){v&&f.closePath(),f.moveTo(e,t),v=!0}function w(){p.length%2==0||m||(b=p.shift()+d),h+=p.length>>1,p.length=0,m=!0}return function n(s){for(var l,k,S,_,T,E,C,I,N,j,R,A,M=0;M<s.length;){var O=s[M];switch(M+=1,O){case 1:case 3:case 18:case 23:w();break;case 4:1<p.length&&!m&&(b=p.shift()+d,m=!0),g+=p.pop(),x(y,g);break;case 5:for(;0<p.length;)y+=p.shift(),g+=p.shift(),f.lineTo(y,g);break;case 6:for(;0<p.length&&(y+=p.shift(),f.lineTo(y,g),0!==p.length);)g+=p.shift(),f.lineTo(y,g);break;case 7:for(;0<p.length&&(g+=p.shift(),f.lineTo(y,g),0!==p.length);)y+=p.shift(),f.lineTo(y,g);break;case 8:for(;0<p.length;)r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i+p.shift(),f.curveTo(r,a,o,i,y,g);break;case 10:T=p.pop()+c,(E=u[T])&&n(E);break;case 11:return;case 12:switch(O=s[M],M+=1,O){case 35:r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),C=o+p.shift(),I=i+p.shift(),N=C+p.shift(),j=I+p.shift(),R=N+p.shift(),A=j+p.shift(),y=R+p.shift(),g=A+p.shift(),p.shift(),f.curveTo(r,a,o,i,C,I),f.curveTo(N,j,R,A,y,g);break;case 34:r=y+p.shift(),a=g,o=r+p.shift(),i=a+p.shift(),C=o+p.shift(),I=i,N=C+p.shift(),j=i,R=N+p.shift(),A=g,y=R+p.shift(),f.curveTo(r,a,o,i,C,I),f.curveTo(N,j,R,A,y,g);break;case 36:r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),C=o+p.shift(),I=i,N=C+p.shift(),j=i,R=N+p.shift(),A=j+p.shift(),y=R+p.shift(),f.curveTo(r,a,o,i,C,I),f.curveTo(N,j,R,A,y,g);break;case 37:r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),C=o+p.shift(),I=i+p.shift(),N=C+p.shift(),j=I+p.shift(),R=N+p.shift(),A=j+p.shift(),Math.abs(R-y)>Math.abs(A-g)?y=R+p.shift():g=A+p.shift(),f.curveTo(r,a,o,i,C,I),f.curveTo(N,j,R,A,y,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+O),p.length=0}break;case 14:0<p.length&&!m&&(b=p.shift()+d,m=!0),v&&(f.closePath(),v=!1);break;case 19:case 20:w(),M+=h+7>>3;break;case 21:2<p.length&&!m&&(b=p.shift()+d,m=!0),g+=p.pop(),x(y+=p.pop(),g);break;case 22:1<p.length&&!m&&(b=p.shift()+d,m=!0),x(y+=p.pop(),g);break;case 24:for(;2<p.length;)r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i+p.shift(),f.curveTo(r,a,o,i,y,g);y+=p.shift(),g+=p.shift(),f.lineTo(y,g);break;case 25:for(;6<p.length;)y+=p.shift(),g+=p.shift(),f.lineTo(y,g);r=y+p.shift(),a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i+p.shift(),f.curveTo(r,a,o,i,y,g);break;case 26:for(p.length%2&&(y+=p.shift());0<p.length;)r=y,a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o,g=i+p.shift(),f.curveTo(r,a,o,i,y,g);break;case 27:for(p.length%2&&(g+=p.shift());0<p.length;)r=y+p.shift(),a=g,o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i,f.curveTo(r,a,o,i,y,g);break;case 28:l=s[M],k=s[M+1],p.push((l<<24|k<<16)>>16),M+=2;break;case 29:T=p.pop()+e.gsubrsBias,(E=e.gsubrs[T])&&n(E);break;case 30:for(;0<p.length&&(r=y,a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i+(1===p.length?p.shift():0),f.curveTo(r,a,o,i,y,g),0!==p.length);)r=y+p.shift(),a=g,o=r+p.shift(),i=a+p.shift(),g=i+p.shift(),y=o+(1===p.length?p.shift():0),f.curveTo(r,a,o,i,y,g);break;case 31:for(;0<p.length&&(r=y+p.shift(),a=g,o=r+p.shift(),i=a+p.shift(),g=i+p.shift(),y=o+(1===p.length?p.shift():0),f.curveTo(r,a,o,i,y,g),0!==p.length);)r=y,a=g+p.shift(),o=r+p.shift(),i=a+p.shift(),y=o+p.shift(),g=i+(1===p.length?p.shift():0),f.curveTo(r,a,o,i,y,g);break;default:O<32?console.log("Glyph "+t.index+": unknown operator "+O):O<247?p.push(O-139):O<251?(l=s[M],M+=1,p.push(256*(O-247)+l+108)):O<255?(l=s[M],M+=1,p.push(256*-(O-251)-l-108)):(l=s[M],k=s[M+1],S=s[M+2],_=s[M+3],M+=4,p.push((l<<24|k<<16|S<<8|_)/65536))}}}(n),t.advanceWidth=b,f}function je(e,t){var n,r=ie.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+ie.length:(n=ie.length+t.length,t.push(e)),n}function Re(e,t,n){for(var r={},a=0;a<e.length;a+=1){var o=e[a],i=t[o.name];void 0===i||function e(t,n){if(t===n)return 1;if(Array.isArray(t)&&Array.isArray(n)&&t.length===n.length){for(var r=0;r<t.length;r+=1)if(!e(t[r],n[r]))return;return 1}}(i,o.value)||("SID"===o.type&&(i=je(i,n)),r[o.op]={name:o.name,type:o.type,value:i})}return r}function Ae(e,t){var n=new Y.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Re(Te,e,t),n}function Me(e){var t=new Y.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}var Oe={parse:function(e,t,n){n.tables.cff={},r=e,a=t,(o={}).formatMajor=ae.getCard8(r,a),o.formatMinor=ae.getCard8(r,a+1),o.size=ae.getCard8(r,a+2),o.offsetSize=ae.getCard8(r,a+3),o.startOffset=a,o.endOffset=a+4;var r=xe(e,o.endOffset,ae.bytesToString),a=xe(e,r.endOffset),o=xe(e,a.endOffset,ae.bytesToString);r=xe(e,o.endOffset);if(n.gsubrs=r.objects,n.gsubrsBias=be(n.gsubrs),1!==(r=Ie(e,t,a.objects,o.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+r.length);if(a=r[0],(n.tables.cff.topDict=a)._privateDict&&(n.defaultWidthX=a._privateDict.defaultWidthX,n.nominalWidthX=a._privateDict.nominalWidthX),void 0!==a.ros[0]&&void 0!==a.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){r=a.fdArray;var i=a.fdSelect;if(0===r||0===i)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");r=Ie(e,t,xe(e,r+=t).objects,o.objects),a._fdArray=r,a._fdSelect=function(e,t,n,r){var a,o=[],i=new ae.Parser(e,t);if(0===(e=i.parseCard8()))for(var s=0;s<n;s++){if(r<=(a=i.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");o.push(a)}else{if(3!==e)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+e);var u,c=i.parseCard16(),l=i.parseCard16();if(0!==l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+l);for(var d=0;d<c;d++){if(a=i.parseCard8(),u=i.parseCard16(),r<=a)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");if(n<u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;l<u;l++)o.push(a);l=u}if(u!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}return o}(e,i+=t,n.numGlyphs,r.length)}r=Ce(e,i=t+a.private[1],a.private[0],o.objects);var s=(n.defaultWidthX=r.defaultWidthX,n.nominalWidthX=r.nominalWidthX,0!==r.subrs?(i=xe(e,i+r.subrs),n.subrs=i.objects,n.subrsBias=be(n.subrs)):(n.subrs=[],n.subrsBias=0),xe(e,t+a.charStrings));n.nGlyphs=s.objects.length,r=function(e,t,n,r){var a=new ae.Parser(e,t),o=(--n,[".notdef"]);if(0===(e=a.parseCard8()))for(var i=0;i<n;i+=1)s=a.parseSID(),o.push(Se(r,s));else if(1===e)for(;o.length<=n;)for(var s=a.parseSID(),u=a.parseCard8(),c=0;c<=u;c+=1)o.push(Se(r,s)),s+=1;else{if(2!==e)throw new Error("Unknown charset format "+e);for(;o.length<=n;){s=a.parseSID(),u=a.parseCard16();for(var l=0;l<=u;l+=1)o.push(Se(r,s)),s+=1}}return o}(e,t+a.charset,n.nGlyphs,o.objects);0===a.encoding?n.cffEncoding=new fe(se,r):1===a.encoding?n.cffEncoding=new fe(ue,r):n.cffEncoding=function(e,t,n){var r={},a=new ae.Parser(e,t);if(0===(e=a.parseCard8()))for(var o=a.parseCard8(),i=0;i<o;i+=1)r[u=a.parseCard8()]=i;else{if(1!==e)throw new Error("Unknown encoding format "+e);for(var s=a.parseCard8(),u=1,c=0;c<s;c+=1)for(var l=a.parseCard8(),d=a.parseCard8(),f=l;f<=l+d;f+=1)r[f]=u,u+=1}return new fe(r,n)}(e,t+a.encoding,r),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ge.GlyphSet(n);for(var u=0;u<n.nGlyphs;u+=1){var c=s.objects[u];n.glyphs.push(u,ge.cffGlyphLoader(n,u,Ne,c))}},make:function(e,t){for(var n,r=new Y.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),a=1/t.unitsPerEm,o=(a={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[a,0,0,a,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),i=1;i<e.length;i+=1)n=e.get(i),o.push(n.name);var s,u,c=[],l=(t=(r.header=new Y.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new Y.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]),Ae(a,c)),r.topDictIndex=Me(t),r.globalSubrIndex=new Y.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new Y.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var a=je(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:a})}return n}(o,c),r.charStringsIndex=function(e){for(var t=new Y.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),a=function(e){for(var t=[],n=e.path,r=(t.push({name:"width",type:"NUMBER",value:e.advanceWidth}),0),a=0,o=0;o<n.commands.length;o+=1){var i,s,u,c,l=void 0,d=void 0,f=n.commands[o];"M"===(f="Q"===f.type?{type:"C",x:f.x,y:f.y,x1:1/3*r+2/3*f.x1,y1:1/3*a+2/3*f.y1,x2:1/3*f.x+2/3*f.x1,y2:1/3*f.y+2/3*f.y1}:f).type?(l=Math.round(f.x-r),d=Math.round(f.y-a),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(f.x),a=Math.round(f.y)):"L"===f.type?(l=Math.round(f.x-r),d=Math.round(f.y-a),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(f.x),a=Math.round(f.y)):"C"===f.type&&(i=Math.round(f.x1-r),s=Math.round(f.y1-a),u=Math.round(f.x2-f.x1),c=Math.round(f.y2-f.y1),l=Math.round(f.x-f.x2),d=Math.round(f.y-f.y2),t.push({name:"dx1",type:"NUMBER",value:i}),t.push({name:"dy1",type:"NUMBER",value:s}),t.push({name:"dx2",type:"NUMBER",value:u}),t.push({name:"dy2",type:"NUMBER",value:c}),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:d}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(f.x),a=Math.round(f.y))}return t.push({name:"endchar",type:"OP",value:14}),t}(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:a})}return t}(e),r.privateDict=(l={},s=c,(u=new Y.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Re(Ee,l,s),u),r.stringIndex=function(e){var t=new Y.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(c),r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf());return a.charset=l,a.encoding=0,a.charStrings=a.charset+r.charsets.sizeOf(),a.private[1]=a.charStrings+r.charStringsIndex.sizeOf(),t=Ae(a,c),r.topDictIndex=Me(t),r}},Le={parse:function(e,t){var n={};e=new ae.Parser(e,t);return n.version=e.parseVersion(),n.fontRevision=Math.round(1e3*e.parseFixed())/1e3,n.checkSumAdjustment=e.parseULong(),n.magicNumber=e.parseULong(),A.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=e.parseUShort(),n.unitsPerEm=e.parseUShort(),n.created=e.parseLongDateTime(),n.modified=e.parseLongDateTime(),n.xMin=e.parseShort(),n.yMin=e.parseShort(),n.xMax=e.parseShort(),n.yMax=e.parseShort(),n.macStyle=e.parseUShort(),n.lowestRecPPEM=e.parseUShort(),n.fontDirectionHint=e.parseShort(),n.indexToLocFormat=e.parseShort(),n.glyphDataFormat=e.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new Y.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},De={parse:function(e,t){var n={};e=new ae.Parser(e,t);return n.version=e.parseVersion(),n.ascender=e.parseShort(),n.descender=e.parseShort(),n.lineGap=e.parseShort(),n.advanceWidthMax=e.parseUShort(),n.minLeftSideBearing=e.parseShort(),n.minRightSideBearing=e.parseShort(),n.xMaxExtent=e.parseShort(),n.caretSlopeRise=e.parseShort(),n.caretSlopeRun=e.parseShort(),n.caretOffset=e.parseShort(),e.relativeOffset+=8,n.metricDataFormat=e.parseShort(),n.numberOfHMetrics=e.parseUShort(),n},make:function(e){return new Y.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Pe={parse:function(e,t,n,r,a){for(var o,i,s=new ae.Parser(e,t),u=0;u<r;u+=1){u<n&&(o=s.parseUShort(),i=s.parseShort());var c=a.get(u);c.advanceWidth=o,c.leftSideBearing=i}},make:function(e){for(var t=new Y.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=(a=e.get(n)).advanceWidth||0,a=a.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:a})}return t}},Fe={make:function(e){for(var t=new Y.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,a=0;a<e.length;++a){var o=n.indexOf(e[a]);o<0&&(o=n.length,n+=e[a]),t.fields.push({name:"offset "+a,type:"USHORT",value:r+o}),t.fields.push({name:"length "+a,type:"USHORT",value:e[a].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){for(var n=new ae.Parser(e,t),r=n.parseULong(),a=(A.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1),n.parseULong()),o=[],i=0;i<a;i++){for(var s="",u=t+n.parseUShort(),c=n.parseUShort(),l=u;l<u+c;++l)s+=String.fromCharCode(e.getInt8(l));o.push(s)}return o}},ze={parse:function(e,t){var n={};e=new ae.Parser(e,t);return n.version=e.parseVersion(),n.numGlyphs=e.parseUShort(),1===n.version&&(n.maxPoints=e.parseUShort(),n.maxContours=e.parseUShort(),n.maxCompositePoints=e.parseUShort(),n.maxCompositeContours=e.parseUShort(),n.maxZones=e.parseUShort(),n.maxTwilightPoints=e.parseUShort(),n.maxStorage=e.parseUShort(),n.maxFunctionDefs=e.parseUShort(),n.maxInstructionDefs=e.parseUShort(),n.maxStackElements=e.parseUShort(),n.maxSizeOfInstructions=e.parseUShort(),n.maxComponentElements=e.parseUShort(),n.maxComponentDepth=e.parseUShort()),n},make:function(e){return new Y.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Be=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ue={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ve={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Ge={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},We="utf-16",He={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ze={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function qe(e,t,n){switch(e){case 0:return We;case 1:return Ze[n]||He[t];case 3:if(1===t||10===t)return We}}function Xe(e){var t,n={};for(t in e)n[e[t]]=parseInt(t);return n}function Ke(e,t,n,r,a,o){return new Y.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:o}])}function Ye(e,t){if((n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var a=0;a<r;a++)for(;a<r;a++){for(var o=0;o<n;o++)if(t[a+o]!==e[o])continue e;return a}return-1}(e,t))<0)for(var n=t.length,r=0,a=e.length;r<a;++r)t.push(e[r]);return n}var Qe={parse:function(e,t,n){for(var r={},a=new ae.Parser(e,t),o=(t=a.parseUShort(),a.parseUShort()),i=a.offset+a.parseUShort(),s=0;s<o;s++){var u=a.parseUShort(),c=a.parseUShort(),l=a.parseUShort(),d=a.parseUShort(),f=(d=Be[d]||d,a.parseUShort()),p=a.parseUShort(),h=function(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Ue[t];case 3:return Ge[t]}}(u,l,n);void 0!==(u=qe(u,c,l))&&void 0!==h&&(c=void 0,(c=u===We?M.UTF16(e,i+p,f):M.MACSTRING(e,i+p,f,u))&&((l=void 0===(l=r[d])?r[d]={}:l)[h]=c))}return 1===t&&a.parseUShort(),r},make:function(e,t){var n,r=[],a={},o=Xe(Be);for(n in e){var i=o[n];if(void 0===i&&(i=n),f=parseInt(i),isNaN(f))throw new Error('Name table entry "'+n+'" does not exist, see nameTableNames for complete list.');a[f]=e[n],r.push(f)}for(var s=Xe(Ue),u=Xe(Ge),c=[],l=[],d=0;d<r.length;d++){var f,p,h=a[f=r[d]];for(p in h){var m=h[p],v=1,y=s[p],g=Ve[y],b=qe(v,g,y),x=(void 0===(b=O.MACSTRING(m,b))&&(v=0,(y=t.indexOf(p))<0&&(y=t.length,t.push(p)),g=4,b=O.UTF16(m)),Ye(b,l));void 0!==(v=(c.push(Ke(v,g,y,f,b.length,x)),u[p]))&&(y=Ye(g=O.UTF16(m),l),c.push(Ke(3,1,v,f,g.length,y)))}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var w=new Y.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),k=0;k<c.length;k++)w.fields.push({name:"record_"+k,type:"RECORD",value:c[k]});return w.fields.push({name:"strings",type:"LITERAL",value:l}),w}},Je=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],$e={parse:function(e,t){var n={},r=new ae.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var a=0;a<10;a++)n.panose[a]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},make:function(e){return new Y.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:Je,getUnicodeRange:function(e){for(var t=0;t<Je.length;t+=1){var n=Je[t];if(e>=n.begin&&e<n.end)return t}return-1}},et={parse:function(e,t){var n={},r=new ae.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=ce.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.glyphNameIndex[a]=r.parseUShort();n.names=[];for(var o,i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]>=ce.length&&(o=r.parseChar(),n.names.push(r.parseString(o)));break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},make:function(){return new Y.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},tt=new Array(9),nt=(tt[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ne.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ne.coverage),substitute:this.parseOffset16List()}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},tt[2]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),sequences:this.parseListOfLists()}},tt[3]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),alternateSets:this.parseListOfLists()}},tt[4]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}},{sequenceIndex:ne.uShort,lookupListIndex:ne.uShort});tt[5]=function(){var e,t,n=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{substFormat:r,coverage:this.parsePointer(ne.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,nt)}}))}:2===r?{substFormat:r,coverage:this.parsePointer(ne.coverage),classDef:this.parsePointer(ne.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,nt)}}))}:3===r?(e=this.parseUShort(),t=this.parseUShort(),{substFormat:r,coverages:this.parseList(e,ne.pointer(ne.coverage)),lookupRecords:this.parseRecordList(t,nt)}):void A.assert(!1,"0x"+n.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},tt[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ne.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(nt)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ne.coverage),backtrackClassDef:this.parsePointer(ne.classDef),inputClassDef:this.parsePointer(ne.classDef),lookaheadClassDef:this.parsePointer(ne.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(nt)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ne.pointer(ne.coverage)),inputCoverage:this.parseList(ne.pointer(ne.coverage)),lookaheadCoverage:this.parseList(ne.pointer(ne.coverage)),lookupRecords:this.parseRecordList(nt)}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},tt[7]=function(){var e=this.parseUShort(),t=(e=(A.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),new ne(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:e,extension:tt[e].call(t)}},tt[8]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ne.coverage),backtrackCoverage:this.parseList(ne.pointer(ne.coverage)),lookaheadCoverage:this.parseList(ne.pointer(ne.coverage)),substitutes:this.parseUShortList()}};var rt=new Array(9);rt[1]=function(e){return 1===e.substFormat?new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.ushortList("substitute",e.substitute)))},rt[3]=function(e){return A.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.tableList("altSet",e.alternateSets,(function(e){return new Y.Table("alternateSetTable",Y.ushortList("alternate",e))}))))},rt[4]=function(e){return A.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Y.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Y.Coverage(e.coverage)}].concat(Y.tableList("ligSet",e.ligatureSets,(function(e){return new Y.Table("ligatureSetTable",Y.tableList("ligature",e,(function(e){return new Y.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Y.ushortList("component",e.components,e.components.length+1)))})))}))))};var at={parse:function(e,t){return t=(e=new ne(e,t=t||0)).parseVersion(1),A.argument(1===t||1.1===t,"Unsupported GSUB table version."),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(tt)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(tt),variations:e.parseFeatureVariationsList()}},make:function(e){return new Y.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Y.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Y.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Y.LookupList(e.lookups,rt)}])}},ot={parse:function(e,t){for(var n=new ae.Parser(e,t),r=n.parseULong(),a=(A.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong(),n.parseULong()),o={},i=0;i<a;i++){var s=n.parseTag(),u=n.parseULong(),c=n.parseULong();u=M.UTF8(e,t+u,c);o[s]=u}return o},make:function(e){var t,n=Object.keys(e).length,r="",a=16+12*n,o=new Y.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:a},{name:"numTags",type:"ULONG",value:n}]);for(t in e){var i=r.length;r+=e[t],o.fields.push({name:"tag "+t,type:"TAG",value:t}),o.fields.push({name:"offset "+t,type:"ULONG",value:a+i}),o.fields.push({name:"length "+t,type:"ULONG",value:e[t].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o}};function it(e){return Math.log(e)/Math.log(2)|0}function st(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function ut(e,t,n,r){return new Y.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function ct(e){for(var t=new Y.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),n=(t.tables=e,t.numTables=e.length,Math.pow(2,it(t.numTables))),r=(t.searchRange=16*n,t.entrySelector=it(n),t.rangeShift=16*t.numTables-t.searchRange,[]),a=[],o=t.sizeOf()+ut().sizeOf()*t.numTables;o%4!=0;)o+=1,a.push({name:"padding",type:"BYTE",value:0});for(var i=0;i<e.length;i+=1){var s=e[i],u=(A.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid."),s.sizeOf()),c=ut(s.tableName,st(s.encode()),o,u);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),a.push({name:s.tableName+" table",type:"RECORD",value:s}),o+=u,A.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,a.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(a),t}function lt(e,t,n){for(var r=0;r<t.length;r+=1){var a=e.charToGlyphIndex(t[r]);if(0<a)return e.glyphs.get(a).getMetrics()}return n}var dt=function(e){for(var t,n=[],r=[],a=[],o=[],i=[],s=[],u=[],c=0,l=0,d=0,f=0,p=0,h=0;h<e.glyphs.length;h+=1){var m=e.glyphs.get(h),v=0|m.unicode;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+h+"): advanceWidth is not a number.");if((v<t||void 0===t)&&0<v&&(t=v),c<v&&(c=v),(v=$e.getUnicodeRange(v))<32)l|=1<<v;else if(v<64)d|=1<<v-32;else if(v<96)f|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<v-96}".notdef"!==m.name&&(v=m.getMetrics(),n.push(v.xMin),r.push(v.yMin),a.push(v.xMax),o.push(v.yMax),s.push(v.leftSideBearing),u.push(v.rightSideBearing),i.push(m.advanceWidth))}var y,g={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(i),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,u)},b=(g.ascender=e.ascender,g.descender=e.descender,Le.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:g.xMin,yMin:g.yMin,xMax:g.xMax,yMax:g.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp})),x=De.make({ascender:g.ascender,descender:g.descender,advanceWidthMax:g.advanceWidthMax,minLeftSideBearing:g.minLeftSideBearing,minRightSideBearing:g.minRightSideBearing,xMaxExtent:g.maxLeftSideBearing+(g.xMax-g.xMin),numberOfHMetrics:e.glyphs.length}),w=ze.make(e.glyphs.length),k=$e.make({xAvgCharWidth:Math.round(g.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:l,ulUnicodeRange2:d,ulUnicodeRange3:f,ulUnicodeRange4:p,fsSelection:e.tables.os2.fsSelection,sTypoAscender:g.ascender,sTypoDescender:g.descender,sTypoLineGap:0,usWinAscent:g.yMax,usWinDescent:Math.abs(g.yMin),ulCodePageRange1:1,sxHeight:lt(e,"xyvw",{yMax:Math.round(g.ascender/2)}).yMax,sCapHeight:lt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",g).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),S=Pe.make(e.glyphs),_=oe.make(e.glyphs),T=(R=e.getEnglishName("fontFamily"))+" "+(A=e.getEnglishName("fontSubfamily")),E=(E=e.getEnglishName("postScriptName"))||R.replace(/\s/g,"")+"-"+A,C={};for(y in e.names)C[y]=e.names[y];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+T}),C.postScriptName||(C.postScriptName={en:E}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);var I=[],N=Qe.make(C,I),j=(I=0<I.length?Fe.make(I):void 0,et.make()),R=(T=Oe.make(e.glyphs,{version:e.getEnglishName("version"),fullName:T,familyName:R,weightName:A,postScriptName:E,unitsPerEm:e.unitsPerEm,fontBBox:[0,g.yMin,g.ascender,g.advanceWidthMax]}),e.metas&&0<Object.keys(e.metas).length?ot.make(e.metas):void 0),A=[b,x,w,k,N,_,j,T,S];I&&A.push(I),e.tables.gsub&&A.push(at.make(e.tables.gsub)),R&&A.push(R);for(var M=st((E=ct(A)).encode()),O=E.fields,L=!1,D=0;D<O.length;D+=1)if("head table"===O[D].name){O[D].value.checkSumAdjustment=2981146554-M,L=!0;break}if(L)return E;throw new Error("Could not find head table with checkSum to adjust.")};function ft(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,o=e[a].tag;if(o===t)return a;o<t?n=1+a:r=a-1}return-n-1}function pt(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,o=e[a];if(o===t)return a;o<t?n=1+a:r=a-1}return-n-1}function ht(e,t){for(var n=0,r=e.length-1;n<=r;){var a,o=n+r>>>1,i=(a=e[o]).start;if(i===t)return a;i<t?n=1+o:r=o-1}if(0<n)return t>(a=e[n-1]).end?0:a}function mt(e,t){this.font=e,this.tableName=t}function vt(e){mt.call(this,e,"gpos")}function yt(e){mt.call(this,e,"gsub")}function gt(e,t,n){for(var r=e.subtables,a=0;a<r.length;a++){var o=r[a];if(o.substFormat===t)return o}if(n)return r.push(n),n}function bt(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function xt(e,t){if(!e)throw t}function wt(e,t,n,r,a){var o=0<(t&r)?(o=e.parseByte(),n+(o=0==(t&a)?-o:o)):0<(t&a)?n:n+e.parseShort();return o}function kt(e,t,n){var r,a=new ae.Parser(t,n);if(e.numberOfContours=a.parseShort(),e._xMin=a.parseShort(),e._yMin=a.parseShort(),e._xMax=a.parseShort(),e._yMax=a.parseShort(),0<e.numberOfContours){for(var o=e.endPointIndices=[],i=0;i<e.numberOfContours;i+=1)o.push(a.parseUShort());e.instructionLength=a.parseUShort(),e.instructions=[];for(var s=0;s<e.instructionLength;s+=1)e.instructions.push(a.parseByte());for(var u=o[o.length-1]+1,c=[],l=0;l<u;l+=1)if(r=a.parseByte(),c.push(r),0<(8&r))for(var d=a.parseByte(),f=0;f<d;f+=1)c.push(r),l+=1;if(A.argument(c.length===u,"Bad flags."),0<o.length){var p,h=[];if(0<u){for(var m=0;m<u;m+=1)r=c[m],(p={}).onCurve=!!(1&r),p.lastPointOfContour=0<=o.indexOf(m),h.push(p);for(var v=0,y=0;y<u;y+=1)r=c[y],(p=h[y]).x=wt(a,r,v,2,16),v=p.x;for(var g=0,b=0;b<u;b+=1)r=c[b],(p=h[b]).y=wt(a,r,g,4,32),g=p.y}e.points=h}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){c=a.parseUShort();var w={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&c)?0<(2&c)?(w.dx=a.parseShort(),w.dy=a.parseShort()):w.matchedPoints=[a.parseUShort(),a.parseUShort()]:0<(2&c)?(w.dx=a.parseChar(),w.dy=a.parseChar()):w.matchedPoints=[a.parseByte(),a.parseByte()],0<(8&c)?w.xScale=w.yScale=a.parseF2Dot14():0<(64&c)?(w.xScale=a.parseF2Dot14(),w.yScale=a.parseF2Dot14()):0<(128&c)&&(w.xScale=a.parseF2Dot14(),w.scale01=a.parseF2Dot14(),w.scale10=a.parseF2Dot14(),w.yScale=a.parseF2Dot14()),e.components.push(w),x=!!(32&c)}if(256&c){e.instructionLength=a.parseUShort(),e.instructions=[];for(var k=0;k<e.instructionLength;k+=1)e.instructions.push(a.parseByte())}}}function St(e,t){for(var n=[],r=0;r<e.length;r+=1){var a=e[r];a={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};n.push(a)}return n}function _t(e){var t=new N;if(e)for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];n.push(a),a.lastPointOfContour&&(t.push(n),n=[])}return A.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var a,o=n[r],i=o[o.length-1],s=o[0];i.onCurve?t.moveTo(i.x,i.y):s.onCurve?t.moveTo(s.x,s.y):(a={x:.5*(i.x+s.x),y:.5*(i.y+s.y)},t.moveTo(a.x,a.y));for(var u=0;u<o.length;++u){var c,l=i;i=s,s=o[(u+1)%o.length];i.onCurve?t.lineTo(i.x,i.y):(c=s,l.onCurve||(i.x,l.x,i.y,l.y),s.onCurve||(c={x:.5*(i.x+s.x),y:.5*(i.y+s.y)}),t.quadraticCurveTo(i.x,i.y,c.x,c.y))}t.closePath()}return t}function Tt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],a=e.get(r.glyphIndex);if(a.getPath(),a.points){var o=void 0;if(void 0===r.matchedPoints)o=St(a.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>a.points.length-1)throw Error("Matched points out of range in "+t.name);var i=t.points[r.matchedPoints[0]],s=St([s=a.points[r.matchedPoints[1]]],r={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0})[0];r.dx=i.x-s.x,r.dy=i.y-s.y,o=St(a.points,r)}t.points=t.points.concat(o)}}return _t(t.points)}(vt.prototype=mt.prototype={searchTag:ft,binSearch:pt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e?this.font.tables[this.tableName]=this.createDefaultTable():t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n,r=this.getTable(t);if(r)return n=r.scripts,0<=(r=ft(r.scripts,e=e||"DFLT"))?n[r].script:t?(n.splice(-1-r,0,t={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),t.script):void 0},getLangSysTable:function(e,t,n){var r;if(e=this.getScriptTable(e,n))return t&&"dflt"!==t&&"DFLT"!==t?0<=(r=ft(e.langSysRecords,t))?e.langSysRecords[r].langSys:n?(e.langSysRecords.splice(-1-r,0,n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),n.langSys):void 0:e.defaultLangSys},getFeatureTable:function(e,t,n,r){if(e=this.getLangSysTable(e,t,r)){for(var a,o=e.featureIndexes,i=this.font.tables[this.tableName].features,s=0;s<o.length;s++)if((a=i[o[s]]).tag===n)return a.feature;if(r)return t=i.length,A.assert(0===t||n>=i[t-1].tag,"Features must be added in alphabetical order."),i.push(a={tag:n,feature:{params:0,lookupListIndexes:[]}}),o.push(t),a.feature}},getLookupTables:function(e,t,n,r,a){var o=[];if(e=this.getFeatureTable(e,t,n,a)){for(var i,s=e.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<s.length;c++)(i=u[s[c]]).lookupType===r&&o.push(i);if(0===o.length&&a)return t=u.length,u.push(i={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0}),s.push(t),[i]}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=ht(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=pt(e.glyphs,t);return 0<=n?n:-1;case 2:return(n=ht(e.ranges,t))?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var a=n[r],o=a.start,i=a.end,s=o;s<=i;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},vt.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var a=e[r].subtables,o=0;o<a.length;o++){var i=a[o],s=this.getCoverageIndex(i.coverage,t);if(!(s<0))switch(i.posFormat){case 1:for(var u=i.pairSets[s],c=0;c<u.length;c++){var l=u[c];if(l.secondGlyph===n)return l.value1&&l.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(i.classDef1,t),f=this.getGlyphClass(i.classDef2,n);return(d=i.classRecords[d][f]).value1&&d.value1.xAdvance||0}}return 0},vt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(yt.prototype=mt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},yt.prototype.getSingle=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,1),o=0;o<a.length;o++)for(var i=a[o].subtables,s=0;s<i.length;s++){var u=i[s],c=this.expandCoverage(u.coverage),l=void 0;if(1===u.substFormat){var d=u.deltaGlyphId;for(l=0;l<c.length;l++){var f=c[l];r.push({sub:f,by:f+d})}}else{var p=u.substitute;for(l=0;l<c.length;l++)r.push({sub:c[l],by:p[l]})}}return r},yt.prototype.getAlternates=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,3),o=0;o<a.length;o++)for(var i=a[o].subtables,s=0;s<i.length;s++)for(var u=i[s],c=this.expandCoverage(u.coverage),l=u.alternateSets,d=0;d<c.length;d++)r.push({sub:c[d],by:l[d]});return r},yt.prototype.getLigatures=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,4),o=0;o<a.length;o++)for(var i=a[o].subtables,s=0;s<i.length;s++)for(var u=i[s],c=this.expandCoverage(u.coverage),l=u.ligatureSets,d=0;d<c.length;d++)for(var f=c[d],p=l[d],h=0;h<p.length;h++){var m=p[h];r.push({sub:[f].concat(m.components),by:m.ligGlyph})}return r},yt.prototype.addSingle=function(e,t,n,r){n=gt(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),A.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.substitute.splice(e,0,0)),n.substitute[e]=t.by},yt.prototype.addAlternate=function(e,t,n,r){n=gt(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),A.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.alternateSets.splice(e,0,0)),n.alternateSets[e]=t.by},yt.prototype.addLigature=function(e,t,n,r){(r=(n=this.getLookupTables(n,r,e,4,!0)[0]).subtables[0])||(n.subtables[0]=r={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),A.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format),e=t.sub[0];var a=t.sub.slice(1);n={ligGlyph:t.by,components:a};if(0<=(t=this.binSearch(r.coverage.glyphs,e))){for(var o=r.ligatureSets[t],i=0;i<o.length;i++)if(function(e,t){var n=e.length;if(n===t.length){for(var r=0;r<n;r++)if(e[r]!==t[r])return;return 1}}(o[i].components,a))return;o.push(n)}else r.coverage.glyphs.splice(t=-1-t,0,e),r.ligatureSets.splice(t,0,[n])},yt.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},yt.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var Et={getPath:_t,parse:function(e,t,n,r){for(var a=new ge.GlyphSet(r),o=0;o<n.length-1;o+=1){var i=n[o];i!==n[o+1]?a.push(o,ge.ttfGlyphLoader(r,o,kt,e,t+i,Tt)):a.push(o,ge.glyphLoader(r,o))}return a}};function Ct(e){this.font=e,this.getCommands=function(e){return Et.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function It(e){return e}function Nt(e){return Math.sign(e)*Math.round(Math.abs(e))}function jt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Rt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function At(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Mt(e){return Math.sign(e)*Math.floor(Math.abs(e))}function Ot(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var Lt={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var a,o,i,s,u,c,l;if(!r||r===this)return a=e.xo-t.xo,o=e.xo-n.xo,u=t.x-t.xo,c=n.x-n.xo,0===(l=(i=Math.abs(a))+(s=Math.abs(o)))?void(e.x=e.xo+(u+c)/2):void(e.x=e.xo+(u*s+c*i)/l);a=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(l=(i=Math.abs(a))+(s=Math.abs(o)))?Lt.setRelative(e,e,(u+c)/2,r,!0):Lt.setRelative(e,e,(u*s+c*i)/l,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,a){var o,i;r&&r!==this?(o=a?t.xo:t.x,i=a?t.yo:t.y,o+=n*r.x,i+=n*r.y,e.x=o+(e.y-i)/r.normalSlope):e.x=(a?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Dt={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var a,o,i,s,u,c,l;if(!r||r===this)return a=e.yo-t.yo,o=e.yo-n.yo,u=t.y-t.yo,c=n.y-n.yo,0===(l=(i=Math.abs(a))+(s=Math.abs(o)))?void(e.y=e.yo+(u+c)/2):void(e.y=e.yo+(u*s+c*i)/l);a=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),u=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(l=(i=Math.abs(a))+(s=Math.abs(o)))?Dt.setRelative(e,e,(u+c)/2,r,!0):Dt.setRelative(e,e,(u*s+c*i)/l,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,a){var o,i;r&&r!==this?(o=a?t.xo:t.x,i=a?t.yo:t.y,o+=n*r.x,i+=n*r.y,e.y=i+r.normalSlope*(e.x-o)):e.y=(a?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Pt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Ft(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1===(e/=n)&&0===t?Lt:0===e&&1===t?Dt:new Pt(e,t)}function zt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Lt),Object.freeze(Dt),Pt.prototype.distance=function(e,t,n,r){return this.x*Lt.distance(e,t,n,r)+this.y*Dt.distance(e,t,n,r)},Pt.prototype.interpolate=function(e,t,n,r){var a=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),i=(t=r.distance(t,t,!1,!0),n=r.distance(n,n,!1,!0),(a=Math.abs(a))+(o=Math.abs(o)));0===i?this.setRelative(e,e,(t+n)/2,r,!0):this.setRelative(e,e,(t*o+n*a)/i,r,!0)},Pt.prototype.setRelative=function(e,t,n,r,a){var o=a?t.xo:t.x,i=(a=a?t.yo:t.y,t=o+n*(r=r||this).x,o=a+n*r.y,a=r.normalSlope,n=this.slope,r=e.x,e.y);e.x=(n*r-a*t+o-i)/(n-a),e.y=n*(e.x-r)+i},Pt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},zt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},zt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Bt=Object.freeze(new zt(0,0)),Ut={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Vt(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Lt,this.round=Nt}}function Gt(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new zt(0,0)}function Wt(e,t){var n,r=e.prog,a=e.ip,o=1;do{if(88===(n=r[++a]))o++;else if(89===n)o--;else if(64===n)a+=r[a+1]+1;else if(65===n)a+=2*r[a+1]+1;else if(176<=n&&n<=183)a+=n-176+1;else if(184<=n&&n<=191)a+=2*(n-184+1);else if(t&&1===o&&27===n)break}while(0<o);e.ip=a}function Ht(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function Zt(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function qt(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function Xt(e,n){var r,a=(o=n.stack).pop(),o=o.pop(),i=n.z2[a],s=n.z1[o];t.DEBUG&&console.log("SPVTL["+e+"]",a,o),a=e?(r=i.y-s.y,s.x-i.x):(r=s.x-i.x,s.y-i.y),n.pv=n.dpv=Ft(r,a)}function Kt(e,n){var r,a=(o=n.stack).pop(),o=o.pop(),i=n.z2[a],s=n.z1[o];t.DEBUG&&console.log("SFVTL["+e+"]",a,o),a=e?(r=i.y-s.y,s.x-i.x):(r=s.x-i.x,s.y-i.y),n.fv=Ft(r,a)}function Yt(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Qt(e,n){var r=n.stack.pop(),a=n.z0[r],o=n.fv,i=n.pv,s=(t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r),i.distance(a,Bt));e&&(s=n.round(s)),o.setRelative(a,Bt,s,i),o.touch(a),n.rp0=n.rp1=r}function Jt(e,n){var r,a,o,i=n.z2,s=i.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var u=0;u<s;u++)r=i[u],e.touched(r)||(a=r.prevTouched(e))!==r&&(a===(o=r.nextTouched(e))&&e.setRelative(r,r,e.distance(a,a,!1,!0),e,!0),e.interpolate(r,a,o,e))}function $t(e,n){for(var r=n.stack,a=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[a],i=n.fv,s=n.pv,u=n.loop,c=n.z2;u--;){var l=r.pop(),d=c[l],f=s.distance(o,o,!1,!0);i.setRelative(d,d,f,s),i.touch(d),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-u)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",l)}n.loop=1}function en(e,n){for(var r=n.stack,a=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[a],i=n.fv,s=n.pv,u=(a=r.pop(),n.z2[n.contours[a]]),c=u,l=(t.DEBUG&&console.log(n.step,"SHC["+e+"]",a),s.distance(o,o,!1,!0));c!==o&&i.setRelative(c,c,l,s),(c=c.nextPointOnContour)!==u;);}function tn(e,n){var r,a,o=n.stack,i=e?n.rp1:n.rp2,s=(i=(e?n.z0:n.z1)[i],n.fv),u=n.pv;o=o.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",o),o){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var c=u.distance(i,i,!1,!0),l=r.length-2,d=0;d<l;d++)a=r[d],s.setRelative(a,a,c,u)}function nn(e,n){var r=(a=n.stack).pop()/64,a=a.pop(),o=n.z1[a],i=n.z0[n.rp0],s=n.fv,u=n.pv;s.setRelative(o,i,r,u),s.touch(o),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",r,a),n.rp1=n.rp0,n.rp2=a,e&&(n.rp0=a)}function rn(e,n){var r=(a=n.stack).pop(),a=a.pop(),o=n.z0[a],i=n.fv,s=n.pv,u=n.cvt[r];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",r,"(",u,")",a),r=s.distance(o,Bt);e&&(Math.abs(r-u)<n.cvCutIn&&(r=u),r=n.round(r)),i.setRelative(o,Bt,r,s),0===n.zp0&&(o.xo=o.x,o.yo=o.y),i.touch(o),n.rp0=n.rp1=a}function an(e,n){var r=n.stack,a=r.pop(),o=n.z2[a];t.DEBUG&&console.log(n.step,"GC["+e+"]",a),r.push(64*n.dpv.distance(o,Bt,e,!1))}function on(e,n){var r=(a=n.stack).pop(),a=a.pop(),o=n.z1[r],i=n.z0[a];i=n.dpv.distance(i,o,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",r,a,"->",i),n.stack.push(Math.round(64*i))}function sn(e,n){var r=n.stack,a=r.pop(),o=n.fv,i=n.pv,s=n.ppem,u=n.deltaBase+16*(e-1),c=n.deltaShift,l=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",a,r);for(var d=0;d<a;d++){var f=r.pop(),p=r.pop();u+((240&p)>>4)===s&&(0<=(p=(15&p)-8)&&p++,t.DEBUG&&console.log(n.step,"DELTAPFIX",f,"by",p*c),f=l[f],o.setRelative(f,f,p*c,i))}}function un(e,n){var r=n.stack,a=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(a/64))}function cn(e,n){var r=n.stack,a=r.pop(),o=n.ppem,i=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",a,r);for(var u=0;u<a;u++){var c=r.pop(),l=r.pop();i+((240&l)>>4)===o&&(0<=(l=(15&l)-8)&&l++,l*=s,t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",l),n.cvt[c]+=l)}}function ln(e,n){var r,a=(o=n.stack).pop(),o=o.pop(),i=n.z2[a],s=n.z1[o];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",a,o),a=e?(r=i.y-s.y,s.x-i.x):(r=s.x-i.x,s.y-i.y),n.dpv=Ft(r,a)}function dn(e,n){var r=n.stack,a=n.prog,o=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var i=0;i<e;i++)r.push(a[++o]);n.ip=o}function fn(e,n){var r=n.ip,a=n.prog,o=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var i=0;i<e;i++){var s=a[++r]<<8|a[++r];32768&s&&(s=-(1+(65535^s))),o.push(s)}n.ip=r}function pn(e,n,r,a,o,i){var s,u,c=i.stack,l=e&&c.pop(),d=(c=c.pop(),i.rp0),f=(d=i.z0[d],i.z1[c]),p=i.minDis,h=i.fv,m=i.dpv,v=s=m.distance(f,d,!0,!0),y=0<=v?1:-1;v=Math.abs(v),e&&(u=i.cvt[l],a&&Math.abs(v-u)<i.cvCutIn&&(v=u)),r&&v<p&&(v=p),a&&(v=i.round(v)),h.setRelative(f,d,y*v,m),h.touch(f),t.DEBUG&&console.log(i.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(a?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?l+"("+i.cvt[l]+","+u+")":"",c,"(d =",s,"->",y*v,")"),i.rp1=i.rp0,i.rp2=c,n&&(i.rp0=c)}Ct.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,a=this._prepState;if(!a||a.ppem!==n){var o=this._fpgmState;if(!o){Vt.prototype=Ut,(o=this._fpgmState=new Vt("fpgm",r.tables.fpgm)).funcs=[],o.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{vn(o)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Vt.prototype=o,(a=this._prepState=new Vt("prep",r.tables.prep)).ppem=n;var i=r.tables.cvt;if(i)for(var s=a.cvt=new Array(i.length),u=n/r.unitsPerEm,c=0;c<i.length;c++)s[c]=i[c]*u;else a.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),a.step=-1);try{vn(a)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return hn(e,a)}catch(e){this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var hn=function(e,n){var r=n.ppem/n.font.unitsPerEm,a=r,o=e.components;if(Vt.prototype=n,o){for(var i=n.font,s=[],u=[],c=0;c<o.length;c++){var l=o[c],d=i.glyphs.get(l.glyphIndex),f=new Vt("glyf",d.instructions);t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),f.step=-1),mn(d,f,r,a);for(var p=Math.round(l.dx*r),h=Math.round(l.dy*a),m=f.gZone,v=f.contours,y=0;y<m.length;y++){var g=m[y];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+p,g.yo=g.y=g.y+h}var b=s.length;s.push.apply(s,m);for(var x=0;x<v.length;x++)u.push(v[x]+b)}e.instructions&&!f.inhibitGridFit&&((f=new Vt("glyf",e.instructions)).gZone=f.z0=f.z1=f.z2=s,f.contours=u,s.push(new zt(0,0),new zt(Math.round(e.advanceWidth*r),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),f.step=-1),vn(f),s.length-=2)}else f=new Vt("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),f.step=-1),mn(e,f,r,a),s=f.gZone;return s},mn=function(e,n,r,a){for(var o,i,s,u=e.points||[],c=u.length,l=n.gZone=n.z0=n.z1=n.z2=[],d=n.contours=[],f=0;f<c;f++)o=u[f],l[f]=new zt(o.x*r,o.y*a,o.lastPointOfContour,o.onCurve);for(var p=0;p<c;p++)o=l[p],i||(i=o,d.push(p)),o.lastPointOfContour?((o.nextPointOnContour=i).prevPointOnContour=o,i=void 0):(s=l[p+1],(o.nextPointOnContour=s).prevPointOnContour=o);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var h=0;h<c;h++)console.log(h,l[h].x,l[h].y)}if(l.push(new zt(0,0),new zt(Math.round(e.advanceWidth*r),0)),vn(n),l.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var m=0;m<c;m++)console.log(m,l[m].x,l[m].y)}}},vn=function(e){var n=e.prog;if(n){var r,a=n.length;for(e.ip=0;e.ip<a;e.ip++){if(t.DEBUG&&e.step++,!(r=yn[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},yn=[Ht.bind(void 0,Dt),Ht.bind(void 0,Lt),Zt.bind(void 0,Dt),Zt.bind(void 0,Lt),qt.bind(void 0,Dt),qt.bind(void 0,Lt),Xt.bind(void 0,0),Xt.bind(void 0,1),Kt.bind(void 0,0),Kt.bind(void 0,1),function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=Ft(r,n)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=Ft(r,n)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=(i=e.stack).pop(),r=i.pop(),a=i.pop(),o=i.pop(),i=i.pop(),s=e.z0,u=e.z1,c=s[n],l=(s=s[r],u[a]),d=(u=u[o],e=e.z2[i],n=(t.DEBUG&&console.log("ISECT[], ",n,r,a,o,i),c.x),r=c.y,a=s.x,o=s.y,i=l.x,c=l.y,s=u.x,u=(n-a)*(c-(l=u.y))-(r-o)*(i-s),n*o-r*a),f=i*l-c*s;e.x=(d*(i-s)-f*(n-a))/u,e.y=(d*(c-l)-f*(r-o))/u},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||Gt(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||Gt(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||Gt(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n){case 0:e.tZone||Gt(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Nt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Rt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),Wt(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},Yt,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(a)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=(a=e.stack).pop(),r=a.pop(),a=(t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r),e.ip),o=e.prog;e.prog=e.funcs[n];for(var i=0;i<r;i++)vn(e),t.DEBUG&&console.log(++e.step,i+1<r?"next loopcall":"done loopcall",i);e.ip=a,e.prog=o},function(e){var n=e.stack.pop(),r=(t.DEBUG&&console.log(e.step,"CALL[]",n),e.ip),a=e.prog;e.prog=e.funcs[n],vn(e),e.ip=r,e.prog=a,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,a=e.ip,o=(n=n.pop(),a);for(t.DEBUG&&console.log(e.step,"FDEF[]",n);45!==r[++a];);e.ip=a,e.funcs[n]=r.slice(o+1,a)},void 0,Qt.bind(void 0,0),Qt.bind(void 0,1),Jt.bind(void 0,Dt),Jt.bind(void 0,Lt),$t.bind(void 0,0),$t.bind(void 0,1),en.bind(void 0,0),en.bind(void 0,1),tn.bind(void 0,0),tn.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,a=e.fv,o=n.pop()/64,i=e.z2;r--;){var s=n.pop(),u=i[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,o),a.setRelative(u,u,o),a.touch(u)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,a=e.rp2,o=e.loop,i=e.z0[r],s=e.z1[a],u=e.fv,c=e.dpv,l=e.z2;o--;){var d=n.pop(),f=l[d];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"IP[]",d,r,"<->",a),u.interpolate(f,i,s,c),u.touch(f)}e.loop=1},nn.bind(void 0,0),nn.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,a=e.z0[r],o=e.loop,i=e.fv,s=e.pv,u=e.z1;o--;){var c=n.pop(),l=u[c];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),i.setRelative(l,a,0,s),i.touch(l)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=jt},rn.bind(void 0,0),rn.bind(void 0,1),function(e){var n=e.prog,r=e.ip,a=e.stack,o=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var i=0;i<o;i++)a.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,a=e.stack,o=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var i=0;i<o;i++){var s=r[++n]<<8|r[++n];32768&s&&(s=-(1+(65535^s))),a.push(s)}e.ip=n},function(e){var n=e.stack,r=(r=e.store)||(e.store=[]),a=n.pop();n=n.pop();t.DEBUG&&console.log(e.step,"WS",a,n),r[n]=a},function(e){var n=e.stack,r=e.store,a=n.pop();t.DEBUG&&console.log(e.step,"RS",a),e=r&&r[a]||0;n.push(e)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},an.bind(void 0,0),an.bind(void 0,1),void 0,on.bind(void 0,0),on.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,a),n.push(a<r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,a),n.push(a<=r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,a),n.push(r<a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,a),n.push(r<=a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,a),n.push(r===a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,a),n.push(r!==a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(Wt(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,a),n.push(r&&a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,a),n.push(r||a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},sn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,a),n.push(a+r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,a),n.push(a-r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,a),n.push(64*a/r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,a),n.push(a*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},un.bind(void 0,0),un.bind(void 0,1),un.bind(void 0,2),un.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm},sn.bind(void 0,2),sn.bind(void 0,3),cn.bind(void 0,1),cn.bind(void 0,2),cn.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Ot,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e.srThreshold=0===(r&=15)?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Ot,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e.srThreshold=0===(r&=15)?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=It},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=At},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Mt},Yt,Yt,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},ln.bind(void 0,0),ln.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),a=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(a=35),32&r&&(a|=4096),n.push(a)},void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(a),n.push(r),n.push(o)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,a),n.push(Math.max(a,r))},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,a),n.push(Math.min(a,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,dn.bind(void 0,1),dn.bind(void 0,2),dn.bind(void 0,3),dn.bind(void 0,4),dn.bind(void 0,5),dn.bind(void 0,6),dn.bind(void 0,7),dn.bind(void 0,8),fn.bind(void 0,1),fn.bind(void 0,2),fn.bind(void 0,3),fn.bind(void 0,4),fn.bind(void 0,5),fn.bind(void 0,6),fn.bind(void 0,7),fn.bind(void 0,8),pn.bind(void 0,0,0,0,0,0),pn.bind(void 0,0,0,0,0,1),pn.bind(void 0,0,0,0,0,2),pn.bind(void 0,0,0,0,0,3),pn.bind(void 0,0,0,0,1,0),pn.bind(void 0,0,0,0,1,1),pn.bind(void 0,0,0,0,1,2),pn.bind(void 0,0,0,0,1,3),pn.bind(void 0,0,0,1,0,0),pn.bind(void 0,0,0,1,0,1),pn.bind(void 0,0,0,1,0,2),pn.bind(void 0,0,0,1,0,3),pn.bind(void 0,0,0,1,1,0),pn.bind(void 0,0,0,1,1,1),pn.bind(void 0,0,0,1,1,2),pn.bind(void 0,0,0,1,1,3),pn.bind(void 0,0,1,0,0,0),pn.bind(void 0,0,1,0,0,1),pn.bind(void 0,0,1,0,0,2),pn.bind(void 0,0,1,0,0,3),pn.bind(void 0,0,1,0,1,0),pn.bind(void 0,0,1,0,1,1),pn.bind(void 0,0,1,0,1,2),pn.bind(void 0,0,1,0,1,3),pn.bind(void 0,0,1,1,0,0),pn.bind(void 0,0,1,1,0,1),pn.bind(void 0,0,1,1,0,2),pn.bind(void 0,0,1,1,0,3),pn.bind(void 0,0,1,1,1,0),pn.bind(void 0,0,1,1,1,1),pn.bind(void 0,0,1,1,1,2),pn.bind(void 0,0,1,1,1,3),pn.bind(void 0,1,0,0,0,0),pn.bind(void 0,1,0,0,0,1),pn.bind(void 0,1,0,0,0,2),pn.bind(void 0,1,0,0,0,3),pn.bind(void 0,1,0,0,1,0),pn.bind(void 0,1,0,0,1,1),pn.bind(void 0,1,0,0,1,2),pn.bind(void 0,1,0,0,1,3),pn.bind(void 0,1,0,1,0,0),pn.bind(void 0,1,0,1,0,1),pn.bind(void 0,1,0,1,0,2),pn.bind(void 0,1,0,1,0,3),pn.bind(void 0,1,0,1,1,0),pn.bind(void 0,1,0,1,1,1),pn.bind(void 0,1,0,1,1,2),pn.bind(void 0,1,0,1,1,3),pn.bind(void 0,1,1,0,0,0),pn.bind(void 0,1,1,0,0,1),pn.bind(void 0,1,1,0,0,2),pn.bind(void 0,1,1,0,0,3),pn.bind(void 0,1,1,0,1,0),pn.bind(void 0,1,1,0,1,1),pn.bind(void 0,1,1,0,1,2),pn.bind(void 0,1,1,0,1,3),pn.bind(void 0,1,1,1,0,0),pn.bind(void 0,1,1,1,0,1),pn.bind(void 0,1,1,1,0,2),pn.bind(void 0,1,1,1,0,3),pn.bind(void 0,1,1,1,1,0),pn.bind(void 0,1,1,1,1,1),pn.bind(void 0,1,1,1,1,2),pn.bind(void 0,1,1,1,1,3)],gn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function bn(e){(e=e||{}).empty||(xt(e.familyName,"When creating a new Font object, familyName is required."),xt(e.styleName,"When creating a new Font object, styleName is required."),xt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),xt(e.ascender,"When creating a new Font object, ascender is required."),xt(e.descender,"When creating a new Font object, descender is required."),xt(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ge.GlyphSet(this,e.glyphs||[]),this.encoding=new le(this),this.position=new vt(this),this.substitution=new yt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new Ct(this):void 0)}})}function xn(e,t){var n,r=JSON.stringify(e),a=256;for(n in t){var o=parseInt(n);if(o&&!(o<256)){if(JSON.stringify(t[n])===r)return o;a<=o&&(a=o+1)}}return t[a]=e,a}bn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},bn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},bn.prototype.charToGlyph=function(e){return e=this.charToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},bn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=gn(e),r=[],a=0;a<n.length;a+=1){var o=n[a];r.push(this.charToGlyphIndex(o))}var i=r.length;if(t.features){e=t.script||this.substitution.getDefaultScriptName();var s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",e,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",e,t.language)));for(var u=0;u<i;u+=1)for(var c=0;c<s.length;c++){for(var l=s[c],d=l.sub,f=d.length,p=0;p<f&&d[p]===r[u+p];)p++;p===f&&(r.splice(u,f,l.by),i=i-f+1)}}for(var h=new Array(i),m=this.glyphs.get(0),v=0;v<i;v+=1)h[v]=this.glyphs.get(r[v])||m;return h},bn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},bn.prototype.nameToGlyph=function(e){return e=this.nameToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},bn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},bn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},bn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},bn.prototype.forEachGlyph=function(e,t,n,r,a,o){t=void 0!==t?t:0,n=void 0!==n?n:0,a=a||this.defaultRenderOptions;var i,s=1/this.unitsPerEm*(r=void 0!==r?r:72),u=this.stringToGlyphs(e,a);a.kerning&&(e=a.script||this.position.getDefaultScriptName(),i=this.position.getKerningTables(e,a.language));for(var c=0;c<u.length;c+=1){var l=u[c];o.call(this,l,t,n,r,a),l.advanceWidth&&(t+=l.advanceWidth*s),a.kerning&&c<u.length-1&&(t+=(i?this.position.getKerningValue(i,l.index,u[c+1].index):this.getKerningValue(l,u[c+1]))*s),a.letterSpacing?t+=a.letterSpacing*r:a.tracking&&(t+=a.tracking/1e3*r)}return t},bn.prototype.getPath=function(e,t,n,r,a){var o=new N;return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){e=e.getPath(t,n,r,a,this),o.extend(e)})),o},bn.prototype.getPaths=function(e,t,n,r,a){var o=[];return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){e=e.getPath(t,n,r,a,this),o.push(e)})),o},bn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},bn.prototype.draw=function(e,t,n,r,a,o){this.getPath(t,n,r,a,o).draw(e)},bn.prototype.drawPoints=function(e,t,n,r,a,o){this.forEachGlyph(t,n,r,a,o,(function(t,n,r,a){t.drawPoints(e,n,r,a)}))},bn.prototype.drawMetrics=function(e,t,n,r,a,o){this.forEachGlyph(t,n,r,a,o,(function(t,n,r,a){t.drawMetrics(e,n,r,a)}))},bn.prototype.getEnglishName=function(e){if(e=this.names[e])return e.en},bn.prototype.validate=function(){var e=this;function t(t){(t=e.getEnglishName(t))&&t.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},bn.prototype.toTables=function(){return dt(this)},bn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},bn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},bn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily"),o=(t=t||n.replace(/\s/g,"")+"-"+a+".otf",this.toArrayBuffer());"undefined"!=typeof window?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(o);n=new Blob([n],{type:"font/opentype"});t.write(n),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}))):(n=e("fs"),a=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),a=0;a<t.length;++a)t[a]=n[a];return t}(o),n.writeFileSync(t,a))},bn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},bn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},bn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var wn={make:function(e,t){var n=new Y.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var r,a,o,i=0;i<e.axes.length;i++)n.fields=n.fields.concat((r=i,t,o=xn((a=e.axes[i]).name,t),[{name:"tag_"+r,type:"TAG",value:a.tag},{name:"minValue_"+r,type:"FIXED",value:a.minValue<<16},{name:"defaultValue_"+r,type:"FIXED",value:a.defaultValue<<16},{name:"maxValue_"+r,type:"FIXED",value:a.maxValue<<16},{name:"flags_"+r,type:"USHORT",value:0},{name:"nameID_"+r,type:"USHORT",value:o}]));for(var s=0;s<e.instances.length;s++)n.fields=n.fields.concat(function(e,t,n,r){for(var a=[{name:"nameID_"+e,type:"USHORT",value:xn(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<n.length;++o){var i=n[o].tag;a.push({name:"axis_"+e+" "+i,type:"FIXED",value:t.coordinates[i]<<16})}return a}(s,e.instances[s],e.axes,t));return n},parse:function(e,t,n){for(var r,a,o,i,s=new ae.Parser(e,t),u=s.parseULong(),c=(A.argument(65536===u,"Unsupported fvar table version."),s.parseOffset16()),l=(s.skip("uShort",1),s.parseUShort()),d=s.parseUShort(),f=s.parseUShort(),p=s.parseUShort(),h=[],m=0;m<l;m++)h.push((r=e,a=t+c+m*d,o=n,i={},r=new ae.Parser(r,a),i.tag=r.parseTag(),i.minValue=r.parseFixed(),i.defaultValue=r.parseFixed(),i.maxValue=r.parseFixed(),r.skip("uShort",1),i.name=o[r.parseUShort()]||{},i));for(var v=[],y=t+c+l*d,g=0;g<f;g++)v.push(function(e,t,n,r){var a={},o=new ae.Parser(e,t);a.name=r[o.parseUShort()]||{},o.skip("uShort",1),a.coordinates={};for(var i=0;i<n.length;++i)a.coordinates[n[i].tag]=o.parseFixed();return a}(e,y+g*p,h,n));return{axes:h,instances:v}}},kn=new Array(10);kn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ne.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ne.coverage),values:this.parseValueRecordList()}:void A.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},kn[2]=function(){var e,t,n,r,a=this.offset+this.relativeOffset,o=this.parseUShort(),i=(a=(A.assert(1===o||2===o,"0x"+a.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(ne.coverage)),this.parseUShort()),s=this.parseUShort();return 1===o?{posFormat:o,coverage:a,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(ne.pointer(ne.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))))}:2===o?(e=this.parsePointer(ne.classDef),t=this.parsePointer(ne.classDef),n=this.parseUShort(),r=this.parseUShort(),{posFormat:o,coverage:a,valueFormat1:i,valueFormat2:s,classDef1:e,classDef2:t,class1Count:n,class2Count:r,classRecords:this.parseList(n,ne.list(r,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))}):void 0},kn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},kn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},kn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},kn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},kn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},kn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},kn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Sn=new Array(10),_n={parse:function(e,t){return t=(e=new ne(e,t=t||0)).parseVersion(1),A.argument(1===t||1.1===t,"Unsupported GPOS table version "+t),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(kn)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(kn),variations:e.parseFeatureVariationsList()}},make:function(e){return new Y.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Y.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Y.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Y.LookupList(e.lookups,Sn)}])}},Tn={parse:function(e,t){if(0===(t=(e=new ae.Parser(e,t)).parseUShort())){var n=e,r={},a=(n.skip("uShort"),n.parseUShort()),o=(A.argument(0===a,"Unsupported kern sub-table version."),n.skip("uShort",2),n.parseUShort());n.skip("uShort",3);for(var i=0;i<o;i+=1){var s=n.parseUShort(),u=n.parseUShort(),c=n.parseShort();r[s+","+u]=c}return r}if(1!==t)throw new Error("Unsupported kern table version ("+t+").");var l=e,d={};l.skip("uShort"),1<l.parseULong()&&console.warn("Only the first kern subtable is supported."),l.skip("uLong"),a=255&l.parseUShort();if(l.skip("uShort"),0==a){var f=l.parseUShort();l.skip("uShort",3);for(var p=0;p<f;p+=1){var h=l.parseUShort(),m=l.parseUShort(),v=l.parseShort();d[h+","+m]=v}}return d}},En={parse:function(e,t,n,r){for(var a=new ae.Parser(e,t),o=r?a.parseUShort:a.parseULong,i=[],s=0;s<n+1;s+=1){var u=o.call(a);r&&(u*=2),i.push(u)}return i}};function Cn(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,bt(t))}))}function In(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function Nn(e,t){for(var n=[],r=12,a=0;a<t;a+=1){var o=ae.getTag(e,r),i=ae.getULong(e,r+4),s=ae.getULong(e,r+8),u=ae.getULong(e,r+12);n.push({tag:o,checksum:i,offset:s,length:u,compression:!1}),r+=16}return n}function jn(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};e=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2);var n=new Uint8Array(t.length);if(E(e,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}function Rn(e){var t,n,r,a,o,i,s,u,c,l,d,f,p,h,m=new bn({empty:!0}),v=new DataView(e,0),y=[];if((e=ae.getTag(v,0))===String.fromCharCode(0,1,0,0)||"true"===e||"typ1"===e)m.outlinesFormat="truetype",y=Nn(v,r=ae.getUShort(v,4));else if("OTTO"===e)m.outlinesFormat="cff",y=Nn(v,r=ae.getUShort(v,4));else{if("wOFF"!==e)throw new Error("Unsupported OpenType signature "+e);if((w=ae.getTag(v,4))===String.fromCharCode(0,1,0,0))m.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+e);m.outlinesFormat="cff"}y=function(e,t){for(var n=[],r=44,a=0;a<t;a+=1){var o=ae.getTag(e,r),i=ae.getULong(e,r+4),s=ae.getULong(e,r+8),u=ae.getULong(e,r+12),c=s<u&&"WOFF";n.push({tag:o,offset:i,compression:c,compressedLength:s,length:u}),r+=20}return n}(v,r=ae.getUShort(v,12))}for(var g=0;g<r;g+=1){var b=y[g],x=void 0;switch(b.tag){case"cmap":x=jn(v,b),m.tables.cmap=oe.parse(x.data,x.offset),m.encoding=new de(m.tables.cmap);break;case"cvt ":x=jn(v,b),h=new ae.Parser(x.data,x.offset),m.tables.cvt=h.parseShortList(b.length/2);break;case"fvar":o=b;break;case"fpgm":x=jn(v,b),h=new ae.Parser(x.data,x.offset),m.tables.fpgm=h.parseByteList(b.length);break;case"head":x=jn(v,b),m.tables.head=Le.parse(x.data,x.offset),m.unitsPerEm=m.tables.head.unitsPerEm,t=m.tables.head.indexToLocFormat;break;case"hhea":x=jn(v,b),m.tables.hhea=De.parse(x.data,x.offset),m.ascender=m.tables.hhea.ascender,m.descender=m.tables.hhea.descender,m.numberOfHMetrics=m.tables.hhea.numberOfHMetrics;break;case"hmtx":c=b;break;case"ltag":x=jn(v,b),n=Fe.parse(x.data,x.offset);break;case"maxp":x=jn(v,b),m.tables.maxp=ze.parse(x.data,x.offset),m.numGlyphs=m.tables.maxp.numGlyphs;break;case"name":f=b;break;case"OS/2":x=jn(v,b),m.tables.os2=$e.parse(x.data,x.offset);break;case"post":x=jn(v,b),m.tables.post=et.parse(x.data,x.offset),m.glyphNames=new pe(m.tables.post);break;case"prep":x=jn(v,b),h=new ae.Parser(x.data,x.offset),m.tables.prep=h.parseByteList(b.length);break;case"glyf":i=b;break;case"loca":d=b;break;case"CFF ":a=b;break;case"kern":l=b;break;case"GPOS":s=b;break;case"GSUB":u=b;break;case"meta":p=b}}if(w=jn(v,f),m.tables.name=Qe.parse(w.data,w.offset,n),m.names=m.tables.name,i&&d)e=0===t,w=jn(v,d),w=En.parse(w.data,w.offset,m.numGlyphs,e),e=jn(v,i),m.glyphs=Et.parse(e.data,e.offset,w,m);else{if(!a)throw new Error("Font doesn't contain TrueType or CFF outlines.");e=jn(v,a),Oe.parse(e.data,e.offset,m)}for(var w=jn(v,c),k=(Pe.parse(w.data,w.offset,m.numberOfHMetrics,m.numGlyphs,m.glyphs),m),S=k.tables.cmap.glyphIndexMap,_=Object.keys(S),T=0;T<_.length;T+=1){var E,C=_[T],I=S[C];(E=k.glyphs.get(I)).addUnicode(parseInt(C))}for(var N=0;N<k.glyphs.length;N+=1)E=k.glyphs.get(N),k.cffEncoding?k.isCIDFont?E.name="gid"+N:E.name=k.cffEncoding.charset[N]:k.glyphNames.names&&(E.name=k.glyphNames.glyphIndexToName(N));return l?(e=jn(v,l),m.kerningPairs=Tn.parse(e.data,e.offset)):m.kerningPairs={},s&&(w=jn(v,s),m.tables.gpos=_n.parse(w.data,w.offset),m.position.init()),u&&(e=jn(v,u),m.tables.gsub=at.parse(e.data,e.offset)),o&&(w=jn(v,o),m.tables.fvar=wn.parse(w.data,w.offset,m.names)),p&&(e=jn(v,p),m.tables.meta=ot.parse(e.data,e.offset),m.metas=m.tables.meta),m}t.Font=bn,t.Glyph=me,t.Path=N,t.BoundingBox=I,t._parse=ae,t.parse=Rn,t.load=function(e,t){("undefined"==typeof window?Cn:In)(e,(function(e,n){if(e)return t(e);var r;try{r=Rn(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return Rn(bt(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})},a("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],242:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",a=!1,o=arguments.length-1;-1<=o&&!a;o--){var i=0<=o?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,a="/"===i.charAt(0))}return(a?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!a).join("/"))||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===a(e,-1);return(e=(e=t(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o?e:".")&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),o=r(t.split("/")),i=Math.min(a.length,o.length),s=i,u=0;u<i;u++)if(a[u]!==o[u]){s=u;break}var c=[];for(u=s;u<a.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,r=!0,a=e.length-1;1<=a;--a)if(47===e.charCodeAt(a)){if(!r){n=a;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"/":e.slice(0,n)},n.basename=function(e,t){return e=function(e){"string"!=typeof e&&(e+="");for(var t=0,n=-1,r=!0,a=e.length-1;0<=a;--a)if(47===e.charCodeAt(a)){if(!r){t=a+1;break}}else-1===n&&(r=!1,n=a+1);return-1===n?"":e.slice(t,n)}(e),t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,o=0,i=e.length-1;0<=i;--i){var s=e.charCodeAt(i);if(47===s){if(a)continue;n=i+1;break}-1===r&&(a=!1,r=i+1),46===s?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var a=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:243}],243:[function(e,t,n){var r,a;t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){for(var e=s(f),t=(l=!0,c.length);t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===i||!a)&&clearTimeout)return(a=clearTimeout)(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],244:[function(e,t,n){t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",i=y.toStringTag||"@@toStringTag";function s(e,n,r,a){var o,i,s,m;n=n&&n.prototype instanceof h?n:h,n=Object.create(n.prototype),a=new _(a||[]);return n._invoke=(o=e,i=r,s=a,m=c,function(e,n){if(m===d)throw new Error("Generator is already running");if(m===f){if("throw"===e)throw n;return E()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r&&(r=function e(n,r){var a=n.iterator[r.method];if(a===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}return"throw"===(a=u(a,n.iterator,r.arg)).type?(r.method="throw",r.arg=a.arg,r.delegate=null,p):(a=a.arg)?a.done?(r[n.resultName]=a.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}(r,s),r)){if(r===p)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(m===c)throw m=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(m=d,"normal"===(r=u(o,i,s)).type){if(m=s.done?f:l,r.arg!==p)return{value:r.arg,done:s.done}}else"throw"===r.type&&(m=f,s.method="throw",s.arg=r.arg)}}),n}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c="suspendedStart",l="suspendedYield",d="executing",f="completed",p={};function h(){}function m(){}function v(){}var y,g,b=((g=(g=((y={})[a]=function(){return this},Object.getPrototypeOf))&&g(g(T([]))))&&g!==n&&r.call(g,a)&&(y=g),v.prototype=h.prototype=Object.create(y));function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,a){function o(){return new Promise((function(t,o){!function t(n,a,o,i){var s;if("throw"!==(n=u(e[n],e,a)).type)return(a=(s=n.arg).value)&&"object"==typeof a&&r.call(a,"__await")?Promise.resolve(a.__await).then((function(e){t("next",e,o,i)}),(function(e){t("throw",e,o,i)})):Promise.resolve(a).then((function(e){s.value=e,o(s)}),(function(e){return t("throw",e,o,i)}));i(n.arg)}(n,a,t,o)}))}return t=t?t.then(o,o):o()}}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(e){if(e){var n,o=e[a];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(o=function a(){for(;++n<e.length;)if(r.call(e,n))return a.value=e[n],a.done=!1,a;return a.value=t,a.done=!0,a}).next=o}return{next:E}}function E(){return{value:t,done:!0}}return(m.prototype=b.constructor=v).constructor=m,v[i]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(w.prototype),w.prototype[o]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,a){var o=new w(s(t,n,r,a));return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),b[i]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;0<=o;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,a=this.tryEntries[t];if(a.tryLoc===e)return"throw"===(n=a.completion).type&&(r=n.arg,S(a)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},{}],245:[function(e,t,n){!function(e){"use strict";var t,n,r,a,o,i,s,u,c,l;function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e?String(e):e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function g(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(a&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n=m(this);if(n)return n;if(this._bodyBlob)return n=this._bodyBlob,t=v(e=new FileReader),e.readAsText(n),t;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(e,t){var n,r=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=(e=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(n)?n:e),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){var n;e&&(n=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),t.append(decodeURIComponent(n),decodeURIComponent(e)))})),t}function k(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,(o="ArrayBuffer"in e)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<i.indexOf(Object.prototype.toString.call(e))}),h.prototype.append=function(e,t){e=d(e),t=f(t);var n=this.map[e];this.map[e]=n?n+","+t:t},h.prototype.delete=function(e){delete this.map[d(e)]},h.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},h.prototype.set=function(e,t){this.map[d(e)]=f(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},b.call(x.prototype),b.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e},l=[301,302,303,307,308],k.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.Headers=h,e.Request=x,e.Response=k,e.fetch=function(e,t){return new Promise((function(n,a){var o=new x(e,t),i=new XMLHttpRequest;i.onload=function(){var e,t={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=(t=t.split(":")).shift().trim();n&&(t=t.join(":").trim(),e.append(n,t))})),e)},r=(t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL"),"response"in i?i.response:i.responseText);n(new k(r,t))},i.onerror=function(){a(new TypeError("Network request failed"))},i.ontimeout=function(){a(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&r&&(i.responseType="blob"),o.headers.forEach((function(e,t){i.setRequestHeader(t,e)})),i.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},{}],246:[function(e,t,n){"use strict";e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=i(e("../core/main")),o=i(e("../color/color_conversion"));function i(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],u=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(e){e=o.default._rgbaToHSBA(e);var t,n,a=[(r=e)[0],e[1],e[2]];0!==a[0]&&(a[0]=Math.round(100*a[0]),(e=a[0].toString().split(""))[n=e.length-1]=parseInt(e[n]),e[n]<2.5?e[n]=0:2.5<=e[n]&&e[n]<7.5&&(e[n]=5),2===e.length?(e[0]=parseInt(e[0]),7.5<=e[n]&&(e[n]=0,e[0]=e[0]+1),a[0]=10*e[0]+e[1]):7.5<=e[n]?a[0]=10:a[0]=e[n]),a[2]=a[2]/255;for(var i=a.length-1;1<=i;i--)a[i]<=.25?a[i]=0:.25<a[i]&&a[i]<.75?a[i]=.5:a[i]=1;if(0===a[0]&&0===a[1]&&1===a[2]){for(var c=2;0<=c;c--)r[c]=Math.round(1e4*r[c])/1e4;for(var l=0;l<s.length;l++){if(s[l].h===r[0]&&s[l].s===r[1]&&s[l].b===r[2]){t=s[l].name;break}t="white"}}else for(var d=0;d<u.length;d++)if(u[d].h===a[0]&&u[d].s===a[1]&&u[d].b===a[2]){t=u[d].name;break}return t},e=a.default,n.default=e},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},a="_Description",o="_fallbackDesc",i="_fallbackTable",s="_Label",u="_labelDesc",c="_labelTable";function l(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}r.default.prototype.describe=function(e,t){var n;r.default._validateParameters("describe",arguments),"string"==typeof e&&(n=this.canvas.id,e=l(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e)))},r.default.prototype.describeElement=function(e,t,n){var a,o;r.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e&&(a=this.canvas.id,t=l(t),o=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e),e=e.replace(/[^a-zA-Z0-9]/g,""),o='<th scope="row">'.concat(o,"</th><td>").concat(t,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(a).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==o&&(this.descriptions.fallbackElements[e].innerHTML=o):this._describeElementHTML("fallback",e,o),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==o&&(this.descriptions.labelElements[e].innerHTML=o):this._describeElementHTML("label",e,o)))},r.default.prototype._describeHTML=function(e,t){var n,r=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(r+a))?this.dummyDOM.querySelector("#"+r+i).insertAdjacentHTML("beforebegin",'<p id="'.concat(r+o,'"></p>')):(n='<div id="'.concat(r).concat(a,'" role="region" aria-label="Canvas Description"><p id="').concat(r).concat(o,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(r)).innerHTML=n),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(r).concat(o)),this.descriptions.fallback.innerHTML=t):"label"===e&&(this.dummyDOM.querySelector("#".concat(r+s))?this.dummyDOM.querySelector("#".concat(r+c))&&this.dummyDOM.querySelector("#".concat(r+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(r).concat(u,'"></p>')):(n='<div id="'.concat(r).concat(s,'" class="p5Label"><p id="').concat(r).concat(u,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",n)),this.descriptions.label=this.dummyDOM.querySelector("#"+r+u),this.descriptions.label.innerHTML=t)},r.default.prototype._describeElementHTML=function(e,t,n){var r,l=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(l+a))?this.dummyDOM.querySelector("#"+l+i)||this.dummyDOM.querySelector("#"+l+o).insertAdjacentHTML("afterend",'<table id="'.concat(l).concat(i,'"><caption>Canvas elements and their descriptions</caption></table>')):(r='<div id="'.concat(l).concat(a,'" role="region" aria-label="Canvas Description"><table id="').concat(l).concat(i,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(l,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(l,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+l).innerHTML=r),(r=document.createElement("tr")).id=l+"_fte_"+t,this.dummyDOM.querySelector("#"+l+i).appendChild(r),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(l).concat("_fte_").concat(t)),this.descriptions.fallbackElements[t].innerHTML=n):"label"===e&&(this.dummyDOM.querySelector("#".concat(l+s))?this.dummyDOM.querySelector("#".concat(l+c))||this.dummyDOM.querySelector("#"+l+u).insertAdjacentHTML("afterend",'<table id="'.concat(l+c,'"></table>')):(r='<div id="'.concat(l).concat(s,'" class="p5Label"><table id="').concat(l).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(l,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(l,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+l).insertAdjacentHTML("afterend",r)),(e=document.createElement("tr")).id=l+"_lte_"+t,this.dummyDOM.querySelector("#"+l+c).appendChild(e),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(l).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n)},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateGridOutput=function(e){var t,n,r,a;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return t="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]),t=(1===e[0]?"".concat(t," shape: "):"".concat(t," shapes: ")).concat(e[1])}((n=function(e,t){var n,r="",a="",o=0;for(n in t){var i,s=0;for(i in t[n]){var u='<li id="'.concat(e,"shape").concat(o,'">').concat(t[n][i].color," ").concat(n,",");"line"===n?u+=" location = ".concat(t[n][i].pos,", length = ").concat(t[n][i].length," pixels"):(u+=" location = ".concat(t[n][i].pos),"point"!==n&&(u+=", area = ".concat(t[n][i].area," %")),u+="</li>"),r+=u,s++,o++}a=1<s?"".concat(a," ").concat(s," ").concat(n,"s"):"".concat(a," ").concat(s," ").concat(n)}return{numShapes:[o,a],details:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n,r,a,o=0,i="",s=Array.apply(null,Array(10)).map((function(){}));for(n in s)s[n]=Array.apply(null,Array(10)).map((function(){}));for(r in t)for(var u in t[r]){var c;c="line"!==r?'<a href="#'.concat(e,"shape").concat(o,'">').concat(t[r][u].color," ").concat(r,"</a>"):'<a href="#'.concat(e,"shape").concat(o,'">').concat(t[r][u].color," ").concat(r," midpoint</a>"),s[t[r][u].loc.locY][t[r][u].loc.locX]?s[t[r][u].loc.locY][t[r][u].loc.locX]=s[t[r][u].loc.locY][t[r][u].loc.locX]+"  "+c:s[t[r][u].loc.locY][t[r][u].loc.locX]=c,o++}for(a in s){var l,d="<tr>";for(l in s[a])d+="<td>",void 0!==s[a][l]&&(d+=s[a][l]),d+="</td>";i=i+d+"</tr>"}return i}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),a!==t.map.innerHTML&&(t.map.innerHTML=a),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(e,t,n){return e[0]<.4*t?e[1]<.4*n?"top left":e[1]>.6*n?"bottom left":"mid left":e[0]>.6*t?e[1]<.4*n?"top right":e[1]>.6*n?"bottom right":"mid right":e[1]<.4*n?"top middle":e[1]>.6*n?"bottom middle":"middle"}function o(e,t,n){return 10===(t=Math.floor(e[0]/t*10))&&(t-=1),10===(e=Math.floor(e[1]/n*10))&&(e-=1),{locX:t,locY:e}}r.default.prototype.textOutput=function(e){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(e){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(e,t){var n,r,a,o=this.canvas.id,i=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),"");"Fallback"===t?(n=o+e,this.dummyDOM.querySelector("#".concat(r=o+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(o,"_Description"))?this.dummyDOM.querySelector("#".concat(o,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(o)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=o+e+(i=t),this.dummyDOM.querySelector("#".concat(r=o+"accessibleOutput"+t))||(this.dummyDOM.querySelector("#".concat(o,"_Label"))?this.dummyDOM.querySelector("#".concat(o,"_Label")):this.dummyDOM.querySelector("#".concat(o))).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>'))),this._accessibleOutputs[n]={},"textOutput"===e?(i="#".concat(o,"gridOutput").concat(i),a='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(i)?this.dummyDOM.querySelector(i).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(i="#".concat(o,"textOutput").concat(i),a='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(i)?this.dummyDOM.querySelector(i).insertAdjacentHTML("afterend",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},r.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},r.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},r.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},r.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n,r,i={},s=!0,u=function(e,t){var n;return e="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,e]}(e,t);if("line"===e?(i.color=this.ingredients.colors.stroke,i.length=Math.round(this.dist(t[0],t[1],t[2],t[3])),n=a([t[0],[1]],this.width,this.height),r=a([t[2],[3]],this.width,this.height),i.loc=o(u,this.width,this.height),i.pos=n===r?"at ".concat(n):"from ".concat(n," to ").concat(r)):("point"===e?i.color=this.ingredients.colors.stroke:(i.color=this.ingredients.colors.fill,i.area=function(e,t,n,r){var a,o,i,s,u,c,l,d=0;return"arc"===e?(d=(a=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*t[2]*t[3]/8,"open"!==t[6]&&"chord"!==t[6]||(l=t[0],o=t[1],i=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),s=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),u=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),c=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),l=Math.abs(l*(s-c)+i*(c-o)+u*(o-s))/2,a>Math.PI?d+=l:d-=l)):"ellipse"===e||"circle"===e?d=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?d=0:"quadrilateral"===e?d=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?d=t[2]*t[3]:"triangle"===e&&(d=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2),Math.round(100*d/(n*r))}(e,t,this.width,this.height)),i.pos=a(u,this.width,this.height),i.loc=o(u,this.width,this.height)),this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[i]){for(var c in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][c])===JSON.stringify(i)&&(s=!1);!0===s&&this.ingredients.shapes[e].push(i)}}else this.ingredients.shapes[e]=[i]},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateTextOutput=function(e){var t,n,r,a;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return n="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following"),n=1===e?"".concat(n," shape:"):"".concat(n," ").concat(e," shapes:")}((n=function(e,t){var n,r="",a=0;for(n in t)for(var o in t[n]){var i='<li><a href="#'.concat(e,"shape").concat(a,'">').concat(t[n][o].color," ").concat(n,"</a>");"line"===n?i+=", ".concat(t[n][o].pos,", ").concat(t[n][o].length," pixels long.</li>"):(i+=", at ".concat(t[n][o].pos),"point"!==n&&(i+=", covering ".concat(t[n][o].area,"% of the canvas")),i+=".</li>"),r+=i,a++}return{numShapes:a,listShapes:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n,r="",a=0;for(n in t)for(var o in t[n]){var i='<tr id="'.concat(e,"shape").concat(a,'"><th>').concat(t[n][o].color," ").concat(n,"</th>");"line"===n?i+="<td>location = ".concat(t[n][o].pos,"</td><td>length = ").concat(t[n][o].length," pixels</td></tr>"):(i+="<td>location = ".concat(t[n][o].pos,"</td>"),"point"!==n&&(i+="<td> area = ".concat(t[n][o].area,"%</td>")),i+="</tr>"),r+=i,a++}return r}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),a!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=a),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(e,t,n){"use strict";var r=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=r.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.ColorConversion={},e.default.ColorConversion._hsbaToHSLA=function(e){var t=e[0],n=e[1],r=e[2],a=(2-n)*r/2;return 0!=a&&(1==a?n=0:a<.5?n/=2-n:n=n*r/(2-2*a)),[t,n,a,e[3]]},e.default.ColorConversion._hsbaToRGBA=function(e){var t,n,r,a,o,i=6*e[0],s=e[1],u=e[2];return 0===s?[u,u,u,e[3]]:(n=u*(1-s),r=u*(1-s*(i-(t=Math.floor(i)))),s=u*(1-s*(1+t-i)),i=1===t?(a=r,o=u,n):2===t?(a=n,o=u,s):3===t?(a=n,o=r,u):4===t?(a=s,o=n,u):5===t?(a=u,o=n,r):(a=u,o=s,n),[a,o,i,e[3]])},e.default.ColorConversion._hslaToHSBA=function(e){var t=e[0],n=e[1],r=e[2],a=r<.5?(1+n)*r:r+n-r*n;return[t,n=2*(a-r)/a,a,e[3]]},e.default.ColorConversion._hslaToRGBA=function(e){var t,n=6*e[0],r=e[1],a=e[2];return 0===r?[a,a,a,e[3]]:[(t=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t})(2+n,r=2*a-(a=a<.5?(1+r)*a:a+r-a*r),a),t(n,r,a),t(n-2,r,a),e[3]]},e.default.ColorConversion._rgbaToHSBA=function(e){var t,n,r=e[0],a=e[1],o=e[2],i=Math.max(r,a,o),s=i-Math.min(r,a,o);return 0==s?n=t=0:(n=s/i,r===i?t=(a-o)/s:a===i?t=2+(o-r)/s:o===i&&(t=4+(r-a)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,i,e[3]]},e.default.ColorConversion._rgbaToHSLA=function(e){var t,n,r,a=e[0],o=e[1],i=e[2],s=Math.max(a,o,i),u=s+(r=Math.min(a,o,i));return 0==(r=s-r)?n=t=0:(n=u<1?r/u:r/(2-u),a===s?t=(o-i)/r:o===s?t=2+(i-a)/r:i===s&&(t=4+(a-o)/r),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,u/2,e[3]]},e=e.default.ColorConversion,n.default=e},{"../core/main":267}],253:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.alpha=function(e){return o.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},o.default.prototype.blue=function(e){return o.default._validateParameters("blue",arguments),this.color(e)._getBlue()},o.default.prototype.brightness=function(e){return o.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},o.default.prototype.color=function(){var e;return o.default._validateParameters("color",arguments),arguments[0]instanceof o.default.Color?arguments[0]:(e=arguments[0]instanceof Array?arguments[0]:arguments,new o.default.Color(this,e))},o.default.prototype.green=function(e){return o.default._validateParameters("green",arguments),this.color(e)._getGreen()},o.default.prototype.hue=function(e){return o.default._validateParameters("hue",arguments),this.color(e)._getHue()},o.default.prototype.lerpColor=function(e,t,n){o.default._validateParameters("lerpColor",arguments);var r,a,s,u=this._colorMode,c=this._colorMaxes;if(u===i.RGB)a=e.levels.map((function(e){return e/255})),s=t.levels.map((function(e){return e/255}));else if(u===i.HSB)e._getBrightness(),t._getBrightness(),a=e.hsba,s=t.hsba;else{if(u!==i.HSL)throw new Error("".concat(u,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),a=e.hsla,s=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),e=this.lerp(a[0],s[0],n),t=this.lerp(a[1],s[1],n),r=this.lerp(a[2],s[2],n),a=this.lerp(a[3],s[3],n),e*=c[u][0],t*=c[u][1],r*=c[u][2],a*=c[u][3],this.color(e,t,r,a)},o.default.prototype.lightness=function(e){return o.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},o.default.prototype.red=function(e){return o.default._validateParameters("red",arguments),this.color(e)._getRed()},o.default.prototype.saturation=function(e){return o.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var u=o.default;n.default=u},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=c(e("./color_conversion"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function c(e){return e&&e.__esModule?e:{default:e}}o.default.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=o.default.Color._parseInputs.apply(this,t),this._calculateLevels(),this},o.default.Color.prototype.toString=function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}},o.default.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[i.RGB][0],this._calculateLevels()},o.default.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[i.RGB][1],this._calculateLevels()},o.default.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[i.RGB][2],this._calculateLevels()},o.default.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},o.default.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n]);this.hsla=null,this.hsba=null},o.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},o.default.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},o.default.Color.prototype._getMode=function(){return this.mode},o.default.Color.prototype._getMaxes=function(){return this.maxes},o.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},o.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},o.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},o.default.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},o.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},o.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},o.default.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=(e=/\s*/,/(\d{1,3})/),f=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(f.source,"%")),h={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(e.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),RGBA:new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",f.source,"\\)$"].join(e.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(e.source),"i"),HSL:new RegExp(["^hsl\\(",d.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSLA:new RegExp(["^hsla\\(",d.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(e.source),"i"),HSB:new RegExp(["^hsb\\(",d.source,",",p.source,",",p.source,"\\)$"].join(e.source),"i"),HSBA:new RegExp(["^hsba\\(",d.source,",",p.source,",",p.source,",",f.source,"\\)$"].join(e.source),"i")};o.default.Color._parseInputs=function(e,t,n,r){var a,u=arguments.length,c=this.mode,d=this.maxes[c],f=[];if(3<=u){for(f[0]=e/d[0],f[1]=t/d[1],f[2]=n/d[2],f[3]="number"==typeof r?r/d[3]:1,a=f.length-1;0<=a;--a){var p=f[a];p<0?f[a]=0:1<p&&(f[a]=1)}return c===i.HSL?s.default._hslaToRGBA(f):c===i.HSB?s.default._hsbaToRGBA(f):f}if(1===u&&"string"==typeof e){if(n=e.trim().toLowerCase(),l[n])return o.default.Color._parseInputs.call(this,l[n]);if(h.HEX3.test(n))return(f=h.HEX3.exec(n).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,f;if(h.HEX6.test(n))return(f=h.HEX6.exec(n).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,f;if(h.HEX4.test(n))return h.HEX4.exec(n).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(h.HEX8.test(n))return h.HEX8.exec(n).slice(1).map((function(e){return parseInt(e,16)/255}));if(h.RGB.test(n))return(f=h.RGB.exec(n).slice(1).map((function(e){return e/255})))[3]=1,f;if(h.RGB_PERCENT.test(n))return(f=h.RGB_PERCENT.exec(n).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,f;if(h.RGBA.test(n))return h.RGBA.exec(n).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(h.RGBA_PERCENT.test(n))return h.RGBA_PERCENT.exec(n).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(h.HSL.test(n)?(f=h.HSL.exec(n).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:h.HSLA.test(n)&&(f=h.HSLA.exec(n).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(f=f.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return s.default._hslaToRGBA(f);if(h.HSB.test(n)?(f=h.HSB.exec(n).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:h.HSBA.test(n)&&(f=h.HSBA.exec(n).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),f.length){for(a=f.length-1;0<=a;--a)f[a]=Math.max(Math.min(f[a],1),0);return s.default._hsbaToRGBA(f)}f=[1,1,1,1]}else{if(1!==u&&2!==u||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));f[0]=e/d[2],f[1]=e/d[2],f[2]=e/d[2],f[3]="number"==typeof t?t/d[3]:1,f=f.map((function(e){return Math.max(Math.min(e,1),0)}))}return f},d=o.default.Color;n.default=d},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Color"),o.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},o.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},o.default.prototype.colorMode=function(e,t,n,r,a){return o.default._validateParameters("colorMode",arguments),e!==i.RGB&&e!==i.HSB&&e!==i.HSL||(this._colorMode=e,e=this._colorMaxes[e],2===arguments.length?(e[0]=t,e[1]=t,e[2]=t,e[3]=t):4===arguments.length?(e[0]=t,e[1]=n,e[2]=r):5===arguments.length&&(e[0]=t,e[1]=n,e[2]=r,e[3]=a)),this},o.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},o.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},o.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},o.default.prototype.noErase=function(){return this._renderer.noErase(),this};var u=o.default;n.default=u},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BEZIER=n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.WORD=n.CHAR=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL=n.P2D=n.VERSION=void 0,n.COVER=n.CONTAIN=n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=n.FILL=n.STROKE=n.CURVE=void 0;var r=Math.PI,a=(n.VERSION="1.6.0",n.P2D="p2d",n.WEBGL="webgl",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait",r/2);n.HALF_PI=a,a=r,n.PI=a,a=r/4,n.QUARTER_PI=a,a=2*r,n.TAU=a,a=2*r,n.TWO_PI=a,n.DEGREES="degrees",n.RADIANS="radians",a=r/180,n.DEG_TO_RAD=a,a=180/r;n.RAD_TO_DEG=a,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n.CHAR="CHAR",n.WORD="WORD",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback",n.CONTAIN="contain",n.COVER="cover"},{}],257:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(i=e("./main"))&&i.__esModule?i:{default:i},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}var u=[i.ARROW,i.CROSS,i.HAND,i.MOVE,i.TEXT,i.WAIT],c=(o.default.prototype._frameRate=0,o.default.prototype._lastFrameTime=window.performance.now(),o.default.prototype._targetFrameRate=60,window.print);function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}o.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):c()},o.default.prototype.frameCount=0,o.default.prototype.deltaTime=0,o.default.prototype.focused=document.hasFocus(),o.default.prototype.cursor=function(e,t,n){var r,a="auto",o=this._curElement.elt;u.includes(e)?a=e:"string"==typeof e&&(r="",t&&n&&"number"==typeof t&&"number"==typeof n&&(r="".concat(t," ").concat(n)),a="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(r,", auto"):e),o.style.cursor=a},o.default.prototype.frameRate=function(e){return o.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},o.default.prototype.getFrameRate=function(){return this.frameRate()},o.default.prototype.setFrameRate=function(e){return this.frameRate(e)},o.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},o.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.default.prototype.displayWidth=screen.width,o.default.prototype.displayHeight=screen.height,o.default.prototype.windowWidth=l(),o.default.prototype.windowHeight=d(),o.default.prototype._onresize=function(e){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",d());var t=this._isGlobal?window:this;"function"!=typeof t.windowResized||void 0===(t=t.windowResized(e))||t||e.preventDefault()},o.default.prototype.width=0,o.default.prototype.height=0,o.default.prototype.fullscreen=function(e){if(o.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(e){if(e=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},o.default.prototype.pixelDensity=function(e){var t;return o.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},o.default.prototype.displayDensity=function(){return window.devicePixelRatio},o.default.prototype.getURL=function(){return location.href},o.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},o.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n},e=o.default,n.default=e},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(u=e("../main"))&&u.__esModule?u:{default:u};function a(e,t){t=t||console.log.bind(console),o||i(),o.some((function(n){var r;if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W")))return r="function"===n.type?"".concat(n.name,"()"):n.name,t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(s)),!0}))}e("../internationalization");var o=null,i=null,s=(r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},o=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),u=(i=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable";return{name:t,type:n}}))}var n={};(o=[].concat(t(r.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},r.default.prototype._helpForMisusedAtTopLevelCode=a,"complete"!==document.readyState&&(window.addEventListener("error",a,!1),window.addEventListener("load",(function(){window.removeEventListener("error",a,!1)}))),r.default);n.default=u},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),r.default._friendlyFileLoadError=function(){},e=r.default,n.default=e},{"../internationalization":265,"../main":267}],260:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../main"));e("../internationalization"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r,o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=s?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);o.default=e,t&&t.set(e,o)}(e("../constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}o.default._fesCodeReader=function(){};var s=o.default;n.default=s},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(e,t,n){"use strict";function r(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){return-1===e.indexOf(":")?[e]:[(e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,"")))[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){var t=(n=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),n=(n=t?n.replace(t[0],""):n).split(/\s+/).slice(1);t=this.extractLocation(t?t[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(t[0])?void 0:t[0],lineNumber:t[1],columnNumber:t[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){var t,n;return-1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":")?{functionName:e}:{functionName:(n=e.match(t=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&n[1]?n[1]:void 0,fileName:(n=this.extractLocation(e.replace(t,"")))[0],lineNumber:n[1],columnNumber:n[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],a=2,o=n.length;a<o;a+=2){var i=t.exec(n[a]);i&&r.push({fileName:i[2],lineNumber:i[1],source:n[a]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],a=0,o=n.length;a<o;a+=2){var i=t.exec(n[a]);i&&r.push({functionName:i[3]||void 0,fileName:i[2],lineNumber:i[1],source:n[a]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop());return{functionName:(n=n.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(t=n.match(/\(([^)]*)\)/)?n.replace(/^[^(]+\(([^)]*)\)$/,"$1"):t)||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../main"))&&e.__esModule?e:{default:e}).default._getErrorStackParser=function(){return new r},e=e.default,n.default=e},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(a=e("../main"))&&a.__esModule?a:{default:a};function o(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,o=function(){return e},e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}(function(e){if((!e||!e.__esModule)&&null!==e&&("object"===i(e)||"function"==typeof e)){var t=o();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=a?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}r.default=e,t&&t.set(e,r)}})(e("../constants")),e("../internationalization"),a.default._validateParameters=a.default._clearValidateParamsCache=function(){},e=a.default,n.default=e},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=o?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}n.default={modeAdjust:function(e,t,n,r,a){return a===o.CORNER?{x:e,y:t,w:n,h:r}:a===o.CORNERS?{x:e,y:t,w:n-e,h:r-t}:a===o.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:a===o.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./internationalization");var a=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),a]).then((function(){void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!r.default.instance&&new r.default}))},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.setTranslatorLanguage=n.currentTranslatorLanguage=n.availableTranslatorLanguages=n.initialize=n.translator=void 0;var r,a=i(e("i18next")),o=i(e("i18next-browser-languagedetector"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init(t,n)}var t,n;return t=e,(n=[{key:"fetchWithTimeout",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}},{key:"init",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t}},{key:"read",value:function(e,t,n){var a=this.options.loadPath;e===this.options.fallback?n(null,r[e][t]):undefined.includes(e)?(a=this.services.interpolator.interpolate(a,{lng:e,ns:t}),this.loadUrl(a,n)):n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(t.ok)return t.json();throw new Error("failed loading ".concat(e))}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&s(t.prototype,n),e}();u.type="backend",n.translator=function(e,t){console.debug("p5.js translator called before translations were loaded"),a.default.t(e,t)},n.initialize=function(){return a.default.use(o.default).use(u).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))},n.availableTranslatorLanguages=function(){return a.default.languages},n.currentTranslatorLanguage=function(e){return a.default.language},n.setTranslatorLanguage=function(e){return a.default.changeLanguage(e||void 0,(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,n.default=e},{"./main":267}],267:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=o?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u,c=function(){function e(t,n,r){var a=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};n=Object.getOwnPropertyNames(e.prototype._registeredMethods);var o=!0,i=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;this._registeredMethods[l]=e.prototype._registeredMethods[l].slice()}}catch(t){i=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){a._userNode&&"string"==typeof a._userNode&&(a._userNode=document.getElementById(a._userNode));var t=a._isGlobal?window:a;if(t.preload){var n,r=document.getElementById(a._loadingScreenId),o=(r||((r=document.createElement("div")).innerHTML="Loading...",r.style.position="absolute",r.id=a._loadingScreenId,(a._userNode||document.body).appendChild(r)),a._preloadMethods);for(n in o){o[n]=o[n]||e;var i=o[n];i!==e.prototype&&i!==e||(a._isGlobal&&(window[n]=a._wrapPreload(a,n)),i=a),a._registeredPreloadMethods[n]=i[n],i[n]=a._wrapPreload(i,n)}t.preload(),a._runIfPreloadsAreDone()}else a._setup(),a._recording||a._draw()},this._runIfPreloadsAreDone=function(){var e,t=this._isGlobal?window:this;0===t._preloadCount&&((e=document.getElementById(t._loadingScreenId))&&e.parentNode.removeChild(e),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),t._setup(),this._recording||t._draw()))},this._decrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||"function"!=typeof e.preload||(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n._registeredPreloadMethods[t].apply(e,a)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){a.createCanvas(a._defaultCanvasSize.width,a._defaultCanvasSize.height,"p2d");var e=a._isGlobal?window:a;if("function"==typeof e.preload)for(var t in a._preloadMethods)e[t]=a._preloadMethods[t][t],e[t]&&a&&(e[t]=e[t].bind(a));a._millisStart=window.performance.now(),e._preloadDone=!0,"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),r=!0,o=!1,i=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}a._lastTargetFrameTime=window.performance.now(),a._lastRealFrameTime=window.performance.now(),a._setupDone=!0,(a._accessibleOutputs.grid||a._accessibleOutputs.text)&&a._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-a._lastTargetFrameTime,n=1e3/a._targetFrameRate;(!a._loop||n-5<=t)&&(a.redraw(),a._frameRate=1e3/(e-a._lastRealFrameTime),a.deltaTime=e-a._lastRealFrameTime,a._setProperty("deltaTime",a.deltaTime),a._lastTargetFrameTime=Math.max(a._lastTargetFrameTime+n,e),a._lastRealFrameTime=e,void 0!==a._updateMouseCoords&&(a._updateMouseCoords(),a._setProperty("movedX",0),a._setProperty("movedY",0))),a._loop&&(a._requestAnimId=window.requestAnimationFrame(a._draw))},this._setProperty=function(e,t){a[e]=t,a._isGlobal&&(window[e]=t)},this.remove=function(){if((r=document.getElementById(a._loadingScreenId))&&(r.parentNode.removeChild(r),a._incrementPreload()),a._curElement){for(var t in a._loop=!1,a._requestAnimId&&window.cancelAnimationFrame(a._requestAnimId),a._events)window.removeEventListener(t,a._events[t]);var n=!0,r=!1,o=void 0;try{for(var i,s=a._elements[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u,c=i.value;for(u in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(u,c._events[u])}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}var l=a;a._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(l)}))}if(a._isGlobal){for(var d in e.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var f in a)if(a.hasOwnProperty(f))try{delete window[f]}catch(t){window[f]=void 0}e.instance=null}},this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var d,f,p=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var h in this._isGlobal=!0,e.instance=this,e.prototype)"function"==typeof e.prototype[h]?(d=h.substring(2),this._events.hasOwnProperty(d)||(Math.hasOwnProperty(h)&&Math[h]===e.prototype[h]?p(h,e.prototype[h]):p(h,e.prototype[h].bind(this)))):p(h,e.prototype[h]);for(var m in this)this.hasOwnProperty(m)&&p(m,this[m])}for(f in this._events){var v=this["_on".concat(f)];v&&(v=v.bind(this),window.addEventListener(f,v,{passive:!1}),this._events[f]=v)}function y(){a._setProperty("focused",!0)}function g(){a._setProperty("focused",!1)}window.addEventListener("focus",y),window.addEventListener("blur",g),this.registerMethod("remove",(function(){window.removeEventListener("focus",y),window.removeEventListener("blur",g)})),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t,n;return t=e,(n=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(t,r){e.disableFriendlyErrors,n[t]=r}}}])&&s(t.prototype,n),e}();for(u in c.instance=null,c.disableFriendlyErrors=!1,o)c.prototype[u]=o[u];c.VERSION=o.VERSION,c.prototype._preloadMethods={loadJSON:c.prototype,loadImage:c.prototype,loadStrings:c.prototype,loadXML:c.prototype,loadBytes:c.prototype,loadTable:c.prototype,loadFont:c.prototype,loadModel:c.prototype,loadShader:c.prototype},c.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},c.prototype._registeredPreloadMethods={},n.default=c},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};r.default.Element=function(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},r.default.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof r.default.Element&&(e=e.elt),e.appendChild(this.elt),this)},r.default.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},r.default.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},r.default.Element.prototype.mousePressed=function(e){return r.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this,t)}),this),this},r.default.Element.prototype.doubleClicked=function(e){return r.default.Element._adjustListener("dblclick",e,this),this},r.default.Element.prototype.mouseWheel=function(e){return r.default.Element._adjustListener("wheel",e,this),this},r.default.Element.prototype.mouseReleased=function(e){return r.default.Element._adjustListener("mouseup",e,this),this},r.default.Element.prototype.mouseClicked=function(e){return r.default.Element._adjustListener("click",e,this),this},r.default.Element.prototype.mouseMoved=function(e){return r.default.Element._adjustListener("mousemove",e,this),this},r.default.Element.prototype.mouseOver=function(e){return r.default.Element._adjustListener("mouseover",e,this),this},r.default.Element.prototype.mouseOut=function(e){return r.default.Element._adjustListener("mouseout",e,this),this},r.default.Element.prototype.touchStarted=function(e){return r.default.Element._adjustListener("touchstart",e,this),this},r.default.Element.prototype.touchMoved=function(e){return r.default.Element._adjustListener("touchmove",e,this),this},r.default.Element.prototype.touchEnded=function(e){return r.default.Element._adjustListener("touchend",e,this),this},r.default.Element.prototype.dragOver=function(e){return r.default.Element._adjustListener("dragover",e,this),this},r.default.Element.prototype.dragLeave=function(e){return r.default.Element._adjustListener("dragleave",e,this),this},r.default.Element._adjustListener=function(e,t,n){return!1===t?r.default.Element._detachListener(e,n):r.default.Element._attachListener(e,t,n),this},r.default.Element._attachListener=function(e,t,n){n._events[e]&&r.default.Element._detachListener(e,n),t=t.bind(n),n.elt.addEventListener(e,t,!1),n._events[e]=t},r.default.Element._detachListener=function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null},r.default.Element.prototype._setProperty=function(e,t){this[e]=t},e=r.default.Element,n.default=e},{"./main":267}],269:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("./main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.Graphics=function(e,t,n,r){var a;n=n||i.P2D;for(a in this.canvas=document.createElement("canvas"),(r._userNode||document.body).appendChild(this.canvas),o.default.Element.call(this,this.canvas,r),o.default.prototype)this[a]||("function"==typeof o.default.prototype[a]?this[a]=o.default.prototype[a].bind(this):this[a]=o.default.prototype[a]);return o.default.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=r._pixelDensity,n===i.WEBGL?this._renderer=new o.default.RendererGL(this.canvas,this,!1):this._renderer=new o.default.Renderer2D(this.canvas,this,!1),r._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},o.default.Graphics.prototype=Object.create(o.default.Element.prototype),o.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},o.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e])};var u=o.default.Graphics;n.default=u},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(c=e("./main"))&&c.__esModule?c:{default:c},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=a?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function u(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}a.default.Renderer=function(e,t,n){a.default.Element.call(this,e,t),this.canvas=e,this._pixelsState=t,n?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=o.LEFT,this._textBaseline=o.BASELINE,this._textWrap=o.WORD,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},a.default.Renderer.prototype=Object.create(a.default.Element.prototype),a.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},a.default.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},a.default.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.default.Renderer.prototype.get=function(e,t,n,r){var o=this._pixelsState,i=o._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=o.width,r=o.height;else if(e*=i,t*=i,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);return(o=new a.default.Image(n,r)).canvas.getContext("2d").drawImage(s,e,t,n*i,r*i,0,0,n,r),o},a.default.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",e),this._pInst):this._textLeading},a.default.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._leadingSet||this._setProperty("_textLeading",e*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer.prototype.textStyle=function(e){return e?(e!==o.NORMAL&&e!==o.ITALIC&&e!==o.BOLD&&e!==o.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},a.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},a.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},a.default.Renderer.prototype.textAlign=function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},a.default.Renderer.prototype.textWrap=function(e){return this._setProperty("_textWrap",e),this._textWrap},a.default.Renderer.prototype.text=function(e,t,n,r,a){var i,s,u,c,l=this._pInst,d=this._textWrap,f=Number.MAX_VALUE,p=n;if((this._doFill||this._doStroke)&&void 0!==e){if(i=(e=(e="string"!=typeof e?e.toString():e).replace(/(\t)/g,"  ")).split("\n"),void 0!==r){switch(this._rectMode===o.CENTER&&(t-=r/2),this._textAlign){case o.CENTER:t+=r/2;break;case o.RIGHT:t+=r}if(void 0!==a){this._rectMode===o.CENTER&&(n-=a/2,p-=a/2);e=n;var h=l.textAscent();switch(this._textBaseline){case o.BOTTOM:c=n+a,n=Math.max(c,n),p+=h;break;case o.CENTER:c=n+a/2,n=Math.max(c,n),p+=h/2}f=n+a-h,this._textBaseline===o.CENTER&&(f=e+a-h/2)}else{if(this._textBaseline===o.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===o.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(d===o.WORD){for(var m=[],v=0;v<i.length;v++){for(var y="",g=i[v].split(" "),b=0;b<g.length;b++)s="".concat(y+g[b])+" ",y=r<(u=this.textWidth(s))&&0<y.length?(m.push(y),"".concat(g[b])+" "):s;m.push(y)}var x=0;this._textBaseline===o.CENTER?x=(m.length-1)*l.textLeading()/2:this._textBaseline===o.BOTTOM&&(x=(m.length-1)*l.textLeading());for(var w=0;w<i.length;w++){y="",g=i[w].split(" ");for(var k=0;k<g.length;k++)s="".concat(y+g[k])+" ",r<(u=this.textWidth(s))&&0<y.length?(this._renderText(l,y.trim(),t,n-x,f,p),y="".concat(g[k])+" ",n+=l.textLeading()):y=s;this._renderText(l,y.trim(),t,n-x,f,p),n+=l.textLeading()}}else{for(var S=[],_=0;_<i.length;_++)for(var T=i[_].split(y=""),E=0;E<T.length;E++)s="".concat(y+T[E]),(u=this.textWidth(s))<=r?y+=T[E]:r<u&&0<y.length&&(S.push(y),y="".concat(T[E]));S.push(y);var C=0;this._textBaseline===o.CENTER?C=(S.length-1)*l.textLeading()/2:this._textBaseline===o.BOTTOM&&(C=(S.length-1)*l.textLeading());for(var I=0;I<i.length;I++){T=i[I].split(y="");for(var N=0;N<T.length;N++)s="".concat(y+T[N]),(u=this.textWidth(s))<=r?y+=T[N]:r<u&&0<y.length&&(this._renderText(l,y.trim(),t,n-C,f,p),n+=l.textLeading(),y="".concat(T[N]))}this._renderText(l,y.trim(),t,n-C,f,p),n+=l.textLeading()}}else{var j=0;this._textBaseline===o.CENTER?j=(i.length-1)*l.textLeading()/2:this._textBaseline===o.BOTTOM&&(j=(i.length-1)*l.textLeading());for(var R=0;R<i.length;R++)this._renderText(l,i[R],t,n-j,f,p-j),n+=l.textLeading()}return l}},a.default.Renderer.prototype._applyDefaults=function(){return this},a.default.Renderer.prototype._isOpenType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===s(e)&&e.font&&e.font.supported},a.default.Renderer.prototype._updateTextMetrics=function(){var e,t,n,r,a,o;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((e=document.createElement("span")).style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|",(o=document.createElement("div")).style.display="inline-block",o.style.width="1px",o.style.height="0px",(t=document.createElement("div")).appendChild(e),t.appendChild(o),t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t),o.style.verticalAlign="baseline",r=u(o),a=u(e),n=r[1]-a[1],o.style.verticalAlign="bottom",r=u(o),a=u(e),o=r[1]-a[1]-n,document.body.removeChild(t),this._setProperty("_textAscent",n),this._setProperty("_textDescent",o)),this};var c=a.default.Renderer;n.default=c},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(c=e("./main"))&&c.__esModule?c:{default:c},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Renderer");var u="rgba(0,0,0,0)",c=(o.default.Renderer2D=function(e,t,n){return o.default.Renderer.call(this,e,t,n),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},o.default.Renderer2D.prototype=Object.create(o.default.Renderer.prototype),o.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"},o.default.Renderer2D.prototype.resize=function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},o.default.Renderer2D.prototype.background=function(){var e,t;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof o.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(e=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(e,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(e=this._getFill(),t=(t=this._pInst).color.apply(t,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(t.levels),t=t.toString(),this._setFill(t),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},o.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},o.default.Renderer2D.prototype.fill=function(){var e=(e=this._pInst).color.apply(e,arguments);this._setFill(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",e.levels)},o.default.Renderer2D.prototype.stroke=function(){var e=(e=this._pInst).color.apply(e,arguments);this._setStroke(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",e.levels)},o.default.Renderer2D.prototype.erase=function(e,t){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,e=this._pInst.color(255,e).toString(),this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,e=this._pInst.color(255,t).toString(),this.drawingContext.strokeStyle=e,t=this._cachedBlendMode,this.blendMode(i.REMOVE),this._cachedBlendMode=t,this._isErasing=!0)},o.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},o.default.Renderer2D.prototype.image=function(e,t,n,r,a,i,s,u,c){e.gifProperties&&e._animateGif(this._pInst);try{o.default.MediaElement&&e instanceof o.default.MediaElement&&e._ensureCanvas();var l=(l=this._tint&&e.canvas?this._getTintedImageCanvas(e):l)||e.canvas||e.elt,d=1;e.width&&0<e.width&&(d=l.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(l,d*t,d*n,d*r,d*a,i,s,u,c),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},o.default.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;e.tintCanvas||(e.tintCanvas=document.createElement("canvas")),e.tintCanvas.width!==e.canvas.width&&(e.tintCanvas.width=e.canvas.width),e.tintCanvas.height!==e.canvas.height&&(e.tintCanvas.height=e.canvas.height);var t=e.tintCanvas.getContext("2d");return t.save(),t.clearRect(0,0,e.canvas.width,e.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(t.drawImage(e.canvas,0,0),t.globalCompositeOperation="luminosity",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="color",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="multiply",t.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),t.fillRect(0,0,e.canvas.width,e.canvas.height),t.globalCompositeOperation="destination-in"),t.globalAlpha=this._tint[3]/255,t.drawImage(e.canvas,0,0),t.restore(),e.tintCanvas},o.default.Renderer2D.prototype.blendMode=function(e){if(e===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==i.BLEND&&e!==i.REMOVE&&e!==i.DARKEST&&e!==i.LIGHTEST&&e!==i.DIFFERENCE&&e!==i.MULTIPLY&&e!==i.EXCLUSION&&e!==i.SCREEN&&e!==i.REPLACE&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE&&e!==i.BURN&&e!==i.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}},o.default.Renderer2D.prototype.blend=function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[n.length-1],i=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=a,o.default.prototype.copy.apply(this,i),this.drawingContext.globalCompositeOperation=e},o.default.Renderer2D.prototype._getPixel=function(e,t){return[(e=this.drawingContext.getImageData(e,t,1,1).data)[0],e[1],e[2],e[3]]},o.default.Renderer2D.prototype.loadPixels=function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t;t=this.height*t,n=this.drawingContext.getImageData(0,0,n,t);e._setProperty("imageData",n),e._setProperty("pixels",n.data)},o.default.Renderer2D.prototype.set=function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof o.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var a=0,i=0,s=0,u=0,c=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels.call(r),"number"==typeof n)c<r.pixels.length&&(s=i=a=n,u=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");c<r.pixels.length&&(a=n[0],i=n[1],s=n[2],u=n[3])}else n instanceof o.default.Color&&c<r.pixels.length&&(a=n.levels[0],i=n.levels[1],s=n.levels[2],u=n.levels[3]);for(var l=0;l<r._pixelDensity;l++)for(var d=0;d<r._pixelDensity;d++)c=4*((t*r._pixelDensity+d)*this.width*r._pixelDensity+(e*r._pixelDensity+l)),r.pixels[c]=a,r.pixels[c+1]=i,r.pixels[c+2]=s,r.pixels[c+3]=u}},o.default.Renderer2D.prototype.updatePixels=function(e,t,n,r){var a=this._pixelsState,o=a._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=o,t*=o,n*=o,r*=o,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=a.imageData),this.drawingContext.putImageData(a.imageData,e,t,0,0,n,r)},o.default.Renderer2D.prototype._acuteArcToBezier=function(e,t){var n=t/2,r=Math.cos(n),a=Math.sin(n),o=1/Math.tan(n),i=(n=e+n,Math.cos(n)),s=(n=Math.sin(n),(4-r)/3);a+=(r-s)*o;return{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(s*i+a*n).toFixed(7),by:(s*n-a*i).toFixed(7),cx:(s*i-a*n).toFixed(7),cy:(s*n+a*i).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}},o.default.Renderer2D.prototype.arc=function(e,t,n,r,a,o,s){var u,c=this.drawingContext,l=n/2,d=r/2,f=[];for(e+=l,t+=d;1e-5<=o-a;)u=Math.min(o-a,i.HALF_PI),f.push(this._acuteArcToBezier(a,u)),a+=u;return this._doFill&&(c.beginPath(),f.forEach((function(n,r){0===r&&c.moveTo(e+n.ax*l,t+n.ay*d),c.bezierCurveTo(e+n.bx*l,t+n.by*d,e+n.cx*l,t+n.cy*d,e+n.dx*l,t+n.dy*d)})),s!==i.PIE&&null!=s||c.lineTo(e,t),c.closePath(),c.fill()),this._doStroke&&(c.beginPath(),f.forEach((function(n,r){0===r&&c.moveTo(e+n.ax*l,t+n.ay*d),c.bezierCurveTo(e+n.bx*l,t+n.by*d,e+n.cx*l,t+n.cy*d,e+n.dx*l,t+n.dy*d)})),s===i.PIE?(c.lineTo(e,t),c.closePath()):s===i.CHORD&&c.closePath(),c.stroke()),this},o.default.Renderer2D.prototype.ellipse=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=parseFloat(e[0]),o=parseFloat(e[1]),i=parseFloat(e[2]);e=parseFloat(e[3]);if(n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;var s=i/2*.5522847498,c=e/2*.5522847498,l=a+i,d=o+e;i=a+i/2,e=o+e/2;t.beginPath(),t.moveTo(a,e),t.bezierCurveTo(a,e-c,i-s,o,i,o),t.bezierCurveTo(i+s,o,l,e-c,l,e),t.bezierCurveTo(l,e+c,i+s,d,i,d),t.bezierCurveTo(i-s,d,a,e+c,a,e),n&&t.fill(),r&&t.stroke()},o.default.Renderer2D.prototype.line=function(e,t,n,r){var a=this.drawingContext;return this._doStroke&&this._getStroke()!==u&&(a.beginPath(),a.moveTo(e,t),a.lineTo(n,r),a.stroke()),this},o.default.Renderer2D.prototype.point=function(e,t){var n,r,a=this.drawingContext;return this._doStroke&&this._getStroke()!==u?(n=this._getStroke(),r=this._getFill(),this._setFill(n),a.beginPath(),a.arc(e,t,a.lineWidth/2,0,i.TWO_PI,!1),a.fill(),void this._setFill(r)):this},o.default.Renderer2D.prototype.quad=function(e,t,n,r,a,o,i,s){var c=this.drawingContext,l=this._doFill,d=this._doStroke;if(l&&!d){if(this._getFill()===u)return this}else if(!l&&d&&this._getStroke()===u)return this;return c.beginPath(),c.moveTo(e,t),c.lineTo(n,r),c.lineTo(a,o),c.lineTo(i,s),c.closePath(),l&&c.fill(),d&&c.stroke(),this},o.default.Renderer2D.prototype.rect=function(e){var t,n,r=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],l=e[6],d=(e=e[7],this.drawingContext),f=this._doFill,p=this._doStroke;if(f&&!p){if(this._getFill()===u)return this}else if(!f&&p&&this._getStroke()===u)return this;return d.beginPath(),void 0===s?d.rect(r,a,o,i):(void 0===c&&(c=s),void 0===l&&(l=c),void 0===e&&(e=l),p=(f=Math.abs(o))/2,n=(t=Math.abs(i))/2,t<2*(s=f<2*s?p:s)&&(s=n),t<2*(c=f<2*c?p:c)&&(c=n),t<2*(l=f<2*l?p:l)&&(l=n),t<2*(e=f<2*e?p:e)&&(e=n),d.beginPath(),d.moveTo(r+s,a),d.arcTo(r+o,a,r+o,a+i,c),d.arcTo(r+o,a+i,r,a+i,l),d.arcTo(r,a+i,r,a,e),d.arcTo(r,a,r+o,a,s),d.closePath()),this._doFill&&d.fill(),this._doStroke&&d.stroke(),this},o.default.Renderer2D.prototype.triangle=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=e[0],o=e[1],i=e[2],s=e[3],c=e[4];e=e[5];if(n&&!r){if(this._getFill()===u)return this}else if(!n&&r&&this._getStroke()===u)return this;t.beginPath(),t.moveTo(a,o),t.lineTo(i,s),t.lineTo(c,e),t.closePath(),n&&t.fill(),r&&t.stroke()},o.default.Renderer2D.prototype.endShape=function(e,t,n,r,a,o,s){if(0!==t.length&&(this._doStroke||this._doFill)){var u,c,l,d=e===i.CLOSE,f=(d&&!o&&t.push(t[0]),t.length);if(!n||s!==i.POLYGON&&null!==s)if(!r||s!==i.POLYGON&&null!==s)if(!a||s!==i.POLYGON&&null!==s)if(s===i.POINTS)for(c=0;c<f;c++)u=t[c],this._doStroke&&this._pInst.stroke(u[6]),this._pInst.point(u[0],u[1]);else if(s===i.LINES)for(c=0;c+1<f;c+=2)u=t[c],this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(u[0],u[1],t[c+1][0],t[c+1][1]);else if(s===i.TRIANGLES)for(c=0;c+2<f;c+=3)u=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke());else if(s===i.TRIANGLE_STRIP)for(c=0;c+1<f;c++)u=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(u[0],u[1]),this._doStroke&&this._pInst.stroke(t[c+1][6]),this._doFill&&this._pInst.fill(t[c+1][5]),c+2<f&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this._doStroke&&this._pInst.stroke(t[c+2][6]),this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose(d);else if(s===i.TRIANGLE_FAN){if(2<f){for(this.drawingContext.beginPath(),c=2;c<f;c++)u=t[c],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),c<f-1&&(this._doFill&&u[5]!==t[c+1][5]||this._doStroke&&u[6]!==t[c+1][6])&&(this._doFill&&(this._pInst.fill(u[5]),this.drawingContext.fill(),this._pInst.fill(t[c+1][5])),this._doStroke&&(this._pInst.stroke(u[6]),this.drawingContext.stroke(),this._pInst.stroke(t[c+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(d)}}else if(s===i.QUADS)for(c=0;c+3<f;c+=4){for(u=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(u[0],u[1]),l=1;l<4;l++)this.drawingContext.lineTo(t[c+l][0],t[c+l][1]);this.drawingContext.lineTo(u[0],u[1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose(d)}else if(s===i.QUAD_STRIP){if(3<f)for(c=0;c+1<f;c+=2)u=t[c],this.drawingContext.beginPath(),c+3<f?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(u[0],u[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(u[0],u[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<f;c++)(u=t[c]).isVert&&(u.moveTo?this.drawingContext.moveTo(u[0],u[1]):this.drawingContext.lineTo(u[0],u[1]));this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),c=0;c<f;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),c=0;c<f;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose(d)}else if(3<f){var p=[],h=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<f;c++)u=t[c],p[0]=[u[0],u[1]],p[1]=[u[0]+(h*t[c+1][0]-h*t[c-1][0])/6,u[1]+(h*t[c+1][1]-h*t[c-1][1])/6],p[2]=[t[c+1][0]+(h*t[c][0]-h*t[c+2][0])/6,t[c+1][1]+(h*t[c][1]-h*t[c+2][1])/6],p[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]);d&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose(d)}o=a=r=n=!1,d&&t.pop()}return this},o.default.Renderer2D.prototype.strokeCap=function(e){return e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||(this.drawingContext.lineCap=e),this},o.default.Renderer2D.prototype.strokeJoin=function(e){return e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||(this.drawingContext.lineJoin=e),this},o.default.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},o.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},o.default.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},o.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},o.default.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},o.default.Renderer2D.prototype.bezier=function(e,t,n,r,a,o,i,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,a,o,i,s),this._pInst.endShape(),this},o.default.Renderer2D.prototype.curve=function(e,t,n,r,a,o,i,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(a,o),this._pInst.curveVertex(i,s),this._pInst.endShape(),this},o.default.Renderer2D.prototype._doFillStrokeClose=function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},o.default.Renderer2D.prototype.applyMatrix=function(e,t,n,r,a,o){this.drawingContext.transform(e,t,n,r,a,o)},o.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},o.default.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},o.default.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},o.default.Renderer2D.prototype.translate=function(e,t){return e instanceof o.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},o.default.Renderer2D.prototype.text=function(e,t,n,r,a){void 0!==r&&this.drawingContext.textBaseline===i.BASELINE&&(s=!0,this.drawingContext.textBaseline=i.TOP);var s;r=o.default.Renderer.prototype.text.apply(this,arguments);return s&&(this.drawingContext.textBaseline=i.BASELINE),r},o.default.Renderer2D.prototype._renderText=function(e,t,n,r,a,o){if(!(r<o||a<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e},o.default.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},o.default.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t},o.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),o.default.Renderer.prototype.push.apply(this)},o.default.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,o.default.Renderer.prototype.pop.call(this,e)},o.default.Renderer2D);n.default=c},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(e=e("./main"))&&e.__esModule?e:{default:e};function a(){return{}}r.default.prototype._promisePreloads=[];var o=!(r.default.prototype.registerPromisePreload=function(e){r.default.prototype._promisePreloads.push(e)});r.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this._promisePreloads[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value,u=this,c=s.method,l=s.addCallbacks,d=s.legacyPreloadSetup,f=s.target||this,p=f[c].bind(f);if(f===r.default.prototype){if(o)continue;u=null,p=f[c]}f[c]=this._wrapPromisePreload(u,p,l),d&&(f[d.method]=this._legacyPreloadGenerator(u,d,f[c]))}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}o=!0},r.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){for(var e=this,r=(this._incrementPreload(),null),a=null,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];if(n)for(var u=i.length-1;0<=u&&!a&&"function"==typeof i[u];u--)a=r,r=i.pop();var c=Promise.resolve(t.apply(this,i));return r&&c.then(r),a&&c.catch(a),c.then((function(){return e._decrementPreload()})),c};return e?r.bind(e):r},r.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||a;t=function(){var e=this,t=(this._incrementPreload(),r.apply(this,arguments));return n.apply(this,arguments).then((function(n){Object.assign(t,n),e._decrementPreload()})),t};return e?t.bind(e):t}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(c=e("./main"))&&c.__esModule?c:{default:c},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=a?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var u="defaultCanvas0",c=(a.default.prototype.createCanvas=function(e,t,n){var r,i,s;if(a.default._validateParameters("createCanvas",arguments),(n=n||o.P2D)===o.WEBGL)(i=document.getElementById(u))&&(i.parentNode.removeChild(i),r=this._renderer,this._elements=this._elements.filter((function(e){return e!==r}))),(i=document.createElement("canvas")).id=u,i.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)i=this.canvas;else{i=document.createElement("canvas");for(var c=0;document.getElementById("defaultCanvas".concat(c));)c++;u="defaultCanvas".concat(c),i.id=u,i.classList.add("p5Canvas")}return this._setupDone||(i.dataset.hidden=!0,i.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(s=document.createElement("main"),document.body.appendChild(s)),document.getElementsByTagName("main")[0])).appendChild(i),n===o.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(i,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(i,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(e,t,n){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var r,o,i={};for(r in this.drawingContext){var u=this.drawingContext[r];"object"!==s(u)&&"function"!=typeof u&&(i[r]=u)}for(o in this._renderer.resize(e,t),this.width=e,this.height=t,i)try{this.drawingContext[o]=i[o]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(e,t,n){return a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(e,t,n,this)},a.default.prototype.blendMode=function(e){a.default._validateParameters("blendMode",arguments),e===o.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=o.BLEND),this._renderer.blendMode(e)},a.default);n.default=c},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("../main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants")),s=c(e("../helpers"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function c(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),o.default.prototype._normalizeArcAngles=function(e,t,n,r,a){var o;return e-=i.TWO_PI*Math.floor(e/i.TWO_PI),t-=i.TWO_PI*Math.floor(t/i.TWO_PI),o=Math.min(Math.abs(e-t),i.TWO_PI-Math.abs(e-t)),a&&(e=e<=i.HALF_PI?Math.atan(n/r*Math.tan(e)):e>i.HALF_PI&&e<=3*i.HALF_PI?Math.atan(n/r*Math.tan(e))+i.PI:Math.atan(n/r*Math.tan(e))+i.TWO_PI,t=t<=i.HALF_PI?Math.atan(n/r*Math.tan(t)):t>i.HALF_PI&&t<=3*i.HALF_PI?Math.atan(n/r*Math.tan(t))+i.PI:Math.atan(n/r*Math.tan(t))+i.TWO_PI),t<e&&(t+=i.TWO_PI),{start:e,stop:t,correspondToSamePoint:o<1e-5}},o.default.prototype.arc=function(e,t,n,r,a,i,u,c){return o.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&a!==i&&(a=this._toRadians(a),i=this._toRadians(i),n=Math.abs(n),r=Math.abs(r),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),(t=this._normalizeArcAngles(a,i,e.w,e.h,!0)).correspondToSamePoint?this._renderer.ellipse([e.x,e.y,e.w,e.h,c]):(this._renderer.arc(e.x,e.y,e.w,e.h,t.start,t.stop,u,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[e.x,e.y,e.w,e.h,t.start,t.stop,u]))),this},o.default.prototype.ellipse=function(e,t,n,r,a){return o.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},o.default.prototype.circle=function(){o.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,e)},o.default.prototype._renderEllipse=function(e,t,n,r,a){return(this._renderer._doStroke||this._renderer._doFill)&&(n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r)),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),this._renderer.ellipse([e.x,e.y,e.w,e.h,a]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[e.x,e.y,e.w,e.h])),this},o.default.prototype.line=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("line",n),this._renderer._doStroke&&(e=this._renderer).line.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",n),this},o.default.prototype.point=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("point",n),this._renderer._doStroke&&(1===n.length&&n[0]instanceof o.default.Vector?this._renderer.point.call(this._renderer,n[0].x,n[0].y,n[0].z):((e=this._renderer).point.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",n))),this},o.default.prototype.quad=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("quad",n),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&n.length<12?this._renderer.quad.call(this._renderer,n[0],n[1],0,n[2],n[3],0,n[4],n[5],0,n[6],n[7],0,n[8],n[9]):((e=this._renderer).quad.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",n))),this},o.default.prototype.rect=function(){return o.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},o.default.prototype.square=function(e,t,n,r,a,i,s){return o.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,a,i,s)},o.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=s.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},o.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this},e=o.default,n.default=e},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.ellipseMode=function(e){return o.default._validateParameters("ellipseMode",arguments),e!==i.CORNER&&e!==i.CORNERS&&e!==i.RADIUS&&e!==i.CENTER||(this._renderer._ellipseMode=e),this},o.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},o.default.prototype.rectMode=function(e){return o.default._validateParameters("rectMode",arguments),e!==i.CORNER&&e!==i.CORNERS&&e!==i.RADIUS&&e!==i.CENTER||(this._renderer._rectMode=e),this},o.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},o.default.prototype.strokeCap=function(e){return o.default._validateParameters("strokeCap",arguments),e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||this._renderer.strokeCap(e),this},o.default.prototype.strokeJoin=function(e){return o.default._validateParameters("strokeJoin",arguments),e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||this._renderer.strokeJoin(e),this},o.default.prototype.strokeWeight=function(e){return o.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var u=o.default;n.default=u},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(a=e("../main"))&&a.__esModule?a:{default:a};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},r.default.prototype.bezierDetail=function(e){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},r.default.prototype.bezierPoint=function(e,t,n,a,o){r.default._validateParameters("bezierPoint",arguments);var i=1-o;return Math.pow(i,3)*e+3*Math.pow(i,2)*o*t+3*i*Math.pow(o,2)*n+Math.pow(o,3)*a},r.default.prototype.bezierTangent=function(e,t,n,a,o){r.default._validateParameters("bezierTangent",arguments);var i=1-o;return 3*a*Math.pow(o,2)-3*n*Math.pow(o,2)+6*n*i*o-6*t*i*o+3*t*Math.pow(i,2)-3*e*Math.pow(i,2)},r.default.prototype.curve=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("curve",n),this._renderer._doStroke&&(e=this._renderer).curve.apply(e,n),this},r.default.prototype.curveDetail=function(e){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},r.default.prototype.curveTightness=function(e){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},r.default.prototype.curvePoint=function(e,t,n,a,o){r.default._validateParameters("curvePoint",arguments);var i=this._renderer._curveTightness,s=o*o*o,u=o*o;return e*((i-1)/2*s+(1-i)*u+(i-1)/2*o)+t*((i+3)/2*s+(-5-i)/2*u+1)+n*((-3-i)/2*s+(i+2)*u+(1-i)/2*o)+a*((1-i)/2*s+(i-1)/2*u)},r.default.prototype.curveTangent=function(e,t,n,a,o){r.default._validateParameters("curveTangent",arguments);var i=this._renderer._curveTightness,s=o*o*3;return e*((i-1)/2*s+(1-i)*(o=2*o)+(i-1)/2)+t*((i+3)/2*s+(-5-i)/2*o)+n*((-3-i)/2*s+(i+2)*o+(1-i)/2)+a*((1-i)/2*s+(i-1)/2*o)};var a=r.default;n.default=a},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(v=e("../main"))&&v.__esModule?v:{default:v},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}var u=null,c=[],l=[],d=!1,f=!1,p=!1,h=!1,m=!0,v=(o.default.prototype.beginContour=function(){return l=[],h=!0,this},o.default.prototype.beginShape=function(e){var t;return o.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(u=e===i.POINTS||e===i.LINES||e===i.TRIANGLES||e===i.TRIANGLE_FAN||e===i.TRIANGLE_STRIP||e===i.QUADS||e===i.QUAD_STRIP?e:null,c=[],l=[]),this},o.default.prototype.bezierVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(o.default._validateParameters("bezierVertex",n),this._renderer.isP3D)(e=this._renderer).bezierVertex.apply(e,n);else if(0===c.length)o.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{d=!0;for(var a=[],i=0;i<n.length;i++)a[i]=n[i];a.isVert=!1,(h?l:c).push(a)}return this},o.default.prototype.curveVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("curveVertex",n),this._renderer.isP3D?(e=this._renderer).curveVertex.apply(e,n):(f=!0,this.vertex(n[0],n[1])),this},o.default.prototype.endContour=function(){var e=l[0].slice();e.isVert=l[0].isVert,e.moveTo=!1,l.push(e),m&&(c.push(c[0]),m=!1);for(var t=0;t<l.length;t++)c.push(l[t]);return this},o.default.prototype.endShape=function(e){if(o.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,f,d,p,h,u);else{if(0===c.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===i.CLOSE;t&&!h&&c.push(c[0]),this._renderer.endShape(e,c,f,d,p,h,u),m=!(h=p=d=f=!1),t&&c.pop()}return this},o.default.prototype.quadraticVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(o.default._validateParameters("quadraticVertex",n),this._renderer.isP3D)(e=this._renderer).quadraticVertex.apply(e,n);else{if(this._contourInited)return(e={}).x=n[0],e.y=n[1],e.x3=n[2],e.y3=n[3],e.type=i.QUADRATIC,this._contourVertices.push(e),this;if(0<c.length){p=!0;for(var a=[],s=0;s<n.length;s++)a[s]=n[s];a.isVert=!1,(h?l:c).push(a)}else o.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},o.default.prototype.vertex=function(e,t,n,r,a){var o;return this._renderer.isP3D?(o=this._renderer).vertex.apply(o,arguments):((o=[]).isVert=!0,o[0]=e,o[1]=t,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),n&&(o.moveTo=n),(h?(0===l.length&&(o.moveTo=!0),l):c).push(o)),this},o.default.prototype.normal=function(e,t,n){var r;return this._assert3d("normal"),o.default._validateParameters("normal",arguments),(r=this._renderer).normal.apply(r,arguments),this},o.default);n.default=v},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o,i,s;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(o=Object.keys,e=Object.defineProperty,i="function"==typeof Symbol&&"symbol"===a(Symbol()),s=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("target must be an object");for(var n,r,a,u=Object(e),c=1;c<arguments.length;++c)for(n=Object(arguments[c]),a=o(n),i&&Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(n).filter(function(e){return function(t){return s.call(e,t)}}(n))),r=0;r<a.length;++r)u[a[r]]=n[a[r]];return u},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(e,t,n){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e),n=((isNaN(t)||t<1)&&(t=1),this._isGlobal?window:this);if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=function(e){e.call(n)},a=0;a<t;a++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(r),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(r)}}}},e=e.default,n.default=e},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};r.default.prototype.applyMatrix=function(){var e=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||e?(e=this._renderer).applyMatrix.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments[0])):(e=this._renderer).applyMatrix.apply(e,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(e,t){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},r.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},r.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},r.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},r.default.prototype.scale=function(e,t,n){var a;return r.default._validateParameters("scale",arguments),e instanceof r.default.Vector?(e=(a=e).x,t=a.y,n=a.z):e instanceof Array&&(e=(a=e)[0],t=a[1],n=a[2]||1),isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,e,t,n),this},r.default.prototype.shearX=function(e){return r.default._validateParameters("shearX",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,0,Math.tan(e),1,0,0),this},r.default.prototype.shearY=function(e){return r.default._validateParameters("shearY",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,Math.tan(e),0,1,0,0),this},r.default.prototype.translate=function(e,t,n){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this},e=r.default,n.default=e},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}a.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=i(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof a.default.Color?n="p5.Color":t instanceof a.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t),e="".concat(e,"p5TypeID"),localStorage.setItem(e,n)},a.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,o(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,o(t))}return t},a.default.prototype.clearStorage=function(){localStorage.clear()},a.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.createStringDict=function(e,t){return r.default._validateParameters("createStringDict",arguments),new r.default.StringDict(e,t)},r.default.prototype.createNumberDict=function(e,t){return r.default._validateParameters("createNumberDict",arguments),new r.default.NumberDict(e,t)},r.default.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},r.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},r.default.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},r.default.TypedDict.prototype.get=function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))},r.default.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},r.default.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},r.default.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},r.default.TypedDict.prototype.clear=function(){this.data={}},r.default.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]},r.default.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))},r.default.TypedDict.prototype.saveTable=function(e){var t,n="";for(t in this.data)n+="".concat(t,",").concat(this.data[t],"\n");var a=new Blob([n],{type:"text/csv"});r.default.prototype.downloadFile(a,e||"mycsv","csv")},r.default.TypedDict.prototype.saveJSON=function(e,t){r.default.prototype.saveJSON(this.data,e,t)},r.default.TypedDict.prototype._validate=function(e){return!0},r.default.StringDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.TypedDict.apply(this,t)},r.default.StringDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.StringDict.prototype._validate=function(e){return"string"==typeof e},r.default.NumberDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.TypedDict.apply(this,t)},r.default.NumberDict.prototype=Object.create(r.default.TypedDict.prototype),r.default.NumberDict.prototype._validate=function(e){return"number"==typeof e},r.default.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},r.default.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},r.default.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},r.default.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},r.default.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t,n=this.data[Object.keys(this.data)[0]];for(t in this.data)this.data[t]*e<n*e&&(n=this.data[t]);return n},r.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},r.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},r.default.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t},r.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},r.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},e=r.default.TypedDict,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(t,n,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function i(e){return(i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}function s(e,t,n){return(t._userNode||document.body).appendChild(e),n=new(n?o.default.MediaElement:o.default.Element)(e,t),t._elements.push(n),n}function u(e,t,n,r){var a=document.createElement(t),o=("string"==typeof(n=n||"")&&(n=[n]),!0),i=(t=!1,void 0);try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value,d=document.createElement("source");d.setAttribute("src",l),a.appendChild(d)}}catch(e){t=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(t)throw i}}"function"==typeof r&&a.addEventListener("canplaythrough",(function e(){r(),a.removeEventListener("canplaythrough",e)}));var f=s(a,e,!0);return f.loadedmetadata=!1,a.addEventListener("loadedmetadata",(function(){f.width=a.videoWidth,f.height=a.videoHeight,0===f.elt.width&&(f.elt.width=a.videoWidth),0===f.elt.height&&(f.elt.height=a.videoHeight),f.presetPlaybackRate&&(f.elt.playbackRate=f.presetPlaybackRate,delete f.presetPlaybackRate),f.loadedmetadata=!0})),f}function c(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r}o.default.prototype.select=function(e,t){return o.default._validateParameters("select",arguments),(t=this._getContainer(t).querySelector(e))?this._wrapElement(t):null},o.default.prototype.selectAll=function(e,t){o.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var a=0;a<r.length;a++){var i=this._wrapElement(r[a]);n.push(i)}return n},o.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof o.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},o.default.prototype._wrapElement=function(e){var t,n=Array.prototype.slice.call(e.children);return"INPUT"===e.tagName&&"checkbox"===e.type?((t=new o.default.Element(e,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},t):"VIDEO"===e.tagName||"AUDIO"===e.tagName?new o.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new o.default.Element(e,this)):0<n.length&&n.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))?this.createRadio(new o.default.Element(e,this)):new o.default.Element(e,this)},o.default.prototype.removeElements=function(e){o.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},o.default.Element.prototype.changed=function(e){return o.default.Element._adjustListener("change",e,this),this},o.default.Element.prototype.input=function(e){return o.default.Element._adjustListener("input",e,this),this},o.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,s(t,this)},o.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,s(t,this)},o.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,s(t,this)},o.default.prototype.createImg=function(){o.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=s(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},o.default.prototype.createA=function(e,t,n){o.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),s(r,this)},o.default.prototype.createSlider=function(e,t,n,r){o.default._validateParameters("createSlider",arguments);var a=document.createElement("input");return a.type="range",a.min=e,a.max=t,0===r?a.step=1e-18:r&&(a.step=r),"number"==typeof n&&(a.value=n),s(a,this)},o.default.prototype.createButton=function(e,t){o.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),s(n,this)},o.default.prototype.createCheckbox=function(){o.default._validateParameters("createCheckbox",arguments);var e=document.createElement("div"),t=document.createElement("input"),n=(t.type="checkbox",document.createElement("label")),r=(n.appendChild(t),e.appendChild(n),s(e,this));return r.checked=function(){var e=r.elt.firstElementChild.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!!arguments[0]}return r},this.value=function(e){return r.value=e,this},arguments[0]&&(r.value(arguments[0]),(e=document.createElement("span")).innerHTML=arguments[0],n.appendChild(e)),arguments[1]&&(t.checked=!0),r},o.default.prototype.createSelect=function(){o.default._validateParameters("createSelect",arguments);var e,t,n=arguments[0];return n instanceof o.default.Element&&n.elt instanceof HTMLSelectElement?this.elt=(e=n).elt:n instanceof HTMLSelectElement?(e=s(n,this),this.elt=n):(t=document.createElement("select"),n&&"boolean"==typeof n&&t.setAttribute("multiple","true"),e=s(t,this),this.elt=t),e.option=function(e,t){var n;if(void 0!==e){for(var r,a=0;a<this.elt.length;a+=1)if(this.elt[a].textContent===e){n=a;break}void 0!==n?!1===t?this.elt.remove(n):this.elt[n].value=t:((r=document.createElement("option")).textContent=e,r.value=void 0===t?e:t,this.elt.appendChild(r),this._pInst._elements.push(r))}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=this.elt.selectedOptions[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;n.push(u.value)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e},o.default.prototype.createRadio=function(){function e(e){return e instanceof HTMLInputElement&&"radio"===e.type}function t(e){return e instanceof HTMLLabelElement}var n,r,a,i=arguments[0];return i instanceof o.default.Element&&(i.elt instanceof HTMLDivElement||i.elt instanceof HTMLSpanElement)?(n=i,this.elt=i.elt):i instanceof HTMLDivElement||i instanceof HTMLSpanElement?(n=s(i,this),r=this.elt=i,"string"==typeof arguments[1]&&(a=arguments[1])):("string"==typeof i&&(a=i),r=document.createElement("div"),n=s(r,this),this.elt=r),n._name=a||"radioOption",n._getOptionsArray=function(){return Array.from(this.elt.children).filter((function(n){return e(n)||t(n)&&e(n.firstElementChild)})).map((function(t){return e(t)?t:t.firstElementChild}))},n.option=function(e,r){var a,o,i,s=!0,u=!1,c=void 0;try{for(var l,d=n._getOptionsArray()[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var f=l.value;if(f.value===e){a=f;break}}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}return void 0===a&&((a=document.createElement("input")).setAttribute("type","radio"),a.setAttribute("value",e)),a.setAttribute("name",n._name),t(a.parentElement)?o=a.parentElement:(o=document.createElement("label")).insertAdjacentElement("afterbegin",a),o.lastElementChild instanceof HTMLSpanElement?i=o.lastElementChild:(i=document.createElement("span"),a.insertAdjacentElement("afterend",i)),i.innerHTML=void 0===r?e:r,this.elt.appendChild(o),a},n.remove=function(e){var r=!0,a=!1,o=void 0;try{for(var i,s=n._getOptionsArray()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;if(u.value===e)return void(t(u.parentElement)?u.parentElement:u).remove()}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}},n.value=function(){var e="",t=!0,r=!1,a=void 0;try{for(var o,i=n._getOptionsArray()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;if(s.checked){e=s.value;break}}}catch(e){r=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}return e},n.selected=function(e){var t=null;if(void 0===e){var r=!0,a=!1,o=void 0;try{for(var i,s=n._getOptionsArray()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;if(u.checked){t=u;break}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}else{n._getOptionsArray().forEach((function(e){e.checked=!1,e.removeAttribute("checked")}));var c=!0;a=!1,o=void 0;try{for(var l,d=n._getOptionsArray()[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var f=l.value;f.value===e&&(f.setAttribute("checked",!0),f.checked=!0,t=f)}}catch(e){a=!0,o=e}finally{try{c||null==d.return||d.return()}finally{if(a)throw o}}}return t},n.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,r=!1,a=void 0;try{for(var o,i=n._getOptionsArray()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.setAttribute("disabled",e)}catch(e){r=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw a}}},n},o.default.prototype.createColorPicker=function(e){o.default._validateParameters("createColorPicker",arguments);var t=document.createElement("input");return t.type="color",e?e instanceof o.default.Color?t.value=e.toString("#rrggbb"):(o.default.prototype._colorMode="rgb",o.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},t.value=o.default.prototype.color(e).toString("#rrggbb")):t.value="#000000",(t=s(t,this)).color=function(){return e&&(e.mode&&(o.default.prototype._colorMode=e.mode),e.maxes&&(o.default.prototype._colorMaxes=e.maxes)),o.default.prototype.color(this.elt.value)},t},o.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",n=(o.default._validateParameters("createInput",arguments),document.createElement("input"));return n.setAttribute("value",e),n.setAttribute("type",t),s(n,this)},o.default.prototype.createFileInput=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(o.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(t=document.createElement("input")).setAttribute("type","file"),n&&t.setAttribute("multiple",!0),t.addEventListener("change",(function(t){var n=!0,r=!1,a=void 0;try{for(var i,s=t.target.files[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;o.default.File._load(u,e)}}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}),!1),s(t,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},o.default.prototype.createVideo=function(e,t){return o.default._validateParameters("createVideo",arguments),u(this,"video",e,t)},o.default.prototype.createAudio=function(e,t){return o.default._validateParameters("createAudio",arguments),u(this,"audio",e,t)},o.default.prototype.VIDEO="video",o.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),o.default.prototype.createCapture=function(){if(o.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var e,t=!0,n=!0,r=!0,a=!1,u=void 0;try{for(var c,l=arguments[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var d=c.value;d===o.default.prototype.VIDEO?n=!1:d===o.default.prototype.AUDIO?t=!1:"object"===i(d)?f=d:"function"==typeof d&&(e=d)}}catch(e){a=!0,u=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw u}}var f=f||{video:t,audio:n},p=document.createElement("video"),h=(p.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(f).then((function(t){try{"srcObject"in p?p.srcObject=t:p.src=window.URL.createObjectURL(t)}catch(e){p.src=t}}),console.log),s(p,this,!0));return h.loadedmetadata=!1,p.addEventListener("loadedmetadata",(function(){p.play(),p.width?(h.width=p.width,h.height=p.height):(h.width=h.elt.width=p.videoWidth,h.height=h.elt.height=p.videoHeight),h.loadedmetadata=!0,e&&e(p.srcObject)})),h},o.default.prototype.createElement=function(e,t){return o.default._validateParameters("createElement",arguments),e=document.createElement(e),void 0!==t&&(e.innerHTML=t),s(e,this)},o.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},o.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},o.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},o.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},o.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof o.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},o.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,a={x:this.elt.offsetLeft,y:this.elt.offsetTop},o=(n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),i=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(o/2+this.parent().offsetLeft,i/2+this.parent().offsetTop):"horizontal"===e?this.position(o/2+this.parent().offsetLeft,a.y):"vertical"===e&&this.position(a.x,i/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},o.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},o.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==arguments[2]&&"fixed"!==arguments[2]&&"relative"!==arguments[2]&&"sticky"!==arguments[2]&&"initial"!==arguments[2]&&"inherit"!==arguments[2]?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},o.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=e,this},o.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},o.default.Element.prototype.style=function(e,t){if(void 0===(t=t instanceof o.default.Color?"rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")":t)){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var a=n[r].split(":");a[0]&&a[1]&&(this.elt.style[a[0].trim()]=a[1].trim())}}else this.elt.style[e]=t,"width"!==e&&"height"!==e&&"left"!==e&&"top"!==e||(t=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/[^\d.]/g,""),this[e]=Math.round(parseFloat(t,10)));return this},o.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},o.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},o.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},o.default.Element.prototype.show=function(){return this.elt.style.display="block",this},o.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},o.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,a=o.default.prototype.AUTO;if(n!==a||r!==a){if(n===a?n=t*this.width/this.height:r===a&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var i,s={},u=this.elt.getContext("2d");for(i in u)s[i]=u[i];for(i in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[i]=s[i]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},o.default.Element.prototype.remove=function(){this instanceof o.default.MediaElement&&(this.stop(),null!==(t=this.elt.srcObject)&&t.getTracks().forEach((function(e){e.stop()})));var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},o.default.Element.prototype.drop=function(e,t){var n;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",n=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault()}))),this.elt.addEventListener("dragleave",n)),o.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n);for(var r=n.dataTransfer.files,a=0;a<r.length;a++){var i=r[a];o.default.File._load(i,e)}}),this)):console.log("The File APIs are not fully supported in this browser."),this},o.default.MediaElement=function(e,t){o.default.Element.call(this,e,t);var n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var a=document.createElement("source");a.src=t,e.appendChild(a),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}},o.default.MediaElement.prototype=Object.create(o.default.Element.prototype),o.default.MediaElement.prototype.play=function(){var e;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?console.error(e):console.error("Media play method encountered an unexpected error",e)})),this},o.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},o.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},o.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},o.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},o.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var t=setTimeout((function(){console.error(e)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})},o.default.MediaElement.prototype.autoplay=function(e){var t=this,n=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",e),e&&!n&&(e=function(){return t._setupAutoplayFailDetection()},4===this.elt.readyState?e():this.elt.addEventListener("canplay",e,{passive:!0,once:!0})),this},o.default.MediaElement.prototype.volume=function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e},o.default.MediaElement.prototype.speed=function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e},o.default.MediaElement.prototype.time=function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)},o.default.MediaElement.prototype.duration=function(){return this.elt.duration},o.default.MediaElement.prototype.pixels=[],o.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},o.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},o.default.MediaElement.prototype.updatePixels=function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this},o.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),o.default.Renderer2D.prototype._getPixel.apply(this,arguments)},o.default.MediaElement.prototype.set=function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))},o.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),o.default.prototype.copy.apply(this,arguments)},o.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),o.default.Image.prototype.mask.apply(this,arguments)},o.default.MediaElement.prototype.isModified=function(){return this._modified},o.default.MediaElement.prototype.setModified=function(e){this._modified=e},o.default.MediaElement.prototype.onended=function(e){return this._onended=e,this},o.default.MediaElement.prototype.connect=function(e){var t,n;if("function"==typeof o.default.prototype.getAudioContext)t=o.default.prototype.getAudioContext(),n=o.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)},o.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},o.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},o.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},o.default.MediaElement.prototype.addCue=function(e,t,n){var r=this._cueIDCounter++;t=new c(t,e,r,n);return this._cues.push(t),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r},o.default.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},o.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},o.default.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e},o.default.File=function(e,t){this.file=e,this._pInst=t,t=e.type.split("/"),this.type=t[0],this.subtype=t[1],this.name=e.name,this.size=e.size,this.data=void 0},o.default.File._createLoader=function(e,t){var n=new FileReader;return n.onload=function(n){var r,a=new o.default.File(e);"application/json"===a.file.type?a.data=JSON.parse(n.target.result):"text/xml"===a.file.type?(r=(new DOMParser).parseFromString(n.target.result,"text/xml"),a.data=new o.default.XML(r.documentElement)):a.data=n.target.result,t(a)},n},o.default.File._load=function(e,t){var n;/^text\//.test(e.type)||"application/json"===e.type?o.default.File._createLoader(e,t).readAsText(e):/^(video|audio)\//.test(e.type)?((n=new o.default.File(e)).data=URL.createObjectURL(e),t(n)):o.default.File._createLoader(e,t).readAsDataURL(e)},t=o.default,r.default=t},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(v=e("../core/main"))&&v.__esModule?v:{default:v},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",o.default.prototype.accelerationX=0,o.default.prototype.accelerationY=0,o.default.prototype.accelerationZ=0,o.default.prototype.pAccelerationX=0,o.default.prototype.pAccelerationY=0,o.default.prototype.pAccelerationZ=0,o.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},o.default.prototype.rotationX=0,o.default.prototype.rotationY=0,o.default.prototype.rotationZ=0,o.default.prototype.pRotationX=0,o.default.prototype.pRotationY=0;var u=o.default.prototype.pRotationZ=0,c=0,l=0,d="clockwise",f="clockwise",p="clockwise",h=(o.default.prototype.pRotateDirectionX=void 0,o.default.prototype.pRotateDirectionY=void 0,o.default.prototype.pRotateDirectionZ=void 0,o.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},o.default.prototype.turnAxis=void 0,.5),m=30,v=(o.default.prototype.setMoveThreshold=function(e){o.default._validateParameters("setMoveThreshold",arguments),h=e},o.default.prototype.setShakeThreshold=function(e){o.default._validateParameters("setShakeThreshold",arguments),m=e},o.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===i.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},o.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},o.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n,r,a,o=this._isGlobal?window:this;"function"==typeof o.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&o.deviceMoved(),"function"==typeof o.deviceTurned&&(t=this.rotationX+180,e=this.pRotationX+180,n=u+180,0<t-e&&t-e<270||t-e<-270?d="clockwise":(t-e<0||270<t-e)&&(d="counter-clockwise"),d!==this.pRotateDirectionX&&(n=t),90<Math.abs(t-n)&&Math.abs(t-n)<270&&(n=t,this._setProperty("turnAxis","X"),o.deviceTurned()),this.pRotateDirectionX=d,u=n-180,e=this.rotationY+180,t=this.pRotationY+180,n=c+180,0<e-t&&e-t<270||e-t<-270?f="clockwise":(e-t<0||270<e-this.pRotationY)&&(f="counter-clockwise"),f!==this.pRotateDirectionY&&(n=e),90<Math.abs(e-n)&&Math.abs(e-n)<270&&(n=e,this._setProperty("turnAxis","Y"),o.deviceTurned()),this.pRotateDirectionY=f,c=n-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),o.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),"function"==typeof o.deviceShaken&&(null!==this.pAccelerationX&&(r=Math.abs(this.accelerationX-this.pAccelerationX),a=Math.abs(this.accelerationY-this.pAccelerationY)),m<r+a&&o.deviceShaken())},o.default);n.default=v},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(e){var t;this._downKeys[e.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"!=typeof(t=this._isGlobal?window:this).keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault())},r.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},r.default.prototype._onkeypress=function(e){var t;e.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"==typeof(t=this._isGlobal?window:this).keyTyped&&!1===t.keyTyped(e)&&e.preventDefault())},r.default.prototype._onblur=function(e){this._downKeys={}},r.default.prototype.keyIsDown=function(e){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},r.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1},e=r.default,n.default=e},{"../core/main":267}],286:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(o=e("../core/main"))&&o.__esModule?o:{default:o},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.movedX=0,o.default.prototype.movedY=0,o.default.prototype._hasMouseInteracted=!1,o.default.prototype.mouseX=0,o.default.prototype.mouseY=0,o.default.prototype.pmouseX=0,o.default.prototype.pmouseY=0,o.default.prototype.winMouseX=0,o.default.prototype.winMouseY=0,o.default.prototype.pwinMouseX=0,o.default.prototype.pwinMouseY=0,o.default.prototype.mouseButton=0,o.default.prototype.mouseIsPressed=!1,o.default.prototype._updateNextMouseCoords=function(e){var t,n,r,a,o;null!==this._curElement&&(!e.touches||0<e.touches.length)&&(t=this._curElement.elt,n=this.width,r=this.height,(a=e)&&!a.clientX&&(a.touches?a=a.touches[0]:a.changedTouches&&(a=a.changedTouches[0])),o=t.getBoundingClientRect(),n=t.scrollWidth/n||1,t=t.scrollHeight/r||1,r={x:(a.clientX-o.left)/n,y:(a.clientY-o.top)/t,winX:a.clientX,winY:a.clientY,id:a.identifier},this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",r.x),this._setProperty("mouseY",r.y),this._setProperty("winMouseX",r.winX),this._setProperty("winMouseY",r.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},o.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},o.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",i.CENTER):2===e.button?this._setProperty("mouseButton",i.RIGHT):this._setProperty("mouseButton",i.LEFT)},o.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},o.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},o.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},o.default.prototype._ondragend=o.default.prototype._onmouseup,o.default.prototype._ondragover=o.default.prototype._onmousemove,o.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},o.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},o.default.prototype._mouseWheelDeltaY=0,o.default.prototype._pmouseWheelDeltaY=0,o.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},o.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},o.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=o.default,n.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=function(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=e.getBoundingClientRect();t=e.scrollWidth/t||1,e=e.scrollHeight/n||1;return{x:((n=r.touches[a]||r.changedTouches[a]).clientX-o.left)/t,y:(n.clientY-o.top)/e,winX:n.clientX,winY:n.clientY,id:n.identifier}}(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},e.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},e.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},e.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()},e=e.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,o,i,s={};s._toPixels=function(e){var t,n;return e instanceof ImageData?e.data:e.getContext("2d")?e.getContext("2d").getImageData(0,0,e.width,e.height).data:e.getContext("webgl")?(n=(t=e.getContext("webgl")).drawingBufferWidth*t.drawingBufferHeight*4,n=new Uint8Array(n),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),n):void 0},s._getARGB=function(e,t){return e[3+(t*=4)]<<24&4278190080|e[t]<<16&16711680|e[1+t]<<8&65280|255&e[2+t]},s._setPixels=function(e,t){for(var n,r=0,a=e.length;r<a;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[1+n]=(65280&t[r])>>>8,e[2+n]=255&t[r],e[3+n]=(4278190080&t[r])>>>24},s._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},s._createImageData=function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},s.apply=function(e,t,n){var r=e.getContext("2d"),a=r.getImageData(0,0,e.width,e.height);(t=t(a,n))instanceof ImageData?r.putImageData(t,0,0,0,0,e.width,e.height):r.putImageData(a,0,0,0,0,e.width,e.height)},s.threshold=function(e,t){for(var n=s._toPixels(e),r=(void 0===t&&(t=.5),Math.floor(255*t)),a=0;a<n.length;a+=4){var o=r<=.2126*n[a]+.7152*n[a+1]+.0722*n[a+2]?255:0;n[a]=n[a+1]=n[a+2]=o}},s.gray=function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4){var r=t[n],a=t[n+1],o=t[n+2];t[n]=t[n+1]=t[n+2]=.2126*r+.7152*a+.0722*o}},s.opaque=function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},s.invert=function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},s.posterize=function(e,t){var n=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,a=0;a<n.length;a+=4){var o=n[a],i=n[a+1],u=n[a+2];n[a]=255*(o*t>>8)/r,n[a+1]=255*(i*t>>8)/r,n[a+2]=255*(u*t>>8)/r}},s.dilate=function(e){for(var t,n,r,a,o,i,u,c,l,d=s._toPixels(e),f=0,p=d.length?d.length/4:0,h=new Int32Array(p);f<p;)for(n=(t=f)+e.width;f<n;)a=r=s._getARGB(d,f),(l=f-1)<t&&(l=f),n<=(c=f+1)&&(c=f),(o=f-e.width)<0&&(o=0),p<=(i=f+e.width)&&(i=f),o=s._getARGB(d,o),l=s._getARGB(d,l),i=s._getARGB(d,i),(a=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<(u=77*(l>>16&255)+151*(l>>8&255)+28*(255&l))&&(r=l,a=u),a<(u=77*((l=s._getARGB(d,c))>>16&255)+151*(l>>8&255)+28*(255&l))&&(r=l,a=u),a<(c=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))&&(r=o,a=c),a<(l=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(r=i,a=l),h[f++]=r;s._setPixels(d,h)},s.erode=function(e){for(var t,n,r,a,o,i,u,c,l,d=s._toPixels(e),f=0,p=d.length?d.length/4:0,h=new Int32Array(p);f<p;)for(n=(t=f)+e.width;f<n;)a=r=s._getARGB(d,f),(l=f-1)<t&&(l=f),n<=(c=f+1)&&(c=f),(o=f-e.width)<0&&(o=0),p<=(i=f+e.width)&&(i=f),o=s._getARGB(d,o),l=s._getARGB(d,l),i=s._getARGB(d,i),(u=77*(l>>16&255)+151*(l>>8&255)+28*(255&l))<(a=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(r=l,a=u),(u=77*((l=s._getARGB(d,c))>>16&255)+151*(l>>8&255)+28*(255&l))<a&&(r=l,a=u),(c=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))<a&&(r=o,a=c),(l=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<a&&(r=i,a=l),h[f++]=r;s._setPixels(d,h)},s.blur=function(e,t){!function(e,t){for(var n,u,c,l,d,f,p,h,m,v,y=s._toPixels(e),g=e.width,b=e.height,x=g*b,w=new Int32Array(x),k=0;k<x;k++)w[k]=s._getARGB(y,k);var S,_,T,E=new Int32Array(x),C=new Int32Array(x),I=new Int32Array(x),N=new Int32Array(x),j=0,R=3.5*t|0;if(r!==(R=R<1?1:R<248?R:248)){a=1+(r=R)<<1,o=new Int32Array(a),i=new Array(a);for(var A,M,O=0;O<a;O++)i[O]=new Int32Array(256);for(var L=1,D=R-1;L<R;L++){o[R+L]=o[D]=M=D*D;for(var P=i[R+L],F=i[D--],z=0;z<256;z++)P[z]=F[z]=M*z}A=o[R]=R*R,P=i[R];for(var B=0;B<256;B++)P[B]=A*B}for(_=0;_<b;_++){for(S=0;S<g;S++){if(l=c=u=d=n=0,(f=S-r)<0)v=-f,f=0;else{if(g<=f)break;v=0}for(T=v;T<a&&!(g<=f);T++){var U,V=w[f+j];d+=(U=i[T])[(-16777216&V)>>>24],u+=U[(16711680&V)>>16],c+=U[(65280&V)>>8],l+=U[255&V],n+=o[T],f++}E[p=j+S]=d/n,C[p]=u/n,I[p]=c/n,N[p]=l/n}j+=g}for(m=(h=-r)*g,_=j=0;_<b;_++){for(S=0;S<g;S++){if(h<(l=c=u=d=n=0))v=p=-h,f=S;else{if(b<=h)break;v=0,p=h,f=S+m}for(T=v;T<a&&!(b<=p);T++)d+=(U=i[T])[E[f]],u+=U[C[f]],c+=U[I[f]],l+=U[N[f]],n+=o[T],p++,f+=g;w[S+j]=d/n<<24|u/n<<16|c/n<<8|l/n}j+=g,m+=g,h++}s._setPixels(y,w)}(e,t)},n.default=s},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),a=o(e("omggif"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){r.default._validateParameters("saveCanvas",arguments);var e,t,n,a,o=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],o.shift()):arguments[0]instanceof r.default.Element?(e=arguments[0].elt,o.shift()):e=this._curElement&&this._curElement.elt,1<=o.length&&(t=o[0]),n=(n=2<=o.length?o[1]:n)||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:a="image/png";break;case"jpeg":case"jpg":a="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n)}),a)},r.default.prototype.encodeAndDownloadGif=function(e,t){for(var n=e.gifProperties,o=(1===(I=n.loopLimit)?I=null:null===I&&(I=0),new Uint8Array(e.width*e.height*n.numFrames)),s=[],u={},c=0;c<n.numFrames;c++){for(var l=new Set,d=n.frames[c].image.data,f=d.length,p=new Uint32Array(e.width*e.height),h=0,m=0;h<f;h+=4,m++){var v=d[h+0]<<16|d[h+1]<<8|d[h+2]<<0;l.add(v),p[m]=v}var y=i(l).sort().toString();void 0===u[y]?u[y]={freq:1,frames:[c]}:(u[y].freq+=1,u[y].frames.push(c)),s.push(p)}for(var g=[],b=Object.keys(u).sort((function(e,t){return u[t].freq-u[e].freq})),x=b[0].split(",").map((function(e){return parseInt(e)})),w=(g=g.concat(u[x].frames),new Set(x)),k=1;k<b.length;k++){var S=b[k].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!w.has(e)}));if(x.length+S.length<=256){for(var _=0;_<S.length;_++)x.push(S[_]),w.add(S[_]);g=g.concat(u[b[k]].frames)}}g=new Set(g);for(var T={},E=0;E<x.length;E++)T[x[E]]||(T[x[E]]=E);for(var C=1;C<x.length;)C<<=1;x.length=C;for(var I={loop:I,palette:new Uint32Array(x)},N=new a.default.GifWriter(o,e.width,e.height,I),j={},R=0;R<n.numFrames;R++)!function(t){for(var r=!g.has(t),a=r?[]:x,o=new Uint8Array(e.width*e.height),i={},u=new Set,c=0;c<s[t].length;c++){var l=s[t][c];r?(void 0===i[l]&&(i[l]=a.length,a.push(l)),o[c]=i[l]):o[c]=T[l],0<t&&s[t-1][c]!==l&&u.add(l)}var d={},f=a.filter((function(e){return!u.has(e)}));if(0<f.length){f=f[0];var p=(r?i:T)[f];if(0<t){for(var h=0;h<s[t].length;h++)s[t-1][h]===s[t][h]&&(o[h]=p);d.transparent=p,j.frameOpts.disposal=1}}if(d.delay=n.frames[t].delay/10,r){for(var m=1;m<a.length;)m<<=1;a.length=m,d.palette=new Uint32Array(a)}0<t&&N.addFrame(0,0,e.width,e.height,j.pixelPaletteIndex,j.frameOpts),j={pixelPaletteIndex:o,frameOpts:d}}(R);j.frameOpts.disposal=1,N.addFrame(0,0,e.width,e.height,j.pixelPaletteIndex,j.frameOpts),I=new Blob([o.slice(0,N.end())],{type:"image/gif"}),r.default.prototype.downloadFile(I,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,a,o){r.default._validateParameters("saveFrames",arguments),n=r.default.prototype.constrain(n=n||3,0,15),n*=1e3;a=r.default.prototype.constrain(a||15,0,22);var i=0,s=r.default.prototype._makeFrame,u=this._curElement.elt,c=[],l=setInterval((function(){c.push(s(e+i,t,u)),i++}),1e3/a);setTimeout((function(){if(clearInterval(l),o)o(c);else{var e=!0,t=!1,n=void 0;try{for(var a,i=c[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value;r.default.prototype.downloadFile(s.imageData,s.filename,s.ext)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}c=[]}),.01+n)},r.default.prototype._makeFrame=function(e,t,n){var r;n=this?this._curElement.elt:n;if(t)switch(t.toLowerCase()){case"png":default:r="image/png";break;case"jpeg":case"jpg":r="image/jpeg"}else t="png",r="image/png";n=(n=n.toDataURL(r)).replace(r,"image/octet-stream");var a={};return a.imageData=n,a.filename=e,a.ext=t,a},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("regenerator-runtime/runtime");var i=f(e("../core/main")),s=f(e("../core/helpers")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=a?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),c=f(e("omggif")),l=e("gifenc");function d(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,d=function(){return e},e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function h(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadImage=function(e,t,n){i.default._validateParameters("loadImage",arguments);var r=new i.default.Image(1,1,this),a=this,o=new Request(e,{method:"GET",mode:"cors"});return fetch(e,o).then((function(o){var s,u=o.headers.get("content-type");null===u&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),u&&u.includes("image/gif")?o.arrayBuffer().then((function(e){if(e){e=new Uint8Array(e);var o=r,s=t,u=n,l=function(e){a._decrementPreload()}.bind(a),d=new c.default.GifReader(e),f=(o.width=o.canvas.width=d.width,o.height=o.canvas.height=d.height,[]),p=d.numFrames(),h=new Uint8ClampedArray(o.width*o.height*4);if(1<p){for(var m=0;m<p;m++){var v=d.frameInfo(m),y=o.drawingContext.getImageData(0,0,o.width,o.height),g=(h=y.data.slice(),function(e,t){try{t.decodeAndBlitFrameRGBA(e,h)}catch(e){i.default._friendlyFileLoadError(8,o.src),"function"==typeof u?u(e):console.error(e)}}(m,d),new ImageData(h,o.width,o.height));0===(g=(o.drawingContext.putImageData(g,0,0),v.delay))&&(g=10),f.push({image:o.drawingContext.getImageData(0,0,o.width,o.height),delay:10*g}),2===v.disposal?o.drawingContext.clearRect(v.x,v.y,v.width,v.height):3===v.disposal&&o.drawingContext.putImageData(y,0,0,v.x,v.y,v.width,v.height)}null===(e=d.loopCount())?e=1:0===e&&(e=null),o.drawingContext.putImageData(f[0].image,0,0),o.gifProperties={displayIndex:0,loopLimit:e,loopCount:0,frames:f,numFrames:p,playing:!0,timeDisplayed:0,lastChangeTime:0}}"function"==typeof s&&s(o),l()}}),(function(e){"function"==typeof n?(n(e),a._decrementPreload()):console.error(e)})):((s=new Image).onload=function(){r.width=r.canvas.width=s.width,r.height=r.canvas.height=s.height,r.drawingContext.drawImage(s,0,0),r.modified=!0,"function"==typeof t&&t(r),a._decrementPreload()},s.onerror=function(e){i.default._friendlyFileLoadError(0,s.src),"function"==typeof n?(n(e),a._decrementPreload()):console.error(e)},0!==e.indexOf("data:image/")&&(s.crossOrigin="Anonymous"),s.src=e),r.modified=!0})).catch((function(t){i.default._friendlyFileLoadError(0,e),"function"==typeof n?(n(t),a._decrementPreload()):console.error(t)})),r},i.default.prototype.saveGif=function(){e=a().mark((function e(t,n){var r,o,s,u,c,d,f,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C,I,N=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<N.length&&void 0!==N[2]?N[2]:{delay:0,units:"seconds"},"string"!=typeof t)throw TypeError("fileName parameter must be a string");e.next=3;break;case 3:if("number"!=typeof n)throw TypeError("Duration parameter must be a number");e.next=5;break;case 5:if(o=r&&r.delay||0,s=r&&r.units||"seconds","number"!=typeof o)throw TypeError("Delay parameter must be a number");e.next=9;break;case 9:if("seconds"!==s&&"frames"!==s)throw TypeError('Units parameter must be either "frames" or "seconds"');e.next=11;break;case 11:this._recording=!0,f=this._targetFrameRate,u=(u=1/(f=f!==1/0&&void 0!==f&&0!==f?f:60)*1e3)<20?20:u,d=(c="seconds"===s?n*f:n)+(f="seconds"===s?o*f:o),this.frameCount=f,p=this._pixelDensity,this.pixelDensity(1),h=[],m="p5.gif.progressBar",null!==document.getElementById(m)&&document.getElementById(m).remove(),(m=this.createP("")).id("progressBar"),m.style("font-size","16px"),m.style("font-family","Montserrat"),m.style("background-color","#ffffffa0"),m.style("padding","8px"),m.style("border-radius","10px"),m.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(y=document.getElementById("defaultCanvas0").getContext("webgl"),v=new Uint8Array(y.drawingBufferWidth*y.drawingBufferHeight*4)),this.noLoop();case 36:if(f<d)return this.redraw(),E=void 0,E=this.drawingContext instanceof WebGLRenderingContext?(v=new Uint8Array(y.drawingBufferWidth*y.drawingBufferHeight*4),y.readPixels(0,0,y.drawingBufferWidth,y.drawingBufferHeight,y.RGBA,y.UNSIGNED_BYTE,v),function(e){for(var t=parseInt(height/2),n=4*width,r=new Uint8Array(4*width),a=0;a<t;++a){var o=a*n,i=(height-a-1)*n;r.set(e.subarray(o,o+n)),e.copyWithin(o,i,i+n),e.set(r,i)}return e}(v)):this.drawingContext.getImageData(0,0,this.width,this.height).data,h.push(E),f++,m.html("Saved frame <b>"+h.length.toString()+"</b> out of "+c.toString()),e.next=45,new Promise((function(e){return setTimeout(e,0)}));e.next=47;break;case 45:e.next=36;break;case 47:m.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(p),g=(0,l.GIFEncoder)(),b=function(e){for(var t=new Uint8Array(e.length*e[0].length),n=0;n<e.length;n++)t.set(e[n],n*e[0].length);var r=(0,l.quantize)(t,256,{format:"rgba4444",oneBitAlpha:!0});return 256===r.length?r[r.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:r.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),r}(h),x={},w=function(e){for(var t=e.length/4,n=new Uint8Array(t),r=0;r<t;r++){var a=e[4*r]<<24|e[4*r+1]<<16|e[4*r+2]<<8|e[4*r+3];void 0===x[a]&&(x[a]=(0,l.nearestColorIndex)(b,e.slice(4*r,4*(r+1)))),n[r]=x[a]}return n},k=b.length-1,S=[],_=0;case 57:if(!(_<h.length)){e.next=68;break}if(T=w(h[_]),E=T.slice(),0===_)g.writeFrame(T,this.width,this.height,{palette:b,delay:u,dispose:1});else{for(C=0;C<T.length;C++)T[C]===S[C]&&(T[C]=k);g.writeFrame(T,this.width,this.height,{delay:u,transparent:!0,transparentIndex:k,dispose:1})}return S=E,m.html("Rendered frame <b>"+_.toString()+"</b> out of "+c.toString()),e.next=65,new Promise((function(e){return setTimeout(e,0)}));case 65:_++,e.next=57;break;case 68:g.finish(),I=g.bytesView(),I=new Blob([I],{type:"image/gif"}),h=[],this._recording=!1,this.loop(),m.html("Done. Downloading your gif!\ud83c\udf38"),i.default.prototype.downloadFile(I,t,"gif");case 77:case"end":return e.stop()}}),e,this)}));var e,t=function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,s,"next",e)}function s(e){p(o,r,a,i,s,"throw",e)}i(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),i.default.prototype.image=function(e,t,n,r,a,o,c,l,d,f,p,m){i.default._validateParameters("image",arguments);var v=e.width,y=e.height,g=(m=m||u.CENTER,p=p||u.CENTER,e.elt&&e.elt.videoWidth&&!e.canvas&&(v=e.elt.videoWidth,y=e.elt.videoHeight),r||v);a=a||y,o=o||0,c=c||0,l=h(l||v,v),v=h(d||y,y),d=1;e.elt&&!e.canvas&&e.elt.style.width&&(d=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,d/=parseInt(e.elt.style.width,10)),o*=d,c*=d,v*=d,l*=d,y=function(e,t,n,r,a,o,i,s,c,l,d){var f,p,h,m,v,y,g,b,x;return e===u.COVER&&(f=t,h=n,g=o,b=i,y=s,x=c,p=l,m=d,g/=v=Math.max(g/p,b/m),b/=v,v=y,y=x,f===u.CENTER?v+=(p-g)/2:f===u.RIGHT&&(v+=p-g),h===u.CENTER?y+=(m-b)/2:h===u.BOTTOM&&(y+=m-b),s=(x={x:v,y:y,w:g,h:b}).x,c=x.y,l=x.w,d=x.h),e===u.CONTAIN&&(f=t,p=n,h=r,m=a,v=o,y=i,g=l,b=d,g/=x=Math.max(g/v,b/y),b/=x,x=h,h=m,f===u.CENTER?x+=(v-g)/2:f===u.RIGHT&&(x+=v-g),p===u.CENTER?h+=(y-b)/2:p===u.BOTTOM&&(h+=y-b),r=(e={x:x,y:h,w:g,h:b}).x,a=e.y,o=e.w,i=e.h),{sx:s,sy:c,sw:l,sh:d,dx:r,dy:a,dw:o,dh:i}}(f,p,m,(y=s.default.modeAdjust(t,n,g,a,this._renderer._imageMode)).x,y.y,y.w,y.h,o,c,l,v),this._renderer.image(e,y.sx,y.sy,y.sw,y.sh,y.dx,y.dy,y.dw,y.dh)},i.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},i.default.prototype.noTint=function(){this._renderer._tint=null},i.default.prototype._getTintedImageCanvas=i.default.Renderer2D.prototype._getTintedImageCanvas,i.default.prototype.imageMode=function(e){i.default._validateParameters("imageMode",arguments),e!==u.CORNER&&e!==u.CORNERS&&e!==u.CENTER||(this._renderer._imageMode=e)},e=i.default,n.default=e},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),a=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},r.default.Image.prototype._animateGif=function(e){var t,n=this.gifProperties;e=e._lastFrameTime;0===n.lastChangeTime&&(n.lastChangeTime=e),n.playing&&(n.timeDisplayed=e-n.lastChangeTime,t=n.frames[n.displayIndex].delay,n.timeDisplayed>=t&&(t=Math.floor(n.timeDisplayed/t),n.timeDisplayed=0,n.lastChangeTime=e,n.displayIndex+=t,n.loopCount=Math.floor(n.displayIndex/n.numFrames),null!==n.loopLimit&&n.loopCount>=n.loopLimit?n.playing=!1:(e=n.displayIndex%n.numFrames,this.drawingContext.putImageData(n.frames[e].image,0,0),n.displayIndex=e,this.setModified(!0))))},r.default.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},r.default.Image.prototype.loadPixels=function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},r.default.Image.prototype.updatePixels=function(e,t,n,a){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,a),this.setModified(!0)},r.default.Image.prototype.get=function(e,t,n,a){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.Image.prototype._getPixel=r.default.Renderer2D.prototype._getPixel,r.default.Image.prototype.set=function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)},r.default.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,a=0;a<r.numFrames;a++){for(var o=this.drawingContext.createImageData(e,t),i=(d=d=l=c=u=void 0,r.frames[a].image),s=o,u=0,c=0;c<s.height;c++)for(var l=0;l<s.width;l++){var d=Math.floor(l*i.width/s.width);d=4*(Math.floor(c*i.height/s.height)*i.width+d);s.data[u++]=i.data[d++],s.data[u++]=i.data[d++],s.data[u++]=i.data[d++],s.data[u++]=i.data[+d]}r.frames[a].image=o}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},r.default.Image.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)},r.default.Image.prototype.mask=function(e){var t=this.drawingContext.globalCompositeOperation,n=1,a=[e=void 0===e?this:e,0,0,(n=e instanceof r.default.Renderer?e._pInst._pixelDensity:n)*e.width,n*e.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var o=0;o<this.gifProperties.frames.length;o++)this.drawingContext.putImageData(this.gifProperties.frames[o].image,0,0),r.default.Image.prototype.copy.apply(this,a),this.gifProperties.frames[o].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else r.default.Image.prototype.copy.apply(this,a);this.drawingContext.globalCompositeOperation=t,this.setModified(!0)},r.default.Image.prototype.filter=function(e,t){a.default.apply(this.canvas,a.default[e],t),this.setModified(!0)},r.default.Image.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)},r.default.Image.prototype.setModified=function(e){this._modified=e},r.default.Image.prototype.isModified=function(){return this._modified},r.default.Image.prototype.save=function(e,t){this.gifProperties?r.default.prototype.encodeAndDownloadGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)},r.default.Image.prototype.reset=function(){var e;this.gifProperties&&((e=this.gifProperties).playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0))},r.default.Image.prototype.getCurrentFrame=function(){var e;if(this.gifProperties)return(e=this.gifProperties).displayIndex%e.numFrames},r.default.Image.prototype.setFrame=function(e){var t;this.gifProperties&&(e<(t=this.gifProperties).numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},r.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},r.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},r.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},r.default.Image.prototype.delay=function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,a=(t=!1,void 0);try{for(var o,i=n.frames[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)o.value.delay=e}catch(e){t=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(t)throw a}}}}},e=r.default.Image,n.default=e},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),a=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.default._validateParameters("blend",n),this._renderer?(e=this._renderer).blend.apply(e,n):r.default.Renderer2D.prototype.blend.apply(this,n)},r.default.prototype.copy=function(){for(var e,t,n,a,o,i,s,u,c,l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];if(r.default._validateParameters("copy",d),9===d.length)e=d[0],t=d[1],n=d[2],a=d[3],o=d[4],i=d[5],s=d[6],u=d[7],c=d[8];else{if(8!==d.length)throw new Error("Signature not supported");e=this,t=d[0],n=d[1],a=d[2],o=d[3],i=d[4],s=d[5],u=d[6],c=d[7]}r.default.prototype._copyHelper(this,e,t,n,a,o,i,s,u,c)},r.default.prototype._copyHelper=function(e,t,n,a,o,i,s,u,c,l){t.loadPixels();var d=t.canvas.width/t.width,f=0,p=0;t._renderer&&t._renderer.isP3D&&(f=t.width/2,p=t.height/2),e._renderer&&e._renderer.isP3D?r.default.RendererGL.prototype.image.call(e._renderer,t,n+f,a+p,o,i,s,u,c,l):e.drawingContext.drawImage(t.canvas,d*(n+f),d*(a+p),d*o,d*i,s,u,c,l)},r.default.prototype.filter=function(e,t){r.default._validateParameters("filter",arguments),void 0!==this.canvas?a.default.apply(this.canvas,a.default[e],t):a.default.apply(this.elt,a.default[e],t)},r.default.prototype.get=function(e,t,n,a){var o;return r.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,a){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,a)},e=r.default,n.default=e},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../core/main")),o=(e("whatwg-fetch"),e("es6-promise/auto"),s(e("fetch-jsonp"))),i=s(e("file-saver"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function l(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("loadJSON",t);for(var r,o,i,s=t[0],c={},l="json",d=1;d<t.length;d++){var f=t[d];"string"==typeof f?"jsonp"!==f&&"json"!==f||(l=f):"function"==typeof f?r?o=f:r=f:"object"===u(f)&&(f.hasOwnProperty("jsonpCallback")||f.hasOwnProperty("jsonpCallbackFunction"))&&(l="jsonp",i=f)}var p=this;return this.httpDo(s,"GET",i,l,(function(e){for(var t in e)c[t]=e[t];void 0!==r&&r(e),p._decrementPreload()}),(function(e){if(a.default._friendlyFileLoadError(5,s),!o)throw e;o(e)})),c},a.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("loadStrings",t);for(var r,o,i=[],s=1;s<t.length;s++){var u=t[s];"function"==typeof u&&(void 0===r?r=u:void 0===o&&(o=u))}var c=this;return a.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,a=t.length;n<a;n+=32768)Array.prototype.push.apply(i,t.slice(n,Math.min(n+32768,a)));void 0!==r&&r(i),c._decrementPreload()}),(function(e){if(a.default._friendlyFileLoadError(3,e),!o)throw e;o(e)})),i},a.default.prototype.loadTable=function(e){var t,n,r,o=[],i=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?r=",":"ssv"===s?r=";":"tsv"===s&&(r="\t");for(var u=1;u<arguments.length;u++)"function"==typeof arguments[u]?void 0===t?t=arguments[u]:void 0===n&&(n=arguments[u]):"string"==typeof arguments[u]&&(o.push(arguments[u]),"header"===arguments[u]&&(i=!0),"csv"===arguments[u]?r=",":"ssv"===arguments[u]?r=";":"tsv"===arguments[u]&&(r="\t"));var c=new a.default.Table,l=this;return this.httpDo(e,"GET","table",(function(e){for(var n,o,s={},u=[],d=0,f=null,p=function(){s.currentState=0,s.token=""},h=function(){f.push(s.token),p()},m=function(){s.currentState=4,u.push(f),f=null};;){if(null==(n=e[d++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(f){h(),m();break}}if(null===f&&(s.escaped=!1,f=[],p()),0===s.currentState){if('"'===n){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===n)'"'===e[d]?(s.token+='"',d++):(s.escaped=!1,s.currentState=2);else{if("\r"===n)continue;s.token+=n}else"\r"===n?("\n"===e[d]&&d++,h(),m()):"\n"===n?(h(),m()):n===r?h():1===s.currentState&&(s.token+=n)}if(i)c.columns=u.shift();else for(var v=0;v<u[0].length;v++)c.columns[v]="null";for(var y=0;y<u.length;y++)(1!==u[y].length||"undefined"!==u[y][0]&&""!==u[y][0])&&((o=new a.default.TableRow).arr=u[y],o.obj=function(e,t){var n={};if(void 0===(t=t||[]))for(var r=0;r<e.length;r++)t[r.toString()]=r;for(var a=0;a<t.length;a++){var o=t[a],i=e[a];n[o]=i}return n}(u[y],c.columns),c.addRow(o));"function"==typeof t&&t(c),l._decrementPreload()}),(function(t){a.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),c},a.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r,o,i=new a.default.XML,s=1;s<t.length;s++){var u=t[s];"function"==typeof u&&(void 0===r?r=u:void 0===o&&(o=u))}var c=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)i[t]=e[t];void 0!==r&&r(i),c._decrementPreload()}),(function(e){if(a.default._friendlyFileLoadError(1,e),!o)throw e;o(e)})),i},a.default.prototype.loadBytes=function(e,t,n){var r={},o=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){r.bytes=new Uint8Array(e),"function"==typeof t&&t(r),o._decrementPreload()}),(function(t){if(a.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),r},a.default.prototype.httpGet=function(){a.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),a.default.prototype.httpDo.apply(this,e)},a.default.prototype.httpPost=function(){a.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),a.default.prototype.httpDo.apply(this,e)},a.default.prototype.httpDo=function(){for(var e,t,n,r={},i=0,s="text/plain",c=arguments.length-1;0<c&&"function"==typeof(c<0||arguments.length<=c?void 0:arguments[c]);c--)i++;var l=arguments.length<=0?void 0:arguments[0];if(2==(v=arguments.length-i)&&"string"==typeof l&&"object"===u(arguments.length<=1?void 0:arguments[1]))y=new Request(l,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var d,f="GET",p=1;p<arguments.length;p++){var h=p<0||arguments.length<=p?void 0:arguments[p];if("string"==typeof h)"GET"===h||"POST"===h||"PUT"===h||"DELETE"===h?f=h:"json"===h||"jsonp"===h||"binary"===h||"arrayBuffer"===h||"xml"===h||"text"===h||"table"===h?e=h:d=h;else if("number"==typeof h)d=h.toString();else if("object"===u(h))if(h.hasOwnProperty("jsonpCallback")||h.hasOwnProperty("jsonpCallbackFunction"))for(var m in h)r[m]=h[m];else s=h instanceof a.default.XML?(d=h.serialize(),"application/xml"):(d=JSON.stringify(h),"application/json");else"function"==typeof h&&(t?n=h:t=h)}var v="GET"===f?new Headers:new Headers({"Content-Type":s}),y=new Request(l,{method:f,mode:"cors",body:d,headers:v})}return(v=(v="jsonp"===(e=e||(l.includes("json")?"json":l.includes("xml")?"xml":"text"))?(0,o.default)(l,r):fetch(y)).then((function(t){if(!t.ok)throw(n=new Error(t.body)).status=t.status,n.ok=!1,n;var n=0;switch((n="jsonp"!==e?t.headers.get("content-length"):n)&&64e6<n&&a.default._friendlyFileLoadError(7,l),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){return e=(new DOMParser).parseFromString(e,"text/xml"),new a.default.XML(e.documentElement)}));default:return t.text()}}))).then(t||function(){}),v.catch(n||console.error),v},window.URL=window.URL||window.webkitURL,a.default.prototype._pWriters=[],a.default.prototype.createWriter=function(e,t){var n,r;for(r in a.default.prototype._pWriters)if(a.default.prototype._pWriters[r].name===e)return n=new a.default.PrintWriter(e+this.millis(),t),a.default.prototype._pWriters.push(n),n;return n=new a.default.PrintWriter(e,t),a.default.prototype._pWriters.push(n),n},a.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var r,o=[];for(r in o.push(this.content),a.default.prototype.writeFile(o,e,t),a.default.prototype._pWriters)a.default.prototype._pWriters[r].name===this.name&&a.default.prototype._pWriters.splice(r,1);n.clear(),n={}}},a.default.prototype.save=function(e,t,n){var r=arguments,o=(this._curElement||this).elt;if(0===r.length)a.default.prototype.saveCanvas(o);else if(r[0]instanceof a.default.Renderer||r[0]instanceof a.default.Graphics)a.default.prototype.saveCanvas(r[0].elt,r[1],r[2]);else if(1===r.length&&"string"==typeof r[0])a.default.prototype.saveCanvas(o,r[0]);else switch(l(r[1],r[2])[1]){case"json":return void a.default.prototype.saveJSON(r[0],r[1],r[2]);case"txt":return void a.default.prototype.saveStrings(r[0],r[1],r[2]);default:r[0]instanceof Array?a.default.prototype.saveStrings(r[0],r[1],r[2]):r[0]instanceof a.default.Table?a.default.prototype.saveTable(r[0],r[1],r[2]):r[0]instanceof a.default.Image?a.default.prototype.saveCanvas(r[0].canvas,r[1]):r[0]instanceof a.default.SoundFile&&a.default.prototype.saveSound(r[0],r[1],r[2],r[3])}},a.default.prototype.saveJSON=function(e,t,n){a.default._validateParameters("saveJSON",arguments),n=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(n.split("\n"),t,"json")},a.default.prototype.saveJSONObject=a.default.prototype.saveJSON,a.default.prototype.saveJSONArray=a.default.prototype.saveJSON,a.default.prototype.saveStrings=function(e,t,n,r){a.default._validateParameters("saveStrings",arguments);for(var o=this.createWriter(t,n||"txt"),i=0;i<e.length;i++)r?o.write(e[i]+"\r\n"):o.write(e[i]+"\n");o.close(),o.clear()},a.default.prototype.saveTable=function(e,t,n){a.default._validateParameters("saveTable",arguments),r=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var r,o=this.createWriter(t,r),i=e.columns,s="tsv"===r?"\t":",";if("html"!==r){if("0"!==i[0]){for(var u=0;u<i.length;u++)u<i.length-1?o.write(i[u]+s):o.write(i[u]);o.write("\n")}for(var l=0;l<e.rows.length;l++){var d=void 0;for(d=0;d<e.rows[l].arr.length;d++)d<e.rows[l].arr.length-1?"csv"===r&&String(e.rows[l].arr[d]).includes(",")?o.write('"'+e.rows[l].arr[d]+'"'+s):o.write(e.rows[l].arr[d]+s):"csv"===r&&String(e.rows[l].arr[d]).includes(",")?o.write('"'+e.rows[l].arr[d]+'"'):o.write(e.rows[l].arr[d]);o.write("\n")}}else{if(o.print("<html>"),o.print("<head>"),o.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),o.print("</head>"),o.print("<body>"),o.print("  <table>"),"0"!==i[0]){o.print("    <tr>");for(var f=0;f<i.length;f++){var p=c(i[f]);o.print("      <td>".concat(p)),o.print("      </td>")}o.print("    </tr>")}for(var h=0;h<e.rows.length;h++){o.print("    <tr>");for(var m=0;m<e.columns.length;m++){var v=c(e.rows[h].getString(m));o.print("      <td>".concat(v)),o.print("      </td>")}o.print("    </tr>")}o.print("  </table>"),o.print("</body>"),o.print("</html>")}o.close(),o.clear()},a.default.prototype.writeFile=function(e,t,n){var r="application/octet-stream";a.default.prototype._isSafari()&&(r="text/plain"),e=new Blob(e,{type:r});a.default.prototype.downloadFile(e,t,n)},a.default.prototype.downloadFile=function(e,t,n){var r;n=(t=l(t,n))[0];e instanceof Blob?i.default.saveAs(e,n):((r=document.createElement("a")).href=e,r.download=n,r.onclick=function(e){document.body.removeChild(e.target),e.stopPropagation()},r.style.display="none",document.body.appendChild(r),a.default.prototype._isSafari()&&(e=(e='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(t[1],'"'),alert(e)),r.click())},a.default.prototype._checkFileExtension=l,a.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},e=a.default,n.default=e},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Table=function(e){this.columns=[],this.rows=[]},r.default.Table.prototype.addRow=function(e){if(void 0===(e=e||new r.default.TableRow).arr||void 0===e.obj)throw new Error("invalid TableRow: ".concat(e));return(e.table=this).rows.push(e),e},r.default.Table.prototype.removeRow=function(e){this.rows[e].table=null,e=this.rows.splice(e+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(e)},r.default.Table.prototype.getRow=function(e){return this.rows[e]},r.default.Table.prototype.getRows=function(){return this.rows},r.default.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null},r.default.Table.prototype.findRows=function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[t]===e&&n.push(this.rows[a]);return n},r.default.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null},r.default.Table.prototype.matchRows=function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[t].match(e)&&n.push(this.rows[a]);return n},r.default.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t},r.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},r.default.Table.prototype.addColumn=function(e){this.columns.push(e||null)},r.default.Table.prototype.getColumnCount=function(){return this.columns.length},r.default.Table.prototype.getRowCount=function(){return this.rows.length},r.default.Table.prototype.removeTokens=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var a=new RegExp(n.join("|"),"g");if(void 0===t)for(var o=0;o<this.columns.length;o++)for(var i=0;i<this.rows.length;i++){var s=(s=this.rows[i].arr[o]).replace(a,"");this.rows[i].arr[o]=s,this.rows[i].obj[this.columns[o]]=s}else if("string"==typeof t)for(var u=0;u<this.rows.length;u++){var c=(c=this.rows[u].obj[t]).replace(a,""),l=(this.rows[u].obj[t]=c,this.columns.indexOf(t));this.rows[u].arr[l]=c}else for(var d=0;d<this.rows.length;d++){var f=(f=this.rows[d].arr[t]).replace(a,"");this.rows[d].arr[t]=f,this.rows[d].obj[this.columns[t]]=f}},r.default.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var a=(a=this.rows[r].arr[n]).replace(t,"");this.rows[r].arr[n]=a,this.rows[r].obj[this.columns[n]]=a}else if("string"==typeof e)for(var o=0;o<this.rows.length;o++){var i=(i=this.rows[o].obj[e]).replace(t,""),s=(this.rows[o].obj[e]=i,this.columns.indexOf(e));this.rows[o].arr[s]=i}else for(var u=0;u<this.rows.length;u++){var c=(c=this.rows[u].arr[e]).replace(t,"");this.rows[u].arr[e]=c,this.rows[u].obj[this.columns[e]]=c}},r.default.Table.prototype.removeColumn=function(e){"string"==typeof e?n=this.columns.indexOf(t=e):t=this.columns[n=e];var t,n;e=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(e);for(var r=0;r<this.rows.length;r++){var a=this.rows[r].arr,o=a.splice(n+1,a.length);a.pop(),this.rows[r].arr=a.concat(o),delete this.rows[r].obj[t]}},r.default.Table.prototype.set=function(e,t,n){this.rows[e].set(t,n)},r.default.Table.prototype.setNum=function(e,t,n){this.rows[e].setNum(t,n)},r.default.Table.prototype.setString=function(e,t,n){this.rows[e].setString(t,n)},r.default.Table.prototype.get=function(e,t){return this.rows[e].get(t)},r.default.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},r.default.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},r.default.Table.prototype.getObject=function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n},r.default.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(e,t,n){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.TableRow=function(e,t){var n=[],r={};e&&(n=e.split(t=t||","));for(var a=0;a<n.length;a++){var o=a,i=n[a];r[o]=i}this.arr=n,this.obj=r,this.table=null},e.default.TableRow.prototype.set=function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t,n=this.table.columns[e],this.obj[n]=t}},e.default.TableRow.prototype.setNum=function(e,t){t=parseFloat(t),this.set(e,t)},e.default.TableRow.prototype.setString=function(e,t){t=t.toString(),this.set(e,t)},e.default.TableRow.prototype.get=function(e){return("string"==typeof e?this.obj:this.arr)[e]},e.default.TableRow.prototype.getNum=function(e){var t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e]);if("NaN"===t.toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t},e.default.TableRow.prototype.getString=function(e){return("string"==typeof e?this.obj:this.arr)[e].toString()},e=e.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.XML=function(e){e?this.DOM=e:(e=document.implementation.createDocument(null,"doc"),this.DOM=e.createElement("root"))},r.default.XML.prototype.getParent=function(){return new r.default.XML(this.DOM.parentElement)},r.default.XML.prototype.getName=function(){return this.DOM.tagName},r.default.XML.prototype.setName=function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var a=0;a<n.length;a++)r.setAttribute(n[a].nodeName,n.nodeValue);this.DOM=r},r.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},r.default.XML.prototype.listChildren=function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e},r.default.XML.prototype.getChildren=function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push(new r.default.XML(e[n]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)},r.default.XML.prototype.getChild=function(e){if("string"!=typeof e)return new r.default.XML(this.DOM.children[e]);var t=!0,n=!1,a=void 0;try{for(var o,i=this.DOM.children[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;if(s.tagName===e)return new r.default.XML(s)}}catch(e){n=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}},r.default.XML.prototype.addChild=function(e){e instanceof r.default.XML&&this.DOM.appendChild(e.DOM)},r.default.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])},r.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},r.default.XML.prototype.listAttributes=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.DOM.attributes[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;e.push(i.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.default.XML.prototype.hasAttribute=function(e){var t={},n=!0,r=!1,a=void 0;try{for(var o,i=this.DOM.attributes[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;t[s.nodeName]=s.nodeValue}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return!!t[e]},r.default.XML.prototype.getNum=function(e,t){var n={},r=!0,a=!1,o=void 0;try{for(var i,s=this.DOM.attributes[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;n[u.nodeName]=u.nodeValue}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return Number(n[e])||t||0},r.default.XML.prototype.getString=function(e,t){var n={},r=!0,a=!1,o=void 0;try{for(var i,s=this.DOM.attributes[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;n[u.nodeName]=u.nodeValue}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n[e]?String(n[e]):t||null},r.default.XML.prototype.setAttribute=function(e,t){this.DOM.setAttribute(e,t)},r.default.XML.prototype.getContent=function(e){var t=this.DOM.textContent;return(t=t.replace(/\s\s+/g,","))||e||null},r.default.XML.prototype.setContent=function(e){this.DOM.children.length||(this.DOM.textContent=e)},r.default.XML.prototype.serialize=function(){return(new XMLSerializer).serializeToString(this.DOM)},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],n=0,r=0;r<e;r++){var a=arguments[r];if((a=+a)===1/0||a===-1/0)return 1/0;n<(a=Math.abs(a))&&(n=a),t[r]=a}0===n&&(n=1);for(var o=0,i=0,s=0;s<e;s++){var u,c=o+(u=(u=t[s]/n)*u-i);i=c-o-u,o=c}return Math.sqrt(o)*n}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(e,t,n){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},r.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("dist",t),4===t.length?a(t[2]-t[0],t[3]-t[1]):6===t.length?a(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(e,t,n){return r.default._validateParameters("lerp",arguments),n*(t-e)+e},r.default.prototype.log=Math.log,r.default.prototype.mag=function(e,t){return r.default._validateParameters("mag",arguments),a(e,t)},r.default.prototype.map=function(e,t,n,a,o,i){return r.default._validateParameters("map",arguments),e=(e-t)/(n-t)*(o-a)+a,i?a<o?this.constrain(e,a,o):this.constrain(e,o,a):e},r.default.prototype.max=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.max.apply(null,t[0]):Math.max.apply(null,t)},r.default.prototype.min=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.min.apply(null,t[0]):Math.min.apply(null,t)},r.default.prototype.norm=function(e,t,n){return r.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(e,t){return t?(t=Math.pow(10,t),Math.round(e*t)/t):Math.round(e)},r.default.prototype.sq=function(e){return e*e},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(e){r.default._validateParameters("fract",arguments);var t,n=0;e=Number(e);return isNaN(e)||Math.abs(e)===1/0?e:(e<0&&(e=-e,n=1),String(e).includes(".")&&!String(e).includes("e")?(t=String(e),t=Number("0"+t.slice(t.indexOf("."))),Math.abs(n-t)):e<1?Math.abs(n-e):0)},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(e,t,n){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&o(t,n.prototype),t}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.default.prototype.createVector=function(e,t,n){return this instanceof r.default?a(r.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new r.default.Vector(e,t,n)},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(e,t,n){"use strict";function r(e){return.5*(1-Math.cos(e*Math.PI))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e};var a,o=4095,i=4,s=.5;e.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==a){a=new Array(4096);for(var u=0;u<4096;u++)a[u]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var c,l,d=Math.floor(e),f=Math.floor(t),p=Math.floor(n),h=e-d,m=t-f,v=n-p,y=0,g=.5,b=0;b<i;b++){var x=d+(f<<4)+(p<<8),w=r(h),k=r(m),S=a[x&o];S+=w*(a[x+1&o]-S),c=a[x+16&o],S+=k*((c+=w*(a[x+16+1&o]-c))-S),c=a[(x+=256)&o],c+=w*(a[x+1&o]-c),l=a[x+16&o],c+=k*((l+=w*(a[x+16+1&o]-l))-c),y+=(S+=r(v)*(c-S))*g,g*=s,d<<=1,f<<=1,p<<=1,1<=(h*=2)&&(d++,h--),1<=(m*=2)&&(f++,m--),1<=(v*=2)&&(p++,v--)}return y},e.default.prototype.noiseDetail=function(e,t){0<e&&(i=e),0<t&&(s=t)},e.default.prototype.noiseSeed=function(e){n=4294967296;var t,n,r=function(e){t=(null==e?Math.random()*n:e)>>>0},o=function(){return(t=(1664525*t+1013904223)%n)/n};r(e),a=new Array(4096);for(var i=0;i<4096;i++)a[i]=o()},e=e.default;n.default=e},{"../core/main":267}],300:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function u(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function c(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}o.default.Vector=function(){var e,t,n="[object Function]"==={}.toString.call(arguments[0])?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],e=arguments[2]||0,t=arguments[3]||0,arguments[4]||0):(e=arguments[0]||0,t=arguments[1]||0,arguments[2]||0);this.x=e,this.y=t,this.z=n},o.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},o.default.Vector.prototype.set=function(e,t,n){return e instanceof o.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this},o.default.Vector.prototype.copy=function(){return this.isPInst?new o.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new o.default.Vector(this.x,this.y,this.z)},o.default.Vector.prototype.add=function(e,t,n){return e instanceof o.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this},o.default.Vector.prototype.rem=function(e,t,n){var r;if(e instanceof o.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z))return a=parseFloat(e.x),i=parseFloat(e.y),r=parseFloat(e.z),c.call(this,a,i,r)}else if(e instanceof Array){if(e.every((function(e){return Number.isFinite(e)})))return 2===e.length?u.call(this,e[0],e[1]):3===e.length?c.call(this,e[0],e[1],e[2]):void 0}else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var a=Array.prototype.slice.call(arguments);if(a.every((function(e){return Number.isFinite(e)}))&&2===a.length)return u.call(this,a[0],a[1])}else if(3===arguments.length){var i=Array.prototype.slice.call(arguments);if(i.every((function(e){return Number.isFinite(e)}))&&3===i.length)return c.call(this,i[0],i[1],i[2])}},o.default.Vector.prototype.sub=function(e,t,n){return e instanceof o.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this},o.default.Vector.prototype.mult=function(e,t,n){var r;return e instanceof o.default.Vector?Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):e instanceof Array?e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(r=Array.prototype.slice.call(arguments)).every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=n)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},o.default.Vector.prototype.div=function(e,t,n){if(e instanceof o.default.Vector)if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){var r=0===e.z&&0===this.z;if(0===e.x||0===e.y||!r&&0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,r||(this.z/=e.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(e instanceof Array)if(e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))){if(e.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if((r=Array.prototype.slice.call(arguments)).every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=n)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},o.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},o.default.Vector.prototype.magSq=function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n},o.default.Vector.prototype.dot=function(e,t,n){return e instanceof o.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)},o.default.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z;e=this.x*e.y-this.y*e.x;return this.isPInst?new o.default.Vector(this._fromRadians,this._toRadians,t,n,e):new o.default.Vector(t,n,e)},o.default.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},o.default.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},o.default.Vector.prototype.limit=function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this},o.default.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},o.default.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e},o.default.Vector.prototype.setHeading=function(e){this.isPInst&&(e=this._toRadians(e));var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},o.default.Vector.prototype.rotate=function(e){e=this.heading()+e;var t=(this.isPInst&&(e=this._toRadians(e)),this.mag());return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},o.default.Vector.prototype.angleBetween=function(e){var t=this.dot(e)/(this.mag()*e.mag());t=Math.acos(Math.min(1,Math.max(-1,t)));return t*=Math.sign(this.cross(e).z||1),this.isPInst?this._fromRadians(t):t},o.default.Vector.prototype.lerp=function(e,t,n,r){return e instanceof o.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)},o.default.Vector.prototype.reflect=function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))},o.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},o.default.Vector.prototype.equals=function(e,t,n){var r,a;e=e instanceof o.default.Vector?(r=e.x||0,a=e.y||0,e.z||0):e instanceof Array?(r=e[0]||0,a=e[1]||0,e[2]||0):(r=e||0,a=t||0,n||0);return this.x===r&&this.y===a&&this.z===e},o.default.Vector.fromAngle=function(e,t){return new o.default.Vector((t=void 0===t?1:t)*Math.cos(e),t*Math.sin(e),0)},o.default.Vector.fromAngles=function(e,t,n){void 0===n&&(n=1);var r=Math.cos(t),a=(t=Math.sin(t),Math.cos(e));e=Math.sin(e);return new o.default.Vector(n*e*t,-n*a,n*e*r)},o.default.Vector.random2D=function(){return this.fromAngle(Math.random()*i.TWO_PI)},o.default.Vector.random3D=function(){var e=Math.random()*i.TWO_PI,t=2*Math.random()-1,n=(r=Math.sqrt(1-t*t))*Math.cos(e),r=r*Math.sin(e);return new o.default.Vector(n,r,t)},o.default.Vector.copy=function(e){return e.copy(e)},o.default.Vector.add=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n},o.default.Vector.rem=function(e,t){if(e instanceof o.default.Vector&&t instanceof o.default.Vector)return(e=e.copy()).rem(t),e},o.default.Vector.sub=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n},o.default.Vector.mult=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n},o.default.Vector.rotate=function(e,t,n){return 2===arguments.length?n=e.copy():(n instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),n.set(e)),n.rotate(t),n},o.default.Vector.div=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n},o.default.Vector.dot=function(e,t){return e.dot(t)},o.default.Vector.cross=function(e,t){return e.cross(t)},o.default.Vector.dist=function(e,t){return e.dist(t)},o.default.Vector.lerp=function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r},o.default.Vector.mag=function(e){return e.mag()},o.default.Vector.magSq=function(e){return e.magSq()},o.default.Vector.normalize=function(e,t){return arguments.length<2?t=e.copy():(t instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()},o.default.Vector.limit=function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),n.set(e)),n.limit(t)},o.default.Vector.setMag=function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),n.set(e)),n.setMag(t)},o.default.Vector.heading=function(e){return e.heading()},o.default.Vector.angleBetween=function(e,t){return e.angleBetween(t)},o.default.Vector.reflect=function(e,t,n){return arguments.length<3?n=e.copy():(n instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),n.set(e)),n.reflect(t)},o.default.Vector.array=function(e){return e.array()},o.default.Vector.equals=function(e,t){var n;return e instanceof o.default.Vector?n=e:e instanceof Array?n=(new o.default.Vector).set(e):o.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),n.equals(t)};var l=o.default.Vector;n.default=l},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},a="_lcg_random_state",o=4294967296,i=0;r.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%o,this[e]/o},r.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*o:t)>>>0},r.default.prototype.randomSeed=function(e){this._lcgSetSeed(a,e),this._gaussian_previous=!1},r.default.prototype.random=function(e,t){var n,o;return r.default._validateParameters("random",arguments),n=null!=this[a]?this._lcg(a):Math.random(),void 0===e?n:void 0===t?e instanceof Array?e[Math.floor(n*e.length)]:n*e:(t<e&&(o=e,e=t,t=o),n*(t-e)+e)},r.default.prototype.randomGaussian=function(e){var t,n,r,a,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=i,this._gaussian_previous=!1;else{for(;1<=(a=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(a=Math.sqrt(-2*Math.log(a)/a)),i=r*a,this._gaussian_previous=!0}return t*o+(e||0)},e=r.default;n.default=e},{"../core/main":267}],302:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype._angleMode=i.RADIANS,o.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},o.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},o.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},o.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},o.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},o.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},o.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},o.default.prototype.degrees=function(e){return e*i.RAD_TO_DEG},o.default.prototype.radians=function(e){return e*i.DEG_TO_RAD},o.default.prototype.angleMode=function(e){if(o.default._validateParameters("angleMode",arguments),void 0===e)return this._angleMode;e!==i.DEGREES&&e!==i.RADIANS||(this._angleMode=e)},o.default.prototype._toRadians=function(e){return this._angleMode===i.DEGREES?e*i.DEG_TO_RAD:e},o.default.prototype._toDegrees=function(e){return this._angleMode===i.RADIANS?e*i.RAD_TO_DEG:e},o.default.prototype._fromRadians=function(e){return this._angleMode===i.DEGREES?e*i.RAD_TO_DEG:e};var u=o.default;n.default=u},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.textAlign=function(e,t){var n;return r.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},r.default.prototype.textLeading=function(e){var t;return r.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},r.default.prototype.textSize=function(e){var t;return r.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},r.default.prototype.textStyle=function(e){var t;return r.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},r.default.prototype.textWidth=function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n[0]+="",r.default._validateParameters("textWidth",n),0===n[0].length?0:(e=this._renderer).textWidth.apply(e,n)},r.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textAscent",t),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textDescent",t),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(e){if("WORD"!==e&&"CHAR"!==e)throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(e)},e=r.default,n.default=e},{"../core/main":267}],304:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},i=c(e("../core/constants")),s=c(e("opentype.js"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadFont=function(e,t,n){o.default._validateParameters("loadFont",arguments);var r=new o.default.Font(this),a=this;return s.load(e,(function(i,s){if(i)return o.default._friendlyFileLoadError(4,e),void 0!==n?n(i):void console.error(i,e);r.font=s,void 0!==t&&t(r),a._decrementPreload();var u=(s=(i=e.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:i.slice(s+1);["ttf","otf","woff","woff2"].includes(u)&&(u=i.slice(0,-1!==s?s:0),(i=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(u,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(i))})),r},o.default.prototype.text=function(e,t,n,r,a){var i;return o.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(i=this._renderer).text.apply(i,arguments):this},o.default.prototype.textFont=function(e,t){if(o.default._validateParameters("textFont",arguments),arguments.length){if(e)return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",t*i._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var l=o.default;n.default=l},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=a?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function i(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function u(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function c(e,t,n,r){var a,o,i;return r?(void 0===c.tmpPoint1&&(c.tmpPoint1=[],c.tmpPoint2=[]),o=c.tmpPoint1,i=c.tmpPoint2,o.x=t.x-e.x,o.y=t.y-e.y,i.x=n.x-t.x,i.y=n.y-t.y,a=o.x*i.x+o.y*i.y,o=Math.sqrt(o.x*o.x+o.y*o.y),i=Math.sqrt(i.x*i.x+i.y*i.y),Math.acos(a/(o*i))<r):0==(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function l(e,t,n,r,a,o,i,s,u){var c=1-u,l=(d=Math.pow(c,3))*e+3*(f=Math.pow(c,2))*u*n+3*c*u*u*a+(p=(m=u*u)*u)*i,d=d*t+3*f*u*r+3*c*u*u*o+p*s,f=e+2*u*(n-e)+m*(a-2*n+e),p=t+2*u*(r-t)+m*(o-2*r+t),h=n+2*u*(a-n)+m*(i-2*a+n),m=r+2*u*(o-r)+m*(s-2*o+r);e=c*e+u*n,n=c*t+u*r,t=c*a+u*i,r=c*o+u*s,a=90-180*Math.atan2(f-h,p-m)/Math.PI;return(h<f||p<m)&&(a+=180),{x:l,y:d,m:{x:f,y:p},n:{x:h,y:m},start:{x:e,y:n},end:{x:t,y:r},alpha:a}}function d(e,t,n,r,a,o,i,s,u){return null==u?g(e,t,n,r,a,o,i,s):l(e,t,n,r,a,o,i,s,function(e,t,n,r,a,o,i,s,u){if(!(u<0||g(e,t,n,r,a,o,i,s)<u)){var c,l=.5,d=1-l;for(c=g(e,t,n,r,a,o,i,s,d);.01<Math.abs(c-u);)c=g(e,t,n,r,a,o,i,s,d+=(c<u?1:-1)*(l/=2));return d}}(e,t,n,r,a,o,i,s,u))}function f(e,t,n){for(var r,a,o,i,s,u=0,c=0,f=(e=function(e,t){function n(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(h.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":a="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(y(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(y(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(v(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(v(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(v(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(v(t.x,t.y,t.X,t.Y))}return e}function r(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)l[t]="A",s&&(d[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),o=Math.max(i.length,s&&s.length||0)}}function a(e,t,n,r,a){e&&t&&"M"===e[a][0]&&"M"!==t[a][0]&&(t.splice(a,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],o=Math.max(i.length,s&&s.length||0))}var o,i=p(e),s=t,u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],d=[],f="",m="";o=Math.max(i.length,s&&s.length||0);for(var g=0;g<o;g++){"C"!==(f=i[g]?i[g][0]:f)&&(l[g]=f,g&&(m=l[g-1])),i[g]=n(i[g],u,m),"A"!==l[g]&&"C"===f&&(l[g]="C"),r(i,g),s&&("C"!==(f=s[g]?s[g][0]:f)&&(d[g]=f,g&&(m=d[g-1])),s[g]=n(s[g],c,m),"A"!==d[g]&&"C"===f&&(d[g]="C"),r(s,g)),a(i,s,u,c,g),a(s,i,c,u,g);var b=i[g],x=s&&s[g],w=b.length,k=s&&x.length;u.x=b[w-2],u.y=b[w-1],u.bx=parseFloat(b[w-4])||u.x,u.by=parseFloat(b[w-3])||u.y,c.bx=s&&(parseFloat(x[k-4])||c.x),c.by=s&&(parseFloat(x[k-3])||c.y),c.x=s&&x[k-2],c.y=s&&x[k-1]}return s?[i,s]:i}(e)).length;c<f;c++){if("M"===(o=e[c])[0])r=+o[1],a=+o[2];else{if(t<u+(i=d(r,a,o[1],o[2],o[3],o[4],o[5],o[6]))&&!n)return{x:(s=d(r,a,o[1],o[2],o[3],o[4],o[5],o[6],t-u)).x,y:s.y,alpha:s.alpha};u+=i,r=+o[5],a=+o[6]}o.shift()}return(s=n?u:l(r,a,o[0],o[1],o[2],o[3],o[4],o[5],1)).alpha?{x:s.x,y:s.y,alpha:s.alpha}:s}function p(e){var t=[],n=0,r=0,a=0,o=0,i=0;if(e){"M"===e[0][0]&&(a=n=+e[0][1],o=r=+e[0][2],i++,t[0]=["M",n,r]);for(var s,u,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),l=i,d=e.length;l<d;l++){if(t.push(s=[]),(u=e[l])[0]!==String.prototype.toUpperCase.call(u[0]))switch(s[0]=String.prototype.toUpperCase.call(u[0]),s[0]){case"A":s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5],s[6]=+(u[6]+n),s[7]=+(u[7]+r);break;case"V":s[1]=+u[1]+r;break;case"H":s[1]=+u[1]+n;break;case"R":for(var f,p=2,h=(f=[n,r].concat(u.slice(1))).length;p<h;p++)f[p]=+f[p]+n,f[++p]=+f[p]+r;t.pop(),t=t.concat(m(f,c));break;case"M":a=+u[1]+n,o=+u[2]+r;break;default:for(var v=1,y=u.length;v<y;v++)s[v]=+u[v]+(v%2?n:r)}else if("R"===u[0])f=[n,r].concat(u.slice(1)),t.pop(),t=t.concat(m(f,c)),s=["R"].concat(u.slice(-2));else for(var g=0,b=u.length;g<b;g++)s[g]=u[g];switch(s[0]){case"Z":n=a,r=o;break;case"H":n=s[1];break;case"V":r=s[1];break;case"M":a=s[s.length-2],o=s[s.length-1];break;default:n=s[s.length-2],r=s[s.length-1]}}}return t}function h(e,t,n,r,a,o,i,s,u,c){function l(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var d,f=120*(g=Math.PI)/180,p=g/180*(+a||0),m=[],v=(c?(S=c[0],d=c[1],w=c[2],k=c[3]):(e=(b=l(e,t,-p)).x,t=b.y,1<(v=(y=(e-(s=(b=l(s,u,-p)).x))/2)*y/(n*n)+(b=(t-(u=b.y))/2)*b/(r*r))&&(n*=v=Math.sqrt(v),r*=v),v=n*n,x=r*r,w=(o=(o===i?-1:1)*Math.sqrt(Math.abs((v*x-v*b*b-x*y*y)/(v*b*b+x*y*y))))*n*b/r+(e+s)/2,k=o*-r*y/n+(t+u)/2,S=Math.asin(((t-k)/r).toFixed(9)),d=Math.asin(((u-k)/r).toFixed(9)),(S=e<w?g-S:S)<0&&(S=2*g+S),(d=s<w?g-d:d)<0&&(d=2*g+d),i&&d<S&&(S-=2*g),!i&&S<d&&(d-=2*g)),d-S),y=(Math.abs(v)>f&&(x=d,b=s,o=u,d=S+f*(i&&S<d?1:-1),m=h(s=w+n*Math.cos(d),u=k+r*Math.sin(d),n,r,a,0,i,b,o,[d,x,w,k])),v=d-S,Math.cos(S)),g=Math.sin(S),b=(f=Math.cos(d),a=Math.sin(d),4/3*n*(i=Math.tan(v/4))),x=[e,t],w=[e+b*g,t-(o=4/3*r*i)*y],k=[s+b*a,u-o*f],S=[s,u];if(w[0]=2*x[0]-w[0],w[1]=2*x[1]-w[1],c)return[w,k,S].concat(m);for(var _=[],T=0,E=(m=[w,k,S].concat(m).join().split(",")).length;T<E;T++)_[T]=T%2?l(m[T-1],m[T],p).y:l(m[T],m[T+1],p).x;return _}function m(e,t){for(var n=[],r=0,a=e.length;r<a-2*!t;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?a-4===r?o[3]={x:+e[0],y:+e[1]}:a-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[a-2],y:+e[a-1]}:a-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function v(e,t,n,r){return[e,t,n,r,n,r]}function y(e,t,n,r,a,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*a+2/3*n,1/3*o+2/3*r,a,o]}function g(e,t,n,r,a,o,i,s,u){for(var c=(u=1<(u=null==u?1:u)?1:u<0?0:u)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=0,f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;p<12;p++){var h=b(m=c*l[p]+c,e,n,a,i),m=b(m,t,r,o,s);d+=f[p]*Math.sqrt(h*h+m*m)}return c*d}function b(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}a.default.Font=function(e){this.parent=e,this.cache={},this.font=void 0},a.default.Font.prototype.textBounds=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,i=a&&a.renderer&&a.renderer._pInst||this.parent;(y=i._renderer.drawingContext).textAlign||o.LEFT,y.textBaseline||o.BASELINE,r=r||i._renderer._textSize;if(!g){for(var s=[],u=[],c=[],l=(c[0]=[],[]),d=this._scale(r),f=i._renderer.textLeading(),p=0,h=(this.font.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){var a=e.getMetrics();0===e.index||10===e.index?c[p+=1]=[]:(c[p].push(t+a.xMin*d),c[p].push(t+a.xMax*d),l.push(n+p*f+-a.yMin*d),l.push(n+p*f+-a.yMax*d))})),0<c[p].length&&(s[p]=Math.min.apply(null,c[p]),u[p]=Math.max.apply(null,c[p])),0),m=0;m<=p;m++){s[m]=Math.min.apply(null,c[m]),u[m]=Math.max.apply(null,c[m]);var v=u[m]-s[m];h<v&&(h=v)}var y,g={x:y=Math.min.apply(null,s),y:n=Math.min.apply(null,l),h:Math.max.apply(null,l)-n,w:h,advance:y-t};r=this._handleAlignment(i._renderer,e,g.x,g.y,g.w+g.advance);g.x=r.x,g.y=r.y}return g},a.default.Font.prototype.textToPoints=function(e,t,n,r,a){var o=0,i=[],l=this._getGlyphs(e);r=r||this.parent._renderer._textSize;for(var d,p=0;p<l.length;p++){if(!(l[d=p].name&&"space"===l[d].name||e.length===l.length&&" "===e[d]))for(var h=function(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(function(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}(e[r]));return n.push(t),n}(l[p].getPath(t,n,r).commands),m=0;m<h.length;m++)for(var v=function(e,t){t=function(e,t){if("object"!==s(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0});for(var n=f(e,0,1),r=n/(n*t.sampleFactor),a=[],o=0;o<n;o+=r)a.push(f(e,o));return t.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)c(u(e,n-1),u(e,n),u(e,n+1),t)&&(e.splice(n%e.length,1))}(a,t.simplifyThreshold),a}(h[m],a),y=0;y<v.length;y++)v[y].x+=o,i.push(v[y]);o+=l[p].advanceWidth*this._scale(r)}return i},a.default.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},a.default.Font.prototype._getPath=function(e,t,n,r){var a=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer;t=this._handleAlignment(a,e,t,n);return this.font.getPath(e,t.x,t.y,a._textSize,r)},a.default.Font.prototype._getPathData=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===s(t)&&(r=t),r&&"number"==typeof r.decimals&&(a=r.decimals),e.toPathData(a)},a.default.Font.prototype._getSVG=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===s(t)&&(r=t),r&&("number"==typeof r.decimals&&(a=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(a)},a.default.Font.prototype._renderPath=function(e,t,n,r){var a=r&&r.renderer||this.parent._renderer,i=a.drawingContext,u=(e=("object"===s(e)&&e.commands?e:this._getPath(e,t,n,r)).commands,i.beginPath(),!0);t=!1,n=void 0;try{for(var c,l=e[Symbol.iterator]();!(u=(c=l.next()).done);u=!0){var d=c.value;"M"===d.type?i.moveTo(d.x,d.y):"L"===d.type?i.lineTo(d.x,d.y):"C"===d.type?i.bezierCurveTo(d.x1,d.y1,d.x2,d.y2,d.x,d.y):"Q"===d.type?i.quadraticCurveTo(d.x1,d.y1,d.x,d.y):"Z"===d.type&&i.closePath()}}catch(e){t=!0,n=e}finally{try{u||null==l.return||l.return()}finally{if(t)throw n}}return a._doStroke&&a._strokeSet&&i.stroke(),a._doFill&&(a._fillSet||a._setFill(o._DEFAULT_TEXT_FILL),i.fill()),this},a.default.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},a.default.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},a.default.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},a.default.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},a.default.Font.prototype._handleAlignment=function(e,t,n,r,a){var i=e._textSize;switch(void 0===a&&(a=this._textWidth(t,i)),e._textAlign){case o.CENTER:n-=a/2;break;case o.RIGHT:n-=a}switch(e._textBaseline){case o.TOP:r+=this._textAscent(i);break;case o.CENTER:r+=this._textAscent(i)/2;break;case o.BOTTOM:r-=this._textDescent(i)}return{x:n,y:r}},e=a.default,n.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.append=function(e,t){return e.push(t),e},e.default.prototype.arrayCopy=function(e,t,n,r,a){var o,i;e=void 0!==a?(i=Math.min(a,e.length),o=r,e.slice(t,i+t)):(i=void 0!==n?(i=n,Math.min(i,e.length)):e.length,n=t,e.slice(o=0,i)),Array.prototype.splice.apply(n,[o,i].concat(e))},e.default.prototype.concat=function(e,t){return e.concat(t)},e.default.prototype.reverse=function(e){return e.reverse()},e.default.prototype.shorten=function(e){return e.pop(),e},e.default.prototype.shuffle=function(e,t){for(var n,r,a=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),o=(e=t||a?e:e.slice()).length;1<o;)n=this.random(0,1)*o|0,r=e[--o],e[o]=e[n],e[n]=r;return e},e.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e;t=t?e.slice(Math.min(t,e.length)):[];return(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(t)},e.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},e.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)},e=e.default,n.default=e},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},r.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return r.default.prototype.int(e,t)})):void 0},r.default.prototype.str=function(e){return e instanceof Array?e.map(r.default.prototype.str):String(e)},r.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(e){return"number"==typeof(e=r.default.prototype.int(e,10))?(e+128)%256-128:e instanceof Array?e.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(r.default.prototype.char):"string"==typeof e?r.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},r.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(e,t){if(t=null==t?8:t,e instanceof Array)return e.map((function(e){return r.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t?n.substring(n.length-t,n.length):n}},r.default.prototype.unhex=function(e){return e instanceof Array?e.map(r.default.prototype.unhex):parseInt("0x".concat(e),16)},e=r.default,n.default=e},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(u=e("../core/main"))&&u.__esModule?u:{default:u};function a(e,t,n){var r=e<0,a=(e=r?e.toString().substring(1):e.toString()).indexOf("."),o=-1!==a?e.substring(0,a):e,i=-1!==a?e.substring(a+1):"",s=r?"-":"";if(void 0!==n){r="",(-1!==a||0<n-i.length)&&(r="."),i.length>n&&(i=i.substring(0,n));for(var u=0;u<t-o.length;u++)s+="0";s=(s+=o)+r+i;for(var c=0;c<n-i.length;c++)s+="0";return s}for(var l=0;l<Math.max(t-o.length,0);l++)s+="0";return s+e}function o(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"";e=(e=-1!==n?e.substring(0,n):e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(0===t)r="";else if(void 0!==t)if(t>r.length)for(var a=t-(r+=-1===n?".":"").length+1,o=0;o<a;o++)r+="0";else r=r.substring(0,t+1);return e+r}function i(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function s(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.join=function(e,t){return r.default._validateParameters("join",arguments),e.join(t)},r.default.prototype.match=function(e,t){return r.default._validateParameters("match",arguments),e.match(t)},r.default.prototype.matchAll=function(e,t){r.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),a=n.exec(e),o=[];null!==a;)o.push(a),a=n.exec(e);return o},r.default.prototype.nf=function(e,t,n){return r.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return a(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):a(e,t,n)},r.default.prototype.nfc=function(e,t){return r.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return o(e,t)})):o(e,t)},r.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfp",t);var a=r.default.prototype.nf.apply(this,t);return a instanceof Array?a.map(i):i(a)},r.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfs",t);var a=r.default.prototype.nf.apply(this,t);return a instanceof Array?a.map(s):s(a)},r.default.prototype.split=function(e,t){return r.default._validateParameters("split",arguments),e.split(t)},r.default.prototype.splitTokens=function(e,t){var n,a;return r.default._validateParameters("splitTokens",arguments),a=void 0!==t?(a=/\]/g.exec(t),(n=/\[/g.exec(t))&&a?(t=t.slice(0,a.index)+t.slice(a.index+1),n=/\[/g.exec(t),t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[\\[".concat(t,"\\]]"),"g")):a?(t=t.slice(0,a.index)+t.slice(a.index+1),new RegExp("[".concat(t,"\\]]"),"g")):n?(t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[".concat(t,"\\[]"),"g")):new RegExp("[".concat(t,"]"),"g")):/\s/g,e.split(a).filter((function(e){return e}))},r.default.prototype.trim=function(e){return r.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var u=r.default;n.default=u},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.day=function(){return(new Date).getDate()},e.default.prototype.hour=function(){return(new Date).getHours()},e.default.prototype.minute=function(){return(new Date).getMinutes()},e.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return(new Date).getMonth()+1},e.default.prototype.second=function(){return(new Date).getSeconds()},e.default.prototype.year=function(){return(new Date).getFullYear()},e=e.default,n.default=e},{"../core/main":267}],310:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(c=e("../core/main"))&&c.__esModule?c:{default:c},i=(e("./p5.Geometry"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function u(e,t,n,r,a,i,s){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;for(var u,c,l=(i=void 0===i||i)?-2:0,d=(a=a<1?1:a)+((s=void 0===s?0!==t:s)?2:0),f=Math.atan2(e-t,n),p=Math.sin(f),h=Math.cos(f),m=l;m<=d;++m){var v=m/a,y=n*v,g=void 0;g=m<0?(v=y=0,e):a<m?(y=n,v=1,t):e+(t-e)*v;for(-2!==m&&m!==a+2||(g=0),y-=n/2,u=0;u<r;++u){var b=u/(r-1),x=2*Math.PI*b,w=Math.sin(x),k=(x=Math.cos(x),this.vertices.push(new o.default.Vector(w*g,y,x*g)));k=m<0?new o.default.Vector(0,-1,0):a<m&&t?new o.default.Vector(0,1,0):new o.default.Vector(w*h,p,x*h);this.vertexNormals.push(k),this.uvs.push(b,v)}}var S=0;if(i){for(c=0;c<r;++c)this.faces.push([S+c,S+r+(c+1)%r,S+r+c]);S+=2*r}for(m=0;m<a;++m){for(u=0;u<r;++u){var _=(u+1)%r;this.faces.push([S+u,S+_,S+r+_]),this.faces.push([S+u,S+r+_,S+r+u])}S+=r}if(s)for(S+=r,u=0;u<r;++u)this.faces.push([S+u,S+(u+1)%r,S+r])}o.default.prototype.plane=function(e,t,n,r){this._assert3d("plane"),o.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1);var a,i="plane|".concat(n=void 0===n?1:n,"|").concat(r);return this._renderer.geometryInHash(i)||((a=new o.default.Geometry(n,r,(function(){for(var e,t,n=0;n<=this.detailY;n++)for(var r=n/this.detailY,a=0;a<=this.detailX;a++)e=a/this.detailX,t=new o.default.Vector(e-.5,r-.5,0),this.vertices.push(t),this.uvs.push(e,r)}))).computeFaces().computeNormals(),n<=1&&r<=1?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(i,a)),this._renderer.drawBuffersScaled(i,e,t,1),this},o.default.prototype.box=function(e,t,n,r,a){this._assert3d("box"),o.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var i,s=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===a&&(a=s?1:4),s="box|".concat(r=void 0===r?s?1:4:r,"|").concat(a);return this._renderer.geometryInHash(s)||((i=new o.default.Geometry(r,a,(function(){var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var t=0;t<e.length;t++){for(var n=e[t],r=4*t,a=0;a<4;a++){var i=n[a];i=new o.default.Vector((2*(1&i)-1)/2,((2&i)-1)/2,((4&i)/2-1)/2);this.vertices.push(i),this.uvs.push(1&a,(2&a)/2)}this.faces.push([r,1+r,2+r]),this.faces.push([2+r,1+r,3+r])}}))).computeNormals(),r<=4&&a<=4?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,i)),this._renderer.drawBuffersScaled(s,e,t,n),this},o.default.prototype.sphere=function(e,t,n){return this._assert3d("sphere"),o.default._validateParameters("sphere",arguments),this.ellipsoid(e=void 0===e?50:e,e,e,t=void 0===t?24:t,n=void 0===n?16:n),this},o.default.prototype.cylinder=function(e,t,n,r,a,i){this._assert3d("cylinder"),o.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1),void 0===i&&(i=!0),void 0===a&&(a=!0);var s,c="cylinder|".concat(n=void 0===n?24:n,"|").concat(r,"|").concat(a,"|").concat(i);return this._renderer.geometryInHash(c)||(s=new o.default.Geometry(n,r),u.call(s,1,1,1,n,r,a,i),n<=24&&r<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(c,s)),this._renderer.drawBuffersScaled(c,e,t,e),this},o.default.prototype.cone=function(e,t,n,r,a){this._assert3d("cone"),o.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1),void 0===a&&(a=!0);var i,s="cone|".concat(n=void 0===n?24:n,"|").concat(r,"|").concat(a);return this._renderer.geometryInHash(s)||(i=new o.default.Geometry(n,r),u.call(i,1,0,1,n,r,a,!1),n<=24&&r<=16?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(s,i)),this._renderer.drawBuffersScaled(s,e,t,e),this},o.default.prototype.ellipsoid=function(e,t,n,r,a){this._assert3d("ellipsoid"),o.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=e),void 0===a&&(a=16);var i,s="ellipsoid|".concat(r=void 0===r?24:r,"|").concat(a);return this._renderer.geometryInHash(s)||((i=new o.default.Geometry(r,a,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),a=Math.sin(n),i=0;i<=this.detailX;i++){var s=i/this.detailX,u=2*Math.PI*s,c=Math.cos(u);u=Math.sin(u),u=new o.default.Vector(r*u,a,r*c);this.vertices.push(u),this.vertexNormals.push(u),this.uvs.push(s,t)}}))).computeFaces(),r<=24&&a<=24?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(s,i)),this._renderer.drawBuffersScaled(s,e,t,n),this},o.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),o.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var a,i=(t/e).toPrecision(4);t="torus|".concat(i,"|").concat(n,"|").concat(r);return this._renderer.geometryInHash(t)||((a=new o.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),a=Math.sin(n),s=1+i*r,u=0;u<=this.detailX;u++){var c=u/this.detailX,l=2*Math.PI*c,d=Math.cos(l),f=(l=Math.sin(l),new o.default.Vector(s*d,s*l,i*a));d=new o.default.Vector(r*d,r*l,a);this.vertices.push(f),this.vertexNormals.push(d),this.uvs.push(c,t)}}))).computeFaces(),n<=24&&r<=16?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(t,a)),this._renderer.drawBuffersScaled(t,e,e,e),this},o.default.RendererGL.prototype.point=function(e,t,n){var r=[];return r.push(new o.default.Vector(e,t,n=void 0===n?0:n)),this._drawPoints(r,this.immediateMode.buffers.point),this},o.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],s=(e=e[5],this.geometryInHash("tri")||((s=new o.default.Geometry(1,1,(function(){var e=[];e.push(new o.default.Vector(0,0,0)),e.push(new o.default.Vector(1,0,0)),e.push(new o.default.Vector(0,1,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]})))._makeTriangleEdges()._edgesToVertices(),s.computeNormals(),this.createBuffers("tri",s)),this.uMVMatrix.copy());try{var u=new o.default.Matrix([r-t,a-n,0,0,i-t,e-n,0,0,0,0,1,0,t,n,0,1]).mult(this.uMVMatrix);this.uMVMatrix=u,this.drawBuffers("tri")}finally{this.uMVMatrix=s}return this},o.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,i.TWO_PI,i.OPEN,e[4])},o.default.RendererGL.prototype.arc=function(e){var t,n=arguments[1],r=arguments[2],a=arguments[3],s=arguments[4],u=arguments[5],c=arguments[6],l=arguments[7]||25,d=(Math.abs(u-s)>=i.TWO_PI?"".concat(f="ellipse","|"):"".concat(f="arc","|").concat(s,"|").concat(u,"|").concat(c,"|")).concat(l,"|"),f=(this.geometryInHash(d)||((t=new o.default.Geometry(l,1,(function(){if(this.strokeIndices=[],s.toFixed(10)!==u.toFixed(10)){c!==i.PIE&&void 0!==c||(this.vertices.push(new o.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=l;e++){var t=e/l*(u-s)+s,n=.5+Math.cos(t)/2;t=.5+Math.sin(t)/2;this.vertices.push(new o.default.Vector(n,t,0)),this.uvs.push([n,t]),e<l-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}switch(c){case i.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case i.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case i.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}}))).computeNormals(),l<=50?t._makeTriangleEdges()._edgesToVertices(t):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(f," with more than 50 detail")),this.createBuffers(d,t)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([e,n,0]),this.uMVMatrix.scale(r,a,1),this.drawBuffers(d)}finally{this.uMVMatrix=f}return this},o.default.RendererGL.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];if(void 0===e[4]){var s=this._pInst._glAttributes.perPixelLighting,u=e[4]||(s?1:24),c=e[5]||(s?1:16),l=(s="rect|".concat(u,"|").concat(c),this.geometryInHash(s)||((l=new o.default.Geometry(u,c,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,a=new o.default.Vector(r,t,0);this.vertices.push(a),this.uvs.push(r,t)}0<u&&0<c&&(this.strokeIndices=[[0,u],[u,(u+1)*(c+1)-1],[(u+1)*(c+1)-1,(u+1)*c],[(u+1)*c,0]])}))).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(s,l)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([t,n,0]),this.uMVMatrix.scale(r,a,1),this.drawBuffers(s)}finally{this.uMVMatrix=l}}else{s=e[4],l=void 0===e[5]?s:e[5];var d=void 0===e[6]?l:e[6],f=(e=void 0===e[7]?d:e[7],r),p=a,h=((v=((f+=t)<t&&(v=t,t=f,f=v),(p+=n)<n&&(v=n,n=p,p=v),Math.min((f-t)/2,(p-n)/2)))<s&&(s=v),v<l&&(l=v),v<d&&(d=v),v<e&&(e=v),t),m=n,v=f,y=(t=p,this.beginShape(),0!==l?(this.vertex(v-l,m),this.quadraticVertex(v,m,v,m+l)):this.vertex(v,m),0!==d?(this.vertex(v,t-d),this.quadraticVertex(v,t,v-d,t)):this.vertex(v,t),0!==e?(this.vertex(h+e,t),this.quadraticVertex(h,t,h,t-e)):this.vertex(h,t),0!==s?(this.vertex(h,m+s),this.quadraticVertex(h,m,h+s,m)):this.vertex(h,m),!(this.immediateMode.geometry.uvs.length=0));n=!1,f=void 0;try{for(var g,b=this.immediateMode.geometry.vertices[Symbol.iterator]();!(y=(g=b.next()).done);y=!0){var x=g.value,w=(x.x-h)/r,k=(x.y-m)/a;this.immediateMode.geometry.uvs.push(w,k)}}catch(e){n=!0,f=e}finally{try{y||null==b.return||b.return()}finally{if(n)throw f}}this.endShape(i.CLOSE)}return this},o.default.RendererGL.prototype.quad=function(e,t,n,r,a,i,s,u,c,l,d,f,p,h){void 0===p&&(p=2),void 0===h&&(h=2);var m="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(i,"|").concat(s,"|").concat(u,"|").concat(c,"|").concat(l,"|").concat(d,"|").concat(f,"|").concat(p,"|").concat(h);if(!this.geometryInHash(m)){var v=new o.default.Geometry(p,h,(function(){for(var p=1/(this.detailX-1),h=1/(this.detailY-1),m=0;m<this.detailY;m++)for(var v=0;v<this.detailX;v++){var y=v*p,g=m*h;this.vertices.push(new o.default.Vector((1-y)*((1-g)*e+g*l)+y*((1-g)*r+g*s),(1-y)*((1-g)*t+g*d)+y*((1-g)*a+g*u),(1-y)*((1-g)*n+g*f)+y*((1-g)*i+g*c))),this.uvs.push([y,g])}}));v.faces=[];for(var y=0;y<h-1;y++)for(var g=0;g<p-1;g++){var b=g+y*p,x=g+1+(y+1)*p,w=g+(y+1)*p;v.faces.push([b,g+1+y*p,x]),v.faces.push([b,x,w])}v.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(m,v)}return this.drawBuffers(m),this},o.default.RendererGL.prototype.bezier=function(e,t,n,r,a,o,i,s,u,c,l,d){8===arguments.length&&(l=s,c=i,s=o,i=a,a=r,r=n,n=o=u=d=0);var f=this._pInst._bezierDetail||20;this.beginShape();for(var p=0;p<=f;p++){var h=Math.pow(1-p/f,3),m=p/f*3*Math.pow(1-p/f,2),v=3*Math.pow(p/f,2)*(1-p/f),y=Math.pow(p/f,3);this.vertex(e*h+r*m+i*v+c*y,t*h+a*m+s*v+l*y,n*h+o*m+u*v+d*y)}return this.endShape(),this},o.default.RendererGL.prototype.curve=function(e,t,n,r,a,o,i,s,u,c,l,d){8===arguments.length&&(c=i,l=s,i=a,s=r,a=r=n,n=o=u=d=0);var f=this._pInst._curveDetail;this.beginShape();for(var p=0;p<=f;p++){var h=.5*Math.pow(p/f,3),m=.5*Math.pow(p/f,2),v=p/f*.5;this.vertex(h*(3*r-e-3*i+c)+m*(2*e-5*r+4*i-c)+v*(-e+i)+2*r*.5,h*(3*a-t-3*s+l)+m*(2*t-5*a+4*s-l)+v*(-t+s)+2*a*.5,h*(3*o-n-3*u+d)+m*(2*n-5*o+4*u-d)+v*(-n+u)+2*o*.5)}return this.endShape(),this},o.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(i.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(i.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},o.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,a,o,i=[],s=[],u=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,l=0,d=1,f=0;l<1;){if(o=parseFloat(l.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(o),d.toFixed(6)===c.toFixed(6)){o=parseFloat(d.toFixed(6))+parseFloat(l.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(o);break}l+=c,d-=c,++f}}for(var p=this._lookUpTableBezier.length,h=[],m=0;m<4;m++)h.push([]);h[0]=this.immediateMode.geometry.vertexColors.slice(-4),h[3]=this.curFillColor.slice();var v=[];for(m=0;m<4;m++)v.push([]);if(v[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),v[3]=this.curStrokeColor.slice(),6===u){this.isBezier=!0;i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var y=Math.hypot(i[0]-i[1],s[0]-s[1]),g=Math.hypot(i[1]-i[2],s[1]-s[2]),b=Math.hypot(i[2]-i[3],s[2]-s[3]);for(y/=g=y+g+b,b/=g,a=0;a<4;a++)h[1].push(h[0][a]*(1-y)+h[3][a]*y),h[2].push(h[0][a]*b+h[3][a]*(1-b)),v[1].push(v[0][a]*(1-y)+v[3][a]*y),v[2].push(v[0][a]*b+v[3][a]*(1-b));for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<4;m++){for(a=0;a<4;a++)this.curFillColor[a]+=this._lookUpTableBezier[r][m]*h[m][a],this.curStrokeColor[a]+=this._lookUpTableBezier[r][m]*v[m][a];e+=i[m]*this._lookUpTableBezier[r][m],t+=s[m]*this._lookUpTableBezier[r][m]}this.vertex(e,t)}this.curFillColor=h[3],this.curStrokeColor=v[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===u){this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var x=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],w=Math.hypot(i[0]-i[1],s[0]-s[1],x[0]-x[1]),k=(g=Math.hypot(i[1]-i[2],s[1]-s[2],x[1]-x[2]),Math.hypot(i[2]-i[3],s[2]-s[3],x[2]-x[3]));for(w/=u=w+g+k,k/=u,a=0;a<4;a++)h[1].push(h[0][a]*(1-w)+h[3][a]*w),h[2].push(h[0][a]*k+h[3][a]*(1-k)),v[1].push(v[0][a]*(1-w)+v[3][a]*w),v[2].push(v[0][a]*k+v[3][a]*(1-k));for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=n=0;m<4;m++){for(a=0;a<4;a++)this.curFillColor[a]+=this._lookUpTableBezier[r][m]*h[m][a],this.curStrokeColor[a]+=this._lookUpTableBezier[r][m]*v[m][a];e+=i[m]*this._lookUpTableBezier[r][m],t+=s[m]*this._lookUpTableBezier[r][m],n+=x[m]*this._lookUpTableBezier[r][m]}this.vertex(e,t,n)}this.curFillColor=h[3],this.curStrokeColor=v[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},o.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,a,o,i=[],s=[],u=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,l=0,d=1,f=0;l<1;){if(o=parseFloat(l.toFixed(6)),this._lookUpTableQuadratic[f]=this._quadraticCoefficients(o),d.toFixed(6)===c.toFixed(6)){o=parseFloat(d.toFixed(6))+parseFloat(l.toFixed(6)),++f,this._lookUpTableQuadratic[f]=this._quadraticCoefficients(o);break}l+=c,d-=c,++f}}for(var p=this._lookUpTableQuadratic.length,h=[],m=0;m<3;m++)h.push([]);h[0]=this.immediateMode.geometry.vertexColors.slice(-4),h[2]=this.curFillColor.slice();var v=[];for(m=0;m<3;m++)v.push([]);if(v[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),v[2]=this.curStrokeColor.slice(),4===u){this.isQuadratic=!0;i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var y=Math.hypot(i[0]-i[1],s[0]-s[1]);for(y/=y+Math.hypot(i[1]-i[2],s[1]-s[2]),a=0;a<4;a++)h[1].push(h[0][a]*(1-y)+h[2][a]*y),v[1].push(v[0][a]*(1-y)+v[2][a]*y);for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=0;m<3;m++){for(a=0;a<4;a++)this.curFillColor[a]+=this._lookUpTableQuadratic[r][m]*h[m][a],this.curStrokeColor[a]+=this._lookUpTableQuadratic[r][m]*v[m][a];e+=i[m]*this._lookUpTableQuadratic[r][m],t+=s[m]*this._lookUpTableQuadratic[r][m]}this.vertex(e,t)}this.curFillColor=h[2],this.curStrokeColor=v[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===u){this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var g=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],b=Math.hypot(i[0]-i[1],s[0]-s[1],g[0]-g[1]);for(b/=b+Math.hypot(i[1]-i[2],s[1]-s[2],g[1]-g[2]),a=0;a<4;a++)h[1].push(h[0][a]*(1-b)+h[2][a]*b),v[1].push(v[0][a]*(1-b)+v[2][a]*b);for(r=0;r<p;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],m=e=t=n=0;m<3;m++){for(a=0;a<4;a++)this.curFillColor[a]+=this._lookUpTableQuadratic[r][m]*h[m][a],this.curStrokeColor[a]+=this._lookUpTableQuadratic[r][m]*v[m][a];e+=i[m]*this._lookUpTableQuadratic[r][m],t+=s[m]*this._lookUpTableQuadratic[r][m],n+=g[m]*this._lookUpTableQuadratic[r][m]}this.vertex(e,t,n)}this.curFillColor=h[2],this.curStrokeColor=v[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},o.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,a,o,i=[],s=[],u=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,l=0,d=1,f=0;l<1;){if(o=parseFloat(l.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(o),d.toFixed(6)===c.toFixed(6)){o=parseFloat(d.toFixed(6))+parseFloat(l.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(o);break}l+=c,d-=c,++f}}var p=this._lookUpTableBezier.length;if(2===u){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),a=0;a<p;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=s[0]*this._lookUpTableBezier[a][0]+s[1]*this._lookUpTableBezier[a][1]+s[2]*this._lookUpTableBezier[a][2]+s[3]*this._lookUpTableBezier[a][3],this.vertex(t,n);for(a=0;a<u;a++)this.immediateMode._curveVertex.shift()}}else if(3===u&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),e=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),a=0;a<p;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=s[0]*this._lookUpTableBezier[a][0]+s[1]*this._lookUpTableBezier[a][1]+s[2]*this._lookUpTableBezier[a][2]+s[3]*this._lookUpTableBezier[a][3],r=e[0]*this._lookUpTableBezier[a][0]+e[1]*this._lookUpTableBezier[a][1]+e[2]*this._lookUpTableBezier[a][2]+e[3]*this._lookUpTableBezier[a][3],this.vertex(t,n,r);for(a=0;a<u;a++)this.immediateMode._curveVertex.shift()}},o.default.RendererGL.prototype.image=function(e,t,n,r,a,o,s,u,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(e),this._pInst.textureMode(i.NORMAL);var l=0,d=(t<=e.width&&(l=t/e.width),1);t+r<=e.width&&(d=(t+r)/e.width),t=0,n<=e.height&&(t=n/e.height),r=1;n+a<=e.height&&(r=(n+a)/e.height),this.beginShape(),this.vertex(o,s,0,l,t),this.vertex(o+u,s,0,d,t),this.vertex(o+u,s+c,0,d,r),this.vertex(o,s+c,0,l,r),this.endShape(i.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(i.REMOVE)};var c=o.default;n.default=c},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.orbitControl=function(e,t,n){var r,a;if(this._assert3d("orbitControl"),o.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return r=this._renderer._curCamera,void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=.5),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),a=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,n*a):this._renderer._curCamera._orbit(0,0,-n*a)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(n=-e*(this.mouseX-this.pmouseX)/a,a=t*(this.mouseY-this.pmouseY)/a,this._renderer._curCamera._orbit(n,a,0)):this.mouseButton===this.RIGHT&&(n=r._getLocalAxes(),0!==(a=Math.sqrt(n.x[0]*n.x[0]+n.x[2]*n.x[2]))&&(n.x[0]/=a,n.x[2]/=a),0!==(a=Math.sqrt(n.y[0]*n.y[0]+n.y[2]*n.y[2]))&&(n.y[0]/=a,n.y[2]/=a),a=-1*e*(this.mouseX-this.pmouseX),e=-1*t*(this.mouseY-this.pmouseY),r.setPosition(r.eyeX+a*n.x[0]+e*n.z[0],r.eyeY,r.eyeZ+a*n.x[2]+e*n.z[2]))),this},o.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===i.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===i.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},o.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},o.default.prototype._grid=function(e,t,n,r,a){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0);var o=e/t,i=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-i+n,r,e*o-i+a),this.vertex(i+n,r,e*o-i+a),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*o-i+n,r,-i+a),this.vertex(s*o-i+n,r,i+a),this.endShape();this.pop()}},o.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var u=o.default;n.default=u},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.ambientLight=function(e,t,n,r){this._assert3d("ambientLight"),o.default._validateParameters("ambientLight",arguments);var a=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(a._array[0],a._array[1],a._array[2]),this._renderer._enableLighting=!0,this},o.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),o.default._validateParameters("specularColor",arguments);var r=this.color.apply(this,arguments);return this._renderer.specularColors=[r._array[0],r._array[1],r._array[2]],this},o.default.prototype.directionalLight=function(e,t,n,r,a,i){this._assert3d("directionalLight"),o.default._validateParameters("directionalLight",arguments),e=e instanceof o.default.Color?e:this.color(e,t,n);var s,u;n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,u=t.y,t.z),t=Math.sqrt(s*s+u*u+n*n);return this._renderer.directionalLightDirections.push(s/t,u/t,n/t),this._renderer.directionalLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.pointLight=function(e,t,n,r,a,i){this._assert3d("pointLight"),o.default._validateParameters("pointLight",arguments),e=e instanceof o.default.Color?e:this.color(e,t,n);var s,u;n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,u=t.y,t.z);return this._renderer.pointLightPositions.push(s,u,n),this._renderer.pointLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},o.default.prototype.lights=function(){var e;return this._assert3d("lights"),this._colorMode===i.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(e=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,e),this.directionalLight(0,0,e,0,0,-1)),this},o.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),o.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},o.default.prototype.spotLight=function(e,t,n,r,a,i,s,u,c,l,d){this._assert3d("spotLight"),o.default._validateParameters("spotLight",arguments);var f,p,h,m=arguments.length;switch(m){case 11:case 10:f=this.color(e,t,n),p=new o.default.Vector(r,a,i),h=new o.default.Vector(s,u,c);break;case 9:e instanceof o.default.Color?(f=e,p=new o.default.Vector(t,n,r),h=new o.default.Vector(a,i,s),l=u,d=c):r instanceof o.default.Vector?(f=this.color(e,t,n),p=r,h=new o.default.Vector(a,i,s),l=u,d=c):s instanceof o.default.Vector?(f=this.color(e,t,n),p=new o.default.Vector(r,a,i),h=s,l=u,d=c):(f=this.color(e,t,n),p=new o.default.Vector(r,a,i),h=new o.default.Vector(s,u,c));break;case 8:h=e instanceof o.default.Color?(f=e,p=new o.default.Vector(t,n,r),new o.default.Vector(a,i,s)):r instanceof o.default.Vector?(f=this.color(e,t,n),p=r,new o.default.Vector(a,i,s)):(f=this.color(e,t,n),p=new o.default.Vector(r,a,i),s),l=u;break;case 7:e instanceof o.default.Color&&t instanceof o.default.Vector?(f=e,p=t,h=new o.default.Vector(n,r,a),l=i,d=s):e instanceof o.default.Color&&a instanceof o.default.Vector?(f=e,p=new o.default.Vector(t,n,r),h=a,l=i,d=s):r instanceof o.default.Vector&&a instanceof o.default.Vector?(f=this.color(e,t,n),p=r,h=a,l=i,d=s):h=e instanceof o.default.Color?(f=e,p=new o.default.Vector(t,n,r),new o.default.Vector(a,i,s)):r instanceof o.default.Vector?(f=this.color(e,t,n),p=r,new o.default.Vector(a,i,s)):(f=this.color(e,t,n),p=new o.default.Vector(r,a,i),s);break;case 6:r instanceof o.default.Vector&&a instanceof o.default.Vector?(f=this.color(e,t,n),p=r,h=a,l=i):e instanceof o.default.Color&&a instanceof o.default.Vector?(f=e,p=new o.default.Vector(t,n,r),h=a,l=i):e instanceof o.default.Color&&t instanceof o.default.Vector&&(f=e,p=t,h=new o.default.Vector(n,r,a),l=i);break;case 5:e instanceof o.default.Color&&t instanceof o.default.Vector&&n instanceof o.default.Vector?(f=e,p=t,h=n,l=r,d=a):r instanceof o.default.Vector&&a instanceof o.default.Vector?(f=this.color(e,t,n),p=r,h=a):e instanceof o.default.Color&&a instanceof o.default.Vector?(f=e,p=new o.default.Vector(t,n,r),h=a):e instanceof o.default.Color&&t instanceof o.default.Vector&&(f=e,p=t,h=new o.default.Vector(n,r,a));break;case 4:f=e,p=t,h=n,l=r;break;case 3:f=e,p=t,h=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(m<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(p.x,p.y,p.z),h.normalize(),this._renderer.spotLightDirections.push(h.x,h.y,h.z),void 0===l&&(l=Math.PI/3),void 0!==d&&d<1?(d=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===d&&(d=100),l=this._renderer._pInst._toRadians(l),this._renderer.spotLightAngle.push(Math.cos(l)),this._renderer.spotLightConc.push(d),this._renderer._enableLighting=!0,this},o.default.prototype.noLights=function(){return this._assert3d("noLights"),o.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var u=o.default;n.default=u},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./p5.Geometry"),r.default.prototype.loadModel=function(e){r.default._validateParameters("loadModel",arguments);var t,n,a,o=e.slice(-4),i=("boolean"==typeof arguments[1]?(t=arguments[1],n=arguments[2],a=arguments[3],void 0!==arguments[4]&&(o=arguments[4])):(t=!1,n=arguments[1],a=arguments[2],void 0!==arguments[3]&&(o=arguments[3])),new r.default.Geometry),s=(i.gid="".concat(e,"|").concat(t),this);return o.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){!function(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(function(e,t,n){for(var r=0,a=e.length;r<a;r++)if(e[r]!==t.getUint8(n+r,!1))return;return 1}(n,t,r))return;return 1}(t))!function(e,t){for(var n,a,o,i,s,u,c,l=new DataView(t),d=l.getUint32(80,!0),f=!1,p=0;p<70;p++)1129270351===l.getUint32(p,!1)&&82===l.getUint8(p+4)&&61===l.getUint8(p+5)&&(f=!0,i=[],s=l.getUint8(p+6)/255,u=l.getUint8(p+7)/255,c=l.getUint8(p+8)/255);for(var h=0;h<d;h++){for(var m,v=84+50*h,y=l.getFloat32(v,!0),g=l.getFloat32(4+v,!0),b=l.getFloat32(8+v,!0),x=(f&&(o=0==(32768&(m=l.getUint16(48+v,!0)))?(n=(31&m)/31,a=(m>>5&31)/31,(m>>10&31)/31):(n=s,a=u,c)),new r.default.Vector(y,g,b)),w=1;w<=3;w++){var k=v+12*w;k=new r.default.Vector(l.getFloat32(k,!0),l.getFloat32(4+k,!0),l.getFloat32(8+k,!0));e.vertices.push(k),e.vertexNormals.push(x),f&&i.push(n,a,o)}e.faces.push([3*h,3*h+1,3*h+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{if(t=new DataView(t),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");(function(e,t){for(var n,a,o="",i=[],s=0;s<t.length;++s){for(var u=t[s].trim(),c=u.split(" "),l=0;l<c.length;++l)""===c[l]&&c.splice(l,1);if(0!==c.length)switch(o){case"":if("solid"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "solid"'));o="solid";break;case"solid":if("facet"!==c[0]||"normal"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "facet normal"'));n=new r.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),o="facet normal";break;case"facet normal":if("outer"!==c[0]||"loop"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "outer loop"'));o="vertex";break;case"vertex":if("vertex"===c[0])a=new r.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),e.vertices.push(a),e.uvs.push([0,0]),i.push(e.vertices.indexOf(a));else{if("endloop"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "vertex" or "endloop"'));e.faces.push(i),i=[],o="endloop"}break;case"endloop":if("endfacet"!==c[0])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "endfacet"'));o="endfacet";break;case"endfacet":if("endsolid"!==c[0]){if("facet"!==c[0]||"normal"!==c[1])return console.error(u),console.error('Invalid state "'.concat(c[0],'", should be "endsolid" or "facet normal"'));n=new r.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),o="facet normal"}break;default:console.error('Invalid state "'.concat(o,'"'))}}})(e,t=new TextDecoder("utf-8").decode(t).split("\n"))}}(i,e),t&&i.normalize(),s._decrementPreload(),"function"==typeof n&&n(i)}),a):o.match(/\.obj$/i)?this.loadStrings(e,(function(e){for(var a=i,o=e,u={v:[],vt:[],vn:[]},c={},l=0;l<o.length;++l){var d=o[l].trim().split(/\b\s+/);if(0<d.length)if("v"===d[0]||"vn"===d[0]){var f=new r.default.Vector(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));u[d[0]].push(f)}else if("vt"===d[0])f=[parseFloat(d[1]),1-parseFloat(d[2])],u[d[0]].push(f);else if("f"===d[0])for(var p=3;p<d.length;++p){for(var h=[],m=[1,p-1,p],v=0;v<m.length;++v){var y=d[m[v]],g=0;if(void 0!==c[y])g=c[y];else{for(var b=y.split("/"),x=0;x<b.length;x++)b[x]=parseInt(b[x])-1;g=c[y]=a.vertices.length,a.vertices.push(u.v[b[0]].copy()),u.vt[b[1]]?a.uvs.push(u.vt[b[1]].slice()):a.uvs.push([0,0]),u.vn[b[2]]&&a.vertexNormals.push(u.vn[b[2]].copy())}h.push(g)}h[0]!==h[1]&&h[0]!==h[2]&&h[1]!==h[2]&&a.faces.push(h)}}0===a.vertexNormals.length&&a.computeNormals(),t&&i.normalize(),s._decrementPreload(),"function"==typeof n&&n(i)}),a):(r.default._friendlyFileLoadError(3,e),a?a():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),i},r.default.prototype.model=function(e){this._assert3d("model"),r.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var a=r.default;n.default=a},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.join"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Texture"),o.default.prototype.loadShader=function(e,t,n,r){function a(){s._decrementPreload(),n&&n(i)}o.default._validateParameters("loadShader",arguments),r=r||console.error;var i=new o.default.Shader,s=this,u=!1,c=!1;return this.loadStrings(e,(function(e){i._vertSrc=e.join("\n"),c=!0,u&&a()}),r),this.loadStrings(t,(function(e){i._fragSrc=e.join("\n"),u=!0,c&&a()}),r),i},o.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),o.default._validateParameters("createShader",arguments),new o.default.Shader(this._renderer,e,t)},o.default.prototype.shader=function(e){return this._assert3d("shader"),o.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.init(),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),this},o.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},o.default.prototype.texture=function(e){return this._assert3d("texture"),o.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=i.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.textureMode=function(e){e!==i.IMAGE&&e!==i.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},o.default.prototype.textureWrap=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=(this._renderer.textureWrapX=e,this._renderer.textureWrapY=t,this._renderer.textures),r=0;r<n.length;r++)n[r].setWrapMode(e,t)},o.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("normalMaterial",t),this._renderer.drawMode=i.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},o.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),o.default._validateParameters("ambientMaterial",arguments);var r=o.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=r._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),o.default._validateParameters("emissiveMaterial",arguments);var a=o.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=a._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),o.default._validateParameters("specularMaterial",arguments);var a=o.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=a._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},o.default.prototype.shininess=function(e){return this._assert3d("shininess"),o.default._validateParameters("shininess",arguments),this._renderer._useShininess=e=e<1?1:e,this},o.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,n=this.drawMode===i.TEXTURE;return(n=this.userFillShader||this.userStrokeShader||this.userPointShader||n||this.curBlendMode!==i.BLEND||e[e.length-1]<1||this._isErasing)!==this._isBlending&&(n||this.curBlendMode!==i.BLEND&&this.curBlendMode!==i.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=n),this._applyBlendMode(),e},o.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case i.BLEND:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case i.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE);break;case i.REMOVE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_ALPHA);break;case i.MULTIPLY:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case i.SCREEN:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_COLOR);break;case i.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case i.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case i.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case i.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case i.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var u=o.default;n.default=u},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},r.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},r.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},r.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new r.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},r.default.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix},r.default.Camera.prototype.perspective=function(e,t,n,a){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===a&&(a=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),a<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=a,this.projMatrix=r.default.Matrix.identity();e=1/Math.tan(this.cameraFOV/2);var o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(e/t,0,0,0,0,-e,0,0,0,0,(a+n)*o,-1,0,0,2*a*n*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},r.default.Camera.prototype.ortho=function(e,t,n,a,o,i){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=+this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===o&&(o=0);var s=t-e,u=(a=void 0===a?+this._renderer.height/2:a)-n,c=(i=void 0===i?Math.max(this._renderer.width,this._renderer.height):i)-o,l=2/s,d=2/u,f=-2/c;t=-(t+e)/s,e=-(a+n)/u,s=-(i+o)/c;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(l,0,0,0,0,-d,0,0,0,0,f,0,t,e,s,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype.frustum=function(e,t,n,a,o,i){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=+this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===o&&(o=0);var s=t-e,u=(a=void 0===a?+this._renderer.height/2:a)-n,c=(i=void 0===i?Math.max(this._renderer.width,this._renderer.height):i)-o,l=2*o/s,d=2*o/u,f=-2*i*o/c;t=(t+e)/s,e=(a+n)/u,s=-(i+o)/c;this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(l,0,0,0,0,d,0,0,t,e,s,-1,0,0,f,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},r.default.Camera.prototype._rotateView=function(e,t,n,a){var o=this.centerX,i=this.centerY,s=this.centerZ,u=(o-=this.eyeX,i-=this.eyeY,s-=this.eyeZ,r.default.Matrix.identity(this._renderer._pInst));(e=(u.rotate(this._renderer._pInst._toRadians(e),t,n,a),[o*u.mat4[0]+i*u.mat4[4]+s*u.mat4[8],o*u.mat4[1]+i*u.mat4[5]+s*u.mat4[9],o*u.mat4[2]+i*u.mat4[6]+s*u.mat4[10]]))[0]+=this.eyeX,e[1]+=this.eyeY,e[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,e[0],e[1],e[2],this.upX,this.upY,this.upZ)},r.default.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},r.default.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},r.default.Camera.prototype.lookAt=function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)},r.default.Camera.prototype.camera=function(e,t,n,r,a,o,i,s,u){return void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,a=t,s=1,u=i=o=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=a,this.centerZ=o),void 0!==i&&(this.upX=i,this.upY=s,this.upZ=u),r=this._getLocalAxes(),this.cameraMatrix.set(r.x[0],r.y[0],r.z[0],0,r.x[1],r.y[1],r.z[1],0,r.x[2],r.y[2],r.z[2],0,0,0,0,1),a=-e,this.cameraMatrix.translate([a,-t,-n]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},r.default.Camera.prototype.move=function(e,t,n){e=[(r=this._getLocalAxes()).x[0]*e,r.x[1]*e,r.x[2]*e],t=[r.y[0]*t,r.y[1]*t,r.y[2]*t];var r=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+e[0]+t[0]+r[0],this.eyeY+e[1]+t[1]+r[1],this.eyeZ+e[2]+t[2]+r[2],this.centerX+e[0]+t[0]+r[0],this.centerY+e[1]+t[1]+r[1],this.centerZ+e[2]+t[2]+r[2],this.upX,this.upY,this.upZ)},r.default.Camera.prototype.setPosition=function(e,t,n){var r=e-this.eyeX,a=t-this.eyeY,o=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+a,this.centerZ+o,this.upX,this.upY,this.upZ)},r.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},r.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},r.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},r.default.Camera.prototype.copy=function(){var e=new r.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},r.default.Camera.prototype._getLocalAxes=function(){var e,t=this.eyeX-this.centerX,n=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,a=(0!==(a=Math.sqrt(t*t+n*n+r*r))&&(t/=a,n/=a,r/=a),this.upX),o=(u=this.upY)*r-(c=this.upZ)*n,i=-a*r+c*t,s=a*n-u*t,u=(a=n*s-r*i,-t*s+r*o),c=t*i-n*o;return 0!==(e=(0!==(e=Math.sqrt(o*o+i*i+s*s))&&(o/=e,i/=e,s/=e),Math.sqrt(a*a+u*u+c*c)))&&(a/=e,u/=e,c/=e),{x:[o,i,s],y:[a,u,c],z:[t,n,r]}},r.default.Camera.prototype._orbit=function(e,t,n){var r=this.eyeX-this.centerX,a=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,i=Math.sqrt(r*r+a*a+o*o);r=Math.atan2(r,o),o=Math.acos(Math.max(-1,Math.min(1,a/i))),r+=(a=0<this.upY?1:-1)*e,((o+=a*t)<=0||o>=Math.PI)&&(a*=-1),(i+=n)<0&&(i=.1),e=Math.sin(o)*i*Math.sin(r),t=Math.cos(o)*i,n=Math.sin(o)*i*Math.cos(r);this.camera(e+this.centerX,t+this.centerY,n+this.centerZ,this.centerX,this.centerY,this.centerZ,0,a,0)},r.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},r.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])},e=r.default.Camera,n.default=e},{"../core/main":267}],316:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Geometry=function(e,t,n){return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},n instanceof Function&&n.call(this),this},r.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},r.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var e,t,n,r=this.detailX+1,a=0;a<this.detailY;a++)for(var o=0;o<this.detailX;o++)t=(a+1)*r+o+1,this.faces.push([a*r+o,e=a*r+o+1,n=(a+1)*r+o]),this.faces.push([n,e,t]);return this},r.default.Geometry.prototype._getFaceNormal=function(e){e=this.faces[e];var t=this.vertices[e[0]],n=this.vertices[e[1]],a=(e=this.vertices[e[2]],n=r.default.Vector.sub(n,t),e=r.default.Vector.sub(e,t),t=r.default.Vector.cross(n,e),r.default.Vector.mag(t));return 0===(n=a/(r.default.Vector.mag(n)*r.default.Vector.mag(e)))||isNaN(n)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),t):(1<n&&(n=1),t.mult(Math.asin(n)/a))},r.default.Geometry.prototype.computeNormals=function(){for(var e=this.vertexNormals,t=this.vertices,n=this.faces,a=e.length=0;a<t.length;++a)e.push(new r.default.Vector);for(var o=0;o<n.length;++o)for(var i=n[o],s=this._getFaceNormal(o),u=0;u<3;++u)e[i[u]].add(s);for(a=0;a<t.length;++a)e[a].normalize();return this},r.default.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=r.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=r.default.Vector.div(n,2);this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this},r.default.Geometry.prototype.averagePoleNormals=function(){for(var e=new r.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=r.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new r.default.Vector(0,0,0);for(var a=this.vertices.length-1;a>this.vertices.length-1-this.detailX;a--)e.add(this.vertexNormals[a]);e=r.default.Vector.div(e,this.detailX);for(var o=this.vertices.length-1;o>this.vertices.length-1-this.detailX;o--)this.vertexNormals[o]=e;return this},r.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var n=0;n<this.faces.length;n++)this.edges.push([this.faces[n][0],this.faces[n][1]]),this.edges.push([this.faces[n][1],this.faces[n][2]]),this.edges.push([this.faces[n][2],this.faces[n][0]]);return this},r.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var e,t=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],n=!1,r=0;r<this.edges.length;r++){var a=this.edges[r-1],o=this.edges[r],i=this.vertices[o[0]],s=this.vertices[o[1]],u=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*o[0],4*(o[0]+1)):[0,0,0,0],c=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*o[1],4*(o[1]+1)):[0,0,0,0],l=s.copy().sub(i).normalize(),d=0<l.magSq();d&&this._addSegment(i,s,u,c,l),0<r&&a[1]===o[0]?(e&&d&&l.dot(e)<1-1e-8&&this._addJoin(i,e,l,u),!d||n||t||(this._addCap(i,l.copy().mult(-1),u),n=!0)):(n=!1,d&&(!t||0<r)&&(this._addCap(i,l.copy().mult(-1),u),n=!0),e&&(!t||r<this.edges.length-1)&&(this._addCap(this.vertices[a[1]],e,u),e=void 0)),r===this.edges.length-1&&(t?this._addJoin(s,l,this.vertices[this.edges[0][1]].copy().sub(s).normalize(),c):this._addCap(s,l,c)),d&&(e=l)}return this},r.default.Geometry.prototype._addSegment=function(e,t,n,r,a){e=e.array(),t=t.array();var o=a.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var i=0,s=[this.lineTangentsIn,this.lineTangentsOut];i<s.length;i++)s[i].push(o,o,o,o,o,o);return this.lineVertices.push(e,e,t,t,e,t),this.lineVertexColors.push(n,n,r,r,n,r),this},r.default.Geometry.prototype._addCap=function(e,t,n){for(var r=e.array(),a=t.array(),o=[0,0,0],i=0;i<6;i++)this.lineVertices.push(r),this.lineTangentsIn.push(a),this.lineTangentsOut.push(o),this.lineVertexColors.push(n);return this.lineSides.push(-1,-2,2,2,1,-1),this},r.default.Geometry.prototype._addJoin=function(e,t,n,r){for(var a=e.array(),o=t.array(),i=n.array(),s=0;s<12;s++)this.lineVertices.push(a),this.lineTangentsIn.push(o),this.lineTangentsOut.push(i),this.lineVertexColors.push(r);for(var u=0,c=[-1,1];u<c.length;u++){var l=c[u];this.lineSides.push(l,2*l,3*l,l,3*l,0)}return this},r.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var a=r.default.Vector.lerp(e,t,.5),o=r.default.Vector.sub(e,t),i=200/Math.max(Math.max(o.x,o.y),o.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(a),this.vertices[s].mult(i)}return this},e=r.default.Geometry,n.default=e},{"../core/main":267,"core-js/modules/es.array.slice":162,"core-js/modules/es.string.sub":192}],317:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},a=Array,o=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(a=Float32Array,o=function(e){return e instanceof Array||e instanceof Float32Array}),r.default.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.length&&e[e.length-1]instanceof r.default&&(this.p5=e[e.length-1]),"mat3"===e[0]?this.mat3=Array.isArray(e[1])?e[1]:new a([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(e[0])?e[0]:new a([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},r.default.Matrix.prototype.set=function(e){return e instanceof r.default.Matrix?this.mat4=e.mat4:o(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},r.default.Matrix.prototype.get=function(){return new r.default.Matrix(this.mat4,this.p5)},r.default.Matrix.prototype.copy=function(){var e=new r.default.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},r.default.Matrix.identity=function(e){return new r.default.Matrix(e)},r.default.Matrix.prototype.transpose=function(e){var t,n,a,i,s,u;return e instanceof r.default.Matrix?(t=e.mat4[1],n=e.mat4[2],a=e.mat4[3],i=e.mat4[6],s=e.mat4[7],u=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=a,this.mat4[13]=s,this.mat4[14]=u,this.mat4[15]=e.mat4[15]):o(e)&&(t=e[1],n=e[2],a=e[3],i=e[6],s=e[7],u=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=a,this.mat4[13]=s,this.mat4[14]=u,this.mat4[15]=e[15]),this},r.default.Matrix.prototype.invert=function(e){e instanceof r.default.Matrix?(t=e.mat4[0],n=e.mat4[1],a=e.mat4[2],i=e.mat4[3],s=e.mat4[4],u=e.mat4[5],c=e.mat4[6],l=e.mat4[7],d=e.mat4[8],f=e.mat4[9],p=e.mat4[10],h=e.mat4[11],m=e.mat4[12],v=e.mat4[13],y=e.mat4[14],g=e.mat4[15]):o(e)&&(t=e[0],n=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=e[9],p=e[10],h=e[11],m=e[12],v=e[13],y=e[14],g=e[15]);var t,n,a,i,s,u,c,l,d,f,p,h,m,v,y,g,b=t*c-a*s,x=t*l-i*s,w=n*c-a*u,k=n*l-i*u,S=a*l-i*c,_=d*v-f*m,T=d*y-p*m,E=d*g-h*m,C=f*y-p*v,I=f*g-h*v,N=p*g-h*y,j=(e=t*u-n*s)*N-b*I+x*C+w*E-k*T+S*_;return j?(this.mat4[0]=(u*N-c*I+l*C)*(j=1/j),this.mat4[1]=(a*I-n*N-i*C)*j,this.mat4[2]=(v*S-y*k+g*w)*j,this.mat4[3]=(p*k-f*S-h*w)*j,this.mat4[4]=(c*E-s*N-l*T)*j,this.mat4[5]=(t*N-a*E+i*T)*j,this.mat4[6]=(y*x-m*S-g*b)*j,this.mat4[7]=(d*S-p*x+h*b)*j,this.mat4[8]=(s*I-u*E+l*_)*j,this.mat4[9]=(n*E-t*I-i*_)*j,this.mat4[10]=(m*k-v*x+g*e)*j,this.mat4[11]=(f*x-d*k-h*e)*j,this.mat4[12]=(u*T-s*C-c*_)*j,this.mat4[13]=(t*C-n*T+a*_)*j,this.mat4[14]=(v*b-m*w-y*e)*j,this.mat4[15]=(d*w-f*b+p*e)*j,this):null},r.default.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],a=this.mat3[4],o=this.mat3[5],i=this.mat3[6],s=this.mat3[7],u=this.mat3[8],c=u*a-o*s,l=-u*r+o*i,d=s*r-a*i,f=e*c+t*l+n*d;return f?(this.mat3[0]=c*(f=1/f),this.mat3[1]=(-u*t+n*s)*f,this.mat3[2]=(o*t-n*a)*f,this.mat3[3]=l*f,this.mat3[4]=(u*e-n*i)*f,this.mat3[5]=(-o*e+n*r)*f,this.mat3[6]=d*f,this.mat3[7]=(-s*e+t*i)*f,this.mat3[8]=(a*e-t*r)*f,this):null},r.default.Matrix.prototype.transpose3x3=function(e){var t=e[1],n=e[2],r=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this},r.default.Matrix.prototype.inverseTranspose=function(e){if(void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]),e=this.invert3x3())e.transpose3x3(this.mat3);else for(var t=0;t<9;t++)this.mat3[t]=0;return this},r.default.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],a=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],i=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],u=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],l=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*l+n*c+r*u-a*s+o*i},r.default.Matrix.prototype.mult=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}e=this.mat4[0];var n=this.mat4[1],a=this.mat4[2],i=this.mat4[3];return this.mat4[0]=e*t[0]+n*t[4]+a*t[8]+i*t[12],this.mat4[1]=e*t[1]+n*t[5]+a*t[9]+i*t[13],this.mat4[2]=e*t[2]+n*t[6]+a*t[10]+i*t[14],this.mat4[3]=e*t[3]+n*t[7]+a*t[11]+i*t[15],e=this.mat4[4],n=this.mat4[5],a=this.mat4[6],i=this.mat4[7],this.mat4[4]=e*t[0]+n*t[4]+a*t[8]+i*t[12],this.mat4[5]=e*t[1]+n*t[5]+a*t[9]+i*t[13],this.mat4[6]=e*t[2]+n*t[6]+a*t[10]+i*t[14],this.mat4[7]=e*t[3]+n*t[7]+a*t[11]+i*t[15],e=this.mat4[8],n=this.mat4[9],a=this.mat4[10],i=this.mat4[11],this.mat4[8]=e*t[0]+n*t[4]+a*t[8]+i*t[12],this.mat4[9]=e*t[1]+n*t[5]+a*t[9]+i*t[13],this.mat4[10]=e*t[2]+n*t[6]+a*t[10]+i*t[14],this.mat4[11]=e*t[3]+n*t[7]+a*t[11]+i*t[15],e=this.mat4[12],n=this.mat4[13],a=this.mat4[14],i=this.mat4[15],this.mat4[12]=e*t[0]+n*t[4]+a*t[8]+i*t[12],this.mat4[13]=e*t[1]+n*t[5]+a*t[9]+i*t[13],this.mat4[14]=e*t[2]+n*t[6]+a*t[10]+i*t[14],this.mat4[15]=e*t[3]+n*t[7]+a*t[11]+i*t[15],this},r.default.Matrix.prototype.apply=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=(e=this.mat4)[0],a=e[4],i=e[8],s=e[12];e[0]=t[0]*n+t[1]*a+t[2]*i+t[3]*s,e[4]=t[4]*n+t[5]*a+t[6]*i+t[7]*s,e[8]=t[8]*n+t[9]*a+t[10]*i+t[11]*s,e[12]=t[12]*n+t[13]*a+t[14]*i+t[15]*s,n=e[1],a=e[5],i=e[9],s=e[13],e[1]=t[0]*n+t[1]*a+t[2]*i+t[3]*s,e[5]=t[4]*n+t[5]*a+t[6]*i+t[7]*s,e[9]=t[8]*n+t[9]*a+t[10]*i+t[11]*s,e[13]=t[12]*n+t[13]*a+t[14]*i+t[15]*s,n=e[2],a=e[6],i=e[10],s=e[14],e[2]=t[0]*n+t[1]*a+t[2]*i+t[3]*s,e[6]=t[4]*n+t[5]*a+t[6]*i+t[7]*s,e[10]=t[8]*n+t[9]*a+t[10]*i+t[11]*s,e[14]=t[12]*n+t[13]*a+t[14]*i+t[15]*s,n=e[3],a=e[7],i=e[11],s=e[15];return e[3]=t[0]*n+t[1]*a+t[2]*i+t[3]*s,e[7]=t[4]*n+t[5]*a+t[6]*i+t[7]*s,e[11]=t[8]*n+t[9]*a+t[10]*i+t[11]*s,e[15]=t[12]*n+t[13]*a+t[14]*i+t[15]*s,this},r.default.Matrix.prototype.scale=function(e,t,n){return e instanceof r.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this},r.default.Matrix.prototype.rotate=function(e,t,n,a){t instanceof r.default.Vector?(n=t.y,a=t.z,t=t.x):t instanceof Array&&(n=t[1],a=t[2],t=t[0]);var o=(t*=1/(o=Math.sqrt(t*t+n*n+a*a)),n*=1/o,a*=1/o,this.mat4[0]),i=this.mat4[1],s=this.mat4[2],u=this.mat4[3],c=this.mat4[4],l=this.mat4[5],d=this.mat4[6],f=this.mat4[7],p=this.mat4[8],h=this.mat4[9],m=this.mat4[10],v=this.mat4[11],y=Math.sin(e),g=1-(e=Math.cos(e)),b=t*t*g+e,x=n*t*g+a*y,w=a*t*g-n*y,k=t*n*g-a*y,S=n*n*g+e,_=a*n*g+t*y,T=t*a*g+n*y;n=n*a*g-t*y,t=a*a*g+e;return this.mat4[0]=o*b+c*x+p*w,this.mat4[1]=i*b+l*x+h*w,this.mat4[2]=s*b+d*x+m*w,this.mat4[3]=u*b+f*x+v*w,this.mat4[4]=o*k+c*S+p*_,this.mat4[5]=i*k+l*S+h*_,this.mat4[6]=s*k+d*S+m*_,this.mat4[7]=u*k+f*S+v*_,this.mat4[8]=o*T+c*n+p*t,this.mat4[9]=i*T+l*n+h*t,this.mat4[10]=s*T+d*n+m*t,this.mat4[11]=u*T+f*n+v*t,this},r.default.Matrix.prototype.translate=function(e){var t=e[0],n=e[1];e=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*e,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*e,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*e,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*e},r.default.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},r.default.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},r.default.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},r.default.Matrix.prototype.perspective=function(e,t,n,r){e=1/Math.tan(e/2);var a=1/(n-r);return this.mat4[0]=e/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*a,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*a,this.mat4[15]=0,this},r.default.Matrix.prototype.ortho=function(e,t,n,r,a,o){var i=1/(e-t),s=1/(n-r),u=1/(a-o);return this.mat4[0]=-2*i,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*u,this.mat4[11]=0,this.mat4[12]=(e+t)*i,this.mat4[13]=(r+n)*s,this.mat4[14]=(o+a)*u,this.mat4[15]=1,this},e=r.default.Matrix;n.default=e},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.RenderBuffer=function(e,t,n,r,a,o){this.size=e,this.src=t,this.dst=n,this.attr=r,this._renderer=a,this.map=o},e.default.RenderBuffer.prototype._prepareBuffer=function(e,t){var n,r,a,o=t.attributes,i=this._renderer.GL,s=e.model||e;(o=o[this.attr])&&(n=e[this.dst],0<(r=s[this.src]).length?((a=!n)&&(e[this.dst]=n=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,n),!a&&!1===s.dirtyFlags[this.src]||(a=(e=this.map)?e(r):r,this._renderer._bindBuffer(n,i.ARRAY_BUFFER,a),s.dirtyFlags[this.src]=!1),t.enableAttrib(o,this.size)):-1!==(e=o.location)&&this._renderer.registerEnabled[e]&&(i.disableVertexAttribArray(e),this._renderer.registerEnabled[e]=!1))},e=e.default.RenderBuffer,n.default=e},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),o.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:i.TESS,this.immediateMode.geometry.reset(),this};var c={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},l=(o.default.RendererGL.prototype.vertex=function(e,t){if(this.immediateMode.shapeMode===i.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var n in c){var r=c[n];(n=this.immediateMode.geometry[n]).push.apply(n,u(n.slice(n.length-3*r,n.length-2*r)).concat(u(n.slice(n.length-r,n.length))))}var a,s,l=a=s=0,d=(3===arguments.length?l=arguments[2]:4===arguments.length?(a=arguments[2],s=arguments[3]):5===arguments.length&&(l=arguments[2],a=arguments[3],s=arguments[4]),new o.default.Vector(e,t,l));this.immediateMode.geometry.vertices.push(d),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),d=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(d[0],d[1],d[2],d[3]),d=this.curStrokeColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexStrokeColors.push(d[0],d[1],d[2],d[3]),this.textureMode===i.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(a/=this._tex.width,s/=this._tex.height):!this.isProcessingVertices&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(a,s),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=l,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=l,this},o.default.RendererGL.prototype.normal=function(e,t,n){return e instanceof o.default.Vector?this._currentNormal=e:this._currentNormal=new o.default.Vector(e,t,n),this},o.default.RendererGL.prototype.endShape=function(e,t,n,r,a,o){return this.immediateMode.shapeMode===i.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},o.default.RendererGL.prototype._processVertices=function(e){var t;0!==this.immediateMode.geometry.vertices.length&&(t=this._doStroke,e=e===i.CLOSE,t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,e),this.immediateMode.geometry._edgesToVertices()),t=this.immediateMode.shapeMode===i.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||t)&&this.immediateMode.shapeMode!==i.LINES&&this._tesselateShape())},o.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],a=0;switch(e){case i.TRIANGLE_STRIP:for(a=0;a<t.length-2;a++)r.push([a,a+1]),r.push([a,a+2]);r.push([a,a+1]);break;case i.TRIANGLE_FAN:for(a=1;a<t.length-1;a++)r.push([0,a]),r.push([a,a+1]);r.push([0,t.length-1]);break;case i.TRIANGLES:for(a=0;a<t.length-2;a+=3)r.push([a,a+1]),r.push([a+1,a+2]),r.push([a+2,a]);break;case i.LINES:for(a=0;a<t.length-1;a+=2)r.push([a,a+1]);break;case i.QUADS:for(a=0;a<t.length-5;a+=6)r.push([a,a+1]),r.push([a+1,a+2]),r.push([a+3,a+5]),r.push([a+4,a+5]);break;case i.QUAD_STRIP:for(a=0;a<t.length-2;a+=2)r.push([a,a+1]),r.push([a,a+2]),r.push([a+1,a+3]);r.push([a,a+1]);break;default:for(a=0;a<t.length-1;a++)r.push([a,a+1])}return n&&r.push([t.length-1,0]),r},o.default.RendererGL.prototype._tesselateShape=function(){for(var e=this,t=(this.immediateMode.shapeMode=i.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map((function(t,n){return[t.x,t.y,t.z,e.immediateMode.geometry.uvs[2*n],e.immediateMode.geometry.uvs[2*n+1],e.immediateMode.geometry.vertexColors[4*n],e.immediateMode.geometry.vertexColors[4*n+1],e.immediateMode.geometry.vertexColors[4*n+2],e.immediateMode.geometry.vertexColors[4*n+3],e.immediateMode.geometry.vertexNormals[n].x,e.immediateMode.geometry.vertexNormals[n].y,e.immediateMode.geometry.vertexNormals[n].z]})))]),n=this._triangulate(t),r=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),a=0,s=n.length;a<s;a+=o.default.RendererGL.prototype.tessyVertexSize)r.push.apply(r,u(n.slice(a+5,a+9))),this.normal.apply(this,u(n.slice(a+9,a+12))),this.vertex.apply(this,u(n.slice(a,a+5)));this.immediateMode.geometry.vertexColors=r},o.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),n=(this._setFillUniforms(t),!0),r=!1,a=void 0;try{for(var o,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)o.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}this.immediateMode.shapeMode!==i.LINE_STRIP&&this.immediateMode.shapeMode!==i.LINES||(this.immediateMode.shapeMode=i.TRIANGLE_FAN),this.immediateMode.shapeMode===i.QUADS?this.immediateMode.shapeMode=i.TRIANGLES:this.immediateMode.shapeMode===i.QUAD_STRIP&&(this.immediateMode.shapeMode=i.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},o.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=e.isEnabled(e.CULL_FACE),n=(e.disable(e.CULL_FACE),this._getImmediateStrokeShader()),r=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(n),!0),a=!1,o=void 0;try{for(var i,s=this.immediateMode.buffers.stroke[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)i.value._prepareBuffer(this.immediateMode.geometry,n)}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t&&e.enable(e.CULL_FACE),n.unbindShader()},o.default.RendererGL);n.default=l},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(o=e("../core/main"))&&o.__esModule?o:{default:o};e("./p5.RendererGL"),e("./p5.RenderBuffer");var a=0,o=(r.default.RendererGL.prototype._initBufferDefaults=function(e){var t;return this._freeBuffers(e),1e3<++a&&(t=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[t],a--),this.retainedMode.geometry[e]={}},r.default.RendererGL.prototype._freeBuffers=function(e){var t,n=this.retainedMode.geometry[e];function r(e){var r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;n[u.dst]&&(t.deleteBuffer(n[u.dst]),n[u.dst]=null)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}n&&(delete this.retainedMode.geometry[e],a--,t=this.GL,n.indexBuffer&&t.deleteBuffer(n.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill))},r.default.RendererGL.prototype.createBuffers=function(e,t){var n,a,o,i=this.GL,s=((e=this._initBufferDefaults(e)).model=t,e.indexBuffer);return t.faces.length?(s=s||(e.indexBuffer=i.createBuffer()),o=(a=(n=r.default.RendererGL.prototype._flatten(t.faces)).some((function(e){return 65535<e})))?Uint32Array:Uint16Array,this._bindBuffer(s,i.ELEMENT_ARRAY_BUFFER,n,o),e.indexBufferType=a?i.UNSIGNED_INT:i.UNSIGNED_SHORT,e.vertexCount=3*t.faces.length):(s&&(i.deleteBuffer(s),e.indexBuffer=null),e.vertexCount=t.vertices?t.vertices.length:0),e.lineVertexCount=t.lineVertices?t.lineVertices.length:0,e},r.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(this._doStroke&&0<n.lineVertexCount){var r=t.isEnabled(t.CULL_FACE),a=(t.disable(t.CULL_FACE),this._getRetainedStrokeShader()),o=(this._useLineColor=0<n.model.vertexStrokeColors.length,this._setStrokeUniforms(a),!0),i=!1,s=void 0;try{for(var u,c=this.retainedMode.buffers.stroke[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)u.value._prepareBuffer(n,a)}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),r&&t.enable(t.CULL_FACE),a.unbindShader()}if(this._doFill){this._useVertexColor=0<n.model.vertexColors.length;var l=this._getRetainedFillShader(),d=(this._setFillUniforms(l),!0);i=!1,s=void 0;try{for(var f,p=this.retainedMode.buffers.fill[Symbol.iterator]();!(d=(f=p.next()).done);d=!0)f.value._prepareBuffer(n,l)}catch(e){i=!0,s=e}finally{try{d||null==p.return||p.return()}finally{if(i)throw s}}n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),l.unbindShader()}return this},r.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var a=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uMVMatrix=a}},r.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},r.default.RendererGL.prototype._drawElements=function(e,t){t=this.retainedMode.geometry[t];var n=this.GL;if(t.indexBuffer){if(t.indexBufferType===n.UNSIGNED_INT&&!n.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");n.drawElements(n.TRIANGLES,t.vertexCount,t.indexBufferType,0)}else n.drawArrays(e||n.TRIANGLES,0,t.vertexCount)},r.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),n.drawArrays(n.Points,0,e.length),r.unbindShader()},r.default.RendererGL);n.default=o},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=c(e("libtess"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e,t){m+="#define STROKE_CAP_".concat(e," ").concat(t,"\n"),p[i[e]]=t}function f(e,t){m+="#define STROKE_JOIN_".concat(e," ").concat(t,"\n"),h[i[e]]=t}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var p={},h={},m="",v={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",lightVert:(e=(d("ROUND",0),d("PROJECT",1),d("SQUARE",2),f("ROUND",0),f("MITER",1),f("BEVEL",2),"precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n"))+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;\n    gl_FragColor = vec4(gl_FragColor.rgb * vDiffuseColor + vSpecularColor, 1.) * baseColor.a;\n  }\n}\n",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n",phongFrag:e+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\nvarying vec4 vColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec4 baseColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : vColor;\n  gl_FragColor = vec4(diffuse * baseColor.rgb + \n                    vAmbientColor * uAmbientMatColor.rgb + \n                    specular * uSpecularMatColor.rgb + \n                    uEmissiveMatColor.rgb, 1.) * baseColor.a;\n}\n",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec2 pixelScale = vec2(\n    1. / uModelViewMatrix[0][0],\n    1. / uModelViewMatrix[1][1]\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  gl_FragColor *= saturate(max(antialias, cover));\n}\n",lineVert:m+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump float;\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nattribute vec4 aPosition;\nattribute vec3 aTangentIn;\nattribute vec3 aTangentOut;\nattribute float aSide;\nattribute vec4 aVertexColor;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));\n  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posqIn.xyz = posqIn.xyz * scale;\n  posqOut.xyz = posqOut.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = p.xy;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,\n          tangentIn,\n          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * uStrokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));\n    } else {\n      vMaxDist = uStrokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      uStrokeWeight * 0.5 * curPerspScale;\n    vMaxDist = uStrokeWeight / 2.;\n  }\n  vPosition = vCenter + offset / curPerspScale;\n\n  gl_Position.xy = p.xy + offset.xy;\n  gl_Position.zw = p.zw;\n  \n  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);\n}\n",lineFrag:m+"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\nuniform float uStrokeWeight;\n\nvarying vec4 vColor;\nvarying vec2 vTangent;\nvarying vec2 vCenter;\nvarying vec2 vPosition;\nvarying float vMaxDist;\nvarying float vCap;\nvarying float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nvoid main() {\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      dot(vPosition - vCenter, vTangent) > 0.\n    ) {\n      discard;\n    }\n    // Use full area for PROJECT\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-vTangent.y, vTangent.x);\n      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {\n        discard;\n      }\n    }\n    // Use full area for MITER\n  }\n  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(mask > 0.98){\n    discard;\n  }\n\n  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n}\n"};o.default.RendererGL=function(e,t,n,r){return o.default.Renderer.call(this,e,t,n),this._setAttributeDefaults(t),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=i.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[1,1,1,1],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=i.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._useLineColor=!1,this._useVertexColor=!1,this.registerEnabled=[],this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new o.default.Matrix,this.uPMatrix=new o.default.Matrix,this.uNMatrix=new o.default.Matrix("mat3"),this._currentNormal=new o.default.Vector(0,0,1),this._curCamera=new o.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new o.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",this,this._flatten),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",this,this._flatten),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",this,this._flatten),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",this)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.curStrokeCap=i.ROUND,this.curStrokeJoin=i.ROUND,this.textures=[],this.textureMode=i.IMAGE,this.textureWrapX=i.CLAMP,this.textureWrapY=i.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this.isProcessingVertices=!1,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},o.default.RendererGL.prototype=Object.create(o.default.Renderer.prototype),o.default.RendererGL.prototype._setAttributeDefaults=function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)},o.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},o.default.RendererGL.prototype._resetContext=function(e,t){var n,r=this.width,a=this.height,i=this.canvas.id,s=this._pInst instanceof o.default.Graphics;s?((n=this._pInst).canvas.parentNode.removeChild(n.canvas),n.canvas=document.createElement("canvas"),(n._pInst._userNode||document.body).appendChild(n.canvas),o.default.Element.call(n,n.canvas,n._pInst),n.width=r,n.height=a):((n=this.canvas)&&n.parentNode.removeChild(n),(n=document.createElement("canvas")).id=i,(this._pInst._userNode||document.body).appendChild(n),this._pInst.canvas=n,this.canvas=n),i=new o.default.RendererGL(this._pInst.canvas,this._pInst,!s);this._pInst._setProperty("_renderer",i),i.resize(r,a),i._applyDefaults(),s||this._pInst._elements.push(i),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)},o.default.prototype.setAttributes=function(e,t){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},o.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.background=function(){var e=(r=(r=this._pInst).color.apply(r,arguments)).levels[0]/255,t=r.levels[1]/255,n=r.levels[2]/255,r=r.levels[3]/255;this.clear(e,t,n,r)},o.default.RendererGL.prototype.fill=function(e,t,n,r){var a=o.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null},o.default.RendererGL.prototype.stroke=function(e,t,n,r){var a=o.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=a._array},o.default.RendererGL.prototype.strokeCap=function(e){this.curStrokeCap=e},o.default.RendererGL.prototype.strokeJoin=function(e){this.curStrokeJoin=e},o.default.RendererGL.prototype.filter=function(e){console.error("filter() does not work in WEBGL mode")},o.default.RendererGL.prototype.blendMode=function(e){e===i.DARKEST||e===i.LIGHTEST||e===i.ADD||e===i.BLEND||e===i.SUBTRACT||e===i.SCREEN||e===i.EXCLUSION||e===i.REPLACE||e===i.MULTIPLY||e===i.REMOVE?this.curBlendMode=e:e!==i.BURN&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},o.default.RendererGL.prototype.erase=function(e,t){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])},o.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},o.default.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)},o.default.RendererGL.prototype._getPixel=function(e,t){var n=new Uint8Array(4);return this.drawingContext.readPixels(e,t,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,n),[n[0],n[1],n[2],n[3]]},o.default.RendererGL.prototype.loadPixels=function(){var e,t=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(t=t.pixels,e=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,t instanceof Uint8Array&&t.length===e||(t=new Uint8Array(e),this._pixelsState._setProperty("pixels",t)),e=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*e,this.height*e,this.GL.RGBA,this.GL.UNSIGNED_BYTE,t))},o.default.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.retainedMode.geometry[e]},o.default.RendererGL.prototype.resize=function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),void 0!==(e=this._pixelsState).pixels&&e._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},o.default.RendererGL.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e*r,t*r,n*r,r),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.applyMatrix=function(e,t,n,r,a,i){16===arguments.length?o.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,a,i,0,1])},o.default.RendererGL.prototype.translate=function(e,t,n){return e instanceof o.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,n]),this},o.default.RendererGL.prototype.scale=function(e,t,n){return this.uMVMatrix.scale(e,t,n),this},o.default.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(o.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},o.default.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},o.default.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},o.default.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},o.default.RendererGL.prototype.push=function(){var e=o.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t.curAmbientColor=this.curAmbientColor,t.curSpecularColor=this.curSpecularColor,t.curEmissiveColor=this.curEmissiveColor,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,t._currentNormal=this._currentNormal,t.curBlendMode=this.curBlendMode,e},o.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this},o.default.RendererGL.prototype._getImmediateStrokeShader=function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()},o.default.RendererGL.prototype._getRetainedStrokeShader=o.default.RendererGL.prototype._getImmediateStrokeShader,o.default.RendererGL.prototype._getImmediateFillShader=function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e},o.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e},o.default.RendererGL.prototype._getImmediatePointShader=function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()},o.default.RendererGL.prototype._getRetainedLineShader=o.default.RendererGL.prototype._getImmediateLineShader,o.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new o.default.Shader(this,v.phongVert,v.phongFrag):this._defaultLightShader=new o.default.Shader(this,v.lightVert,v.lightTextureFrag)),this._defaultLightShader},o.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.default.Shader(this,v.immediateVert,v.vertexColorFrag)),this._defaultImmediateModeShader},o.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.default.Shader(this,v.normalVert,v.normalFrag)),this._defaultNormalShader},o.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new o.default.Shader(this,v.normalVert,v.basicFrag)),this._defaultColorShader},o.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new o.default.Shader(this,v.pointVert,v.pointFrag)),this._defaultPointShader},o.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new o.default.Shader(this,v.lineVert,v.lineFrag)),this._defaultLineShader},o.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.default.Shader(this,v.fontVert,v.fontFrag)),this._defaultFontShader},o.default.RendererGL.prototype._getEmptyTexture=function(){var e;return this._emptyTexture||((e=new o.default.Image(1,1)).set(0,0,255),this._emptyTexture=new o.default.Texture(this,e)),this._emptyTexture},o.default.RendererGL.prototype.getTexture=function(e){var t=this.textures,n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;if(u.src===e)return u}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return r=new o.default.Texture(this,e),t.push(r),r},o.default.RendererGL.prototype._setStrokeUniforms=function(e){e.bindShader(),e.setUniform("uUseLineColor",this._useLineColor),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight),e.setUniform("uStrokeCap",p[this.curStrokeCap]),e.setUniform("uStrokeJoin",h[this.curStrokeJoin])},o.default.RendererGL.prototype._setFillUniforms=function(e){e.bindShader(),e.setUniform("uUseVertexColor",this._useVertexColor),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uAmbientMatColor",this.curAmbientColor),e.setUniform("uSpecularMatColor",this.curSpecularColor),e.setUniform("uEmissiveMatColor",this.curEmissiveColor),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),t=this.directionalLightDiffuseColors.length/3,e.setUniform("uDirectionalLightCount",t),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),t=this.ambientLightColors.length/3,e.setUniform("uAmbientLightCount",t),e.setUniform("uAmbientColor",this.ambientLightColors),t=this.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",t),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()},o.default.RendererGL.prototype._setPointUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},o.default.RendererGL.prototype._bindBuffer=function(e,t,n,r,a){t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n&&(e=new(r||Float32Array)(n),this.GL.bufferData(t,e,a||this.GL.STATIC_DRAW))},o.default.RendererGL.prototype._arraysEqual=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},o.default.RendererGL.prototype._isTypedArray=function(e){return Float32Array,Float64Array,Int16Array,Uint16Array,e instanceof Uint32Array},o.default.RendererGL.prototype._flatten=function(e){if(0===e.length)return[];var t;if(2e4<e.length){for(var n=Object.prototype.toString,r=[],a=e.slice(),o=a.pop();"[object Array]"===n.call(o)?a.push.apply(a,l(o)):r.push(o),a.length&&void 0!==(o=a.pop()););return r.reverse(),r}return(t=[]).concat.apply(t,l(e))},o.default.RendererGL.prototype._vToNArray=function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;t.push(s.x,s.y,s.z)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t},o.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},o.default.RendererGL.prototype.tessyVertexSize=12,o.default.RendererGL.prototype._initTessy=function(){var e=new s.default.GluTesselator;return e.gluTessCallback(s.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){for(var n=0;n<e.length;n++)t[t.length]=e[n]})),e.gluTessCallback(s.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==s.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(s.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(s.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){for(var r=new Array(o.default.RendererGL.prototype.tessyVertexSize).fill(0),a=0;a<n.length;a++)for(var i=0;i<r.length;i++)0!==n[a]&&t[a]&&(r[i]+=t[a][i]*n[a]);return r})),e.gluTessCallback(s.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e},o.default.RendererGL.prototype._triangulate=function(e){var t=e[0]?e[0][2]:void 0,n=!0,r=!0,a=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)for(var c=s.value,l=0;l<c.length;l+=o.default.RendererGL.prototype.tessyVertexSize)if(c[l+2]!==t){n=!1;break}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}n?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),a=[],this._tessy.gluTessBeginPolygon(a);for(var d=0;d<e.length;d++){this._tessy.gluTessBeginContour();for(var f=e[d],p=0;p<f.length;p+=o.default.RendererGL.prototype.tessyVertexSize){var h=f.slice(p,p+o.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(h,h)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),a},o.default.RendererGL.prototype._bezierCoefficients=function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]},o.default.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},o.default.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]},e=o.default.RendererGL;n.default=e},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Shader=function(e,t,n){this._renderer=e,this._vertSrc=t,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},r.default.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},r.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),a=r.name,o=e.getAttribLocation(this._glProgram,a),i={};i.name=a,i.location=o,i.index=n,i.type=r.type,i.size=r.size,this.attributes[a]=i}this._loadedAttributes=!0}},r.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var a=e.getActiveUniform(this._glProgram,r),o={},i=(o.location=e.getUniformLocation(this._glProgram,a.name),o.size=a.size,a.name);1<a.size&&(i=i.substring(0,i.indexOf("[0]"))),o.name=i,o.type=a.type,o._cachedData=void 0,o.type===e.SAMPLER_2D&&(o.samplerIndex=n,n++,this.samplers.push(o)),o.isArray=1<a.size||o.type===e.FLOAT_MAT3||o.type===e.FLOAT_MAT4||o.type===e.FLOAT_VEC2||o.type===e.FLOAT_VEC3||o.type===e.FLOAT_VEC4||o.type===e.INT_VEC2||o.type===e.INT_VEC4||o.type===e.INT_VEC3,this.uniforms[i]=o}this._loadedUniforms=!0}},r.default.Shader.prototype.compile=function(){},r.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},r.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},r.default.Shader.prototype.bindTextures=function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var a,o=this.samplers[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value,s=i.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+i.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(i.location,i.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},r.default.Shader.prototype.updateTextures=function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.samplers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value.texture;o&&o.update()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},r.default.Shader.prototype.unbindTextures=function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.samplers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.setUniform(o.name,this._renderer._getEmptyTexture())}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},r.default.Shader.prototype._setMatrixUniforms=function(){var e=this._renderer._curCamera.cameraMatrix,t=this._renderer.uPMatrix,n=this._renderer.uMVMatrix,r=n.copy();r.mult(t),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",e.mat4),this.setUniform("uProjectionMatrix",t.mat4),this.setUniform("uModelViewMatrix",n.mat4),this.setUniform("uModelViewProjectionMatrix",r.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},r.default.Shader.prototype.useProgram=function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this},r.default.Shader.prototype.setUniform=function(e,t){var n=this.uniforms[e];if(n){var a=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;Array.isArray(t)?n._cachedData=t.slice(0):n._cachedData=t}var o=n.location;switch(this.useProgram(),n.type){case a.BOOL:!0===t?a.uniform1i(o,1):a.uniform1i(o,0);break;case a.INT:1<n.size?t.length&&a.uniform1iv(o,t):a.uniform1i(o,t);break;case a.FLOAT:1<n.size?t.length&&a.uniform1fv(o,t):a.uniform1f(o,t);break;case a.FLOAT_MAT3:a.uniformMatrix3fv(o,!1,t);break;case a.FLOAT_MAT4:a.uniformMatrix4fv(o,!1,t);break;case a.FLOAT_VEC2:1<n.size?t.length&&a.uniform2fv(o,t):a.uniform2f(o,t[0],t[1]);break;case a.FLOAT_VEC3:1<n.size?t.length&&a.uniform3fv(o,t):a.uniform3f(o,t[0],t[1],t[2]);break;case a.FLOAT_VEC4:1<n.size?t.length&&a.uniform4fv(o,t):a.uniform4f(o,t[0],t[1],t[2],t[3]);break;case a.INT_VEC2:1<n.size?t.length&&a.uniform2iv(o,t):a.uniform2i(o,t[0],t[1]);break;case a.INT_VEC3:1<n.size?t.length&&a.uniform3iv(o,t):a.uniform3i(o,t[0],t[1],t[2]);break;case a.INT_VEC4:1<n.size?t.length&&a.uniform4iv(o,t):a.uniform4i(o,t[0],t[1],t[2],t[3]);break;case a.SAMPLER_2D:a.activeTexture(a.TEXTURE0+n.samplerIndex),n.texture=t instanceof r.default.Texture?t:this._renderer.getTexture(t),a.uniform1i(o,n.samplerIndex),n.texture.src.gifProperties&&n.texture.src._animateGif(this._renderer._pInst)}return this}},r.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},r.default.Shader.prototype.isNormalShader=function(){return void 0!==this.attributes.aNormal},r.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},r.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},r.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},r.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},r.default.Shader.prototype.enableAttrib=function(e,t,n,r,a,o){var i;return e&&-1!==(e=e.location)&&(i=this._renderer.GL,this._renderer.registerEnabled[e]||(i.enableVertexAttribArray(e),this._renderer.registerEnabled[e]=!0),this._renderer.GL.vertexAttribPointer(e,t,n||i.FLOAT,r||!1,a||0,o||0)),this},e=r.default.Shader,n.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.Texture=function(e,t,n){return this._renderer=e,e=this._renderer.GL,(n=n||{}).dataType===e.FLOAT&&(e.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),e.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=t,this.glTex=void 0,this.glTarget=e.TEXTURE_2D,this.glFormat=n.format||e.RGBA,this.mipmaps=!1,this.glMinFilter=n.minFilter||e.LINEAR,this.glMagFilter=n.magFilter||e.LINEAR,this.glWrapS=n.wrapS||e.CLAMP_TO_EDGE,this.glWrapT=n.wrapT||e.CLAMP_TO_EDGE,this.glDataType=n.dataType||e.UNSIGNED_BYTE,this.isSrcMediaElement=void 0!==o.default.MediaElement&&t instanceof o.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==o.default.Element&&t instanceof o.default.Element&&!(t instanceof o.default.Graphics)&&!(t instanceof o.default.Renderer),this.isSrcP5Image=t instanceof o.default.Image,this.isSrcP5Graphics=t instanceof o.default.Graphics,this.isSrcP5Renderer=t instanceof o.default.Renderer,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData,n=this._getTextureDataFromSource(),this.width=n.width,this.height=n.height,this.init(n),this},o.default.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},o.default.Texture.prototype.init=function(e){var t,n=this._renderer.GL;this.glTex=n.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(t=new Uint8Array([1,1,1,1]),n.texImage2D(this.glTarget,0,n.RGBA,1,1,0,this.glFormat,this.glDataType,t)):n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)},o.default.Texture.prototype.update=function(){var e,t,n,r=this.src;return 0!==r.width&&0!==r.height&&(e=this._getTextureDataFromSource(),t=!1,n=this._renderer.GL,e.width!==this.width||e.height!==this.height?(t=!0,this.width=e.width,this.height=e.height,this.isSrcP5Image?r.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&r.setModified(!0)):this.isSrcP5Image?r.isModified()&&r.setModified(!(t=!0)):this.isSrcMediaElement?r.isModified()?r.setModified(!(t=!0)):r.loadedmetadata&&this._videoPrevUpdateTime!==r.time()&&(this._videoPrevUpdateTime=r.time(),t=!0):this.isImageData?r._dirty&&(t=!(r._dirty=!1)):t=!0,t&&(this.bindTexture(),n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)),t)},o.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},o.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},o.default.Texture.prototype.setInterpolation=function(e,t){var n=this._renderer.GL;e===i.NEAREST?this.glMinFilter=n.NEAREST:this.glMinFilter=n.LINEAR,t===i.NEAREST?this.glMagFilter=n.NEAREST:this.glMagFilter=n.LINEAR,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},o.default.Texture.prototype.setWrapMode=function(e,t){function n(e){return 0==(e&e-1)}var r=this._renderer.GL,a=(a=this._getTextureDataFromSource()).naturalWidth&&a.naturalHeight?(o=a.naturalWidth,a.naturalHeight):(o=this.width,this.height),o=n(o);a=n(a);e===i.REPEAT?o&&a?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===i.MIRROR?o&&a?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===i.REPEAT?o&&a?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===i.MIRROR?o&&a?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var u=o.default.Texture;n.default=u},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var i;Object.prototype.hasOwnProperty.call(e,n)&&((i=o?Object.getOwnPropertyDescriptor(e,n):null)&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function c(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var a=this.infos.length-1;0<=a;--a){var o=this.infos[a];if(o.index+e<r){n=(t=o).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var i=document.getElementsByTagName("canvas")[0],s=!i,u=(i||((i=document.createElement("canvas")).style.display="none",document.body.appendChild(i)),i.getContext("2d"));u&&(n=u.createImageData(this.width,this.height)),s&&document.body.removeChild(i)}this.infos.push(t={index:0,imageData:n})}return u=t.index,t.index+=e,n._dirty=!0,{imageData:n,index:u}}}function l(e,t,n,r,a){var o=e.imageData.data;e=4*e.index++;o[e++]=t,o[e++]=n,o[e++]=r,o[+e]=a}function d(e){this.font=e,this.strokeImageInfos=new c(64,64),this.colDimImageInfos=new c(64,64),this.rowDimImageInfos=new c(64,64),this.colCellImageInfos=new c(64,64),this.rowCellImageInfos=new c(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){var t=this.glyphInfos[e.index];if(!t){var n=e.getBoundingBox(),r=n.x1,a=n.y1,o=n.x2-r,s=n.y2-a,u=e.path.commands;if(0==o||0==s||!u.length)return this.glyphInfos[e.index]={};for(var c,d,p,h,m=[],v=[],y=[],g=8;0<=g;--g)y.push([]);for(g=8;0<=g;--g)v.push([]);var b=!0,x=!1,w=void 0;try{for(var k,S=u[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var _=k.value,T=(_.x-r)/o,E=(_.y-a)/s;if(!U(c,d,T,E)){switch(_.type){case"M":p=T,h=E;break;case"L":B(c,d,T,E);break;case"Q":var C=(_.x1-r)/o,I=(_.y1-a)/s;P([c,T,C],[d,E,I],{x:c,y:d,cx:C,cy:I});break;case"Z":U(c,d,p,h)?m.push({x:c,y:d}):(B(c,d,p,h),m.push({x:p,y:h}));break;case"C":for(var N=function(e,t,n,r,a,o,s,u){e=new z(new i.default.Vector(e,t),new i.default.Vector(n,r),new i.default.Vector(a,o),new i.default.Vector(s,u)).splitInflections();var c=[],l=30/f,d=!0;t=!1,n=void 0;try{for(var p,h=e[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){for(var m=p.value,v=[],y=void 0;!(.125<=(y=l/m.quadError()));){var g=Math.pow(y,1/3),b=m.split(g),x=m.split(1-g/(1-g));c.push(b),v.push(m),m=x}y<1&&c.push(m.split(.5)),c.push(m),Array.prototype.push.apply(c,v.reverse())}}catch(e){t=!0,n=e}finally{try{d||null==h.return||h.return()}finally{if(t)throw n}}return c}(c,d,(_.x1-r)/o,(_.y1-a)/s,(_.x2-r)/o,(_.y2-a)/s,T,E),j=0;j<N.length;j++){var R=N[j].toQuadratic();P([R.x,R.x1,R.cx],[R.y,R.y1,R.cy],R)}break;default:throw new Error("unknown command type: ".concat(_.type))}c=T,d=E}}}catch(e){x=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(x)throw w}}for(var A=m.length,M=this.strokeImageInfos.findImage(A),O=M.index,L=0;L<A;++L){var D=m[L];l(M,F(D.x),F(D.y),F(D.cx),F(D.cy))}(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[n.x1,-n.y1,n.x2,-n.y2],strokeImageInfo:M,strokes:m,colInfo:V(y,this.colDimImageInfos,this.colCellImageInfos),rowInfo:V(v,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset]}return t;function P(e,t,n){var r=m.length;function a(e,t,n){for(var r=e.length;0<r--;){var a=e[r];a<t&&(t=a),n<a&&(n=a)}return{min:t,max:n}}m.push(n);n=a(e,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var o=Math.min(Math.ceil(9*n.max+.5),9),i=e;i<o;++i)y[i].push(r);n=a(t,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var s=Math.min(Math.ceil(9*n.max+.5),9),u=e;u<s;++u)v[u].push(r)}function F(e){return(e=255*e)<0?0:255<e?255:e}function z(e,t,n,r){this.p0=e,this.c0=t,this.c1=n,this.p1=r,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return i.default.Vector.sub(i.default.Vector.sub(this.p1,this.p0),i.default.Vector.mult(i.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(e){var t=i.default.Vector.lerp(this.p0,this.c0,e),n=i.default.Vector.lerp(this.c0,this.c1,e),r=i.default.Vector.lerp(t,n,e);this.c1=i.default.Vector.lerp(this.c1,this.p1,e),this.c0=i.default.Vector.lerp(n,this.c1,e),n=i.default.Vector.lerp(r,this.c0,e),e=new z(this.p0,t,r,n);return this.p0=n,e},this.splitInflections=function(){var e=i.default.Vector.sub(this.c0,this.p0),t=i.default.Vector.sub(i.default.Vector.sub(this.c1,this.c0),e),n=i.default.Vector.sub(i.default.Vector.sub(i.default.Vector.sub(this.p1,this.c1),e),i.default.Vector.mult(t,2)),r=[],a=t.x*n.y-t.y*n.x;return 0!==a&&0<=(e=(n=e.x*n.y-e.y*n.x)*n-4*a*(e.x*t.y-e.y*t.x))&&(a<0&&(a=-a,n=-n),e=(-n+(t=Math.sqrt(e)))/(2*a),0<(n=(-n-t)/(2*a))&&n<1&&(r.push(this.split(n)),e=1-(1-e)/(1-n)),0<e&&e<1&&r.push(this.split(e))),r.push(this),r}}function B(e,t,n,r){P([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function U(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}function V(e,t,n){for(var r=e.length,a=t.findImage(r),o=(t=a.index,0),i=0;i<r;++i)o+=e[i].length;for(var s=n.findImage(o),u=0;u<r;++u){var c=e[u],d=c.length,f=s.index;l(a,f>>7,127&f,d>>7,127&d);for(var p=0;p<d;++p){var h=c[p]+O;l(s,h>>7,127&h,0,0)}}return{cellImageInfo:s,dimOffset:t,dimImageInfo:a}}}}e("./p5.Shader"),e("./p5.RendererGL.Retained"),i.default.RendererGL.prototype._applyTextProperties=function(){},i.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var f=Math.sqrt(3);i.default.RendererGL.prototype._renderText=function(e,t,n,r,a){if(this._textFont&&"string"!=typeof this._textFont){if(!(a<=r)&&this._doFill){if(this._isOpenType()){e.push();a=this._doStroke;var o=this.drawMode,u=(this._doStroke=!1,this.drawMode=s.TEXTURE,this._textFont.font),c=(c=this._textFont._fontInfo)||(this._textFont._fontInfo=new d(u)),l=(n=this._textFont._handleAlignment(this,t,n,r),r=this._textSize/u.unitsPerEm,this.translate(n.x,n.y,0),this.scale(r,r,1),this.GL),f=(n=!this._defaultFontShader,this._getFontShader()),p=(f.init(),f.bindShader(),n&&(f.setUniform("uGridImageSize",[64,64]),f.setUniform("uCellsImageSize",[64,64]),f.setUniform("uStrokeImageSize",[64,64]),f.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),h=(p||((r=this._textGeom=new i.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new i.default.Vector(t,e,0)),this.uvs.push(t,e)}))).computeFaces().computeNormals(),p=this.createBuffers("glyph",r)),!0);n=!1,r=void 0;try{for(var m,v=this.retainedMode.buffers.text[Symbol.iterator]();!(h=(m=v.next()).done);h=!0)m.value._prepareBuffer(p,f)}catch(e){n=!0,r=e}finally{try{h||null==v.return||v.return()}finally{if(n)throw r}}this._bindBuffer(p.indexBuffer,l.ELEMENT_ARRAY_BUFFER),f.setUniform("uMaterialColor",this.curFillColor);try{var y=0,g=null,b=u.stringToGlyphs(t),x=!0,w=!1,k=void 0;try{for(var S,_=b[Symbol.iterator]();!(x=(S=_.next()).done);x=!0){var T,E,C=S.value,I=(g&&(y+=u.getKerningValue(g,C)),c.getGlyphInfo(C));I.uGlyphRect&&(T=I.rowInfo,E=I.colInfo,f.setUniform("uSamplerStrokes",I.strokeImageInfo.imageData),f.setUniform("uSamplerRowStrokes",T.cellImageInfo.imageData),f.setUniform("uSamplerRows",T.dimImageInfo.imageData),f.setUniform("uSamplerColStrokes",E.cellImageInfo.imageData),f.setUniform("uSamplerCols",E.dimImageInfo.imageData),f.setUniform("uGridOffset",I.uGridOffset),f.setUniform("uGlyphRect",I.uGlyphRect),f.setUniform("uGlyphOffset",y),f.bindTextures(),l.drawElements(l.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),y+=C.advanceWidth,g=C}}catch(e){w=!0,k=e}finally{try{x||null==_.return||_.return()}finally{if(w)throw k}}}finally{f.unbindShader(),this._doStroke=a,this.drawMode=o,e.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)}))},4463:function(t,n,r){"use strict";var a=r(2791),o=r(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function v(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(m,e)||!f.call(h,e)&&(p.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var P,F=Object.assign;function z(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var u="\n"+a[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function V(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case E:return"Profiler";case T:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(ne(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,de,fe=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Te=null;function Ee(e){if(e=xa(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),Se(e.stateNode,e.type,t))}}function Ce(e){_e?Te?Te.push(e):Te=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Te;if(Te=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ne(e,t){return e(t)}function je(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ne(e,t,n)}finally{Re=!1,(null!==_e||null!==Te)&&(je(),Ie())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Oe=!1}function De(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Pe=!1,Fe=null,ze=!1,Be=null,Ue={onError:function(e){Pe=!0,Fe=e}};function Ve(e,t,n,r,a,o,i,s,u){Pe=!1,Fe=null,De.apply(Ue,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(i(188))}function Ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Qe=o.unstable_requestPaint,Je=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,tt=o.unstable_UserBlockingPriority,nt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,at=o.unstable_IdlePriority,ot=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/ct|0)|0},ut=Math.log,ct=Math.LN2;var lt=64,dt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=ft(s):0!==(o&=i)&&(r=ft(o))}else 0!==(i=n&~a)?r=ft(i):0!==o&&(r=ft(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,St,_t,Tt,Et,Ct=!1,It=[],Nt=null,jt=null,Rt=null,At=new Map,Mt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Pt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ba(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Nt&&zt(Nt)&&(Nt=null),null!==jt&&zt(jt)&&(jt=null),null!==Rt&&zt(Rt)&&(Rt=null),At.forEach(Bt),Mt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ut)))}function Gt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Vt(Nt,e),null!==jt&&Vt(jt,e),null!==Rt&&Vt(Rt,e),At.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Wt=w.ReactCurrentBatchConfig,Ht=!0;function Zt(e,t,n,r){var a=xt,o=Wt.transition;Wt.transition=null;try{xt=1,Xt(e,t,n,r)}finally{xt=a,Wt.transition=o}}function qt(e,t,n,r){var a=xt,o=Wt.transition;Wt.transition=null;try{xt=4,Xt(e,t,n,r)}finally{xt=a,Wt.transition=o}}function Xt(e,t,n,r){if(Ht){var a=Yt(e,t,n,r);if(null===a)Hr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Nt=Pt(Nt,e,t,n,r,a),!0;case"dragenter":return jt=Pt(jt,e,t,n,r,a),!0;case"mouseover":return Rt=Pt(Rt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return At.set(o,Pt(At.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Mt.set(o,Pt(Mt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==a;){var o=xa(a);if(null!==o&&kt(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=ba(e=ke(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return en=a.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function on(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rn:an,this.isPropagationStopped=an,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,un,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(ln),fn=F({},ln,{view:0,detail:0}),pn=on(fn),hn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=on(hn),vn=on(F({},hn,{dataTransfer:0})),yn=on(F({},fn,{relatedTarget:0})),gn=on(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(bn),wn=on(F({},ln,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Tn}var Cn=F({},fn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Cn),Nn=on(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=on(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=on(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(An),On=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Pn=d&&"TextEvent"in window&&!Dn,Fn=d&&(!Ln||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Zn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Kn(e){zr(e,0)}function Yn(e){if(X(wa(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(d){var $n;if(d){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){qn&&(qn.detachEvent("onpropertychange",rr),Xn=qn=null)}function rr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Zn(t,Xn,e,ke(e)),Ae(Kn,t)}}function ar(e,t,n){"focusin"===e?(nr(),Xn=n,(qn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ir(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!ur(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=dr(n,o);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=d&&"documentMode"in document&&11>=document.documentMode,yr=null,gr=null,br=null,xr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==yr||yr!==K(r)||("selectionStart"in(r=yr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=qr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},_r={},Tr={};function Er(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return _r[e]=n[t];return e}d&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Er("animationend"),Ir=Er("animationiteration"),Nr=Er("animationstart"),jr=Er("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Rr.set(e,t),c(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Lr=Ar[Or];Mr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Mr(Cr,"onAnimationEnd"),Mr(Ir,"onAnimationIteration"),Mr(Nr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(jr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ve.apply(this,arguments),Pe){if(!Pe)throw Error(i(198));var l=Fe;Pe=!1,Fe=null,ze||(ze=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;Fr(a,s,c),o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,c=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;Fr(a,s,c),o=u}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Pr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var a=Zt;break;case 4:a=qt;break;default:a=Xt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ba(s)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=o,a=ke(n),i=[];e:{var s=Rr.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=jn;break;case Cr:case Ir:case Nr:u=gn;break;case jr:u=Rn;break;case"scroll":u=pn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Nn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Me(h,f))&&l.push(Zr(h,m,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),i.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[ma])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:wa(u),p=null==c?s:wa(c),(s=new l(m,h+"leave",u,n,a)).target=d,s.relatedTarget=p,m=null,ba(a)===r&&((l=new l(f,h+"enter",c,n,a)).target=p,l.relatedTarget=d,m=l),d=m,u&&c)e:{for(f=c,h=0,p=l=u;p;p=Xr(p))h++;for(p=0,m=f;m;m=Xr(m))p++;for(;0<h-p;)l=Xr(l),h--;for(;0<p-h;)f=Xr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Xr(l),f=Xr(f)}l=null}else l=null;null!==u&&Kr(i,s,u,l,!1),null!==c&&null!==d&&Kr(i,d,c,l,!0)}if("select"===(u=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Qn;else if(Hn(s))if(Jn)v=sr;else{v=or;var y=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Zn(i,v,n,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&te(s,"number",s.value)),y=r?wa(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,gr=r,br=null);break;case"focusout":br=gr=yr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,wr(i,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(i,n,a)}var g;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(g=tn()):($t="value"in(Jt=a)?Jt.value:Jt.textContent,Gn=!0)),0<(y=qr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:y}),g?b.data=g:null!==(g=Vn(n))&&(b.data=g))),(g=Pn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Ln&&Un(e,t)?(e=tn(),en=$t=Jt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=g))}zr(i,t)}))}function Zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Me(e,n))&&r.unshift(Zr(e,o,a)),null!=(o=Me(e,t))&&r.push(Zr(e,o,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Me(n,o))&&i.unshift(Zr(n,u,s)):a||null!=(u=Me(n,o))&&i.push(Zr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function ea(){}var ta=null,na=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var aa="function"===typeof setTimeout?setTimeout:void 0,oa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(ua)}:aa;function ua(e){setTimeout((function(){throw e}))}function ca(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Gt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),pa="__reactFiber$"+fa,ha="__reactProps$"+fa,ma="__reactContainer$"+fa,va="__reactEvents$"+fa,ya="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ba(e){var t=e[pa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[pa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[pa])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[pa]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[ha]||null}var Sa=[],_a=-1;function Ta(e){return{current:e}}function Ea(e){0>_a||(e.current=Sa[_a],Sa[_a]=null,_a--)}function Ca(e,t){_a++,Sa[_a]=e.current,e.current=t}var Ia={},Na=Ta(Ia),ja=Ta(!1),Ra=Ia;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ea(ja),Ea(Na)}function La(e,t,n){if(Na.current!==Ia)throw Error(i(168));Ca(Na,t),Ca(ja,n)}function Da(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,W(e)||"Unknown",a));return F({},n,r)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Ra=Na.current,Ca(Na,e),Ca(ja,ja.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Da(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ea(ja),Ea(Na),Ca(Na,e)):Ea(ja),Ca(ja,n)}var za=null,Ba=!1,Ua=!1;function Va(e){null===za?za=[e]:za.push(e)}function Ga(){if(!Ua&&null!==za){Ua=!0;var t=0,n=xt;try{var r=za;for(xt=1;t<r.length;t++){var a=r[t];do{a=a(!0)}while(null!==a)}za=null,Ba=!1}catch(e){throw null!==za&&(za=za.slice(t+1)),Xe(et,Ga),e}finally{xt=n,Ua=!1}}return null}var Wa=[],Ha=0,Za=null,qa=0,Xa=[],Ka=0,Ya=null,Qa=1,Ja="";function $a(e,t){Wa[Ha++]=qa,Wa[Ha++]=Za,Za=e,qa=t}function eo(e,t,n){Xa[Ka++]=Qa,Xa[Ka++]=Ja,Xa[Ka++]=Ya,Ya=e;var r=Qa;e=Ja;var a=32-st(r)-1;r&=~(1<<a),n+=1;var o=32-st(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Qa=1<<32-st(t)+a|n<<a|r,Ja=o+e}else Qa=1<<o|n<<a|r,Ja=e}function to(e){null!==e.return&&($a(e,1),eo(e,1,0))}function no(e){for(;e===Za;)Za=Wa[--Ha],Wa[Ha]=null,qa=Wa[--Ha],Wa[Ha]=null;for(;e===Ya;)Ya=Xa[--Ka],Xa[Ka]=null,Ja=Xa[--Ka],Xa[Ka]=null,Qa=Xa[--Ka],Xa[Ka]=null}var ro=null,ao=null,oo=!1,io=null;function so(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,ao=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Qa,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,ao=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(oo){var t=ao;if(t){var n=t;if(!uo(e,t)){if(co(e))throw Error(i(418));t=la(n.nextSibling);var r=ro;t&&uo(e,t)?so(r,n):(e.flags=-4097&e.flags|2,oo=!1,ro=e)}}else{if(co(e))throw Error(i(418));e.flags=-4097&e.flags|2,oo=!1,ro=e}}}function fo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function po(e){if(e!==ro)return!1;if(!oo)return fo(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ao)){if(co(e))throw ho(),Error(i(418));for(;t;)so(e,t),t=la(t.nextSibling)}if(fo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=ro?la(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ao;e;)e=la(e.nextSibling)}function mo(){ao=ro=null,oo=!1}function vo(e){null===io?io=[e]:io.push(e)}var yo=w.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Ta(null),xo=null,wo=null,ko=null;function So(){ko=wo=xo=null}function _o(e){var t=bo.current;Ea(bo),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){xo=e,ko=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===xo)throw Error(i(308));wo=e,xo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Io=null;function No(e){null===Io?Io=[e]:Io.push(e)}function jo(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,No(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ju)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ro(e,n)}return null===(a=r.interleaved)?(t.next=t,No(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ro(e,n)}function Po(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var a=e.updateQueue;Ao=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===i?o=c:i.next=c,i=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==i&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==o){var d=a.baseState;for(i=0,l=c=u=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=F({},d,f);break e;case 2:Ao=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=d):l=l.next=p,i|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Fu|=i,e.lanes=i,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Uo=(new a.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),o=Lo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,a))&&(ac(t,e,a,r),Po(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),o=Lo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,a))&&(ac(t,e,a,r),Po(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),a=Lo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Do(e,a,r))&&(ac(t,e,r,n),Po(t,e,r))}};function Wo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(a,o))}function Ho(e,t,n){var r=!1,a=Ia,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(a=Ma(t)?Ra:Na.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Ia),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Uo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Co(o):(o=Ma(t)?Ra:Na.current,a.context=Aa(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Go.enqueueReplaceState(a,a.state,null),zo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Uo&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Qo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Yo(o)===t.type)?((r=a(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case M:return f(e,(0,t._init)(t._payload),n)}if(ne(t)||D(t))return(t=Pc(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?c(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null;case M:return p(e,t,(a=n._init)(n._payload),r)}if(ne(n)||D(n))return null!==a?null:d(e,t,n,r,null);Ko(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return h(e,t,n,(0,r._init)(r._payload),a)}if(ne(r)||D(r))return d(t,e=e.get(n)||null,r,a,null);Ko(t,r)}return null}function m(a,i,s,u){for(var c=null,l=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var y=p(a,d,s[m],u);if(null===y){null===d&&(d=v);break}e&&d&&null===y.alternate&&t(a,d),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,d=v}if(m===s.length)return n(a,d),oo&&$a(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],u))&&(i=o(d,i,m),null===l?c=d:l.sibling=d,l=d);return oo&&$a(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(v=h(d,a,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&d.forEach((function(e){return t(a,e)})),oo&&$a(a,m),c}function v(a,s,u,c){var l=D(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var d=l=null,m=s,v=s=0,y=null,g=u.next();null!==m&&!g.done;v++,g=u.next()){m.index>v?(y=m,m=null):y=m.sibling;var b=p(a,m,g.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?l=b:d.sibling=b,d=b,m=y}if(g.done)return n(a,m),oo&&$a(a,v),l;if(null===m){for(;!g.done;v++,g=u.next())null!==(g=f(a,g.value,c))&&(s=o(g,s,v),null===d?l=g:d.sibling=g,d=g);return oo&&$a(a,v),l}for(m=r(a,m);!g.done;v++,g=u.next())null!==(g=h(m,a,v,g.value,c))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=o(g,s,v),null===d?l=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(a,e)})),oo&&$a(a,v),l}return function e(r,o,i,u){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case k:e:{for(var c=i.key,l=o;null!==l;){if(l.key===c){if((c=i.type)===_){if(7===l.tag){n(r,l.sibling),(o=a(l,i.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&Yo(c)===l.type){n(r,l.sibling),(o=a(l,i.props)).ref=Xo(r,l,i),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}i.type===_?((o=Pc(i.props.children,r.mode,u,i.key)).return=r,r=o):((u=Dc(i.type,i.key,i.props,null,r.mode,u)).ref=Xo(r,o,i),u.return=r,r=u)}return s(r);case S:e:{for(l=i.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(i,r.mode,u)).return=r,r=o}return s(r);case M:return e(r,o,(l=i._init)(i._payload),u)}if(ne(i))return m(r,o,i,u);if(D(i))return v(r,o,i,u);Ko(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=zc(i,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Jo=Qo(!0),$o=Qo(!1),ei={},ti=Ta(ei),ni=Ta(ei),ri=Ta(ei);function ai(e){if(e===ei)throw Error(i(174));return e}function oi(e,t){switch(Ca(ri,t),Ca(ni,e),Ca(ti,ei),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ea(ti),Ca(ti,t)}function ii(){Ea(ti),Ea(ni),Ea(ri)}function si(e){ai(ri.current);var t=ai(ti.current),n=ce(t,e.type);t!==n&&(Ca(ni,e),Ca(ti,n))}function ui(e){ni.current===e&&(Ea(ti),Ea(ni))}var ci=Ta(0);function li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var di=[];function fi(){for(var e=0;e<di.length;e++)di[e]._workInProgressVersionPrimary=null;di.length=0}var pi=w.ReactCurrentDispatcher,hi=w.ReactCurrentBatchConfig,mi=0,vi=null,yi=null,gi=null,bi=!1,xi=!1,wi=0,ki=0;function Si(){throw Error(i(321))}function _i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Ti(e,t,n,r,a,o){if(mi=o,vi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pi.current=null===e||null===e.memoizedState?us:cs,e=n(r,a),xi){o=0;do{if(xi=!1,wi=0,25<=o)throw Error(i(301));o+=1,gi=yi=null,t.updateQueue=null,pi.current=ls,e=n(r,a)}while(xi)}if(pi.current=ss,t=null!==yi&&null!==yi.next,mi=0,gi=yi=vi=null,bi=!1,t)throw Error(i(300));return e}function Ei(){var e=0!==wi;return wi=0,e}function Ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gi?vi.memoizedState=gi=e:gi=gi.next=e,gi}function Ii(){if(null===yi){var e=vi.alternate;e=null!==e?e.memoizedState:null}else e=yi.next;var t=null===gi?vi.memoizedState:gi.next;if(null!==t)gi=t,yi=e;else{if(null===e)throw Error(i(310));e={memoizedState:(yi=e).memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},null===gi?vi.memoizedState=gi=e:gi=gi.next=e}return gi}function Ni(e,t){return"function"===typeof t?t(e):t}function ji(e){var t=Ii(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=yi,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var d=l.lane;if((mi&d)===d)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vi.lanes|=d,Fu|=d}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,ur(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,vi.lanes|=o,Fu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=Ii(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);ur(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ai(){}function Mi(e,t){var n=vi,r=Ii(),a=t(),o=!ur(r.memoizedState,a);if(o&&(r.memoizedState=a,ws=!0),r=r.queue,Hi(Di.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==gi&&1&gi.memoizedState.tag){if(n.flags|=2048,Bi(9,Li.bind(null,n,r,a,t),void 0,null),null===Ru)throw Error(i(349));0!==(30&mi)||Oi(n,t,a)}return a}function Oi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vi.updateQueue)?(t={lastEffect:null,stores:null},vi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Li(e,t,n,r){t.value=n,t.getSnapshot=r,Pi(t)&&Fi(e)}function Di(e,t,n){return n((function(){Pi(t)&&Fi(e)}))}function Pi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fi(e){var t=Ro(e,1);null!==t&&ac(t,e,1,-1)}function zi(e){var t=Ci();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,vi,e),[t.memoizedState,e]}function Bi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vi.updateQueue)?(t={lastEffect:null,stores:null},vi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ui(){return Ii().memoizedState}function Vi(e,t,n,r){var a=Ci();vi.flags|=e,a.memoizedState=Bi(1|t,n,void 0,void 0===r?null:r)}function Gi(e,t,n,r){var a=Ii();r=void 0===r?null:r;var o=void 0;if(null!==yi){var i=yi.memoizedState;if(o=i.destroy,null!==r&&_i(r,i.deps))return void(a.memoizedState=Bi(t,n,o,r))}vi.flags|=e,a.memoizedState=Bi(1|t,n,o,r)}function Wi(e,t){return Vi(8390656,8,e,t)}function Hi(e,t){return Gi(2048,8,e,t)}function Zi(e,t){return Gi(4,2,e,t)}function qi(e,t){return Gi(4,4,e,t)}function Xi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ki(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Gi(4,4,Xi.bind(null,t,e),n)}function Yi(){}function Qi(e,t){var n=Ii();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ji(e,t){var n=Ii();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $i(e,t,n){return 0===(21&mi)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vi.lanes|=n,Fu|=n,e.baseState=!0),t)}function es(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=hi.transition;hi.transition={};try{e(!1),t()}finally{xt=n,hi.transition=r}}function ts(){return Ii().memoizedState}function ns(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},as(e))os(t,n);else if(null!==(n=jo(e,t,n,r))){ac(n,e,r,nc()),is(n,t,r)}}function rs(e,t,n){var r=rc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(as(e))os(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,ur(s,i)){var u=t.interleaved;return null===u?(a.next=a,No(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=jo(e,t,a,r))&&(ac(n,e,r,a=nc()),is(n,t,r))}}function as(e){var t=e.alternate;return e===vi||null!==t&&t===vi}function os(e,t){xi=bi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ss={readContext:Co,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},us={readContext:Co,useCallback:function(e,t){return Ci().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Wi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vi(4194308,4,Xi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vi(4,2,e,t)},useMemo:function(e,t){var n=Ci();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ci();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ns.bind(null,vi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ci().memoizedState=e},useState:zi,useDebugValue:Yi,useDeferredValue:function(e){return Ci().memoizedState=e},useTransition:function(){var e=zi(!1),t=e[0];return e=es.bind(null,e[1]),Ci().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vi,a=Ci();if(oo){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ru)throw Error(i(349));0!==(30&mi)||Oi(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Wi(Di.bind(null,r,o,e),[e]),r.flags|=2048,Bi(9,Li.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ci(),t=Ru.identifierPrefix;if(oo){var n=Ja;t=":"+t+"R"+(n=(Qa&~(1<<32-st(Qa)-1)).toString(32)+n),0<(n=wi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ki++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:Qi,useContext:Co,useEffect:Hi,useImperativeHandle:Ki,useInsertionEffect:Zi,useLayoutEffect:qi,useMemo:Ji,useReducer:ji,useRef:Ui,useState:function(){return ji(Ni)},useDebugValue:Yi,useDeferredValue:function(e){return $i(Ii(),yi.memoizedState,e)},useTransition:function(){return[ji(Ni)[0],Ii().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Mi,useId:ts,unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Qi,useContext:Co,useEffect:Hi,useImperativeHandle:Ki,useInsertionEffect:Zi,useLayoutEffect:qi,useMemo:Ji,useReducer:Ri,useRef:Ui,useState:function(){return Ri(Ni)},useDebugValue:Yi,useDeferredValue:function(e){var t=Ii();return null===yi?t.memoizedState=e:$i(t,yi.memoizedState,e)},useTransition:function(){return[Ri(Ni)[0],Ii().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Mi,useId:ts,unstable_isNewReconciler:!1};function ds(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ms(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zu||(Zu=!0,qu=r),ps(0,t)},n}function vs(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ps(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,t),"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xs=w.ReactCurrentOwner,ws=!1;function ks(e,t,n,r){t.child=null===e?$o(t,null,n,r):Jo(t,e.child,n,r)}function Ss(e,t,n,r,a){n=n.render;var o=t.ref;return Eo(t,a),r=Ti(e,t,n,r,o,a),n=Ei(),null===e||ws?(oo&&n&&to(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zs(e,t,a))}function _s(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)return Zs(e,t,a)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Zs(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return Is(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Lu,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Lu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ca(Lu,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ca(Lu,Ou),Ou|=r;return ks(e,t,a,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,a){var o=Ma(n)?Ra:Na.current;return o=Aa(t,o),Eo(t,a),n=Ti(e,t,n,r,o,a),r=Ei(),null===e||ws?(oo&&r&&to(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zs(e,t,a))}function Ns(e,t,n,r,a){if(Ma(n)){var o=!0;Pa(t)}else o=!1;if(Eo(t,a),null===t.stateNode)Hs(e,t),Ho(t,n,r),qo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Aa(t,c=Ma(n)?Ra:Na.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==c)&&Zo(t,i,r,c),Ao=!1;var f=t.memoizedState;i.state=f,zo(t,r,i,a),u=t.memoizedState,s!==r||f!==u||ja.current||Ao?("function"===typeof l&&(Vo(t,n,l,r),u=t.memoizedState),(s=Ao||Wo(t,n,s,r,f,u,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:go(t.type,s),i.props=c,d=t.pendingProps,f=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=Co(u):u=Aa(t,u=Ma(n)?Ra:Na.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||f!==u)&&Zo(t,i,r,u),Ao=!1,f=t.memoizedState,i.state=f,zo(t,r,i,a);var h=t.memoizedState;s!==d||f!==h||ja.current||Ao?("function"===typeof p&&(Vo(t,n,p,r),h=t.memoizedState),(c=Ao||Wo(t,n,c,r,f,h,u)||!1)?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=u,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return js(e,t,n,r,o,a)}function js(e,t,n,r,a,o){Cs(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Fa(t,n,!1),Zs(e,t,o);r=t.stateNode,xs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,s,o)):ks(e,t,s,o),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),oi(e,t.containerInfo)}function As(e,t,n,r,a){return mo(),vo(a),t.flags|=256,ks(e,t,n,r),t.child}var Ms,Os,Ls,Ds,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,a=t.pendingProps,o=ci.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ca(ci,1&o),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,a,0,null),e=Pc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):Bs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fc({mode:"visible",children:r.children},a,0,null),(o=Pc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=fs(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Ru)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ro(e,a),ac(r,e,a,-1))}return yc(),Us(e,t,s,r=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ao=la(a.nextSibling),ro=t,oo=!0,io=null,null!==e&&(Xa[Ka++]=Qa,Xa[Ka++]=Ja,Xa[Ka++]=Ya,Qa=e.id,Ja=e.overflow,Ya=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Lc(r,s):(s=Pc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,a}return e=(s=e.child).sibling,a=Lc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bs(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&vo(r),Jo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Gs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(ks(e,t,r.children,n),0!==(2&(r=ci.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ca(ci,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===li(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Gs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===li(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Gs(t,!0,n,null,o);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Ma(t.type)&&Oa(),Xs(t),null;case 3:return r=t.stateNode,ii(),Ea(ja),Ea(Na),fi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==io&&(uc(io),io=null))),Os(e,t),Xs(t),null;case 5:ui(t);var a=ai(ri.current);if(n=t.type,null!==e&&null!=t.stateNode)Ls(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Xs(t),null}if(e=ai(ti.current),po(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pa]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Dr.length;a++)Br(Dr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Q(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":oe(r,o),Br("invalid",r)}for(var s in be(n,o),a=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Br("scroll",r)}switch(n){case"input":q(r),ee(r,o,!0);break;case"textarea":q(r),se(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ea)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[pa]=t,e[ha]=r,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(s=xe(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dr.length;a++)Br(Dr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Q(e,r),a=Y(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),a=ae(e,r),Br("invalid",e)}for(o in be(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&pe(e,l):"number"===typeof l&&pe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&x(e,o,l,s))}switch(n){case"input":q(e),ee(e,r,!1);break;case"textarea":q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=ea)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=ai(ri.current),ai(ti.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[pa]=t,(o=r.nodeValue!==n)&&null!==(e=ro))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pa]=t,t.stateNode=r}return Xs(t),null;case 13:if(Ea(ci),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==ao&&0!==(1&t.mode)&&0===(128&t.flags))ho(),mo(),t.flags|=98560,o=!1;else if(o=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[pa]=t}else mo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==io&&(uc(io),io=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ci.current)?0===Du&&(Du=3):yc())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return ii(),Os(e,t),null===e&&Gr(t.stateNode.containerInfo),Xs(t),null;case 10:return _o(t.type._context),Xs(t),null;case 19:if(Ea(ci),null===(o=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)qs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=li(e))){for(t.flags|=128,qs(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(ci,1&ci.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Wu&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=li(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!oo)return Xs(t),null}else 2*Je()-o.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ci.current,Ca(ci,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return pc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(no(t),t.tag){case 1:return Ma(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ii(),Ea(ja),Ea(Na),fi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ui(t),null;case 13:if(Ea(ci),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));mo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ea(ci),null;case 4:return ii(),null;case 10:return _o(t.type._context),null;case 22:case 23:return pc(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ls=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ai(ti.current);var o,i=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),i=[];break;case"textarea":a=ae(e,a),r=ae(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=ea)}for(l in be(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var s=a[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(i=i||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),i||s===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,eu=null;function tu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function nu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ru=!1;function au(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&nu(t,n,o)}a=a.next}while(a!==r)}}function ou(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function su(e){var t=e.alternate;null!==t&&(e.alternate=null,su(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[ha],delete t[va],delete t[ya],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uu(e){return 5===e.tag||3===e.tag||4===e.tag}function cu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||uu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ea));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function du(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(du(e,t,n),e=e.sibling;null!==e;)du(e,t,n),e=e.sibling}var fu=null,pu=!1;function hu(e,t,n){for(n=n.child;null!==n;)mu(e,t,n),n=n.sibling}function mu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Js||tu(n,t);case 6:var r=fu,a=pu;fu=null,hu(e,t,n),pu=a,null!==(fu=r)&&(pu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(pu?(e=fu,n=n.stateNode,8===e.nodeType?ca(e.parentNode,n):1===e.nodeType&&ca(e,n),Gt(e)):ca(fu,n.stateNode));break;case 4:r=fu,a=pu,fu=n.stateNode.containerInfo,pu=!0,hu(e,t,n),fu=r,pu=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&nu(n,t,i),a=a.next}while(a!==r)}hu(e,t,n);break;case 1:if(!Js&&(tu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hu(e,t,n),Js=r):hu(e,t,n);break;default:hu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,pu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,pu=!0;break e}u=u.return}if(null===fu)throw Error(i(160));mu(o,s,a),fu=null,pu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Ec(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),bu(e),4&r){try{au(3,e,e.return),ou(3,e)}catch(v){Ec(e,e.return,v)}try{au(5,e,e.return)}catch(v){Ec(e,e.return,v)}}break;case 1:yu(t,e),bu(e),512&r&&null!==n&&tu(n,n.return);break;case 5:if(yu(t,e),bu(e),512&r&&null!==n&&tu(n,n.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(v){Ec(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(a,o),xe(u,s);var l=xe(u,o);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ye(a,f):"dangerouslySetInnerHTML"===d?fe(a,f):"children"===d?pe(a,f):x(a,d,f,l)}switch(u){case"input":$(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?re(a,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(a,!!o.multiple,o.defaultValue,!0):re(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(v){Ec(e,e.return,v)}}break;case 6:if(yu(t,e),bu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Ec(e,e.return,v)}}break;case 3:if(yu(t,e),bu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(v){Ec(e,e.return,v)}break;case 4:default:yu(t,e),bu(e);break;case 13:yu(t,e),bu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Gu=Je())),4&r&&vu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(l=Js)||d,yu(t,e),Js=l):yu(t,e),bu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(eu=e,d=e.child;null!==d;){for(f=eu=d;null!==eu;){switch(h=(p=eu).child,p.tag){case 0:case 11:case 14:case 15:au(4,p,p.return);break;case 1:tu(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Ec(r,n,v)}}break;case 5:tu(p,p.return);break;case 22:if(null!==p.memoizedState){Su(f);continue}}null!==h?(h.return=p,eu=h):Su(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(v){Ec(e,e.return,v)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){Ec(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yu(t,e),bu(e),4&r&&vu(e);case 21:}}function bu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(uu(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pe(a,""),r.flags&=-33),du(e,cu(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(e,cu(e),o);break;default:throw Error(i(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xu(e,t,n){eu=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==eu;){var a=eu,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Qs;if(!i){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=i,(Js=u)&&!c)for(eu=a;null!==eu;)u=(i=eu).child,22===i.tag&&null!==i.memoizedState?_u(a):null!==u?(u.return=i,eu=u):_u(a);for(;null!==o;)eu=o,wu(o,t,n),o=o.sibling;eu=a,Qs=s,Js=c}ku(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,eu=o):ku(e)}}function ku(e){for(;null!==eu;){var t=eu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||ou(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:go(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bo(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Gt(f)}}}break;default:throw Error(i(163))}Js||512&t.flags&&iu(t)}catch(p){Ec(t,t.return,p)}}if(t===e){eu=null;break}if(null!==(n=t.sibling)){n.return=t.return,eu=n;break}eu=t.return}}function Su(e){for(;null!==eu;){var t=eu;if(t===e){eu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,eu=n;break}eu=t.return}}function _u(e){for(;null!==eu;){var t=eu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ou(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Ec(t,a,u)}}var o=t.return;try{iu(t)}catch(u){Ec(t,o,u)}break;case 5:var i=t.return;try{iu(t)}catch(u){Ec(t,i,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){eu=null;break}var s=t.sibling;if(null!==s){s.return=t.return,eu=s;break}eu=t.return}}var Tu,Eu=Math.ceil,Cu=w.ReactCurrentDispatcher,Iu=w.ReactCurrentOwner,Nu=w.ReactCurrentBatchConfig,ju=0,Ru=null,Au=null,Mu=0,Ou=0,Lu=Ta(0),Du=0,Pu=null,Fu=0,zu=0,Bu=0,Uu=null,Vu=null,Gu=0,Wu=1/0,Hu=null,Zu=!1,qu=null,Xu=null,Ku=!1,Yu=null,Qu=0,Ju=0,$u=null,ec=-1,tc=0;function nc(){return 0!==(6&ju)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&ju)&&0!==Mu?Mu&-Mu:null!==yo.transition?(0===tc&&(tc=vt()),tc):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ac(e,t,n,r){if(50<Ju)throw Ju=0,$u=null,Error(i(185));gt(e,n,r),0!==(2&ju)&&e===Ru||(e===Ru&&(0===(2&ju)&&(zu|=n),4===Du&&cc(e,Mu)),oc(e,r),1===n&&0===ju&&0===(1&t.mode)&&(Wu=Je()+500,Ba&&Ga()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-st(o),s=1<<i,u=a[i];-1===u?0!==(s&n)&&0===(s&r)||(a[i]=ht(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=pt(e,e===Ru?Mu:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ba=!0,Va(e)}(lc.bind(null,e)):Va(lc.bind(null,e)),sa((function(){0===(6&ju)&&Ga()})),n=null;else{switch(wt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=at}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(ec=-1,tc=0,0!==(6&ju))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=pt(e,e===Ru?Mu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=ju;ju|=2;var o=vc();for(Ru===e&&Mu===t||(Hu=null,Wu=Je()+500,hc(e,t));;)try{xc();break}catch(u){mc(e,u)}So(),Cu.current=o,ju=a,null!==Au?t=0:(Ru=null,Mu=0,t=Du)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Pu,hc(e,0),cc(e,r),oc(e,Je()),n;if(6===t)cc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!ur(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=mt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Pu,hc(e,0),cc(e,r),oc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Vu,Hu);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Gu+500-Je())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=aa(Sc.bind(null,e,Vu,Hu),t);break}Sc(e,Vu,Hu);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-st(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=aa(Sc.bind(null,e,Vu,Hu),r);break}Sc(e,Vu,Hu);break;default:throw Error(i(329))}}}return oc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vu,Vu=n,null!==t&&uc(t)),e}function uc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function cc(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&ju))throw Error(i(327));_c();var t=pt(e,0);if(0===(1&t))return oc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Pu,hc(e,0),cc(e,t),oc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Vu,Hu),oc(e,Je()),null}function dc(e,t){var n=ju;ju|=1;try{return e(t)}finally{0===(ju=n)&&(Wu=Je()+500,Ba&&Ga())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&ju)&&_c();var t=ju;ju|=1;var n=Nu.transition,r=xt;try{if(Nu.transition=null,xt=1,e)return e()}finally{xt=r,Nu.transition=n,0===(6&(ju=t))&&Ga()}}function pc(){Ou=Lu.current,Ea(Lu)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oa(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ii(),Ea(ja),Ea(Na),fi();break;case 5:ui(r);break;case 4:ii();break;case 13:case 19:Ea(ci);break;case 10:_o(r.type._context);break;case 22:case 23:pc()}n=n.return}if(Ru=e,Au=e=Lc(e.current,null),Mu=Ou=t,Du=0,Pu=null,Bu=zu=Fu=0,Vu=Uu=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(r=(n=Io[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Io=null}return e}function mc(e,t){for(;;){var n=Au;try{if(So(),pi.current=ss,bi){for(var r=vi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}bi=!1}if(mi=0,gi=yi=vi=null,xi=!1,wi=0,Iu.current=null,null===n||null===n.return){Du=1,Pu=t,Au=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Mu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,bs(h,s,u,0,t),1&h.mode&&ys(o,l,t),c=l;var m=(t=h).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(i(426))}else if(oo&&1&u.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bs(y,s,u,0,t),vo(ds(c,u));break e}}o=c=ds(c,u),4!==Du&&(Du=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fo(o,ms(0,c,t));break e;case 1:u=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xu||!Xu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Fo(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}kc(n)}catch(x){t=x,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=ss,null===e?ss:e}function yc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Ru||0===(268435455&Fu)&&0===(268435455&zu)||cc(Ru,Mu)}function gc(t,n){var r=ju;ju|=2;var a=vc();for(Ru===t&&Mu===n||(Hu=null,hc(t,n));;)try{bc();break}catch(e){mc(t,e)}if(So(),ju=r,Cu.current=a,null!==Au)throw Error(i(261));return Ru=null,Mu=0,Du}function bc(){for(;null!==Au;)wc(Au)}function xc(){for(;null!==Au&&!Ye();)wc(Au)}function wc(e){var t=Tu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?kc(e):Au=t,Iu.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Ou)))return void(Au=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Du=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Du&&(Du=5)}function Sc(e,t,n){var r=xt,a=Nu.transition;try{Nu.transition=null,xt=1,function(e,t,n,r){do{_c()}while(null!==Yu);if(0!==(6&ju))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,o),e===Ru&&(Au=Ru=null,Mu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Rc(nt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nu.transition,Nu.transition=null;var s=xt;xt=1;var u=ju;ju|=4,Iu.current=null,function(e,t){if(ta=Ht,hr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++l===a&&(u=s),p===o&&++d===r&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(na={focusedElem:e,selectionRange:n},Ht=!1,eu=t;null!==eu;)if(e=(t=eu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,eu=e;else for(;null!==eu;){t=eu;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,y=m.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:go(t.type,v),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,eu=e;break}eu=t.return}m=ru,ru=!1}(e,n),gu(n,e),mr(na),Ht=!!ta,na=ta=null,e.current=n,xu(n,e,a),Qe(),ju=u,xt=s,Nu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Yu=e,Qu=a),o=e.pendingLanes,0===o&&(Xu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Zu)throw Zu=!1,e=qu,qu=null,e;0!==(1&Qu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===$u?Ju++:(Ju=0,$u=e):Ju=0,Ga()}(e,t,n,r)}finally{Nu.transition=a,xt=r}return null}function _c(){if(null!==Yu){var e=wt(Qu),t=Nu.transition,n=xt;try{if(Nu.transition=null,xt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&ju))throw Error(i(331));var a=ju;for(ju|=4,eu=e.current;null!==eu;){var o=eu,s=o.child;if(0!==(16&eu.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(eu=l;null!==eu;){var d=eu;switch(d.tag){case 0:case 11:case 15:au(8,d,o)}var f=d.child;if(null!==f)f.return=d,eu=f;else for(;null!==eu;){var p=(d=eu).sibling,h=d.return;if(su(d),d===l){eu=null;break}if(null!==p){p.return=h,eu=p;break}eu=h}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(null!==v)}}eu=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,eu=s;else e:for(;null!==eu;){if(0!==(2048&(o=eu).flags))switch(o.tag){case 0:case 11:case 15:au(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,eu=g;break e}eu=o.return}}var b=e.current;for(eu=b;null!==eu;){var x=(s=eu).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,eu=x;else e:for(s=b;null!==eu;){if(0!==(2048&(u=eu).flags))try{switch(u.tag){case 0:case 11:case 15:ou(9,u)}}catch(k){Ec(u,u.return,k)}if(u===s){eu=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,eu=w;break e}eu=u.return}}if(ju=a,Ga(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{xt=n,Nu.transition=t}}return!1}function Tc(e,t,n){e=Do(e,t=ms(0,t=ds(n,t),1),1),t=nc(),null!==e&&(gt(e,1,t),oc(e,t))}function Ec(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){t=Do(t,e=vs(t,e=ds(n,e),1),1),e=nc(),null!==t&&(gt(t,1,e),oc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Mu&n)===n&&(4===Du||3===Du&&(130023424&Mu)===Mu&&500>Je()-Gu?hc(e,0):Bu|=n),oc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=nc();null!==(e=Ro(e,t))&&(gt(e,t,n),oc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ic(e,n)}function Rc(e,t){return Xe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Pc(n.children,a,o,t);case T:s=8,a|=8;break;case E:return(e=Mc(12,n,t,2|a)).elementType=E,e.lanes=o,e;case j:return(e=Mc(13,n,t,a)).elementType=j,e.lanes=o,e;case R:return(e=Mc(19,n,t,a)).elementType=R,e.lanes=o,e;case O:return Fc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case N:s=11;break e;case A:s=14;break e;case M:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Mc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,a,o,i,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Gc(e){if(!e)return Ia;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ma(n))return Da(e,n,t)}return t}function Wc(e,t,n,r,a,o,i,s,u){return(e=Vc(n,r,!0,e,0,o,0,s,u)).context=Gc(null),n=e.current,(o=Lo(r=nc(),a=rc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,a),e.current.lanes=a,gt(e,a,r),oc(e,r),e}function Hc(e,t,n,r){var a=t.current,o=nc(),i=rc(a);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(a,t,i))&&(ac(e,a,i,o),Po(e,a,i)),i}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Tu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ja.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),mo();break;case 5:si(t);break;case 1:Ma(t.type)&&Pa(t);break;case 4:oi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ca(bo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ca(ci,1&ci.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ca(ci,1&ci.current),null!==(e=Zs(e,t,n))?e.sibling:null);Ca(ci,1&ci.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(ci,ci.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Zs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,oo&&0!==(1048576&t.flags)&&eo(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var a=Aa(t,Na.current);Eo(t,n),a=Ti(null,t,r,e,a,n);var o=Ei();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(o=!0,Pa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Mo(t),a.updater=Go,t.stateNode=a,a._reactInternals=t,qo(t,r,e,n),t=js(null,t,r,!0,o,n)):(t.tag=0,oo&&o&&to(t),ks(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(r),e=go(r,e),a){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=_s(null,t,r,go(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Is(e,t,r,a=t.elementType===r?a:go(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:go(r,a),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Oo(e,t),zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=ds(Error(i(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=ds(Error(i(424)),t));break e}for(ao=la(t.stateNode.containerInfo.firstChild),ro=t,oo=!0,io=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mo(),r===a){t=Zs(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 5:return si(t),null===e&&lo(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,ra(r,a)?s=null:null!==o&&ra(r,o)&&(t.flags|=32),Cs(e,t),ks(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return zs(e,t,n);case 4:return oi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):ks(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:go(r,a),n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ca(bo,r._currentValue),r._currentValue=s,null!==o)if(ur(o.value,s)){if(o.children===a.children&&!ja.current){t=Zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Lo(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),To(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),To(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ks(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Eo(t,n),r=r(a=Co(a)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return a=go(r=t.type,t.pendingProps),_s(e,t,r,a=go(r.type,a),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:go(r,a),Hs(e,t),t.tag=1,Ma(r)?(e=!0,Pa(t)):e=!1,Eo(t,n),Ho(t,r,a),qo(t,r,a,n),js(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function el(){}function tl(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Zc(i);s.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Zc(i);o.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",el);return e._reactRootContainer=i,e[ma]=i.current,Gr(8===e.nodeType?e.parentNode:e),fc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Zc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",el);return e._reactRootContainer=u,e[ma]=u.current,Gr(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,u,n,r)})),u}(n,t,e,a,r);return Zc(i)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[ma]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(bt(t,1|n),oc(t,Je()),0===(6&ju)&&(Wu=Je()+500,Ga()))}break;case 13:fc((function(){var t=Ro(e,1);if(null!==t){var n=nc();ac(t,e,1,n)}})),Xc(e,1)}},St=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)ac(t,e,134217728,nc());Xc(e,134217728)}},_t=function(e){if(13===e.tag){var t=rc(e),n=Ro(e,t);if(null!==n)ac(n,e,t,nc());Xc(e,t)}},Tt=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(i(90));X(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Ne=dc,je=fc;var nl={usingClientEntryPoint:!1,Events:[xa,wa,ka,Ce,Ie,dc]},rl={findFiberByHostInstance:ba,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},al={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{ot=ol.inject(al),it=ol}catch(de){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nl,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var n=!1,r="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,a),e[ma]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Yc(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},n.flushSync=function(e){return fc(e)},n.hydrate=function(e,t,n){if(!$c(t))throw Error(i(200));return tl(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,o,s),e[ma]=t.current,Gr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Qc(t)},n.render=function(e,t,n){if(!$c(t))throw Error(i(200));return tl(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!$c(e))throw Error(i(40));return!!e._reactRootContainer&&(fc((function(){tl(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},n.unstable_batchedUpdates=dc,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return tl(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var x=b.prototype=new g;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!_.hasOwnProperty(a)&&(o[a]=t[a]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===o[a]&&(o[a]=u[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===o?"."+I(u,0):o,w(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),N(i,t,a,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(u=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var l=o+I(s=e[c],c);u+=N(s,t,a,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,a,l=o+I(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function j(e,t,n){if(null==e)return e;var r=[],a=0;return N(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},M={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(M){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new j(r||[]);return a(i,"_invoke",{value:E(e,n,s)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function y(){}function g(){}function b(){}var x={};c(x,i,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(R([])));k&&k!==n&&r.call(k,i)&&(x=k);var S=b.prototype=y.prototype=Object.create(x);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(a,o,i,s){var u=d(e[a],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function E(e,t,n){var r=f;return function(a,o){if(r===h)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw o;return A()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=C(i,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=d(e,t,n);if("normal"===u.type){if(r=n.done?m:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=m,n.method="throw",n.arg=u.arg)}}}function C(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=d(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return g.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},_(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new T(l(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(S),c(S,u,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},2965:function(e,t,n){var r,a;r=function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,a=document.createElement("a"),o=1;o<e;o++)a.href=arguments[o],r=a.href,t.href=r;return n.removeChild(t),r}return e},void 0===(a="function"===typeof r?r.call(t,n,t,e):r)||(e.exports=a)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>o(u,n))c<a&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(v=!1,x(e),!m)if(null!==r(c))m=!0,M(k);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,g(E),E=-1),h=!0;var o=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var i=f.callback;if("function"===typeof i){f.callback=null,p=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),x(n)}else a(c);f=r(c)}if(null!==f)var u=!0;else{var d=r(l);null!==d&&O(w,d.startTime-n),u=!1}return u}finally{f=null,p=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,T=null,E=-1,C=5,I=-1;function N(){return!(t.unstable_now()-I<C)}function j(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?S():(_=!1,T=null)}}else _=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=j,S=function(){A.postMessage(null)}}else S=function(){y(j,0)};function M(e){T=e,_||(_=!0,S())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,M(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(v?(g(E),E=-1):v=!0,O(w,o-i))):(e.sortIndex=s,n(c,e),m||h||(m=!0,M(k))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),o=n(2132),i=n(890),s=n(4113),u=n(1725),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=o,c.xorshift7=i,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(t,n,r){var a;!function(o,i,s){var u,c=256,l=6,d="random",f=s.pow(c,l),p=s.pow(2,52),h=2*p,m=c-1;function v(t,n,r){var a=[],m=x(b((n=1==n?{entropy:!0}:n||{}).entropy?[t,w(i)]:null==t?function(){try{var t;return u&&(t=u.randomBytes)?t=t(c):(t=new Uint8Array(c),(o.crypto||o.msCrypto).getRandomValues(t)),w(t)}catch(e){var n=o.navigator,r=n&&n.plugins;return[+new Date,o,r,o.screen,w(i)]}}():t,3),a),v=new y(a),k=function(){for(var e=v.g(l),t=f,n=0;e<p;)e=(e+n)*c,t*=c,n=v.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return k.int32=function(){return 0|v.g(4)},k.quick=function(){return v.g(4)/4294967296},k.double=k,x(w(v.S),i),(n.pass||r||function(e,t,n,r){return r&&(r.S&&g(r,v),e.state=function(){return g(v,{})}),n?(s[d]=e,t):e})(k,m,"global"in n?n.global:this==s,n.state)}function y(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<c;)i[a]=a++;for(a=0;a<c;a++)i[a]=i[o=m&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=m&a+1],n=n*c+i[m&(i[a]=i[o=m&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(c)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(t,n){var r,a=[],o=typeof t;if(n&&"object"==o)for(r in t)try{a.push(b(t[r],n-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}function x(e,t){for(var n,r=e+"",a=0;a<r.length;)t[m&a]=m&(n^=19*t[m&a])+r.charCodeAt(a++);return w(t)}function w(e){return String.fromCharCode.apply(0,e)}if(x(s.random(),i),t.exports){t.exports=v;try{u=r(5042)}catch(k){}}else void 0===(a=function(){return v}.call(n,r,n,t))||(t.exports=a)}("undefined"!==typeof self?self:this,[],Math)},1643:function(e,t,n){var r=n(7061).default,a=n(7156).default,o=n(8083),i=function(){var e=a(r().mark((function e(t,n,i){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i);case 2:return s=e.sent,e.next=5,s.loadLanguage(n);case 5:return e.next=7,s.initialize(n);case 7:return e.abrupt("return",s.recognize(t).finally(a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.terminate();case 2:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),s=function(){var e=a(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n);case 2:return i=e.sent,e.next=5,i.loadLanguage("osd");case 5:return e.next=7,i.initialize("osd");case 7:return e.abrupt("return",i.detect(t).finally(a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.terminate();case 2:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.exports={recognize:i,detect:s}},3475:function(e){e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},2039:function(e){e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},7397:function(e,t,n){var r=n(3475);e.exports={defaultOEM:r.DEFAULT}},1139:function(e){e.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:function(){}}},6982:function(e){e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},638:function(e,t,n){var r=n(2709),a=0;e.exports=function(e){var t=e.id,n=e.action,o=e.payload,i=void 0===o?{}:o,s=t;return"undefined"===typeof s&&(s=r("Job",a),a+=1),{id:s,action:n,payload:i}}},2086:function(e,t,n){var r=n(7061).default,a=n(861).default,o=n(7156).default,i=this,s=n(638),u=n(287).log,c=n(2709),l=0;e.exports=function(){var e=c("Scheduler",l),t={},n={},d=[];l+=1;var f=function(){return Object.keys(t).length},p=function(){if(0!==d.length)for(var e=Object.keys(t),r=0;r<e.length;r+=1)if("undefined"===typeof n[e[r]]){d[0](t[e[r]]);break}},h=function(t,c){return new Promise((function(l,f){var h=s({action:t,payload:c});d.push(function(){var e=o(r().mark((function e(o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.shift(),n[o.id]=h,e.prev=2,e.t0=l,e.next=6,o[t].apply(i,[].concat(a(c),[h.id]));case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),f(e.t2);case 13:return e.prev=13,delete n[o.id],p(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t){return e.apply(this,arguments)}}()),u("[".concat(e,"]: Add ").concat(h.id," to JobQueue")),u("[".concat(e,"]: JobQueue length=").concat(d.length)),p()}))},m=function(){var t=o(r().mark((function t(n){var a,o,i,s=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==f()){t.next=2;break}throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));case 2:for(a=s.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=s[i];return t.abrupt("return",h(n,o));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=o(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(t).forEach(function(){var e=o(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[n].terminate();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d=[];case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addWorker:function(n){return t[n.id]=n,u("[".concat(e,"]: Add ").concat(n.id)),u("[".concat(e,"]: Number of workers=").concat(f())),p(),n.id},addJob:m,terminate:v,getQueueLen:function(){return d.length},getNumWorkers:f}}},8083:function(e,t,n){var r=n(7061).default,a=n(2122).default,o=n(215).default,i=n(7156).default,s=["logger","errorHandler"],u=n(6220),c=n(5906),l=n(638),d=n(287).log,f=n(2709),p=n(7397).defaultOEM,h=n(1516),m=h.defaultOptions,v=h.spawnWorker,y=h.terminateWorker,g=h.onMessage,b=h.loadImage,x=h.send,w=0;e.exports=i(r().mark((function e(){var t,n,h,k,S,_,T,E,C,I,N,j,R,A,M,O,L,D,P,F,z,B,U,V,G,W,H,Z,q,X,K=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K.length>0&&void 0!==K[0]?K[0]:{},n=f("Worker",w),h=u(a(a({},m),t)),k=h.logger,S=h.errorHandler,_=o(h,s),T={},E={},N=new Promise((function(e,t){I=e,C=t})),j=function(e){C(e.message)},(R=v(_)).onerror=j,w+=1,A=function(e,t){T[e]=t},M=function(e,t){E[e]=t},O=function(e){var t=e.id,r=e.action,a=e.payload;return new Promise((function(e,o){d("[".concat(n,"]: Start ").concat(t,", action=").concat(r)),A(r,e),M(r,o),x(R,{workerId:n,jobId:t,action:r,payload:a})}))},L=function(){return console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)")},D=function(e){return O(l({id:e,action:"load",payload:{options:_}}))},P=function(e,t,n){return O(l({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}}))},F=function(e,t){return O(l({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}}))},z=function(e,t){return O(l({id:t,action:"FS",payload:{method:"unlink",args:[e]}}))},B=function(e,t,n){return O(l({id:n,action:"FS",payload:{method:e,args:t}}))},U=function(){return O(l({id:arguments.length>1?arguments[1]:void 0,action:"loadLanguage",payload:{langs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",options:_}}))},V=function(){return O(l({id:arguments.length>3?arguments[3]:void 0,action:"initialize",payload:{langs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",oem:arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,config:arguments.length>2?arguments[2]:void 0}}))},G=function(){return O(l({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},W=function(){var e=i(r().mark((function e(t){var n,a,o,i=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=i.length>2&&void 0!==i[2]?i[2]:{blocks:!0,text:!0,hocr:!0,tsv:!0},o=i.length>3?i[3]:void 0,e.t0=O,e.t1=l,e.t2=o,e.next=8,b(t);case 8:return e.t3=e.sent,e.t4=n,e.t5=a,e.t6={image:e.t3,options:e.t4,output:e.t5},e.t7={id:e.t2,action:"recognize",payload:e.t6},e.t8=(0,e.t1)(e.t7),e.abrupt("return",(0,e.t0)(e.t8));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),O(l({id:n,action:"getPDF",payload:{title:e,textonly:t}}))},Z=function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.t1=l,e.t2=n,e.next=5,b(t);case 5:return e.t3=e.sent,e.t4={image:e.t3},e.t5={id:e.t2,action:"detect",payload:e.t4},e.t6=(0,e.t1)(e.t5),e.abrupt("return",(0,e.t0)(e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==R&&(y(R),R=null),e.abrupt("return",Promise.resolve());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g(R,(function(e){var t=e.workerId,n=e.jobId,r=e.status,o=e.action,i=e.data;if("resolve"===r){d("[".concat(t,"]: Complete ").concat(n));var s=i;"recognize"===o?s=c(i):"getPDF"===o&&(s=Array.from(a(a({},i),{},{length:Object.keys(i).length}))),T[o]({jobId:n,data:s})}else if("reject"===r){if(E[o](i),"load"===o&&C(i),!S)throw Error(i);S(i)}else"progress"===r&&k(a(a({},i),{},{userJobId:n}))})),X={id:n,worker:R,setResolve:A,setReject:M,load:L,writeText:P,readText:F,removeFile:z,FS:B,loadLanguage:U,initialize:V,setParameters:G,recognize:W,getPDF:H,detect:Z,terminate:q},D().then((function(){return I(X)})).catch((function(){})),e.abrupt("return",N);case 30:case"end":return e.stop()}}),e)})))},1362:function(e,t,n){var r=n(2122).default;n(9727);var a=n(2086),o=n(8083),i=n(1643),s=n(6982),u=n(3475),c=n(2039),l=n(287).setLogging;e.exports=r({languages:s,OEM:u,PSM:c,createScheduler:a,createWorker:o,setLogging:l},i)},5906:function(e,t,n){var r=n(2122).default;e.exports=function(e){var t=[],n=[],a=[],o=[],i=[];return e.blocks&&e.blocks.forEach((function(s){s.paragraphs.forEach((function(t){t.lines.forEach((function(n){n.words.forEach((function(a){a.symbols.forEach((function(o){i.push(r(r({},o),{},{page:e,block:s,paragraph:t,line:n,word:a}))})),o.push(r(r({},a),{},{page:e,block:s,paragraph:t,line:n}))})),a.push(r(r({},n),{},{page:e,block:s,paragraph:t}))})),n.push(r(r({},t),{},{page:e,block:s}))})),t.push(r(r({},s),{},{page:e}))})),r(r({},e),{},{blocks:t,paragraphs:n,lines:a,words:o,symbols:i})}},7291:function(e,t,n){var r=n(2193);e.exports=function(e){var t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":r()?t.type="electron":"object"===typeof window?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},2709:function(e){e.exports=function(e,t){return"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))}},287:function(e,t){var n=this,r=!1;t.logging=r,t.setLogging=function(e){r=e},t.log=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r?console.log.apply(n,t):null}},6220:function(e,t,n){var r=n(2122).default,a="browser"===n(7291)("type")?n(2965):function(e){return e};e.exports=function(e){var t=r({},e);return["corePath","workerPath","langPath"].forEach((function(n){e[n]&&(t[n]=a(t[n]))})),t}},2993:function(e,t,n){var r=n(2122).default,a=n(2965),o=n(4547).version,i=n(1139);e.exports=r(r({},i),{},{workerPath:"undefined"!==typeof process&&"development"==={NODE_ENV:"production",PUBLIC_URL:"/patient",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TESS_ENV?a("/dist/worker.dev.js?nocache=".concat(Math.random().toString(36).slice(3))):"https://unpkg.com/tesseract.js@v".concat(o,"/dist/worker.min.js"),corePath:null})},1516:function(e,t,n){var r=n(2993),a=n(778),o=n(6821),i=n(3183),s=n(3766),u=n(1752);e.exports={defaultOptions:r,spawnWorker:a,terminateWorker:o,onMessage:i,send:s,loadImage:u}},1752:function(e,t,n){var r=n(7061).default,a=n(7156).default,o=n(2965),i=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){var t=e.target.error.code;n(Error("File could not be read! Code=".concat(t)))},r.readAsArrayBuffer(e)}))},s=function(){var e=a(r().mark((function e(t){var n,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,"undefined"!==typeof t){e.next=3;break}return e.abrupt("return","undefined");case 3:if("string"!==typeof t){e.next=16;break}if(!/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)){e.next=8;break}n=atob(t.split(",")[1]).split("").map((function(e){return e.charCodeAt(0)})),e.next=14;break;case 8:return e.next=10,fetch(o(t));case 10:return u=e.sent,e.next=13,u.arrayBuffer();case 13:n=e.sent;case 14:e.next=34;break;case 16:if(!(t instanceof HTMLElement)){e.next=30;break}if("IMG"!==t.tagName){e.next=21;break}return e.next=20,s(t.src);case 20:n=e.sent;case 21:if("VIDEO"!==t.tagName){e.next=25;break}return e.next=24,s(t.poster);case 24:n=e.sent;case 25:if("CANVAS"!==t.tagName){e.next=28;break}return e.next=28,new Promise((function(e){t.toBlob(function(){var t=a(r().mark((function t(a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(a);case 2:n=t.sent,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 28:e.next=34;break;case 30:if(!(t instanceof File||t instanceof Blob)){e.next=34;break}return e.next=33,i(t);case 33:n=e.sent;case 34:return e.abrupt("return",new Uint8Array(n));case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports=s},3183:function(e){e.exports=function(e,t){e.onmessage=function(e){var n=e.data;t(n)}}},3766:function(e,t,n){var r=n(7061).default,a=n(7156).default;e.exports=function(){var e=a(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.postMessage(n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},778:function(e){e.exports=function(e){var t,n=e.workerPath,r=e.workerBlobURL;if(Blob&&URL&&r){var a=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(a))}else t=new Worker(n);return t}},6821:function(e){e.exports=function(e){e.terminate()}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function s(e){t(i,a,o,s,u,"next",e)}function u(e){t(i,a,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,n){var r=n(8416);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},215:function(e,t,n){var r=n(7071);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(R){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new I(r||[]);return i(o,"_invoke",{value:_(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=f;var h={};function m(){}function v(){}function y(){}var g={};d(g,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(N([])));x&&x!==n&&o.call(x,u)&&(g=x);var w=y.prototype=m.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,i,s,u){var c=p(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return j()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=T(i,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=p(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return v.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(S.prototype),d(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new S(f(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),d(w,l,"Generator"),d(w,u,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),a=n(9498),o=n(6116),i=n(2281);e.exports=function(e){return r(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,a=n(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var a=n(181),o=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(9199),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},4547:function(e){"use strict";e.exports=JSON.parse('{"name":"tesseract.js","version":"4.0.2","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.18.7","@babel/preset-env":"^7.18.7","@rollup/plugin-commonjs":"^22.0.2","acorn":"^6.4.0","babel-loader":"^8.2.0","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^10.0.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^2.7.1","rollup":"^2.79.0","wait-on":"^3.3.0","webpack":"^5.74.0","webpack-bundle-analyzer":"^4.6.0","webpack-cli":"^4.10.0","webpack-dev-middleware":"^5.3.3"},"dependencies":{"babel-eslint":"^10.1.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^4.0.2","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){i[e]=function(){return n[e]}}));return i.default=function(){return n},r.d(o,i),o}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"static/js/"+e+".ddad04e8.chunk.js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="patient:";r.l=function(n,a,o,i){if(e[n])e[n].push(a);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=n),e[n]=[a];var f=function(t,r){s.onerror=s.onload=null,clearTimeout(p);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/patient/",function(){var e={179:0};r.f.j=function(t,n){var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));n.push(a[2]=o);var i=r.p+r.u(t),s=new Error;r.l(i,(function(n){if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var a,o,i=n[0],s=n[1],u=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(u)u(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkpatient=self.webpackChunkpatient||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var t={};r.r(t),r.d(t,{arraysEqual:function(){return Fr},assert:function(){return Mr},assertNonNegativeIntegerDimensions:function(){return ha},assertNonNull:function(){return Lr},assertShapesMatch:function(){return Or},bytesFromStringArray:function(){return ea},bytesPerElement:function(){return $r},checkConversionForErrors:function(){return Yr},clamp:function(){return Cr},computeStrides:function(){return sa},convertBackendValuesAndArrayBuffer:function(){return la},createScalarValue:function(){return pu},createShuffledIndices:function(){return Vr},decodeString:function(){return gu},distSquared:function(){return Ar},encodeString:function(){return yu},fetch:function(){return vu},fingerPrint64:function(){return fu},flatten:function(){return xu},getArrayFromDType:function(){return Kr},getTypedArrayFromDType:function(){return Xr},hasEncodingLoss:function(){return Jr},hexToLong:function(){return tu},indexToLoc:function(){return va},inferDtype:function(){return aa},inferFromImplicitShape:function(){return Hr},isBoolean:function(){return na},isFunction:function(){return oa},isInt:function(){return zr},isNumber:function(){return ra},isPromise:function(){return ya},isScalarShape:function(){return Pr},isString:function(){return ta},isTypedArray:function(){return bu},isValidDtype:function(){return Qr},locToIndex:function(){return ma},makeOnesTypedArray:function(){return da},makeZerosNestedTypedArray:function(){return pa},makeZerosTypedArray:function(){return fa},nearestDivisor:function(){return ia},nearestLargerEven:function(){return Ir},now:function(){return mu},parseAxisParam:function(){return Zr},randUniform:function(){return Rr},repeatedTry:function(){return Wr},rightPad:function(){return Gr},shuffle:function(){return Tr},shuffleCombo:function(){return Er},sizeFromShape:function(){return Dr},sizeToSquarishShape:function(){return Ur},squeezeShape:function(){return qr},sum:function(){return jr},swap:function(){return Nr},tanh:function(){return Br},toNestedArray:function(){return ca},toTypedArray:function(){return hu}});var n={};r.r(n),r.d(n,{assertTypesMatch:function(){return Yu},getTensorsInContainer:function(){return Ju},isTensorInList:function(){return Qu},makeTypesMatch:function(){return Ku}});var a={};r.r(a),r.d(a,{isBrowser:function(){return cc},isMobile:function(){return uc},mockIsMobile:function(){return sc}});var o={};r.r(o),r.d(o,{Serializable:function(){return md},SerializationMap:function(){return vd},registerClass:function(){return yd}});var i={};r.r(i),r.d(i,{assertAndGetBroadcastShape:function(){return Id},getBroadcastDims:function(){return Ed},getReductionAxes:function(){return Cd}});var s={};r.r(s),r.d(s,{browserFiles:function(){return Ud},browserHTTPRequest:function(){return $d},concatenateArrayBuffers:function(){return Rc},copyModel:function(){return wl},decodeWeights:function(){return Tc},encodeWeights:function(){return Sc},fromMemory:function(){return rf},fromMemorySync:function(){return af},getLoadHandlers:function(){return Wc},getModelArtifactsForJSON:function(){return Lc},getModelArtifactsForJSONSync:function(){return Oc},getModelArtifactsInfoForJSON:function(){return Pc},getSaveHandlers:function(){return Gc},getWeightSpecs:function(){return Fc},http:function(){return Jd},isHTTPScheme:function(){return Yd},listModels:function(){return yl},loadWeights:function(){return Hd},moveModel:function(){return Sl},registerLoadRouter:function(){return Vc},registerSaveRouter:function(){return Uc},removeModel:function(){return bl},weightsLoaderFactory:function(){return qd},withSaveHandler:function(){return of},withSaveHandlerSync:function(){return sf}});var u={};r.r(u),r.d(u,{confusionMatrix:function(){return mf}});var c={};r.r(c),r.d(c,{fromPixels:function(){return Sf},fromPixelsAsync:function(){return bf},toPixels:function(){return wf}});var l={};r.r(l),r.d(l,{prepareAndValidate:function(){return _f}});var d={};r.r(d),r.d(d,{calculateShapes:function(){return Cf},validateInput:function(){return Ef},validateUpdateShape:function(){return Tf}});var f={};r.r(f),r.d(f,{assertParamsValid:function(){return jf},computeFlatOffset:function(){return Gf},computeOutShape:function(){return Af},getNormalizedAxes:function(){return Df},isSliceContinous:function(){return Vf},maskToAxes:function(){return Rf},parseSliceParams:function(){return Wf},sliceInfo:function(){return Hf},startForAxis:function(){return Bf},startIndicesWithElidedDims:function(){return Pf},stopForAxis:function(){return Uf},stopIndicesWithElidedDims:function(){return Ff},stridesForAxis:function(){return zf},stridesWithElidedDims:function(){return Mf}});var p={};r.r(p),r.d(p,{TEST_EPSILON_FLOAT16:function(){return Xf},createVideoElement:function(){return op},encodeStrings:function(){return ap},expectArrayBuffersEqual:function(){return rp},expectArraysClose:function(){return Kf},expectArraysEqual:function(){return $f},expectNumbersClose:function(){return ep},expectPromiseToFail:function(){return Jf},expectValuesInRange:function(){return np},play:function(){return ip},testEpsilon:function(){return Yf}});var h={};r.r(h),r.d(h,{conv2d:function(){return fy},depthwiseConv2d:function(){return my},matMul:function(){return vy}});var m={};r.r(m),r.d(m,{collectGatherOpShapeInfo:function(){return Cb},computeOutShape:function(){return Eb},segOpComputeOptimalWindowSize:function(){return Tb}});var v={};r.r(v),r.d(v,{ERF_A1:function(){return Gg},ERF_A2:function(){return Wg},ERF_A3:function(){return Hg},ERF_A4:function(){return Zg},ERF_A5:function(){return qg},ERF_P:function(){return Vg},PARALLELIZE_THRESHOLD:function(){return Ag},RowPartitionType:function(){return hg},SELU_SCALE:function(){return Ug},SELU_SCALEALPHA:function(){return Bg},applyActivation:function(){return ly},assertAndGetBroadcastShape:function(){return Id},assertAxesAreInnerMostDims:function(){return Ah},assertParamsConsistent:function(){return Eg},assignToTypedArray:function(){return $g},axesAreInnerMostDims:function(){return Ih},calculateShapes:function(){return Cf},checkEinsumDimSizes:function(){return ub},checkPadOnDimRoundingMode:function(){return Dp},combineLocations:function(){return Nh},combineRaggedTensorToTensorShapes:function(){return Ig},complexWithEvenIndex:function(){return Yg},complexWithOddIndex:function(){return Qg},computeConv2DInfo:function(){return Tp},computeConv3DInfo:function(){return Ep},computeDefaultPad:function(){return Cp},computeDilation2DInfo:function(){return kp},computeOptimalWindowSize:function(){return Mg},computeOutAndReduceShapes:function(){return jh},computeOutShape:function(){return Cg},computePool2DInfo:function(){return Sp},computePool3DInfo:function(){return _p},convertConv2DDataFormat:function(){return Lp},decodeEinsumEquation:function(){return ib},eitherStridesOrDilationsAreOne:function(){return Mp},expandShapeToKeepDim:function(){return Rh},exponent:function(){return tb},exponents:function(){return eb},fromStringArrayToUint8:function(){return Nb},fromUint8ToStringArray:function(){return Ib},getAxesPermutation:function(){return Mh},getBroadcastDims:function(){return Ed},getComplexWithIndex:function(){return Jg},getEinsumComputePath:function(){return cb},getEinsumPermutation:function(){return sb},getFusedBiasGradient:function(){return cy},getFusedDyActivation:function(){return uy},getImageCenter:function(){return Og},getInnerMostAxes:function(){return Lh},getPermuted:function(){return Dg},getRaggedRank:function(){return jg},getReductionAxes:function(){return Cd},getReshaped:function(){return Lg},getReshapedPermuted:function(){return Pg},getRowPartitionTypesHelper:function(){return Ng},getSliceBeginCoords:function(){return Fg},getSliceSize:function(){return zg},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return pb},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return hb},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return mb},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return gb},getSparseReshapeInputOutputMismatchErrorMessage:function(){return xb},getSparseReshapeInputOutputMultipleErrorMessage:function(){return bb},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return vb},getSparseReshapeNegativeOutputDimErrorMessage:function(){return yb},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return _b},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return wb},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return kb},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Sb},getUndoAxesPermutation:function(){return Oh},isIdentityPermutation:function(){return lb},log:function(){return Us},mergeRealAndImagArrays:function(){return Xg},prepareAndValidate:function(){return _f},prepareSplitSize:function(){return fb},segment_util:function(){return m},shouldFuse:function(){return dy},slice_util:function(){return f},splitRealAndImagArrays:function(){return Kg},stridesOrDilationsArePositive:function(){return Op},tupleValuesAreOne:function(){return Ap},upcastType:function(){return qu},validateDefaultValueShape:function(){return Rg},validateInput:function(){return Ef},validateUpdateShape:function(){return Tf},warn:function(){return Bs}});var y={};r.r(y),r.d(y,{nonMaxSuppressionV3Impl:function(){return Ny},nonMaxSuppressionV4Impl:function(){return jy},nonMaxSuppressionV5Impl:function(){return Ry},whereImpl:function(){return qv}});var g={};r.r(g),r.d(g,{maxNorm:function(){return pS},minMaxNorm:function(){return vS},nonNeg:function(){return mS},unitNorm:function(){return hS}});var b={};r.r(b),r.d(b,{constant:function(){return bS},glorotNormal:function(){return ES},glorotUniform:function(){return TS},heNormal:function(){return CS},heUniform:function(){return IS},identity:function(){return SS},leCunNormal:function(){return NS},leCunUniform:function(){return jS},ones:function(){return gS},orthogonal:function(){return RS},randomNormal:function(){return wS},randomUniform:function(){return xS},truncatedNormal:function(){return kS},varianceScaling:function(){return _S},zeros:function(){return yS}});var x={};r.r(x),r.d(x,{Layer:function(){return Hk},RNN:function(){return dE},RNNCell:function(){return fE},activation:function(){return VC},add:function(){return QC},alphaDropout:function(){return UI},average:function(){return JC},averagePooling1d:function(){return sI},averagePooling2d:function(){return lI},averagePooling3d:function(){return pI},avgPool1d:function(){return uI},avgPool2d:function(){return dI},avgPool3d:function(){return hI},avgPooling1d:function(){return cI},avgPooling2d:function(){return fI},avgPooling3d:function(){return mI},batchNormalization:function(){return aI},bidirectional:function(){return MI},categoryEncoding:function(){return ZI},centerCrop:function(){return WI},concatenate:function(){return $C},conv1d:function(){return MC},conv2d:function(){return OC},conv2dTranspose:function(){return LC},conv3d:function(){return DC},conv3dTranspose:function(){return PC},convLstm2d:function(){return NI},convLstm2dCell:function(){return jI},cropping2D:function(){return zC},dense:function(){return GC},depthwiseConv2d:function(){return UC},dot:function(){return rI},dropout:function(){return WC},elu:function(){return CC},embedding:function(){return YC},flatten:function(){return ZC},gaussianDropout:function(){return BI},gaussianNoise:function(){return zI},globalAveragePooling1d:function(){return vI},globalAveragePooling2d:function(){return yI},globalMaxPool1d:function(){return LI},globalMaxPool2d:function(){return DI},globalMaxPooling1d:function(){return gI},globalMaxPooling2d:function(){return bI},gru:function(){return SI},gruCell:function(){return _I},input:function(){return lT},inputLayer:function(){return EC},layerNormalization:function(){return oI},leakyReLU:function(){return NC},lstm:function(){return TI},lstmCell:function(){return EI},masking:function(){return VI},maxPool1d:function(){return PI},maxPool2d:function(){return FI},maxPooling1d:function(){return xI},maxPooling2d:function(){return wI},maxPooling3d:function(){return kI},maximum:function(){return eI},minimum:function(){return tI},multiply:function(){return nI},permute:function(){return KC},prelu:function(){return jC},reLU:function(){return IC},repeatVector:function(){return qC},rescaling:function(){return GI},reshape:function(){return XC},resizing:function(){return HI},rnn:function(){return RI},separableConv2d:function(){return FC},simpleRNN:function(){return CI},simpleRNNCell:function(){return II},softmax:function(){return RC},spatialDropout1d:function(){return HC},stackedRNNCells:function(){return AI},thresholdedReLU:function(){return AC},timeDistributed:function(){return OI},upSampling2d:function(){return BC},zeroPadding2d:function(){return iI}});var w={};r.r(w),r.d(w,{MAPE:function(){return rN},MSE:function(){return iN},binaryAccuracy:function(){return qI},binaryCrossentropy:function(){return XI},categoricalAccuracy:function(){return YI},categoricalCrossentropy:function(){return QI},cosineProximity:function(){return eN},mape:function(){return aN},meanAbsoluteError:function(){return tN},meanAbsolutePercentageError:function(){return nN},meanSquaredError:function(){return oN},mse:function(){return sN},precision:function(){return JI},recall:function(){return $I},sparseCategoricalAccuracy:function(){return KI}});var k={};r.r(k),r.d(k,{modelFromJSON:function(){return eT}});var S={};r.r(S),r.d(S,{l1:function(){return cN},l1l2:function(){return uN},l2:function(){return lN}});var _={};r.r(_),r.d(_,{json:function(){return NN}});var T={};r.r(T),r.d(T,{json:function(){return jN}});var E={};r.r(E),r.d(E,{json:function(){return RN}});var C={};r.r(C),r.d(C,{json:function(){return AN}});var I={};r.r(I),r.d(I,{json:function(){return MN}});var N={};r.r(N),r.d(N,{json:function(){return ON}});var j={};r.r(j),r.d(j,{json:function(){return LN}});var R={};r.r(R),r.d(R,{json:function(){return DN}});var A={};r.r(A),r.d(A,{json:function(){return PN}});var M={};r.r(M),r.d(M,{json:function(){return FN}});var O={};r.r(O),r.d(O,{json:function(){return zN}});var L={};r.r(L),r.d(L,{json:function(){return BN}});var D={};r.r(D),r.d(D,{json:function(){return UN}});var P={};r.r(P),r.d(P,{json:function(){return VN}});var F={};r.r(F),r.d(F,{json:function(){return GN}});var z={};r.r(z),r.d(z,{json:function(){return WN}});var B={};r.r(B),r.d(B,{json:function(){return HN}});var U={};r.r(U),r.d(U,{json:function(){return ZN}});var V={};r.r(V),r.d(V,{json:function(){return qN}});var G={};r.r(G),r.d(G,{OP_SCOPE_SUFFIX:function(){return vc},abs:function(){return Td},acos:function(){return lp},acosh:function(){return dp},add:function(){return ed},addN:function(){return fp},all:function(){return pp},any:function(){return hp},argMax:function(){return mp},argMin:function(){return vp},asin:function(){return yp},asinh:function(){return gp},atan:function(){return bp},atan2:function(){return xp},atanh:function(){return wp},avgPool:function(){return Fp},avgPool3d:function(){return zp},basicLSTMCell:function(){return Wp},batchNorm:function(){return Zp},batchNorm2d:function(){return qp},batchNorm3d:function(){return Xp},batchNorm4d:function(){return Kp},batchToSpaceND:function(){return Hp},bincount:function(){return Yp},booleanMaskAsync:function(){return Qv},broadcastArgs:function(){return Qp},broadcastTo:function(){return Jp},buffer:function(){return Nl},cast:function(){return jl},ceil:function(){return $p},clipByValue:function(){return eh},clone:function(){return Rl},complex:function(){return gc},concat:function(){return Bp},concat1d:function(){return th},concat2d:function(){return nh},concat3d:function(){return rh},concat4d:function(){return ah},conv1d:function(){return ih},conv2d:function(){return oh},conv2dTranspose:function(){return uh},conv3d:function(){return ch},conv3dTranspose:function(){return dh},cos:function(){return fh},cosh:function(){return ph},cosineWindow:function(){return ay},cumprod:function(){return hh},cumsum:function(){return mh},denseBincount:function(){return vh},depthToSpace:function(){return yh},depthwiseConv2d:function(){return gh},diag:function(){return bh},dilation2d:function(){return xh},div:function(){return nd},divNoNan:function(){return Sh},dot:function(){return _h},dropout:function(){return ny},einsum:function(){return Th},elu:function(){return Eh},enclosingPowerOfTwo:function(){return ry},equal:function(){return wh},erf:function(){return Ch},euclideanNorm:function(){return Uh},exp:function(){return Vh},expandDims:function(){return Gh},expm1:function(){return Wh},eye:function(){return Zh},fft:function(){return _v},fill:function(){return xd},floor:function(){return qh},floorDiv:function(){return td},fused:function(){return h},gather:function(){return Xh},gatherND:function(){return ty},greater:function(){return Kh},greaterEqual:function(){return Yh},ifft:function(){return Tv},imag:function(){return lf},image:function(){return gg},inTopKAsync:function(){return iy},irfft:function(){return Ev},isFinite:function(){return Qh},isInf:function(){return Jh},isNaN:function(){return $h},leakyRelu:function(){return em},less:function(){return tm},lessEqual:function(){return nm},linalg:function(){return bg},linspace:function(){return rm},localResponseNormalization:function(){return am},log:function(){return om},log1p:function(){return im},logSigmoid:function(){return um},logSoftmax:function(){return cm},logSumExp:function(){return lm},logicalAnd:function(){return dm},logicalNot:function(){return fm},logicalOr:function(){return pm},logicalXor:function(){return hm},losses:function(){return xg},lowerBound:function(){return ym},matMul:function(){return uf},max:function(){return Dh},maxPool:function(){return gm},maxPool3d:function(){return bm},maxPoolWithArgmax:function(){return xm},maximum:function(){return Nd},mean:function(){return wm},meshgrid:function(){return _m},min:function(){return Ph},minimum:function(){return Tm},mirrorPad:function(){return Em},mod:function(){return Cm},moments:function(){return Im},movingAverage:function(){return Jv},mul:function(){return rd},multiRNNCell:function(){return Nm},multinomial:function(){return jm},neg:function(){return df},norm:function(){return Bh},notEqual:function(){return Rm},oneHot:function(){return cf},ones:function(){return Sm},onesLike:function(){return Am},op:function(){return yc},outerProduct:function(){return Mm},pad:function(){return Om},pad1d:function(){return Lm},pad2d:function(){return Dm},pad3d:function(){return Pm},pad4d:function(){return Fm},pool:function(){return Bm},pow:function(){return kd},prelu:function(){return Um},print:function(){return Al},prod:function(){return Vm},raggedGather:function(){return Gm},raggedRange:function(){return Wm},raggedTensorToTensor:function(){return Hm},rand:function(){return Zm},randomGamma:function(){return Qm},randomNormal:function(){return Jm},randomStandardNormal:function(){return $m},randomUniform:function(){return ev},range:function(){return tv},real:function(){return ff},reciprocal:function(){return nv},relu:function(){return rv},relu6:function(){return av},reshape:function(){return Pp},reverse:function(){return ov},reverse1d:function(){return iv},reverse2d:function(){return sv},reverse3d:function(){return uv},reverse4d:function(){return cv},rfft:function(){return Iv},round:function(){return lv},rsqrt:function(){return dv},scalar:function(){return hd},scatterND:function(){return $v},searchSorted:function(){return vm},selu:function(){return fv},separableConv2d:function(){return pv},setdiff1dAsync:function(){return mv},sigmoid:function(){return Up},sign:function(){return vv},signal:function(){return yg},sin:function(){return yv},sinh:function(){return gv},slice:function(){return Vp},slice1d:function(){return bv},slice2d:function(){return xv},slice3d:function(){return wv},slice4d:function(){return kv},softmax:function(){return Sv},softplus:function(){return sm},spaceToBatchND:function(){return zm},sparse:function(){return wg},sparseToDense:function(){return ey},spectral:function(){return vg},split:function(){return Cv},sqrt:function(){return ad},square:function(){return od},squaredDifference:function(){return Nv},squeeze:function(){return jv},stack:function(){return Rv},step:function(){return Av},stridedSlice:function(){return Mv},string:function(){return kg},sub:function(){return Sd},sum:function(){return Fh},tan:function(){return Ov},tanh:function(){return Gp},tensor:function(){return xc},tensor1d:function(){return Lv},tensor2d:function(){return Dv},tensor3d:function(){return vf},tensor4d:function(){return Pv},tensor5d:function(){return Fv},tensor6d:function(){return zv},tile:function(){return Hh},topk:function(){return Bv},transpose:function(){return pf},truncatedNormal:function(){return Uv},unique:function(){return Vv},unsortedSegmentSum:function(){return Gv},unstack:function(){return Wv},upperBound:function(){return Hv},variable:function(){return Zv},where:function(){return kh},whereAsync:function(){return Kv},zeros:function(){return km},zerosLike:function(){return id}});var W={};r.r(W),r.d(W,{CSVDataset:function(){return $R},Dataset:function(){return UR},FileDataSource:function(){return hA},TextLineDataset:function(){return ZR},URLDataSource:function(){return mA},array:function(){return GR},csv:function(){return vA},func:function(){return yA},generator:function(){return gA},microphone:function(){return wA},version_data:function(){return SA},webcam:function(){return bA},zip:function(){return WR}});var H={};r.r(H),r.d(H,{Abs:function(){return Ea},Acos:function(){return Ca},Acosh:function(){return Ia},AdadeltaOptimizer:function(){return bd},AdagradOptimizer:function(){return wd},AdamOptimizer:function(){return _d},AdamaxOptimizer:function(){return jd},Add:function(){return Na},AddN:function(){return ja},All:function(){return Ra},Any:function(){return Aa},ArgMax:function(){return Ma},ArgMin:function(){return Oa},Asin:function(){return La},Asinh:function(){return Da},Atan:function(){return Pa},Atan2:function(){return za},Atanh:function(){return Fa},AvgPool:function(){return Ba},AvgPool3D:function(){return Va},AvgPool3DGrad:function(){return Ga},AvgPoolGrad:function(){return Ua},BatchMatMul:function(){return Wa},BatchToSpaceND:function(){return Ha},Bincount:function(){return Za},BroadcastArgs:function(){return Xa},BroadcastTo:function(){return qa},Callback:function(){return dN},CallbackList:function(){return PS},Cast:function(){return Ka},Ceil:function(){return Ya},ClipByValue:function(){return Qa},Complex:function(){return Ja},ComplexAbs:function(){return $a},Concat:function(){return eo},Conv2D:function(){return to},Conv2DBackpropFilter:function(){return no},Conv2DBackpropInput:function(){return ro},Conv3D:function(){return ao},Conv3DBackpropFilterV2:function(){return oo},Conv3DBackpropInputV2:function(){return io},Cos:function(){return so},Cosh:function(){return uo},CropAndResize:function(){return fo},Cumprod:function(){return co},Cumsum:function(){return lo},CustomCallback:function(){return BS},DataStorage:function(){return kr},DenseBincount:function(){return po},DepthToSpace:function(){return ho},DepthwiseConv2dNative:function(){return mo},DepthwiseConv2dNativeBackpropFilter:function(){return vo},DepthwiseConv2dNativeBackpropInput:function(){return yo},Diag:function(){return go},Dilation2D:function(){return bo},Dilation2DBackpropFilter:function(){return wo},Dilation2DBackpropInput:function(){return xo},ENV:function(){return Sa},EarlyStopping:function(){return hN},Einsum:function(){return So},Elu:function(){return _o},EluGrad:function(){return To},Environment:function(){return ba},Equal:function(){return Co},Erf:function(){return Eo},Exp:function(){return Io},ExpandDims:function(){return No},Expm1:function(){return jo},FFT:function(){return Ro},Fill:function(){return Ao},FlipLeftRight:function(){return Mo},Floor:function(){return Oo},FloorDiv:function(){return Lo},FromPixels:function(){return Ls},FusedBatchNorm:function(){return Do},FusedConv2D:function(){return Fs},FusedDepthwiseConv2D:function(){return zs},GatherNd:function(){return Fo},GatherV2:function(){return Po},GraphModel:function(){return nR},Greater:function(){return zo},GreaterEqual:function(){return Bo},History:function(){return zS},IFFT:function(){return Vo},Identity:function(){return Uo},Imag:function(){return Go},InputSpec:function(){return Bk},IsFinite:function(){return Wo},IsInf:function(){return Ho},IsNan:function(){return Zo},KernelBackend:function(){return Sr},LRN:function(){return oi},LRNGrad:function(){return ii},LayerVariable:function(){return Pk},LayersModel:function(){return J_},LeakyRelu:function(){return qo},Less:function(){return Xo},LessEqual:function(){return Ko},LinSpace:function(){return Yo},Log:function(){return Qo},Log1p:function(){return Jo},LogSoftmax:function(){return ri},LogicalAnd:function(){return $o},LogicalNot:function(){return ei},LogicalOr:function(){return ti},LogicalXor:function(){return ni},LowerBound:function(){return ai},Max:function(){return si},MaxPool:function(){return ci},MaxPool3D:function(){return di},MaxPool3DGrad:function(){return fi},MaxPoolGrad:function(){return li},MaxPoolWithArgmax:function(){return pi},Maximum:function(){return ui},Mean:function(){return hi},Min:function(){return mi},Minimum:function(){return vi},MirrorPad:function(){return yi},Mod:function(){return gi},MomentumOptimizer:function(){return Ad},Multinomial:function(){return bi},Multiply:function(){return xi},Neg:function(){return wi},NonMaxSuppressionV3:function(){return Si},NonMaxSuppressionV4:function(){return _i},NonMaxSuppressionV5:function(){return Ti},NotEqual:function(){return ki},OP_SCOPE_SUFFIX:function(){return vc},OneHot:function(){return Ci},OnesLike:function(){return Ei},Optimizer:function(){return gd},OptimizerConstructors:function(){return cp},Pack:function(){return Ii},PadV2:function(){return Ni},Pool:function(){return ji},Pow:function(){return Ri},Prelu:function(){return Ai},Prod:function(){return Mi},RMSPropOptimizer:function(){return Md},RNN:function(){return dE},RaggedGather:function(){return Oi},RaggedRange:function(){return Li},RaggedTensorToTensor:function(){return Di},Range:function(){return Pi},Rank:function(){return Bu},Real:function(){return Fi},RealDiv:function(){return ko},Reciprocal:function(){return zi},Reduction:function(){return Qy},Relu:function(){return Bi},Relu6:function(){return Zi},Reshape:function(){return Ui},ResizeBilinear:function(){return Wi},ResizeBilinearGrad:function(){return Hi},ResizeNearestNeighbor:function(){return Vi},ResizeNearestNeighborGrad:function(){return Gi},Reverse:function(){return qi},RotateWithOffset:function(){return Ds},Round:function(){return Xi},Rsqrt:function(){return Ki},SGDOptimizer:function(){return Rd},ScatterNd:function(){return Yi},SearchSorted:function(){return Qi},Select:function(){return Ji},Selu:function(){return $i},Sequential:function(){return sT},Sigmoid:function(){return as},Sign:function(){return rs},Sin:function(){return ts},Sinh:function(){return ns},Slice:function(){return es},Softmax:function(){return ls},Softplus:function(){return os},SpaceToBatchND:function(){return us},SparseFillEmptyRows:function(){return ds},SparseReshape:function(){return fs},SparseSegmentMean:function(){return ps},SparseSegmentSum:function(){return hs},SparseToDense:function(){return ms},SplitV:function(){return cs},Sqrt:function(){return is},Square:function(){return ys},SquaredDifference:function(){return vs},Step:function(){return Os},StridedSlice:function(){return gs},StringNGrams:function(){return bs},StringSplit:function(){return xs},StringToHashBucketFast:function(){return ws},Sub:function(){return ks},Sum:function(){return ss},SymbolicTensor:function(){return Uk},Tan:function(){return Ss},Tanh:function(){return _s},Tensor:function(){return Fu},TensorBuffer:function(){return Lu},Tile:function(){return Ts},TopK:function(){return Es},Transform:function(){return Cs},Transpose:function(){return Is},Unique:function(){return Ns},Unpack:function(){return js},UnsortedSegmentSum:function(){return Rs},UpperBound:function(){return As},Variable:function(){return Hu},ZerosLike:function(){return Ms},_FusedMatMul:function(){return Ps},abs:function(){return Td},acos:function(){return lp},acosh:function(){return dp},add:function(){return ed},addN:function(){return fp},all:function(){return pp},any:function(){return hp},argMax:function(){return mp},argMin:function(){return vp},asin:function(){return yp},asinh:function(){return gp},atan:function(){return bp},atan2:function(){return xp},atanh:function(){return wp},avgPool:function(){return Fp},avgPool3d:function(){return zp},backend:function(){return Jl},backend_util:function(){return v},basicLSTMCell:function(){return Wp},batchNorm:function(){return Zp},batchNorm2d:function(){return qp},batchNorm3d:function(){return Xp},batchNorm4d:function(){return Kp},batchToSpaceND:function(){return Hp},bincount:function(){return Yp},booleanMaskAsync:function(){return Qv},broadcastArgs:function(){return Qp},broadcastTo:function(){return Jp},broadcast_util:function(){return i},browser:function(){return c},buffer:function(){return Nl},callbacks:function(){return yN},cast:function(){return jl},ceil:function(){return $p},clipByValue:function(){return eh},clone:function(){return Rl},complex:function(){return gc},concat:function(){return Bp},concat1d:function(){return th},concat2d:function(){return nh},concat3d:function(){return rh},concat4d:function(){return ah},constraints:function(){return g},conv1d:function(){return ih},conv2d:function(){return oh},conv2dTranspose:function(){return uh},conv3d:function(){return ch},conv3dTranspose:function(){return dh},copyRegisteredKernels:function(){return Qs},cos:function(){return fh},cosh:function(){return ph},cosineWindow:function(){return ay},cumprod:function(){return hh},cumsum:function(){return mh},customGrad:function(){return fd},data:function(){return W},denseBincount:function(){return vh},deprecationWarn:function(){return Dl},depthToSpace:function(){return yh},depthwiseConv2d:function(){return gh},deregisterOp:function(){return wN},device_util:function(){return a},diag:function(){return bh},dilation2d:function(){return xh},disableDeprecationWarnings:function(){return Ll},dispose:function(){return Vl},disposeVariables:function(){return Pl},div:function(){return nd},divNoNan:function(){return Sh},dot:function(){return _h},dropout:function(){return ny},einsum:function(){return Th},elu:function(){return Eh},enableDebugMode:function(){return Ol},enableProdMode:function(){return Ml},enclosingPowerOfTwo:function(){return ry},engine:function(){return Fl},env:function(){return wa},equal:function(){return wh},erf:function(){return Ch},euclideanNorm:function(){return Uh},exp:function(){return Vh},expandDims:function(){return Gh},expm1:function(){return Wh},eye:function(){return Zh},fft:function(){return _v},fill:function(){return xd},findBackend:function(){return Kl},findBackendFactory:function(){return Yl},floor:function(){return qh},floorDiv:function(){return td},fused:function(){return h},gather:function(){return Xh},gatherND:function(){return ty},gather_util:function(){return l},getBackend:function(){return ql},getGradient:function(){return Hs},getKernel:function(){return Ws},getKernelsForBackend:function(){return Zs},grad:function(){return sd},grads:function(){return ud},greater:function(){return Kh},greaterEqual:function(){return Yh},ifft:function(){return Tv},imag:function(){return lf},image:function(){return gg},inTopKAsync:function(){return iy},initializers:function(){return b},input:function(){return lT},io:function(){return s},irfft:function(){return Ev},isFinite:function(){return Qh},isInf:function(){return Jh},isNaN:function(){return $h},keep:function(){return Gl},kernel_impls:function(){return y},layers:function(){return x},leakyRelu:function(){return em},less:function(){return tm},lessEqual:function(){return nm},linalg:function(){return bg},linspace:function(){return rm},loadGraphModel:function(){return rR},loadGraphModelSync:function(){return oR},loadLayersModel:function(){return nT},localResponseNormalization:function(){return am},log:function(){return om},log1p:function(){return im},logSigmoid:function(){return um},logSoftmax:function(){return cm},logSumExp:function(){return lm},logicalAnd:function(){return dm},logicalNot:function(){return fm},logicalOr:function(){return pm},logicalXor:function(){return hm},losses:function(){return xg},lowerBound:function(){return ym},matMul:function(){return uf},math:function(){return u},max:function(){return Dh},maxPool:function(){return gm},maxPool3d:function(){return bm},maxPoolWithArgmax:function(){return xm},maximum:function(){return Nd},mean:function(){return wm},memory:function(){return zl},meshgrid:function(){return _m},metrics:function(){return w},min:function(){return Ph},minimum:function(){return Tm},mirrorPad:function(){return Em},mod:function(){return Cm},model:function(){return uT},models:function(){return k},moments:function(){return Im},movingAverage:function(){return Jv},mul:function(){return rd},multiRNNCell:function(){return Nm},multinomial:function(){return jm},neg:function(){return df},nextFrame:function(){return Tg},norm:function(){return Bh},notEqual:function(){return Rm},oneHot:function(){return cf},ones:function(){return Sm},onesLike:function(){return Am},op:function(){return yc},outerProduct:function(){return Mm},pad:function(){return Om},pad1d:function(){return Lm},pad2d:function(){return Dm},pad3d:function(){return Pm},pad4d:function(){return Fm},pool:function(){return Bm},pow:function(){return kd},prelu:function(){return Um},print:function(){return Al},prod:function(){return Vm},profile:function(){return Bl},raggedGather:function(){return Gm},raggedRange:function(){return Wm},raggedTensorToTensor:function(){return Hm},rand:function(){return Zm},randomGamma:function(){return Qm},randomNormal:function(){return Jm},randomStandardNormal:function(){return $m},randomUniform:function(){return ev},range:function(){return tv},ready:function(){return Zl},real:function(){return ff},reciprocal:function(){return nv},registerBackend:function(){return Ql},registerCallbackConstructor:function(){return dT},registerGradient:function(){return Xs},registerKernel:function(){return qs},registerOp:function(){return bN},regularizers:function(){return S},relu:function(){return rv},relu6:function(){return av},removeBackend:function(){return Xl},reshape:function(){return Pp},reverse:function(){return ov},reverse1d:function(){return iv},reverse2d:function(){return sv},reverse3d:function(){return uv},reverse4d:function(){return cv},rfft:function(){return Iv},round:function(){return lv},rsqrt:function(){return dv},scalar:function(){return hd},scatterND:function(){return $v},scatter_util:function(){return d},searchSorted:function(){return vm},selu:function(){return fv},separableConv2d:function(){return pv},sequential:function(){return cT},serialization:function(){return o},setBackend:function(){return Hl},setPlatform:function(){return $l},setdiff1dAsync:function(){return mv},sigmoid:function(){return Up},sign:function(){return vv},signal:function(){return yg},sin:function(){return yv},sinh:function(){return gv},slice:function(){return Vp},slice1d:function(){return bv},slice2d:function(){return xv},slice3d:function(){return wv},slice4d:function(){return kv},slice_util:function(){return f},softmax:function(){return Sv},softplus:function(){return sm},spaceToBatchND:function(){return zm},sparse:function(){return wg},sparseToDense:function(){return ey},spectral:function(){return vg},split:function(){return Cv},sqrt:function(){return ad},square:function(){return od},squaredDifference:function(){return Nv},squeeze:function(){return jv},stack:function(){return Rv},step:function(){return Av},stridedSlice:function(){return Mv},string:function(){return kg},sub:function(){return Sd},sum:function(){return Fh},sumOutType:function(){return Xu},tan:function(){return Ov},tanh:function(){return Gp},tensor:function(){return xc},tensor1d:function(){return Lv},tensor2d:function(){return Dv},tensor3d:function(){return vf},tensor4d:function(){return Pv},tensor5d:function(){return Fv},tensor6d:function(){return zv},tensor_util:function(){return n},test_util:function(){return p},tidy:function(){return Ul},tile:function(){return Hh},time:function(){return Wl},topk:function(){return Bv},train:function(){return Sg},transpose:function(){return pf},truncatedNormal:function(){return Uv},unique:function(){return Vv},unregisterGradient:function(){return Ys},unregisterKernel:function(){return Ks},unsortedSegmentSum:function(){return Gv},unstack:function(){return Wv},upcastType:function(){return qu},upperBound:function(){return Hv},util:function(){return t},valueAndGrad:function(){return cd},valueAndGrads:function(){return ld},variable:function(){return Zv},variableGrads:function(){return dd},version:function(){return LX},version_converter:function(){return sR},version_core:function(){return up},version_layers:function(){return T_},where:function(){return kh},whereAsync:function(){return Kv},zeros:function(){return km},zerosLike:function(){return id}});var Z=r(2791),q=r(1250),X=r(9439),K=r(7462),Y=r(3366),Q=r(8182),J=r(1125),$=r(104),ee=r(3433),te=r(2466),ne=r(7416),re=["sx"],ae=function(e){var t,n,r={systemProps:{},otherProps:{}},a=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:ne.Z;return Object.keys(e).forEach((function(t){a[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function oe(e){var t,n=e.sx,r=(0,Y.Z)(e,re),a=ae(r),o=a.systemProps,i=a.otherProps;return t=Array.isArray(n)?[o].concat((0,ee.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,te.P)(e)?(0,K.Z)({},o,e):o}:(0,K.Z)({},o,n),(0,K.Z)({},i,{sx:t})}var ie=r(886),se=r(184),ue=["className","component"];var ce=r(5902),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=e.defaultClassName,r=void 0===n?"MuiBox-root":n,a=e.generateClassName,o=(0,J.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})($.Z);return Z.forwardRef((function(e,n){var i=(0,ie.Z)(t),s=oe(e),u=s.className,c=s.component,l=void 0===c?"div":c,d=(0,Y.Z)(s,ue);return(0,se.jsx)(o,(0,K.Z)({as:l,ref:n,className:(0,Q.Z)(u,a?a(r):r),theme:i},d))}))}({defaultTheme:(0,r(1979).Z)(),defaultClassName:"MuiBox-root",generateClassName:ce.Z.generate}),de=le,fe=r(4419),pe=r(1402),he=r(6934),me=r(5878),ve=r(1217);function ye(e){return(0,ve.Z)("MuiStepper",e)}(0,me.Z)("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);var ge=r(4036),be=Z.createContext({});var xe=be,we=Z.createContext({});var ke=we;function Se(e){return(0,ve.Z)("MuiStepConnector",e)}(0,me.Z)("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);var _e=["className"],Te=(0,he.ZP)("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((function(e){var t=e.ownerState;return(0,K.Z)({flex:"1 1 auto"},"vertical"===t.orientation&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})})),Ee=(0,he.ZP)("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:function(e,t){var n=e.ownerState;return[t.line,t["line".concat((0,ge.Z)(n.orientation))]]}})((function(e){var t=e.ownerState,n=e.theme,r="light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600];return(0,K.Z)({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:r},"horizontal"===t.orientation&&{borderTopStyle:"solid",borderTopWidth:1},"vertical"===t.orientation&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})})),Ce=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiStepConnector"}),r=n.className,a=(0,Y.Z)(n,_e),o=Z.useContext(xe),i=o.alternativeLabel,s=o.orientation,u=void 0===s?"horizontal":s,c=Z.useContext(ke),l=c.active,d=c.disabled,f=c.completed,p=(0,K.Z)({},n,{alternativeLabel:i,orientation:u,active:l,completed:f,disabled:d}),h=function(e){var t=e.classes,n=e.orientation,r={root:["root",n,e.alternativeLabel&&"alternativeLabel",e.active&&"active",e.completed&&"completed",e.disabled&&"disabled"],line:["line","line".concat((0,ge.Z)(n))]};return(0,fe.Z)(r,Se,t)}(p);return(0,se.jsx)(Te,(0,K.Z)({className:(0,Q.Z)(h.root,r),ref:t,ownerState:p},a,{children:(0,se.jsx)(Ee,{className:h.line,ownerState:p})}))})),Ie=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],Ne=(0,he.ZP)("div",{name:"MuiStepper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})((function(e){var t=e.ownerState;return(0,K.Z)({display:"flex"},"horizontal"===t.orientation&&{flexDirection:"row",alignItems:"center"},"vertical"===t.orientation&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})})),je=(0,se.jsx)(Ce,{}),Re=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiStepper"}),r=n.activeStep,a=void 0===r?0:r,o=n.alternativeLabel,i=void 0!==o&&o,s=n.children,u=n.className,c=n.component,l=void 0===c?"div":c,d=n.connector,f=void 0===d?je:d,p=n.nonLinear,h=void 0!==p&&p,m=n.orientation,v=void 0===m?"horizontal":m,y=(0,Y.Z)(n,Ie),g=(0,K.Z)({},n,{alternativeLabel:i,orientation:v,component:l}),b=function(e){var t=e.orientation,n=e.alternativeLabel,r=e.classes,a={root:["root",t,n&&"alternativeLabel"]};return(0,fe.Z)(a,ye,r)}(g),x=Z.Children.toArray(s).filter(Boolean),w=x.map((function(e,t){return Z.cloneElement(e,(0,K.Z)({index:t,last:t+1===x.length},e.props))})),k=Z.useMemo((function(){return{activeStep:a,alternativeLabel:i,connector:f,nonLinear:h,orientation:v}}),[a,i,f,h,v]);return(0,se.jsx)(xe.Provider,{value:k,children:(0,se.jsx)(Ne,(0,K.Z)({as:l,ownerState:g,className:(0,Q.Z)(b.root,u),ref:t},y,{children:w}))})})),Ae=Re;function Me(e){return(0,ve.Z)("MuiStep",e)}(0,me.Z)("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);var Oe=["active","children","className","component","completed","disabled","expanded","index","last"],Le=(0,he.ZP)("div",{name:"MuiStep",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})((function(e){var t=e.ownerState;return(0,K.Z)({},"horizontal"===t.orientation&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})})),De=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiStep"}),r=n.active,a=n.children,o=n.className,i=n.component,s=void 0===i?"div":i,u=n.completed,c=n.disabled,l=n.expanded,d=void 0!==l&&l,f=n.index,p=n.last,h=(0,Y.Z)(n,Oe),m=Z.useContext(xe),v=m.activeStep,y=m.connector,g=m.alternativeLabel,b=m.orientation,x=m.nonLinear,w=void 0!==r&&r,k=void 0!==u&&u,S=void 0!==c&&c;v===f?w=void 0===r||r:!x&&v>f?k=void 0===u||u:!x&&v<f&&(S=void 0===c||c);var _=Z.useMemo((function(){return{index:f,last:p,expanded:d,icon:f+1,active:w,completed:k,disabled:S}}),[f,p,d,w,k,S]),T=(0,K.Z)({},n,{active:w,orientation:b,alternativeLabel:g,completed:k,disabled:S,expanded:d,component:s}),E=function(e){var t=e.classes,n={root:["root",e.orientation,e.alternativeLabel&&"alternativeLabel",e.completed&&"completed"]};return(0,fe.Z)(n,Me,t)}(T),C=(0,se.jsxs)(Le,(0,K.Z)({as:s,className:(0,Q.Z)(E.root,o),ref:t,ownerState:T},h,{children:[y&&g&&0!==f?y:null,a]}));return(0,se.jsx)(ke.Provider,{value:_,children:y&&!g&&0!==f?(0,se.jsxs)(Z.Fragment,{children:[y,C]}):C})})),Pe=r(4942),Fe=r(4223),ze=(0,Fe.Z)((0,se.jsx)("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Be=(0,Fe.Z)((0,se.jsx)("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),Ue=r(9259);function Ve(e){return(0,ve.Z)("MuiStepIcon",e)}var Ge,We=(0,me.Z)("MuiStepIcon",["root","active","completed","error","text"]),He=["active","className","completed","error","icon"],Ze=(0,he.ZP)(Ue.Z,{name:"MuiStepIcon",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,n=e.theme;return t={display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest}),color:(n.vars||n).palette.text.disabled},(0,Pe.Z)(t,"&.".concat(We.completed),{color:(n.vars||n).palette.primary.main}),(0,Pe.Z)(t,"&.".concat(We.active),{color:(n.vars||n).palette.primary.main}),(0,Pe.Z)(t,"&.".concat(We.error),{color:(n.vars||n).palette.error.main}),t})),qe=(0,he.ZP)("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:function(e,t){return t.text}})((function(e){var t=e.theme;return{fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}})),Xe=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiStepIcon"}),r=n.active,a=void 0!==r&&r,o=n.className,i=n.completed,s=void 0!==i&&i,u=n.error,c=void 0!==u&&u,l=n.icon,d=(0,Y.Z)(n,He),f=(0,K.Z)({},n,{active:a,completed:s,error:c}),p=function(e){var t=e.classes,n={root:["root",e.active&&"active",e.completed&&"completed",e.error&&"error"],text:["text"]};return(0,fe.Z)(n,Ve,t)}(f);if("number"===typeof l||"string"===typeof l){var h=(0,Q.Z)(o,p.root);return c?(0,se.jsx)(Ze,(0,K.Z)({as:Be,className:h,ref:t,ownerState:f},d)):s?(0,se.jsx)(Ze,(0,K.Z)({as:ze,className:h,ref:t,ownerState:f},d)):(0,se.jsxs)(Ze,(0,K.Z)({className:h,ref:t,ownerState:f},d,{children:[Ge||(Ge=(0,se.jsx)("circle",{cx:"12",cy:"12",r:"12"})),(0,se.jsx)(qe,{className:p.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:f,children:l})]}))}return l}));function Ke(e){return(0,ve.Z)("MuiStepLabel",e)}var Ye=(0,me.Z)("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Qe=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Je=(0,he.ZP)("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation]]}})((function(e){var t,n=e.ownerState;return(0,K.Z)((t={display:"flex",alignItems:"center"},(0,Pe.Z)(t,"&.".concat(Ye.alternativeLabel),{flexDirection:"column"}),(0,Pe.Z)(t,"&.".concat(Ye.disabled),{cursor:"default"}),t),"vertical"===n.orientation&&{textAlign:"left",padding:"8px 0"})})),$e=(0,he.ZP)("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:function(e,t){return t.label}})((function(e){var t,n=e.theme;return(0,K.Z)({},n.typography.body2,(t={display:"block",transition:n.transitions.create("color",{duration:n.transitions.duration.shortest})},(0,Pe.Z)(t,"&.".concat(Ye.active),{color:(n.vars||n).palette.text.primary,fontWeight:500}),(0,Pe.Z)(t,"&.".concat(Ye.completed),{color:(n.vars||n).palette.text.primary,fontWeight:500}),(0,Pe.Z)(t,"&.".concat(Ye.alternativeLabel),{marginTop:16}),(0,Pe.Z)(t,"&.".concat(Ye.error),{color:(n.vars||n).palette.error.main}),t))})),et=(0,he.ZP)("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:function(e,t){return t.iconContainer}})((function(){return(0,Pe.Z)({flexShrink:0,display:"flex",paddingRight:8},"&.".concat(Ye.alternativeLabel),{paddingRight:0})})),tt=(0,he.ZP)("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:function(e,t){return t.labelContainer}})((function(e){var t=e.theme;return(0,Pe.Z)({width:"100%",color:(t.vars||t).palette.text.secondary},"&.".concat(Ye.alternativeLabel),{textAlign:"center"})})),nt=Z.forwardRef((function(e,t){var n,r=(0,pe.Z)({props:e,name:"MuiStepLabel"}),a=r.children,o=r.className,i=r.componentsProps,s=void 0===i?{}:i,u=r.error,c=void 0!==u&&u,l=r.icon,d=r.optional,f=r.slotProps,p=void 0===f?{}:f,h=r.StepIconComponent,m=r.StepIconProps,v=(0,Y.Z)(r,Qe),y=Z.useContext(xe),g=y.alternativeLabel,b=y.orientation,x=Z.useContext(ke),w=x.active,k=x.disabled,S=x.completed,_=x.icon,T=l||_,E=h;T&&!E&&(E=Xe);var C=(0,K.Z)({},r,{active:w,alternativeLabel:g,completed:S,disabled:k,error:c,orientation:b}),I=function(e){var t=e.classes,n=e.orientation,r=e.active,a=e.completed,o=e.error,i=e.disabled,s=e.alternativeLabel,u={root:["root",n,o&&"error",i&&"disabled",s&&"alternativeLabel"],label:["label",r&&"active",a&&"completed",o&&"error",i&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",a&&"completed",o&&"error",i&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]};return(0,fe.Z)(u,Ke,t)}(C),N=null!=(n=p.label)?n:s.label;return(0,se.jsxs)(Je,(0,K.Z)({className:(0,Q.Z)(I.root,o),ref:t,ownerState:C},v,{children:[T||E?(0,se.jsx)(et,{className:I.iconContainer,ownerState:C,children:(0,se.jsx)(E,(0,K.Z)({completed:S,active:w,error:c,icon:T},m))}):null,(0,se.jsxs)(tt,{className:I.labelContainer,ownerState:C,children:[a?(0,se.jsx)($e,(0,K.Z)({ownerState:C},N,{className:(0,Q.Z)(I.label,null==N?void 0:N.className),children:a})):null,d]})]}))}));nt.muiName="StepLabel";var rt=nt;function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,at(e,t)}var it=r(4164),st=!1,ut=Z.createContext(null),ct="unmounted",lt="exited",dt="entering",ft="entered",pt="exiting",ht=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a=lt,r.appearStatus=dt):a=ft:a=t.unmountOnExit||t.mountOnEnter?ct:lt,r.state={status:a},r.nextCallback=null,r}ot(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ct?{status:lt}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==dt&&n!==ft&&(t=dt):n!==dt&&n!==ft||(t=pt)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===dt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:it.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===lt&&this.setState({status:ct})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[it.findDOMNode(this),r],o=a[0],i=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||st?this.safeSetState({status:ft},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:dt},(function(){t.props.onEntering(o,i),t.onTransitionEnd(u,(function(){t.safeSetState({status:ft},(function(){t.props.onEntered(o,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:it.findDOMNode(this);t&&!st?(this.props.onExit(r),this.safeSetState({status:pt},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:lt},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:lt},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:it.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],i=a[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ct)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Y.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return Z.createElement(ut.Provider,{value:null},"function"===typeof n?n(e,r):Z.cloneElement(Z.Children.only(n),r))},t}(Z.Component);function mt(){}ht.contextType=ut,ht.propTypes={},ht.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mt,onEntering:mt,onEntered:mt,onExit:mt,onExiting:mt,onExited:mt},ht.UNMOUNTED=ct,ht.EXITED=lt,ht.ENTERING=dt,ht.ENTERED=ft,ht.EXITING=pt;var vt=ht,yt=r(1314);function gt(e,t){var n,r,a=e.timeout,o=e.easing,i=e.style,s=void 0===i?{}:i;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof a?a:a[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}var bt=r(6482);var xt=r(4843);function wt(e){return(0,ve.Z)("MuiCollapse",e)}(0,me.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var kt=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],St=(0,he.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,K.Z)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})})),_t=(0,he.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:function(e,t){return t.wrapper}})((function(e){var t=e.ownerState;return(0,K.Z)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Tt=(0,he.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:function(e,t){return t.wrapperInner}})((function(e){var t=e.ownerState;return(0,K.Z)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})})),Et=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiCollapse"}),r=n.addEndListener,a=n.children,o=n.className,i=n.collapsedSize,s=void 0===i?"0px":i,u=n.component,c=n.easing,l=n.in,d=n.onEnter,f=n.onEntered,p=n.onEntering,h=n.onExit,m=n.onExited,v=n.onExiting,y=n.orientation,g=void 0===y?"vertical":y,b=n.style,x=n.timeout,w=void 0===x?yt.x9.standard:x,k=n.TransitionComponent,S=void 0===k?vt:k,_=(0,Y.Z)(n,kt),T=(0,K.Z)({},n,{orientation:g,collapsedSize:s}),E=function(e){var t=e.orientation,n=e.classes,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,fe.Z)(r,wt,n)}(T),C=(0,ie.Z)(bt.Z),I=Z.useRef(),N=Z.useRef(null),j=Z.useRef(),R="number"===typeof s?"".concat(s,"px"):s,A="horizontal"===g,M=A?"width":"height";Z.useEffect((function(){return function(){clearTimeout(I.current)}}),[]);var O=Z.useRef(null),L=(0,xt.Z)(t,O),D=function(e){return function(t){if(e){var n=O.current;void 0===t?e(n):e(n,t)}}},P=function(){return N.current?N.current[A?"clientWidth":"clientHeight"]:0},F=D((function(e,t){N.current&&A&&(N.current.style.position="absolute"),e.style[M]=R,d&&d(e,t)})),z=D((function(e,t){var n=P();N.current&&A&&(N.current.style.position="");var r=gt({style:b,timeout:w,easing:c},{mode:"enter"}),a=r.duration,o=r.easing;if("auto"===w){var i=C.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(i,"ms"),j.current=i}else e.style.transitionDuration="string"===typeof a?a:"".concat(a,"ms");e.style[M]="".concat(n,"px"),e.style.transitionTimingFunction=o,p&&p(e,t)})),B=D((function(e,t){e.style[M]="auto",f&&f(e,t)})),U=D((function(e){e.style[M]="".concat(P(),"px"),h&&h(e)})),V=D(m),G=D((function(e){var t=P(),n=gt({style:b,timeout:w,easing:c},{mode:"exit"}),r=n.duration,a=n.easing;if("auto"===w){var o=C.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(o,"ms"),j.current=o}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[M]=R,e.style.transitionTimingFunction=a,v&&v(e)}));return(0,se.jsx)(S,(0,K.Z)({in:l,onEnter:F,onEntered:B,onEntering:z,onExit:U,onExited:V,onExiting:G,addEndListener:function(e){"auto"===w&&(I.current=setTimeout(e,j.current||0)),r&&r(O.current,e)},nodeRef:O,timeout:"auto"===w?null:w},_,{children:function(e,t){return(0,se.jsx)(St,(0,K.Z)({as:u,className:(0,Q.Z)(E.root,o,{entered:E.entered,exited:!l&&"0px"===R&&E.hidden}[e]),style:(0,K.Z)((0,Pe.Z)({},A?"minWidth":"minHeight",R),b),ownerState:(0,K.Z)({},T,{state:e}),ref:L},t,{children:(0,se.jsx)(_t,{ownerState:(0,K.Z)({},T,{state:e}),className:E.wrapper,ref:N,children:(0,se.jsx)(Tt,{ownerState:(0,K.Z)({},T,{state:e}),className:E.wrapperInner,children:a})})}))}}))}));Et.muiSupportAuto=!0;var Ct=Et;function It(e){return(0,ve.Z)("MuiStepContent",e)}(0,me.Z)("MuiStepContent",["root","last","transition"]);var Nt=["children","className","TransitionComponent","transitionDuration","TransitionProps"],jt=(0,he.ZP)("div",{name:"MuiStepContent",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.last&&t.last]}})((function(e){var t=e.ownerState,n=e.theme;return(0,K.Z)({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:n.vars?"1px solid ".concat(n.vars.palette.StepContent.border):"1px solid ".concat("light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600])},t.last&&{borderLeft:"none"})})),Rt=(0,he.ZP)(Ct,{name:"MuiStepContent",slot:"Transition",overridesResolver:function(e,t){return t.transition}})({}),At=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiStepContent"}),r=n.children,a=n.className,o=n.TransitionComponent,i=void 0===o?Ct:o,s=n.transitionDuration,u=void 0===s?"auto":s,c=n.TransitionProps,l=(0,Y.Z)(n,Nt),d=(Z.useContext(xe).orientation,Z.useContext(ke)),f=d.active,p=d.last,h=d.expanded,m=(0,K.Z)({},n,{last:p}),v=function(e){var t=e.classes,n={root:["root",e.last&&"last"],transition:["transition"]};return(0,fe.Z)(n,It,t)}(m);var y=u;return"auto"!==u||i.muiSupportAuto||(y=void 0),(0,se.jsx)(jt,(0,K.Z)({className:(0,Q.Z)(v.root,a),ref:t,ownerState:m},l,{children:(0,se.jsx)(Rt,(0,K.Z)({as:i,in:f||h,className:v.transition,ownerState:m,timeout:y,unmountOnExit:!0},c,{children:r}))}))})),Mt=r(5735),Ot=r(2065),Lt=r(6868),Dt=r(3031);function Pt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e,t){var n=Object.create(null);return e&&Z.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,Z.isValidElement)(e)?t(e):e}(e)})),n}function Bt(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Ut(e,t,n){var r=zt(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),o=[];for(var i in e)i in t?o.length&&(a[i]=o,o=[]):o.push(i);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var c=a[u][r];s[a[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(a).forEach((function(o){var i=a[o];if((0,Z.isValidElement)(i)){var s=o in t,u=o in r,c=t[o],l=(0,Z.isValidElement)(c)&&!c.props.in;!u||s&&!l?u||!s||l?u&&s&&(0,Z.isValidElement)(c)&&(a[o]=(0,Z.cloneElement)(i,{onExited:n.bind(null,i),in:c.props.in,exit:Bt(i,"exit",e),enter:Bt(i,"enter",e)})):a[o]=(0,Z.cloneElement)(i,{in:!1}):a[o]=(0,Z.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:Bt(i,"exit",e),enter:Bt(i,"enter",e)})}})),a}var Vt=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Gt=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(Ft(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}ot(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,zt(n.children,(function(e){return(0,Z.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:Bt(e,"appear",n),enter:Bt(e,"enter",n),exit:Bt(e,"exit",n)})}))):Ut(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=zt(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,K.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,Y.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=Vt(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?Z.createElement(ut.Provider,{value:a},o):Z.createElement(ut.Provider,{value:a},Z.createElement(t,r,o))},t}(Z.Component);Gt.propTypes={},Gt.defaultProps={component:"div",childFactory:function(e){return e}};var Wt=Gt,Ht=(r(3361),r(2110),r(9140));r(2561);function Zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Ht.O)(t)}var qt=function(){var e=Zt.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Xt=function(e){var t=e.className,n=e.classes,r=e.pulsate,a=void 0!==r&&r,o=e.rippleX,i=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=e.timeout,d=Z.useState(!1),f=(0,X.Z)(d,2),p=f[0],h=f[1],m=(0,Q.Z)(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),v={width:s,height:s,top:-s/2+i,left:-s/2+o},y=(0,Q.Z)(n.child,p&&n.childLeaving,a&&n.childPulsate);return u||p||h(!0),Z.useEffect((function(){if(!u&&null!=c){var e=setTimeout(c,l);return function(){clearTimeout(e)}}}),[c,u,l]),(0,se.jsx)("span",{className:m,style:v,children:(0,se.jsx)("span",{className:y})})};var Kt,Yt,Qt,Jt,$t,en,tn,nn,rn=(0,me.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),an=["center","classes","className"],on=80,sn=qt($t||($t=Kt||(Kt=Pt(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),un=qt(en||(en=Yt||(Yt=Pt(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),cn=qt(tn||(tn=Qt||(Qt=Pt(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),ln=(0,he.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),dn=(0,he.ZP)(Xt,{name:"MuiTouchRipple",slot:"Ripple"})(nn||(nn=Jt||(Jt=Pt(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),rn.rippleVisible,sn,550,(function(e){return e.theme.transitions.easing.easeInOut}),rn.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),rn.child,rn.childLeaving,un,550,(function(e){return e.theme.transitions.easing.easeInOut}),rn.childPulsate,cn,(function(e){return e.theme.transitions.easing.easeInOut})),fn=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiTouchRipple"}),r=n.center,a=void 0!==r&&r,o=n.classes,i=void 0===o?{}:o,s=n.className,u=(0,Y.Z)(n,an),c=Z.useState([]),l=(0,X.Z)(c,2),d=l[0],f=l[1],p=Z.useRef(0),h=Z.useRef(null);Z.useEffect((function(){h.current&&(h.current(),h.current=null)}),[d]);var m=Z.useRef(!1),v=Z.useRef(null),y=Z.useRef(null),g=Z.useRef(null);Z.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var b=Z.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,o=e.cb;f((function(e){return[].concat((0,ee.Z)(e),[(0,se.jsx)(dn,{classes:{ripple:(0,Q.Z)(i.ripple,rn.ripple),rippleVisible:(0,Q.Z)(i.rippleVisible,rn.rippleVisible),ripplePulsate:(0,Q.Z)(i.ripplePulsate,rn.ripplePulsate),child:(0,Q.Z)(i.child,rn.child),childLeaving:(0,Q.Z)(i.childLeaving,rn.childLeaving),childPulsate:(0,Q.Z)(i.childPulsate,rn.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a},p.current)])})),p.current+=1,h.current=o}),[i]),x=Z.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,o=void 0!==r&&r,i=t.center,s=void 0===i?a||t.pulsate:i,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&m.current)m.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(m.current=!0);var l,d,f,p=c?null:g.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),d=Math.round(h.height/2);else{var x=e.touches&&e.touches.length>0?e.touches[0]:e,w=x.clientX,k=x.clientY;l=Math.round(w-h.left),d=Math.round(k-h.top)}if(s)(f=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(f+=1);else{var S=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,_=2*Math.max(Math.abs((p?p.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(S,2)+Math.pow(_,2))}null!=e&&e.touches?null===y.current&&(y.current=function(){b({pulsate:o,rippleX:l,rippleY:d,rippleSize:f,cb:n})},v.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),on)):b({pulsate:o,rippleX:l,rippleY:d,rippleSize:f,cb:n})}}),[a,b]),w=Z.useCallback((function(){x({},{pulsate:!0})}),[x]),k=Z.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===(null==e?void 0:e.type)&&y.current)return y.current(),y.current=null,void(v.current=setTimeout((function(){k(e,t)})));y.current=null,f((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return Z.useImperativeHandle(t,(function(){return{pulsate:w,start:x,stop:k}}),[w,x,k]),(0,se.jsx)(ln,(0,K.Z)({className:(0,Q.Z)(rn.root,i.root,s),ref:g},u,{children:(0,se.jsx)(Wt,{component:null,exit:!0,children:d})}))})),pn=fn;function hn(e){return(0,ve.Z)("MuiButtonBase",e)}var mn,vn=(0,me.Z)("MuiButtonBase",["root","disabled","focusVisible"]),yn=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],gn=(0,he.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((mn={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,Pe.Z)(mn,"&.".concat(vn.disabled),{pointerEvents:"none",cursor:"default"}),(0,Pe.Z)(mn,"@media print",{colorAdjust:"exact"}),mn)),bn=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiButtonBase"}),r=n.action,a=n.centerRipple,o=void 0!==a&&a,i=n.children,s=n.className,u=n.component,c=void 0===u?"button":u,l=n.disabled,d=void 0!==l&&l,f=n.disableRipple,p=void 0!==f&&f,h=n.disableTouchRipple,m=void 0!==h&&h,v=n.focusRipple,y=void 0!==v&&v,g=n.LinkComponent,b=void 0===g?"a":g,x=n.onBlur,w=n.onClick,k=n.onContextMenu,S=n.onDragLeave,_=n.onFocus,T=n.onFocusVisible,E=n.onKeyDown,C=n.onKeyUp,I=n.onMouseDown,N=n.onMouseLeave,j=n.onMouseUp,R=n.onTouchEnd,A=n.onTouchMove,M=n.onTouchStart,O=n.tabIndex,L=void 0===O?0:O,D=n.TouchRippleProps,P=n.touchRippleRef,F=n.type,z=(0,Y.Z)(n,yn),B=Z.useRef(null),U=Z.useRef(null),V=(0,xt.Z)(U,P),G=(0,Dt.Z)(),W=G.isFocusVisibleRef,H=G.onFocus,q=G.onBlur,J=G.ref,$=Z.useState(!1),ee=(0,X.Z)($,2),te=ee[0],ne=ee[1];d&&te&&ne(!1),Z.useImperativeHandle(r,(function(){return{focusVisible:function(){ne(!0),B.current.focus()}}}),[]);var re=Z.useState(!1),ae=(0,X.Z)(re,2),oe=ae[0],ie=ae[1];Z.useEffect((function(){ie(!0)}),[]);var ue=oe&&!p&&!d;function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return(0,Lt.Z)((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}Z.useEffect((function(){te&&y&&!p&&oe&&U.current.pulsate()}),[p,y,te,oe]);var le=ce("start",I),de=ce("stop",k),he=ce("stop",S),me=ce("stop",j),ve=ce("stop",(function(e){te&&e.preventDefault(),N&&N(e)})),ye=ce("start",M),ge=ce("stop",R),be=ce("stop",A),xe=ce("stop",(function(e){q(e),!1===W.current&&ne(!1),x&&x(e)}),!1),we=(0,Lt.Z)((function(e){B.current||(B.current=e.currentTarget),H(e),!0===W.current&&(ne(!0),T&&T(e)),_&&_(e)})),ke=function(){var e=B.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},Se=Z.useRef(!1),_e=(0,Lt.Z)((function(e){y&&!Se.current&&te&&U.current&&" "===e.key&&(Se.current=!0,U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ke()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&ke()&&"Enter"===e.key&&!d&&(e.preventDefault(),w&&w(e))})),Te=(0,Lt.Z)((function(e){y&&" "===e.key&&U.current&&te&&!e.defaultPrevented&&(Se.current=!1,U.current.stop(e,(function(){U.current.pulsate(e)}))),C&&C(e),w&&e.target===e.currentTarget&&ke()&&" "===e.key&&!e.defaultPrevented&&w(e)})),Ee=c;"button"===Ee&&(z.href||z.to)&&(Ee=b);var Ce={};"button"===Ee?(Ce.type=void 0===F?"button":F,Ce.disabled=d):(z.href||z.to||(Ce.role="button"),d&&(Ce["aria-disabled"]=d));var Ie=(0,xt.Z)(t,J,B);var Ne=(0,K.Z)({},n,{centerRipple:o,component:c,disabled:d,disableRipple:p,disableTouchRipple:m,focusRipple:y,tabIndex:L,focusVisible:te}),je=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,a=e.classes,o={root:["root",t&&"disabled",n&&"focusVisible"]},i=(0,fe.Z)(o,hn,a);return n&&r&&(i.root+=" ".concat(r)),i}(Ne);return(0,se.jsxs)(gn,(0,K.Z)({as:Ee,className:(0,Q.Z)(je.root,s),ownerState:Ne,onBlur:xe,onClick:w,onContextMenu:de,onFocus:we,onKeyDown:_e,onKeyUp:Te,onMouseDown:le,onMouseLeave:ve,onMouseUp:me,onDragLeave:he,onTouchEnd:ge,onTouchMove:be,onTouchStart:ye,ref:Ie,tabIndex:d?-1:L,type:F},Ce,z,{children:[i,ue?(0,se.jsx)(pn,(0,K.Z)({ref:V,center:o},D)):null]}))})),xn=bn;function wn(e){return(0,ve.Z)("MuiButton",e)}var kn=(0,me.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Sn=Z.createContext({}),_n=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Tn=function(e){return(0,K.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},En=(0,he.ZP)(xn,{shouldForwardProp:function(e){return(0,he.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,ge.Z)(n.color))],t["size".concat((0,ge.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,ge.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,a=e.theme,o=e.ownerState;return(0,K.Z)({},a.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":(0,K.Z)({textDecoration:"none",backgroundColor:a.vars?"rgba(".concat(a.vars.palette.text.primaryChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Ot.Fq)(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Ot.Fq)(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat((a.vars||a).palette[o.color].main),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[o.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,Ot.Fq)(a.palette[o.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:(a.vars||a).palette.grey.A100,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:(a.vars||a).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[o.color].main}}),"&:active":(0,K.Z)({},"contained"===o.variant&&{boxShadow:(a.vars||a).shadows[8]})},(0,Pe.Z)(t,"&.".concat(kn.focusVisible),(0,K.Z)({},"contained"===o.variant&&{boxShadow:(a.vars||a).shadows[6]})),(0,Pe.Z)(t,"&.".concat(kn.disabled),(0,K.Z)({color:(a.vars||a).palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat((a.vars||a).palette.action.disabledBackground)},"contained"===o.variant&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].main,border:a.vars?"1px solid rgba(".concat(a.vars.palette[o.color].mainChannel," / 0.5)"):"1px solid ".concat((0,Ot.Fq)(a.palette[o.color].main,.5))},"contained"===o.variant&&{color:a.vars?a.vars.palette.text.primary:null==(n=(r=a.palette).getContrastText)?void 0:n.call(r,a.palette.grey[300]),backgroundColor:(a.vars||a).palette.grey[300],boxShadow:(a.vars||a).shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:(a.vars||a).palette[o.color].contrastText,backgroundColor:(a.vars||a).palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,Pe.Z)(t,"&.".concat(kn.focusVisible),{boxShadow:"none"}),(0,Pe.Z)(t,"&:active",{boxShadow:"none"}),(0,Pe.Z)(t,"&.".concat(kn.disabled),{boxShadow:"none"}),t)})),Cn=(0,he.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,ge.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,K.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Tn(t))})),In=(0,he.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,ge.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,K.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Tn(t))})),Nn=Z.forwardRef((function(e,t){var n=Z.useContext(Sn),r=(0,Mt.Z)(n,e),a=(0,pe.Z)({props:r,name:"MuiButton"}),o=a.children,i=a.color,s=void 0===i?"primary":i,u=a.component,c=void 0===u?"button":u,l=a.className,d=a.disabled,f=void 0!==d&&d,p=a.disableElevation,h=void 0!==p&&p,m=a.disableFocusRipple,v=void 0!==m&&m,y=a.endIcon,g=a.focusVisibleClassName,b=a.fullWidth,x=void 0!==b&&b,w=a.size,k=void 0===w?"medium":w,S=a.startIcon,_=a.type,T=a.variant,E=void 0===T?"text":T,C=(0,Y.Z)(a,_n),I=(0,K.Z)({},a,{color:s,component:c,disabled:f,disableElevation:h,disableFocusRipple:v,fullWidth:x,size:k,type:_,variant:E}),N=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,a=e.size,o=e.variant,i=e.classes,s={root:["root",o,"".concat(o).concat((0,ge.Z)(t)),"size".concat((0,ge.Z)(a)),"".concat(o,"Size").concat((0,ge.Z)(a)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,ge.Z)(a))],endIcon:["endIcon","iconSize".concat((0,ge.Z)(a))]},u=(0,fe.Z)(s,wn,i);return(0,K.Z)({},i,u)}(I),j=S&&(0,se.jsx)(Cn,{className:N.startIcon,ownerState:I,children:S}),R=y&&(0,se.jsx)(In,{className:N.endIcon,ownerState:I,children:y});return(0,se.jsxs)(En,(0,K.Z)({ownerState:I,className:(0,Q.Z)(n.className,N.root,l),component:c,disabled:f,focusRipple:!v,focusVisibleClassName:(0,Q.Z)(N.focusVisible,g),ref:t,type:_},C,{classes:N,children:[j,o,R]}))})),jn=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)};function Rn(e){return(0,ve.Z)("MuiPaper",e)}(0,me.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var An=["className","component","elevation","square","variant"],Mn=(0,he.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,K.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,K.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Ot.Fq)("#fff",jn(r.elevation)),", ").concat((0,Ot.Fq)("#fff",jn(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),On=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiPaper"}),r=n.className,a=n.component,o=void 0===a?"div":a,i=n.elevation,s=void 0===i?1:i,u=n.square,c=void 0!==u&&u,l=n.variant,d=void 0===l?"elevation":l,f=(0,Y.Z)(n,An),p=(0,K.Z)({},n,{component:o,elevation:s,square:c,variant:d}),h=function(e){var t=e.square,n=e.elevation,r=e.variant,a=e.classes,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,fe.Z)(o,Rn,a)}(p);return(0,se.jsx)(Mn,(0,K.Z)({as:o,ownerState:p,className:(0,Q.Z)(h.root,r),ref:t},f))})),Ln=On;function Dn(e){return(0,ve.Z)("MuiTypography",e)}(0,me.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var Pn=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Fn=(0,he.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,ge.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),zn={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Bn={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Un=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiTypography"}),r=function(e){return Bn[e]||e}(n.color),a=oe((0,K.Z)({},n,{color:r})),o=a.align,i=void 0===o?"inherit":o,s=a.className,u=a.component,c=a.gutterBottom,l=void 0!==c&&c,d=a.noWrap,f=void 0!==d&&d,p=a.paragraph,h=void 0!==p&&p,m=a.variant,v=void 0===m?"body1":m,y=a.variantMapping,g=void 0===y?zn:y,b=(0,Y.Z)(a,Pn),x=(0,K.Z)({},a,{align:i,color:r,className:s,component:u,gutterBottom:l,noWrap:f,paragraph:h,variant:v,variantMapping:g}),w=u||(h?"p":g[v]||zn[v])||"span",k=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,a=e.paragraph,o=e.variant,i=e.classes,s={root:["root",o,"inherit"!==e.align&&"align".concat((0,ge.Z)(t)),n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return(0,fe.Z)(s,Dn,i)}(x);return(0,se.jsx)(Fn,(0,K.Z)({as:w,ref:t,ownerState:x,className:(0,Q.Z)(k.root,s)},b))})),Vn=r(7312),Gn=r(7078),Wn=(0,r(4046).ZP)(),Hn=r(5080),Zn=["className","component","disableGutters","fixed","maxWidth","classes"],qn=(0,Hn.Z)(),Xn=Wn("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,Vn.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Kn=function(e){return(0,Gn.Z)({props:e,name:"MuiContainer",defaultTheme:qn})},Yn=function(e,t){var n=e.classes,r=e.fixed,a=e.disableGutters,o=e.maxWidth,i={root:["root",o&&"maxWidth".concat((0,Vn.Z)(String(o))),r&&"fixed",a&&"disableGutters"]};return(0,fe.Z)(i,(function(e){return(0,ve.Z)(t,e)}),n)};var Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,n=void 0===t?Xn:t,r=e.useThemeProps,a=void 0===r?Kn:r,o=e.componentName,i=void 0===o?"MuiContainer":o,s=n((function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&(0,Pe.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=n,a=t.breakpoints.values[r];return 0!==a&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(a).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({},"xs"===n.maxWidth&&(0,Pe.Z)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,Pe.Z)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))}));return Z.forwardRef((function(e,t){var n=a(e),r=n.className,o=n.component,u=void 0===o?"div":o,c=n.disableGutters,l=void 0!==c&&c,d=n.fixed,f=void 0!==d&&d,p=n.maxWidth,h=void 0===p?"lg":p,m=(0,Y.Z)(n,Zn),v=(0,K.Z)({},n,{component:u,disableGutters:l,fixed:f,maxWidth:h}),y=Yn(v,i);return(0,se.jsx)(s,(0,K.Z)({as:u,ownerState:v,className:(0,Q.Z)(y.root,r),ref:t},m))}))}({createStyledComponent:(0,he.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,ge.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:function(e){return(0,pe.Z)({props:e,name:"MuiContainer"})}}),Jn=Qn;function $n(e){return(0,ve.Z)("MuiCard",e)}(0,me.Z)("MuiCard",["root"]);var er=["className","raised"],tr=(0,he.ZP)(Ln,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),nr=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiCard"}),r=n.className,a=n.raised,o=void 0!==a&&a,i=(0,Y.Z)(n,er),s=(0,K.Z)({},n,{raised:o}),u=function(e){var t=e.classes;return(0,fe.Z)({root:["root"]},$n,t)}(s);return(0,se.jsx)(tr,(0,K.Z)({className:(0,Q.Z)(u.root,r),elevation:o?8:void 0,ref:t,ownerState:s},i))}));function rr(e){return(0,ve.Z)("MuiCardContent",e)}(0,me.Z)("MuiCardContent",["root"]);var ar=["className","component"],or=(0,he.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),ir=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiCardContent"}),r=n.className,a=n.component,o=void 0===a?"div":a,i=(0,Y.Z)(n,ar),s=(0,K.Z)({},n,{component:o}),u=function(e){var t=e.classes;return(0,fe.Z)({root:["root"]},rr,t)}(s);return(0,se.jsx)(or,(0,K.Z)({as:o,className:(0,Q.Z)(u.root,r),ownerState:s,ref:t},i))}));function sr(){return(0,se.jsx)(nr,{sx:{maxWidth:750,display:"flex"},children:(0,se.jsxs)(ir,{style:{padding:10,margin:10,flex:1},children:[(0,se.jsx)(Un,{variant:"h4",color:"text.primary",gutterBottom:!0,children:(0,se.jsx)("center",{children:(0,se.jsx)("b",{children:"Welcome!"})})}),(0,se.jsxs)(Un,{variant:"body2",component:"div",children:[(0,se.jsx)("strong",{children:"Please bypass this kiosk and immediately see staff if you are experiencing any of the following: "}),(0,se.jsxs)("ol",{children:[(0,se.jsx)("li",{children:"Chest pains or shortness of breath"}),(0,se.jsx)("li",{children:"Dizziness or nausea"}),(0,se.jsx)("li",{children:"Extreme headaches"}),(0,se.jsx)("li",{children:"Slurred Speech"})]}),(0,se.jsx)("b",{children:(0,se.jsx)("i",{children:"By clicking Continue, you are confirming that you do not have a life threatening emergency."})})]}),(0,se.jsx)("p",{})]})})}var ur=r(2024),cr=r.n(ur);function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){(0,Pe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fr=r(1002);function pr(){pr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),s=new T(a||[]);return r(i,"_invoke",{value:w(e,n,s)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function f(){}function p(){}function h(){}var m={};u(m,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,o)&&(m=y);var g=h.prototype=f.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,o,i,s){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,fr.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return a("throw",e,i,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=l(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=h,r(g,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:p,configurable:!0}),p.displayName=u(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new x(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),u(g,s,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function hr(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function mr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){hr(o,r,a,i,s,"next",e)}function s(e){hr(o,r,a,i,s,"throw",e)}i(void 0)}))}}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var yr=r(9142);function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,yr.Z)(r.key),r)}}function br(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var xr=r(181);function wr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,xr.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}var kr=function(){function e(t,n){vr(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return br(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),Sr=function(){function e(){vr(this,e)}return br(e,[{key:"refCount",value:function(e){return _r("refCount")}},{key:"incRef",value:function(e){return _r("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return _r("time")}},{key:"read",value:function(e){return _r("read")}},{key:"readSync",value:function(e){return _r("readSync")}},{key:"readToGPU",value:function(e,t){return _r("readToGPU")}},{key:"numDataIds",value:function(){return _r("numDataIds")}},{key:"disposeData",value:function(e,t){return _r("disposeData")}},{key:"write",value:function(e,t,n){return _r("write")}},{key:"move",value:function(e,t,n,r,a){return _r("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return _r("createTensorFromGPUData")}},{key:"memory",value:function(){return _r("memory")}},{key:"floatPrecision",value:function(){return _r("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return _r("dispose")}}]),e}();function _r(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Tr(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,Nr(e,--t,n)}function Er(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,Nr(e,--n,r),Nr(t,n,r)}function Cr(e,t,n){return Math.max(e,Math.min(t,n))}function Ir(e){return e%2===0?e:e+1}function Nr(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function jr(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Rr(e,t){var n=Math.random();return t*n+(1-n)*e}function Ar(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Mr(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Mr(Fr(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Lr(e){Mr(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Dr(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Pr(e){return 0===e.length}function Fr(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function zr(e){return e%1===0}function Br(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Ur(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Vr(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Tr(t),t}function Gr(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,o){var i=0;!function s(){if(e())a();else{i++;var u=t(i);null!=n&&i>=n?o():null!=r?r(s,u):setTimeout(s,u)}}()}))}function Hr(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function Zr(e,t){var n=t.length;return Mr((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Mr(e.every((function(e){return zr(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function qr(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:Zr(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Xr(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Kr(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Yr(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Qr(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Jr(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function $r(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ea(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function ta(e){return"string"===typeof e||e instanceof String}function na(e){return"boolean"===typeof e}function ra(e){return"number"===typeof e}function aa(e){return Array.isArray(e)?aa(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":ra(e)?"float32":ta(e)?"string":na(e)?"bool":"float32"}function oa(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ia(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function sa(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ua(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=ua(e+l*c,u,n,r);return a}function ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return ua(0,e,t,n)}function la(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function da(e,t){for(var n=fa(e,t),r=0;r<n.length;r++)n[r]=1;return n}function fa(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function pa(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return ca(e,new Float32Array(n));if("int32"===t)return ca(e,new Int32Array(n));if("bool"===t)return ca(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function ha(e){e.forEach((function(t){Mr(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function ma(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function va(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function ya(e){return e&&e.then&&"function"===typeof e.then}var ga="tfjsflags",ba=function(){function e(t){vr(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xa,this.populateURLFlags()}return br(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(wa().getBool("IS_TEST")||wa().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];wa().getBool("IS_TEST")||wa().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(ya(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(ga in t)t[ga].split(",").forEach((function(t){var n=t.split(":"),r=(0,X.Z)(n,2),a=r[0],o=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,o)}))}}}]),e}();function xa(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function wa(){return Sa}var ka,Sa=null;function _a(){if(null==ka){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof r.g)e=r.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}ka=e}return ka}function Ta(e,t){var n=function(){var e=_a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var Ea="Abs",Ca="Acos",Ia="Acosh",Na="Add",ja="AddN",Ra="All",Aa="Any",Ma="ArgMax",Oa="ArgMin",La="Asin",Da="Asinh",Pa="Atan",Fa="Atanh",za="Atan2",Ba="AvgPool",Ua="AvgPoolGrad",Va="AvgPool3D",Ga="AvgPool3DGrad",Wa="BatchMatMul",Ha="BatchToSpaceND",Za="Bincount",qa="BroadcastTo",Xa="BroadcastArgs",Ka="Cast",Ya="Ceil",Qa="ClipByValue",Ja="Complex",$a="ComplexAbs",eo="Concat",to="Conv2D",no="Conv2DBackpropFilter",ro="Conv2DBackpropInput",ao="Conv3D",oo="Conv3DBackpropFilterV2",io="Conv3DBackpropInputV2",so="Cos",uo="Cosh",co="Cumprod",lo="Cumsum",fo="CropAndResize",po="DenseBincount",ho="DepthToSpace",mo="DepthwiseConv2dNative",vo="DepthwiseConv2dNativeBackpropFilter",yo="DepthwiseConv2dNativeBackpropInput",go="Diag",bo="Dilation2D",xo="Dilation2DBackpropInput",wo="Dilation2DBackpropFilter",ko="RealDiv",So="Einsum",_o="Elu",To="EluGrad",Eo="Erf",Co="Equal",Io="Exp",No="ExpandDims",jo="Expm1",Ro="FFT",Ao="Fill",Mo="FlipLeftRight",Oo="Floor",Lo="FloorDiv",Do="FusedBatchNorm",Po="GatherV2",Fo="GatherNd",zo="Greater",Bo="GreaterEqual",Uo="Identity",Vo="IFFT",Go="Imag",Wo="IsFinite",Ho="IsInf",Zo="IsNan",qo="LeakyRelu",Xo="Less",Ko="LessEqual",Yo="LinSpace",Qo="Log",Jo="Log1p",$o="LogicalAnd",ei="LogicalNot",ti="LogicalOr",ni="LogicalXor",ri="LogSoftmax",ai="LowerBound",oi="LRN",ii="LRNGrad",si="Max",ui="Maximum",ci="MaxPool",li="MaxPoolGrad",di="MaxPool3D",fi="MaxPool3DGrad",pi="MaxPoolWithArgmax",hi="Mean",mi="Min",vi="Minimum",yi="MirrorPad",gi="Mod",bi="Multinomial",xi="Multiply",wi="Neg",ki="NotEqual",Si="NonMaxSuppressionV3",_i="NonMaxSuppressionV4",Ti="NonMaxSuppressionV5",Ei="OnesLike",Ci="OneHot",Ii="Pack",Ni="PadV2",ji="Pool",Ri="Pow",Ai="Prelu",Mi="Prod",Oi="RaggedGather",Li="RaggedRange",Di="RaggedTensorToTensor",Pi="Range",Fi="Real",zi="Reciprocal",Bi="Relu",Ui="Reshape",Vi="ResizeNearestNeighbor",Gi="ResizeNearestNeighborGrad",Wi="ResizeBilinear",Hi="ResizeBilinearGrad",Zi="Relu6",qi="Reverse",Xi="Round",Ki="Rsqrt",Yi="ScatterNd",Qi="SearchSorted",Ji="Select",$i="Selu",es="Slice",ts="Sin",ns="Sinh",rs="Sign",as="Sigmoid",os="Softplus",is="Sqrt",ss="Sum",us="SpaceToBatchND",cs="SplitV",ls="Softmax",ds="SparseFillEmptyRows",fs="SparseReshape",ps="SparseSegmentMean",hs="SparseSegmentSum",ms="SparseToDense",vs="SquaredDifference",ys="Square",gs="StridedSlice",bs="StringNGrams",xs="StringSplit",ws="StringToHashBucketFast",ks="Sub",Ss="Tan",_s="Tanh",Ts="Tile",Es="TopK",Cs="Transform",Is="Transpose",Ns="Unique",js="Unpack",Rs="UnsortedSegmentSum",As="UpperBound",Ms="ZerosLike",Os="Step",Ls="FromPixels",Ds="RotateWithOffset",Ps="_FusedMatMul",Fs="FusedConv2D",zs="FusedDepthwiseConv2D";function Bs(){var e;wa().getBool("IS_TEST")||wa().getBool("PROD")||(e=console).warn.apply(e,arguments)}function Us(){var e;wa().getBool("IS_TEST")||wa().getBool("PROD")||(e=console).log.apply(e,arguments)}var Vs=Ta("kernelRegistry",(function(){return new Map})),Gs=Ta("gradRegistry",(function(){return new Map}));function Ws(e,t){var n=Js(e,t);return Vs.get(n)}function Hs(e){return Gs.get(e)}function Zs(e){for(var t=Vs.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=(0,X.Z)(o,2),s=i[0],u=i[1],c=s.split("_");(0,X.Z)(c,1)[0]===e&&n.push(u)}return n}function qs(e){var t=e.kernelName,n=e.backendName,r=Js(t,n);Vs.has(r)&&Bs("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Vs.set(r,e)}function Xs(e){var t=e.kernelName;Gs.has(t)&&wa().getBool("DEBUG")&&Bs("Overriding the gradient for '".concat(t,"'")),Gs.set(t,e)}function Ks(e,t){var n=Js(e,t);if(!Vs.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));Vs.delete(n)}function Ys(e){if(!Gs.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));Gs.delete(e)}function Qs(e,t){Zs(e).forEach((function(e){qs(Object.assign({},e,{backendName:t}))}))}function Js(e,t){return"".concat(t,"_").concat(e)}var $s=r(8987),eu=r.n($s)()||$s;function tu(e){return eu.fromString(e,!0,16)}var nu=tu("c3a5c85c97cb3127"),ru=tu("b492b66fbe98f273"),au=tu("9ae16a3b2f90404f");function ou(e){return e.xor(e.shru(47))}function iu(e,t,n){var r=e.slice(t,t+n);return eu.fromBytes(Array.from(r),!0,!0)}function su(e,t){return iu(e,t,8)}function uu(e,t){return iu(e,t,4)}function cu(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function lu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tu("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function du(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=cu(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(cu(a,44)),[a.add(r),o.add(i)]}(su(e,t),su(e,t+8),su(e,t+16),su(e,t+24),n,r)}function fu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=eu.fromNumber(81,!0);if(t<=32)return t<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=au.add(2*t),r=su(e,0).add(au),a=su(e,t-8);return lu(cu(a,37).mul(n).add(r),cu(r,25).add(a).mul(n),n)}if(t>=4){var o=au.add(2*t);return lu(uu(e,0).shl(3).add(t),uu(e,t-4),o)}if(t>0){var i=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return ou(au.mul(i).xor(nu.mul(s))).mul(au)}return au}(e,t):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=au.add(2*t),r=su(e,0).mul(ru),a=su(e,8),o=su(e,t-8).mul(n),i=su(e,t-16).mul(au);return lu(cu(r.add(a),43).add(cu(o,30)).add(i),r.add(cu(a.add(au),18)).add(o),n)}(e,t);if(t<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=au.add(2*t),r=su(e,0).mul(au),a=su(e,8),o=su(e,t-8).mul(n),i=su(e,t-16).mul(au),s=cu(r.add(a),43).add(cu(o,30)).add(i),u=lu(s,r.add(cu(a.add(au),18)).add(o),n),c=su(e,16).mul(n),l=su(e,24),d=s.add(su(e,t-32)).mul(n),f=u.add(su(e,t-24)).mul(n);return lu(cu(c.add(l),43).add(cu(d,30)).add(f),c.add(cu(l.add(r),18)).add(d),n)}(e,t);var r=n,a=n.mul(ru).add(113),o=ou(a.mul(au).add(113)).mul(au),i=[eu.UZERO,eu.UZERO],s=[eu.UZERO,eu.UZERO];r=r.mul(au).add(su(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=cu(r.add(a).add(i[0]).add(su(e,u+8)),37).mul(ru),a=cu(a.add(i[1]).add(su(e,u+48)),42).mul(ru),r=r.xor(s[1]),a=a.add(i[0]).add(su(e,u+40)),o=cu(o.add(s[0]),33).mul(ru),i=du(e,u,i[1].mul(ru),r.add(s[0])),s=du(e,u+32,o.add(s[1]),a.add(su(e,u+16)));var d=[r,o];o=d[0],r=d[1],u+=64}while(u!==c);var f=ru.add(o.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),i[0]=i[0].add(s[0]),s[0]=s[0].add(i[0]),r=cu(r.add(a).add(i[0]).add(su(e,u+8)),37).mul(f),a=cu(a.add(i[1]).add(su(e,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),a=a.add(i[0].mul(9).add(su(e,u+40))),o=cu(o.add(s[0]),33).mul(f),i=du(e,u,i[1].mul(f),r.add(s[0])),s=du(e,u+32,o.add(s[1]),a.add(su(e,u+16)));var p=[r,o];return o=p[0],r=p[1],lu(lu(i[0],s[0],f).add(ou(a).mul(nu)).add(o),lu(i[1],s[1],f).add(r),f)}function pu(e,t){return"string"===t?yu(e):hu([e],t)}function hu(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=xu(e)),wa().getBool("DEBUG")&&Yr(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function mu(){return wa().platform.now()}function vu(e,t){return wa().platform.fetch(e,t)}function yu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",wa().platform.encode(e,t)}function gu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",wa().platform.decode(e,t)}function bu(e){return wa().platform.isTypedArray(e)}function xu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||ya(e)||null==e||bu(e)&&n)t.push(e);else if(Array.isArray(e)||bu(e))for(var r=0;r<e.length;++r)xu(e[r],t,n);else{for(var a=-1,o=0,i=Object.keys(e);o<i.length;o++){var s=i[o];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var u=0;u<=a;u++)xu(e[u],t,n)}return t}var wu=function(){function e(t,n){vr(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new ku)}return br(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=mu();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=wr(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:mu()-i})}if(wa().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(){var t=r[l];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},l=0;l<r.length;l++)c();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var ku=function(){function e(){vr(this,e)}return br(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?Gr("".concat(r,"ms"),9):r.error,s=Gr(e,25),u=t.rank,c=t.size,l=Gr(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Su(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function _u(e){return _u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_u(e)}function Tu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Eu(e){var t=Tu();return function(){var n,r=_u(e);if(t){var a=_u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,fr.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ft(e)}(this,n)}}var Cu=20,Iu=3,Nu=7;function ju(e,t,n,r){var a=sa(t),o=function(e,t,n,r){var a=Dr(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?Ou(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],Ru(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=Mu(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Ru(e,t,n){return Gr(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(Nu))," + ")+"".concat(parseFloat(e[1].toFixed(Nu)),"j"):ta(e)?"'".concat(e,"'"):"bool"===n?Au(e):parseFloat(e.toFixed(Nu)).toString(),t)}function Au(e){return 0===e?"false":"true"}function Mu(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[Ru(Ou(e)[0],0,n)]:"bool"===n?[Au(e[0])]:[e[0].toString()];if(1===u){if(s>Cu){var c=Iu*i,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-Iu)*i,s*i));return"complex64"===n&&(l=Ou(l),d=Ou(d)),["["+l.map((function(e,t){return Ru(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return Ru(e,a[s-Iu+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?Ou(e):Array.from(e)).map((function(e,t){return Ru(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),p=r.slice(1),h=r[0]*i,m=[];if(s>Cu){for(var v=0;v<Iu;v++){var y=v*h,g=y+h;m.push.apply(m,(0,ee.Z)(Mu(e.slice(y,g),f,n,p,a,!1)))}m.push("...");for(var b=s-Iu;b<s;b++){var x=b*h,w=x+h;m.push.apply(m,(0,ee.Z)(Mu(e.slice(x,w),f,n,p,a,b===s-1)))}}else for(var k=0;k<s;k++){var S=k*h,_=S+h;m.push.apply(m,(0,ee.Z)(Mu(e.slice(S,_),f,n,p,a,k===s-1)))}var T=2===u?",":"";m[0]="["+(s>0?m[0]+T:"");for(var E=1;E<m.length-1;E++)m[E]=" "+m[E]+T;for(var C=",\n",I=2;I<u;I++)C+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":C),m}function Ou(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Lu=function(){function e(t,n,r){var a=this;if(vr(this,e),this.dtype=n,this.shape=t.slice(),this.size=Dr(t),null!=r){var o=r.length;Mr(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Kr(n,this.size),this.strides=sa(t)}return br(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Mr(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return Du().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),Du=null,Pu=null;var Fu=function(){function e(t,n,r,a){vr(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Dr(t),this.strides=sa(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return br(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Pu.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Pu.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",ca(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return ca(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=mr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=Du().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return gu(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),Du().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=Du().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return gu(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,Du().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(Du().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Pu.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Pu.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ju(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Pu.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Du().makeVariable(this,e,t,n)}}]),e}();function zu(){return Ta("Tensor",(function(){return Fu}))}Object.defineProperty(Fu,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),zu();var Bu,Uu,Vu,Gu,Wu,Hu=function(e){Su(n,e);var t=Eu(n);function n(e,r,a,o){var i;return vr(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return br(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Fr(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Du().disposeTensor(this),this.dataId=e.dataId,Du().incRef(this,null)}},{key:"dispose",value:function(){Du().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Fu);Object.defineProperty(Hu,Symbol.hasInstance,{value:function(e){return e instanceof Fu&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Bu||(Bu={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Uu||(Uu={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Vu||(Vu={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Gu||(Gu={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Wu||(Wu={}));var Zu={float32:Gu,int32:Uu,bool:Vu,complex64:Wu};function qu(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Zu[e][t]}function Xu(e){return qu(e,"int32")}function Ku(e,t){if(e.dtype===t.dtype)return[e,t];var n=qu(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Yu(e,t){Mr(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function Qu(e,t){return t.some((function(t){return t.id===e.id}))}function Ju(e){var t=[];return $u(e,t,new Set),t}function $u(e,t,n){if(null!=e)if(e instanceof Fu)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var o in a){var i=a[o];n.has(i)||(n.add(i),$u(i,t,n))}}}function ec(e){return null!=e.kernelName}var tc=function(){function e(){vr(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return br(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),nc=function(){function e(t){vr(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new tc}return br(e,[{key:"ready",value:function(){var e=mr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Bs("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new wu(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Zs(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Zs(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof Sr||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Bs("Initialization of backend ".concat(e," failed")),Bs(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return Bs("Initialization of backend ".concat(e," failed")),Bs(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=oc.runKernel(Uo,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return oc.runKernel(Ka,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=Ws(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=ec(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ec(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=Ws(l,this.backendName);Mr(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var v,y=e.inputs,g=e.attrs,b=ec(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),i&&this.addTapeNode(c,y,t,b,o,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(e){return null!=y[e]?y[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Hs(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(Mr(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&ta(e[0])&&(a=e.map((function(e){return yu(e)})));var o=r.write(a,t,n),i=new Fu(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=ea(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,o=new Fu(r,a,n,this.nextTensorId());return this.trackTensor(o,t),o}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new Hu(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*$r(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof Hu||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*$r(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,ee.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=wr(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((o=a.n()).done){e.next=24;break}return i=o.value,e.next=18,i.kernelTimeMs;case 18:return i.kernelTimeMs=e.sent,e.next=21,i.extraInfo;case 21:i.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Hs(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=fa(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Ju(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Mr(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Mr(o instanceof Fu,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var v=e[m],y=v.inputs,g=0;g<v.outputs.length;g++)if(p[v.outputs[g].id]){for(var b in y)p[y[b].id]=!0,h[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&h[k.id]){var S={};for(var _ in k.inputs){var T=k.inputs[_];r[T.id]&&(S[_]=T)}var E=Object.assign({},k);E.inputs=S,E.outputs=k.outputs,x.push(E)}}return x}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=da(Dr(e),"float32");return oc.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,r){for(var a=function(){var a=t[o],i=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var o=n((function(){return s[t]()}));if("float32"!==o.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(o.dtype,"'"));var i=a.inputs[t];if(!Fr(o.shape,i.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(o.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=o;else{var u=e[i.id];e[i.id]=r(u,o),u.dispose()}};for(var c in a.inputs)u(c)},o=t.length-1;o>=0;o--)a()}(e,i,(function(e){return r.tidy(e)}),ic);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=wr(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Mr(oa(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;Mr(r.every((function(e){return e instanceof Fu})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return Mr((o=e.apply(void 0,[].concat(r,[n]))).value instanceof Fu,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Mr(oa(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];Mr(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Mr(a.every((function(e){return e instanceof Fu})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mu(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=mu()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new tc,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function rc(){var e=_a();if(null==e._tfengine){var t=new ba(e);e._tfengine=new nc(t)}return function(e){Sa=e}(e._tfengine.ENV),Du=function(){return e._tfengine},e._tfengine}nc.nextTensorId=0,nc.nextVariableId=0;var ac,oc=rc();function ic(e,t){var n={a:e,b:t};return oc.runKernel(Na,n)}function sc(e){ac=e}function uc(e){if(void 0!==ac)return ac;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function cc(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var lc=wa();function dc(e,t){var n=e;if(bu(e))return"string"===t?[]:[e.length];if("object"===typeof e){if("texture"in e){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if("buffer"in e&&!(e.buffer instanceof ArrayBuffer))return[e.buffer.size/(null==t?4:$r(t))]}if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||bu(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&wa().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&fc(e,a,[]),a}function fc(e,t,n){if(n=n||[],Array.isArray(e)||bu(e)){Mr(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Mr(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)fc(e[a],r,n.concat(a))}else Mr(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function pc(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function hc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Fu)return pc(r,e.dtype,t,n),e;var a=aa(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),pc(r,a,t,n),null==e||!bu(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(o,"'"))}var i=dc(e,a);bu(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?hu(e,a):xu(e,[],!0);return oc.makeTensor(s,i,a)}function mc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return hc(e,"".concat(t,"[").concat(a,"]"),n,r)}))}lc.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),lc.registerFlag("IS_BROWSER",(function(){return cc()})),lc.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),lc.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),lc.registerFlag("PROD",(function(){return!1})),lc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return lc.getBool("DEBUG")})),lc.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),lc.registerFlag("IS_TEST",(function(){return!1})),lc.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),lc.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),lc.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),lc.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var vc="__op";function yc(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=vc;var a=function(){oc.startScope(n);try{var e=r.apply(void 0,arguments);return ya(e)&&console.error("Cannot return a Promise inside of tidy."),oc.endScope(e),e}catch(t){throw oc.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var gc=yc({complex_:function(e,t){var n=hc(e,"real","complex"),r=hc(t,"imag","complex");Or(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return oc.runKernel(Ja,a)}});function bc(e,t,n,r){if(null==r)r=aa(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if("object"===typeof e&&("texture"in e||"buffer"in e&&!(e.buffer instanceof ArrayBuffer))){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return oc.backend.createTensorFromGPUData(e,t||n,r)}if(!bu(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ha(t);var a=Dr(t),o=Dr(n);Mr(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Dr(t.slice(i));Mr(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return bu(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?hu(e,r):xu(e,[],!0),oc.makeTensor(e,t,r)}function xc(e,t,n){return bc(e,t,dc(e,n),n)}var wc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},kc=4;function Sc(e,t){return _c.apply(this,arguments)}function _c(){return _c=mr(pr().mark((function e(t,n){var r,a,o,i,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=pr().mark((function e(){var i,u,c,l;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o[s],"float32"===(u=Array.isArray(t)?t[s].tensor:t[i]).dtype||"int32"===u.dtype||"bool"===u.dtype||"string"===u.dtype||"complex64"===u.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(u.dtype));case 4:c={name:i,shape:u.shape,dtype:u.dtype},"string"===u.dtype?(l=new Promise(function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i,s,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+kc*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)s=n[i],c=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(c,o),o+=kc,a.set(s,o),o+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(l)):a.push(u.data()),null!=n&&(c.group=n),r.push(c);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<o.length)){e.next=10;break}return e.delegateYield(i(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return u=e.sent,e.abrupt("return",{data:Ec(u),specs:r});case 14:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Tc(e,t){var n,r,a={},o=0,i=wr(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=Dr(l),f=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var h=wc[p.dtype],m=e.slice(o,o+d*h),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){f=new Float32Array(v.length);for(var y=0;y<v.length;y++){var g=v[y];f[y]=g*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=zc()),f=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");f=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];f[b]=Math.round(x*p.scale+p.min)}}o+=d*h}else if("string"===c){var w=Dr(s.shape);f=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(o,o+kc))[0];o+=kc;var _=new Uint8Array(e.slice(o,o+S));f.push(_),o+=S}}else{var T=wc[c],E=e.slice(o,o+d*T);if("float32"===c)f=new Float32Array(E);else if("int32"===c)f=new Int32Array(E);else if("bool"===c)f=new Uint8Array(E);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(E);for(var C=new Float32Array(f.length/2),I=new Float32Array(f.length/2),N=0;N<C.length;N++)C[N]=f[2*N],I[N]=f[2*N+1];var j=xc(C,l,"float32"),R=xc(I,l,"float32");a[u]=gc(j,R),j.dispose(),R.dispose()}o+=d*T}"complex64"!==c&&(a[u]=xc(f,l,c))}}catch(A){i.e(A)}finally{i.f()}return a}function Ec(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Cc="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Ic(e){return Cc?Buffer.byteLength(e):new Blob([e]).size}function Nc(e){if(Cc)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function jc(e){if(Cc){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Rc(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Ac(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Mc(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Oc(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function Lc(e,t){return Dc.apply(this,arguments)}function Dc(){return Dc=mr(pr().mark((function e(t,n){var r,a,o,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:o=e.sent,i=(0,X.Z)(o,2),r=i[0],a=i[1];case 7:return e.abrupt("return",Oc(t,r,a));case 8:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}function Pc(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ic(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ic(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Fc(e){var t,n=[],r=wr(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,ee.Z)(a.weights))}}catch(o){r.e(o)}finally{r.f()}return n}function zc(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}var Bc=function(){function e(){vr(this,e),this.saveRouters=[],this.loadRouters=[]}return br(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Uc=function(e){return Bc.registerSaveRouter(e)},Vc=function(e){return Bc.registerLoadRouter(e)},Gc=function(e){return Bc.getSaveHandlers(e)},Wc=function(e,t){return Bc.getLoadHandlers(e,t)},Hc="tensorflowjs",Zc="models_store",qc="model_info_store";function Xc(){if(!wa().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Kc(e){var t=e.result;t.createObjectStore(Zc,{keyPath:"modelPath"}),t.createObjectStore(qc,{keyPath:"modelPath"})}var Yc=function(){function e(t){if(vr(this,e),this.indexedDB=Xc(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return br(e,[{key:"save",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Hc,1);a.onupgradeneeded=function(){return Kc(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(Zc,"readonly"),s=i.objectStore(Zc).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=Pc(t),l=o.transaction(qc,"readwrite"),d=l.objectStore(qc),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=o.transaction(Zc,"readwrite")).objectStore(Zc).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(qc)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},f.onerror=function(e){return o.close(),r(f.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Yc.URL_SCHEME="indexeddb://";var Qc=function(e){return wa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yc.URL_SCHEME)?(t=e.slice(Yc.URL_SCHEME.length),new Yc(t)):null;var t};Bc.registerSaveRouter(Qc),Bc.registerLoadRouter(Qc);var Jc=function(){function e(){vr(this,e),this.indexedDB=Xc()}return br(e,[{key:"listModels",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Hc,1);r.onupgradeneeded=function(){return Kc(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(qc,"readonly"),o=a.objectStore(qc).getAll();o.onsuccess=function(){var t,n={},r=wr(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=mr(pr().mark((function e(t){var n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(Yc.URL_SCHEME)?r.slice(Yc.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Hc,1);a.onupgradeneeded=function(){return Kc(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(qc,"readwrite"),s=i.objectStore(qc),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),i=function(){var a=(n=o.transaction(Zc,"readwrite")).objectStore(Zc).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$c="/",el="tensorflowjs_models",tl="info",nl="model_topology",rl="weight_specs",al="weight_data",ol="model_metadata";function il(e){return{info:[el,e,tl].join($c),topology:[el,e,nl].join($c),weightSpecs:[el,e,rl].join($c),weightData:[el,e,al].join($c),modelMetadata:[el,e,ol].join($c)}}function sl(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function ul(e){var t=e.split($c);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join($c)}var cl=function(){function e(t){if(vr(this,e),!wa().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=il(this.modelPath)}return br(e,[{key:"save",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Pc(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Nc(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),sl(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.initializerSignature&&(n.initializerSignature=i.initializerSignature),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=jc(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();cl.URL_SCHEME="localstorage://";var ll=function(e){return wa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(cl.URL_SCHEME)?(t=e.slice(cl.URL_SCHEME.length),new cl(t)):null;var t};Bc.registerSaveRouter(ll),Bc.registerLoadRouter(ll);var dl=function(){function e(){vr(this,e),Mr(wa().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Mr("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return br(e,[{key:"listModels",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=el+$c,r=$c+tl,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=ul(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(cl.URL_SCHEME)?a.slice(cl.URL_SCHEME.length):a,n=il(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),sl(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),fl="://",pl=function(){function e(){vr(this,e),this.managers={}}return br(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Mr(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(fl)&&(t=t.slice(0,t.indexOf(fl))),Mr(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Mr(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function hl(e){if(-1===e.indexOf(fl))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(pl.getSchemes().join(",")));return{scheme:e.split(fl)[0],path:e.split(fl)[1]}}function ml(e,t){return vl.apply(this,arguments)}function vl(){return vl=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],Mr(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Mr((a=Bc.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Mr(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],Mr((i=Bc.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Mr(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=i[0],u=hl(t).scheme,c=hl(t).path,l=u===hl(t).scheme,e.next=15,o.load();case 15:if(d=e.sent,!r||!l){e.next=19;break}return e.next=19,pl.getManager(u).removeModel(c);case 19:return e.next=21,s.save(d);case 21:if(f=e.sent,!r||l){e.next=25;break}return e.next=25,pl.getManager(u).removeModel(c);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function yl(){return gl.apply(this,arguments)}function gl(){return(gl=mr(pr().mark((function e(){var t,n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=pl.getSchemes(),n={},r=wr(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,pl.getManager(o).listModels();case 9:for(s in i=e.sent)n[o+fl+s]=i[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function bl(e){return xl.apply(this,arguments)}function xl(){return(xl=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hl(t),r=pl.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wl(e,t){return kl.apply(this,arguments)}function kl(){return(kl=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",ml(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sl(e,t){return _l.apply(this,arguments)}function _l(){return(_l=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",ml(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tl=function(){function e(){vr(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return br(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&wa().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}}]),e}();if(wa().get("IS_BROWSER")){wa().setPlatform("browser",new Tl);try{pl.registerManager(cl.URL_SCHEME,new dl)}catch(sQ){}try{pl.registerManager(Yc.URL_SCHEME,new Jc)}catch(sQ){}}var El,Cl=function(){return r(5410)};var Il=function(){function e(){vr(this,e),this.util=r(8628),this.textEncoder=new this.util.TextEncoder}return br(e,[{key:"fetch",value:function(e,t){return null!=wa().global.fetch?wa().global.fetch(e,t):(null==El&&(El=Cl()),El(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();function Nl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",ha(e),new Lu(e,t,n)}wa().get("IS_NODE")&&!wa().get("IS_BROWSER")&&wa().setPlatform("node",new Il);var jl=yc({cast_:function(e,t){var n=hc(e,"x","cast");if(!Qr(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return oc.runKernel(Ka,r,a)}});var Rl=yc({clone_:function(e){var t={x:hc(e,"x","clone","string_or_numeric")};return oc.runKernel(Uo,t)}});function Al(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}function Ml(){wa().set("PROD",!0)}function Ol(){wa().set("DEBUG",!0)}function Ll(){wa().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Dl(e){wa().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Pl(){oc.disposeVariables()}function Fl(){return oc}function zl(){return oc.memory()}function Bl(e){return oc.profile(e)}function Ul(e,t){return oc.tidy(e,t)}function Vl(e){Ju(e).forEach((function(e){return e.dispose()}))}function Gl(e){return oc.keep(e)}function Wl(e){return oc.time(e)}function Hl(e){return oc.setBackend(e)}function Zl(){return oc.ready()}function ql(){return oc.backendName}function Xl(e){oc.removeBackend(e)}function Kl(e){return oc.findBackend(e)}function Yl(e){return oc.findBackendFactory(e)}function Ql(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return oc.registerBackend(e,t,n)}function Jl(){return oc.backend}function $l(e,t){wa().setPlatform(e,t)}rc(),Pu={buffer:Nl,cast:jl,clone:Rl,print:Al};var ed=yc({add_:function(e,t){var n=hc(e,"a","add"),r=hc(t,"b","add"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(Na,i)}});var td=yc({floorDiv_:function(e,t){var n=hc(e,"a","floorDiv"),r=hc(t,"b","floorDiv"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(Lo,i)}});var nd=yc({div_:function(e,t){var n=hc(e,"a","div"),r=hc(t,"b","div"),a=Ku(n,r),o=(0,X.Z)(a,2);if(n=o[0],r=o[1],"int32"===n.dtype&&"int32"===r.dtype)return td(n,r);var i={a:n,b:r};return oc.runKernel(ko,i,{})}});var rd=yc({mul_:function(e,t){var n=hc(e,"a","mul"),r=hc(t,"b","mul"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(xi,i)}});var ad=yc({sqrt_:function(e){var t={x:hc(e,"x","sqrt","float32")};return oc.runKernel(is,t)}});var od=yc({square_:function(e){var t=hc(e,"x","square");return oc.runKernel("Square",{x:t},{})}});var id=yc({zerosLike_:function(e){var t={x:hc(e,"x","zerosLike")};return oc.runKernel(Ms,t)}});function sd(e){return Mr(oa(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=hc(t,"x","tf.grad","string_or_numeric"),a=null!=n?hc(n,"dy","tf.grad"):null;return oc.tidy((function(){var t=oc.gradients((function(){return e(r)}),[r],a),n=t.value,o=t.grads;return null!=a&&Or(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),pd(o),o[0]}))}}function ud(e){return Mr(oa(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){Mr(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=mc(t,"args","tf.grads","string_or_numeric"),a=null!=n?hc(n,"dy","tf.grads"):null;return oc.tidy((function(){var t=oc.gradients((function(){return e.apply(void 0,(0,ee.Z)(r))}),r,a),n=t.value,o=t.grads;return null!=a&&Or(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),pd(o),o}))}}function cd(e){return Mr(oa(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){Mr(t instanceof Fu,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),Mr(null==n||n instanceof Fu,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=oc.gradients((function(){return e(t)}),[t],n),a=r.grads,o=r.value;return pd(a),{grad:a[0],value:o}}}function ld(e){return Mr(oa(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){Mr(Array.isArray(t)&&t.every((function(e){return e instanceof Fu})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),Mr(null==n||n instanceof Fu,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=oc.gradients((function(){return e.apply(void 0,(0,ee.Z)(t))}),t,n);return null!=n&&Or(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),pd(r.grads),r}}function dd(e,t){Mr(oa(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Mr(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Hu})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],oc.registeredVariables)t.push(oc.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;t=t.filter((function(e){return e.trainable})),Mr(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(o," variables is ")+"trainable."}));var i=oc.gradients(e,t,null,!0),s=i.value,u=i.grads;Mr(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Mr(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function fd(e){return oc.customGrad(e)}function pd(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function hd(e,t){if((bu(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&bu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return bc(e,[],[],t)}var md=function(){function e(){vr(this,e)}return br(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),vd=function(){function e(){vr(this,e),this.classNameMap={}}return br(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function yd(e){Mr(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Mr("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Mr(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),vd.register(e)}var gd=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return Vl(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return dd(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Vl(this.iterations_)}},{key:"saveIterations",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:hd(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(md);Object.defineProperty(gd,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var bd=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return vr(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=oc.backend.epsilon()),a}return br(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Ul((function(){return id(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Ul((function(){return id(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Ul((function(){var e=ed(rd(i,t.rho),rd(od(o),1-t.rho)),n=rd(nd(ad(ed(s,t.epsilon)),ad(ed(i,t.epsilon))),o),r=ed(rd(s,t.rho),rd(od(n),1-t.rho));i.assign(e),s.assign(r);var u=ed(rd(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Vl(this.accumulatedGrads.map((function(e){return e.variable}))),Vl(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,ee.Z)(this.accumulatedGrads),(0,ee.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(gd);function xd(e,t,n){ha(e);var r={shape:e,value:t,dtype:n};return oc.runKernel(Ao,{},r)}var wd=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return vr(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return br(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Ul((function(){return xd(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;Ul((function(){var e=ed(i,od(o));i.assign(e);var n=ed(rd(nd(o,ad(ed(e,oc.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Vl(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(gd);var kd=yc({pow_:function(e,t){var n=hc(e,"base","pow"),r=hc(t,"exp","pow"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(Ri,i)}});var Sd=yc({sub_:function(e,t){var n=hc(e,"a","sub"),r=hc(t,"b","sub"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(ks,i)}}),_d=function(e){Su(n,e);var t=Eu(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return vr(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ul((function(){o.accBeta1=hd(r).variable(),o.accBeta2=hd(a).variable()})),null==i&&(o.epsilon=oc.backend.epsilon()),o}return br(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Ul((function(){var r=Sd(1,t.accBeta1),a=Sd(1,t.accBeta2);n.forEach((function(n,o){var i=oc.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:Ul((function(){return id(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:Ul((function(){return id(i).variable(false)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedSecondMoment[o].variable,l=ed(rd(u,t.beta1),rd(s,1-t.beta1)),d=ed(rd(c,t.beta2),rd(od(s),1-t.beta2)),f=nd(l,r),p=nd(d,a);u.assign(l),c.assign(d);var h=ed(rd(nd(f,ed(ad(p),t.epsilon)),-t.learningRate),i);i.assign(h)}})),t.accBeta1.assign(rd(t.accBeta1,t.beta1)),t.accBeta2.assign(rd(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Vl(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Vl(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,ee.Z)(this.accumulatedFirstMoment),(0,ee.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){var n,r=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Ul((function(){r.accBeta1.assign(kd(r.beta1,r.iterations_+1)),r.accBeta2.assign(kd(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(gd);var Td=yc({abs_:function(e){var t=hc(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return oc.runKernel($a,n)}var r={x:t};return oc.runKernel(Ea,r)}});function Ed(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function Cd(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function Id(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(o)}}return n}var Nd=yc({maximum_:function(e,t){var n=hc(e,"a","maximum"),r=hc(t,"b","maximum"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=jl(n,"int32"),r=jl(r,"int32")),Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(ui,i)}}),jd=function(e){Su(n,e);var t=Eu(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return vr(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],Ul((function(){o.iteration=hd(0).variable(),o.accBeta1=hd(r).variable()})),null==i&&(o.epsilon=oc.backend.epsilon()),o}return br(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Ul((function(){var r=Sd(1,t.accBeta1),a=nd(-t.learningRate,ed(rd(t.iteration,t.decay),1));n.forEach((function(n,o){var i=oc.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:id(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:id(i).variable(false)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedWeightedInfNorm[o].variable,l=ed(rd(u,t.beta1),rd(s,1-t.beta1)),d=rd(c,t.beta2),f=Td(s),p=Nd(d,f);u.assign(l),c.assign(p);var h=ed(rd(nd(a,r),nd(l,ed(p,t.epsilon))),i);i.assign(h)}})),t.iteration.assign(ed(t.iteration,1)),t.accBeta1.assign(rd(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Vl(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Vl(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(gd),Rd=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return br(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=oc.registeredVariables[n];Ul((function(){var e=ed(rd(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Gl(hd(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(gd),Ad=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return vr(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=hd(a.momentum),a}return br(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Ul((function(){return id(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&Ul((function(){var e,n=ed(rd(t.m,o),i);e=t.useNesterov?ed(rd(t.c,ed(i,rd(n,t.m))),a):ed(rd(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Vl(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Rd),Md=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(vr(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==i&&(r.epsilon=oc.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return br(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=oc.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Ul((function(){return id(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Ul((function(){return id(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Ul((function(){return id(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;Ul((function(){var e=ed(rd(s,t.decay),rd(od(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=ed(rd(n,t.decay),rd(i,1-t.decay)),c=nd(rd(i,t.learningRate),ad(Sd(e,ed(od(o),t.epsilon)))),l=ed(rd(u,t.momentum),c);s.assign(e),n.assign(o),u.assign(l);var d=Sd(a,l);a.assign(d)}else{var f=ed(rd(s,t.decay),rd(od(i),1-t.decay)),p=ed(rd(u,t.momentum),nd(rd(i,t.learningRate),ad(ed(f,t.epsilon))));s.assign(f),u.assign(p);var h=Sd(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Vl(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Vl(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Vl(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,ee.Z)(this.accumulatedMeanSquares),(0,ee.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,ee.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(gd),Od=[bd,wd,_d,jd,Ad,Md,Rd];var Ld="model",Dd=".json",Pd=".weights.bin";function Fd(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var zd=function(){function e(t){if(vr(this,e),!wa().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=Ld),this.modelJsonFileName=t+Dd,this.weightDataFileName=t+Pd}return br(e,[{key:"save",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Mc(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,Fd((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Fd((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Pc(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();zd.URL_SCHEME="downloads://";var Bd=function(){function e(t){if(vr(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return br(e,[{key:"load",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=Lc(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=wr(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,ee.Z)(i.weights)),a.push.apply(a,(0,ee.Z)(i.paths))}}catch(sQ){o.e(sQ)}finally{o.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,Rc(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return Ac(e.name)})),o={},i=wr(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=Ac(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(sQ){i.e(sQ)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function Ud(e){return new Bd(e)}function Vd(e,t,n,r){!function(e){Mr(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Mr(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Mr(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Mr(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function Gd(e,t){return Wd.apply(this,arguments)}function Wd(){return(Wd=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?wa().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Vd(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Vd(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hd(e){return Zd.apply(this,arguments)}function Zd(){return Zd=mr(pr().mark((function e(t){var n,r,a,o,i=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=qd((function(e){return Gd(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function qd(e){return function(){var t=mr(pr().mark((function t(n){var r,a,o,i,s,u,c,l,d,f,p,h,m=arguments;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,o=n.map((function(){return!1})),i={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=wc[r]*Dr(e.shape),l=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return f=t.sent,p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[h+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,c=0;c<t;c++){var l=new Uint8Array(f[h+c]);s.set(l,u),u+=l.byteLength}i[e].forEach((function(e){var t=Tc(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Bc.registerSaveRouter((function(e){return wa().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(zd.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new zd(e)}(e.slice(zd.URL_SCHEME.length)):null}));var Xd=function(){function e(t,n){if(vr(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Mr("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=wa().platform.fetch,Mr(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Mr(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return br(e,[{key:"save",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Mc(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Pc(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Lc(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,v,y;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Kd(n),a=(0,X.Z)(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,u=Fc(t),c=[],l=[],d=wr(t);try{for(d.s();!(f=d.n()).done;){p=f.value,h=wr(p.paths);try{for(h.s();!(m=h.n()).done;)v=m.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(v)):c.push(s+v+i)}catch(sQ){h.e(sQ)}finally{h.f()}}}catch(sQ){d.e(sQ)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=c.push,e.t1=c,e.t2=ee.Z,e.next=14,Promise.all(l);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,Gd(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return y=e.sent,e.abrupt("return",[u,Rc(y)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Kd(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Yd(e){return null!=e.match(Xd.URL_SCHEME_REGEX)}Xd.URL_SCHEME_REGEX=/^https?:\/\//;var Qd=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Yd(e)})):Yd(e))?Jd(e,t):null};function Jd(e,t){return new Xd(e,t)}function $d(e,t){return Jd(e,t)}Bc.registerSaveRouter(Qd),Bc.registerLoadRouter(Qd);var ef=function(){function e(t){vr(this,e),this.modelArtifacts=t}return br(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),tf=function(){function e(t){vr(this,e),this.saveHandler=t}return br(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),nf=br((function e(t){vr(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function rf(e,t,n,r){var a=arguments;return new nf(af.apply(void 0,(0,ee.Z)(a)))}function af(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ef(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ef({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ef({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function of(e){return new tf(e)}function sf(e){return new tf(e)}var uf=yc({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=hc(e,"a","matMul"),o=hc(t,"b","matMul"),i=Ku(a,o),s=(0,X.Z)(i,2),u={a:a=s[0],b:o=s[1]},c={transposeA:n,transposeB:r};return oc.runKernel(Wa,u,c)}});var cf=yc({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var o={indices:hc(e,"indices","oneHot","int32")},i={dtype:a,depth:t,onValue:n,offValue:r};return oc.runKernel(Ci,o,i)}});var lf=yc({imag_:function(e){var t={input:hc(e,"input","imag")};return oc.runKernel(Go,t)}});var df=yc({neg_:function(e){var t={x:hc(e,"x","neg")};return oc.runKernel(wi,t)}});var ff=yc({real_:function(e){var t={input:hc(e,"input","real")};return oc.runKernel(Fi,t)}});var pf=yc({transpose_:function(e,t,n){var r=hc(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),Mr(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Mr(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},o={perm:t};return"complex64"===r.dtype?Ul((function(){var e=ff(r),t=lf(r);return e=oc.runKernel(Is,{x:e},o),t=oc.runKernel(Is,{x:t},o),n&&(t=df(t)),gc(e,t)})):oc.runKernel(Is,a,o)}});var hf,mf=yc({confusionMatrix_:function(e,t,n){var r=hc(e,"labels","confusionMatrix"),a=hc(t,"predictions","confusionMatrix");Mr(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),Mr(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),Mr(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),Mr(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),Mr(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var o=cf(jl(r,"int32"),n),i=cf(jl(a,"int32"),n),s=pf(o),u=uf(s,i);return jl(u,"int32")}});function vf(e,t,n){if(Lr(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=dc(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return bc(e,t,r,n)}function yf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(null!=Ws(Ls,oc.backendName)){var u={pixels:e},c={numChannels:t};return oc.runKernel(Ls,u,c)}var l,d,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],p=(0,X.Z)(f,2),h=p[0],m=p[1];if(i)l=e.getContext("2d").getImageData(0,0,h,m).data;else if(r||n)l=e.data;else if(o||a||s){if(null==hf)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");hf=new OffscreenCanvas(1,1).getContext("2d")}else hf=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});hf.canvas.width=h,hf.canvas.height=m,hf.drawImage(e,0,0,h,m),l=hf.getImageData(0,0,h,m).data}if(4===t)d=new Int32Array(l);else{var v=h*m;d=new Int32Array(v*t);for(var y=0;y<v;y++)for(var g=0;g<t;++g)d[y*t+g]=l[4*y+g]}return vf(d,[m,h,t],"int32")}function gf(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function bf(e){return xf.apply(this,arguments)}function xf(){return xf=mr(pr().mark((function e(t){var n,r,a,o=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:3,r=null,!wa().getBool("WRAP_TO_IMAGEBITMAP")||!gf(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",yf(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),xf.apply(this,arguments)}function wf(e,t){return kf.apply(this,arguments)}function kf(){return(kf=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hc(t,"img","toPixels"),t instanceof Fu||(r=jl(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(o=r.shape.slice(0,2),i=(0,X.Z)(o,2),s=i[0],u=i[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,d="float32"===r.dtype?255:1,f=new Uint8ClampedArray(u*s*4),p=0;case 16:if(!(p<s*u)){e.next=41;break}h=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(v=l[p*c+m],"float32"!==r.dtype){e.next=26;break}if(!(v<0||v>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(v<0||v>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 29:1===c?(h[0]=v*d,h[1]=v*d,h[2]=v*d):h[m]=v*d;case 30:m++,e.next=19;break;case 33:f[(y=4*p)+0]=Math.round(h[0]),f[y+1]=Math.round(h[1]),f[y+2]=Math.round(h[2]),f[y+3]=Math.round(h[3]);case 38:++p,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,g=n.getContext("2d"),b=new ImageData(f,u,s),g.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",f);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sf=yc({fromPixels_:yf});function _f(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Dr(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat((0,ee.Z)(sa(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,f]}function Tf(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != ".concat(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Ef(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Tf(n,t,e)}function Cf(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Dr(t.shape)/u,sliceSize:i,strides:[].concat((0,ee.Z)(sa(n.slice(0,a))),[1]),outputSize:Dr(n)}}var If=-2,Nf=-1;function jf(e,t,n){var r=e.shape.length;Mr(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Mr(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Mr(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function Rf(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Af(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Mf(e,t,n,r){for(var a=(0,ee.Z)(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Of(e,t,n){return n<=e?n:n-(t-1)}function Lf(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Df(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&n>0){var p=t[0],h=n+1;l=Pf(i,p,h,r,e),d=Ff(s,p,h,a,e),f=Mf(o,p,h,e)}else for(var m=0;m<c;m++)l[m]=Bf(i,r,o,e,m,u),d[m]=Uf(s,a,o,e,m,u),f[m]=zf(o,m,u);return{begin:l,end:d,strides:f}}function Pf(e,t,n,r,a){for(var o=(0,ee.Z)(a),i=Lf(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=Of(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function Ff(e,t,n,r,a){for(var o=(0,ee.Z)(a),i=Lf(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=Of(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=Cr(0,o[l],a[l])}return o}function zf(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Bf(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=Cr(0,i,u-1)}function Uf(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?Cr(0,i,u):Cr(-1,i,u-1)}function Vf(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Gf(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Wf(e,t,n){var r,a,o=e.shape.length;return(r="number"===typeof t?[t].concat((0,ee.Z)(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){Mr(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"===typeof n?[n].concat((0,ee.Z)(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Mr(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Hf(e,t,n,r,a,o,i,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&i&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(If),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(Nf),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var h=!0,m=!0,v=!0,y=[],g=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[p.beginMask&1<<b,p.endMask&1<<b],S=[p.strides[b]>0?0:-1,p.strides[b]>0?w:w-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var _=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var T=p.begin[b]<0?w+p.begin[b]:p.begin[b];if(p.begin[b]=T,p.end[b]=p.begin[b]+1,T<0||T>=w)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=Zf(p.begin[b],0,p.strides[b],w,k,S),p.end[b]=Zf(p.end[b],1,p.strides[b],w,k,S);var E=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===w;h=h&&E,m=m&&(0===b&&1===p.strides[b]||E)}else h=h&&1===p.strides[b]&&_,m=m&&(0===b&&1===p.strides[b]||_);var C=void 0,I=!1;if(p.beginValid&&p.endValid?(C=p.end[b]-p.begin[b],I=!0):x?(C=1,I=!0):_&&w>=0&&(C=p.strides[b]<0?-w:w,I=!0),I){var N=void 0;N=0===C||C<0!==p.strides[b]<0?0:Math.trunc(C/p.strides[b])+(C%p.strides[b]!==0?1:0),y.push(N)}else y.push(-1)}else y.push(x?1:-1)}for(var j=0;j<p.finalShapeGatherIndices.length;++j){var R=p.finalShapeGatherIndices[j];R>=0?g.push(y[R]):R===If&&g.push(1)}var A=g.filter((function(e,t){return p.finalShapeGatherIndices[t]!==If}));return{finalShapeSparse:A,finalShape:g,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function Zf(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}var qf=.001,Xf=.1;function Kf(e,t,n){return null==n&&(n=Yf()),Qf(e,t,(function(e,t){return tp(e,t,n)}))}function Yf(){return 32===oc.backend.floatPrecision()?qf:Xf}function Qf(e,t,n){var r=!0;if((bu(e)||bu(t))&&(r=!1),bu(e)&&bu(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(o))}if(Array.isArray(e)&&Array.isArray(t)){var i=dc(e),s=dc(t);if(!Fr(i,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(i,"]. Expected: [").concat(s,"]"))}var u=bu(e)?e:xu(e),c=bu(t)?t:xu(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var d=u[l],f=c[l];if(!n(d,f))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(d,", expected[").concat(l,"] = ").concat(f,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}"undefined"!==typeof expect&&expect().nothing()}function Jf(e,t){e().then((function(){return t.fail()}),(function(){return t()})),"undefined"!==typeof expect&&expect().nothing()}function $f(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return ta(e)||ta(e[0])||ta(t)||ta(t[0])?Qf(e,n,(function(e,t){return e==t})):Qf(e,t,(function(e,t){return tp(e,t,0)}))}function ep(e,t,n){if(null==n&&(n=Yf()),!tp(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!==typeof expect&&expect().nothing()}function tp(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function np(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function rp(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function ap(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?ap(n):e[t]=yu(n)}return e}function op(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((function(e){t.addEventListener("loadeddata",(function(n){return e(t)})),t.load()}))}function ip(e){return sp.apply(this,arguments)}function sp(){return sp=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.play();case 2:if(!("requestVideoFrameCallback"in t)){e.next=5;break}return e.next=5,new Promise((function(e){t.requestVideoFrameCallback(e)}));case 5:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}var up="4.2.0",cp=function(){function e(){vr(this,e)}return br(e,null,[{key:"sgd",value:function(e){return new Rd(e)}},{key:"momentum",value:function(e,t){return new Ad(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new Md(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new _d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new bd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new jd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new wd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}();var lp=yc({acos_:function(e){var t={x:hc(e,"x","acos")};return oc.runKernel(Ca,t)}});var dp=yc({acosh_:function(e){var t={x:hc(e,"x","acosh")};return oc.runKernel(Ia,t)}});var fp=yc({addN_:function(e){Mr(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Mr(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return hc(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Fr(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return oc.runKernel(ja,r)}});var pp=yc({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:hc(e,"x","all","bool")},a={axis:t,keepDims:n};return oc.runKernel(Ra,r,a)}});var hp=yc({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:hc(e,"x","any","bool")},a={axis:t,keepDims:n};return oc.runKernel(Aa,r,a)}});var mp=yc({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:hc(e,"x","argMax")},r={axis:t};return oc.runKernel(Ma,n,r)}});var vp=yc({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:hc(e,"x","argMin")},r={axis:t};return oc.runKernel(Oa,n,r)}});var yp=yc({asin_:function(e){var t={x:hc(e,"x","asin")};return oc.runKernel(La,t)}});var gp=yc({asinh_:function(e){var t={x:hc(e,"x","asinh")};return oc.runKernel(Da,t)}});var bp=yc({atan_:function(e){var t={x:hc(e,"x","atan")};return oc.runKernel(Pa,t)}});var xp=yc({atan2_:function(e,t){var n=hc(e,"a","atan2"),r=hc(t,"b","atan2"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(za,i)}});var wp=yc({atanh_:function(e){var t={x:hc(e,"x","atanh")};return oc.runKernel(Fa,t)}});function kp(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,i=e[3];return Tp(e,[].concat((0,ee.Z)(t),[i]),n,o,r,null,null,Lp(a))}function Sp(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=Ip(t),c=(0,X.Z)(u,2),l=c[0],d=c[1];if("channelsLast"===s)i=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,d,e[1],e[1]]}return Tp(e,i,n,r,a,o,!1,s)}function _p(e,t,n,r,a,o){var i,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=Np(t),l=(0,X.Z)(c,3),d=l[0],f=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",i=[d,f,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",i=[d,f,p,e[1],e[1]]}return Ep(e,i,n,r,a,!1,s,o)}function Tp(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=(0,X.Z)(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,X.Z)(e,4);u=p[0],d=p[1],c=p[2],l=p[3]}var h,m=(0,X.Z)(t,4),v=m[0],y=m[1],g=m[3],b=Ip(n),x=(0,X.Z)(b,2),w=x[0],k=x[1],S=Ip(r),_=(0,X.Z)(S,2),T=_[0],E=_[1],C=jp(v,T),I=jp(y,E),N=function(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=Cp(e,t,n));var o=e[0],i=e[1],s=Rp((o-t+2*r)/n+1,a),u=Rp((i-t+2*r)/n+1,a);return[s,u]}([t,n],o,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(d-1)*a+i-n),m=Math.floor(p/2),v=p-m,y=Math.floor(h/2);c={top:m,bottom:v,left:y,right:h-y,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var g="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];c={top:g,bottom:b,left:x,right:w,type:0===g&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},l=Rp((t-o+g+b)/r+1,s),d=Rp((n-i+x+w)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,w,k,C,I,o,s),j=N.padInfo,R=N.outHeight,A=N.outWidth,M=i?g*d:g;return"channelsFirst"===s?h=[u,M,R,A]:"channelsLast"===s&&(h=[u,R,A,M]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:R,outWidth:A,outChannels:M,padInfo:j,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:y,effectiveFilterHeight:C,effectiveFilterWidth:I,dilationHeight:T,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function Ep(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===i){var p=(0,X.Z)(e,5);u=p[0],c=p[1],l=p[2],d=p[3],f=p[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=(0,X.Z)(e,5);u=h[0],f=h[1],c=h[2],l=h[3],d=h[4]}var m,v=(0,X.Z)(t,5),y=v[0],g=v[1],b=v[2],x=v[4],w=Np(n),k=(0,X.Z)(w,3),S=k[0],_=k[1],T=k[2],E=Np(r),C=(0,X.Z)(E,3),I=C[0],N=C[1],j=C[2],R=jp(y,I),A=jp(g,N),M=jp(b,j),O=function(e,t,n,r,a,o,i,s,u,c,l){var d,f,p,h;"valid"===e&&(e=0);if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=Cp(e,t[0],r[0]));for(var i=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(i[s]=Rp((e[s]-t[s]+2*a)/r[s]+1,o));return i}([t,n,r,1],[s,u,c],1,[a,o,i],e,l);f=m[0],p=m[1],h=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var v=((f=Math.ceil(t/a))-1)*a+s-t,y=((p=Math.ceil(n/o))-1)*o+u-n,g=((h=Math.ceil(r/i))-1)*i+c-r,b=Math.floor(v/2),x=v-b,w=Math.floor(y/2),k=y-w,S=Math.floor(g/2);d={top:w,bottom:k,left:S,right:g-S,front:b,back:x,type:"SAME"}}return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}(a,c,l,d,S,_,T,R,A,M,s),L=O.padInfo,D=O.outDepth,P=O.outHeight,F=O.outWidth,z=o?x*f:x;return"channelsFirst"===i?m=[u,z,D,P,F]:"channelsLast"===i&&(m=[u,D,P,F,z]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:D,outHeight:P,outWidth:F,outChannels:z,padInfo:L,strideDepth:S,strideHeight:_,strideWidth:T,filterDepth:y,filterHeight:g,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:A,effectiveFilterWidth:M,dilationDepth:I,dilationHeight:N,dilationWidth:j,inShape:e,outShape:m,filterShape:t}}function Cp(e,t,n){var r=jp(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function Ip(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Np(e){return"number"===typeof e?[e,e,e]:e}function jp(e,t){return t<=1?e:e+(e-1)*(t-1)}function Rp(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Ap(e){var t=Ip(e),n=(0,X.Z)(t,3),r=n[0],a=n[1],o=n[2];return 1===r&&1===a&&1===o}function Mp(e,t){return Ap(e)||Ap(t)}function Op(e){return Ip(e).every((function(e){return e>0}))}function Lp(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Dp(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Mr(zr(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){Mr(zr(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Pp=yc({reshape_:function(e,t){var n={x:hc(e,"x","reshape","string_or_numeric")},r={shape:t};return oc.runKernel(Ui,n,r)}});var Fp=yc({avgPool_:function(e,t,n,r,a){var o=hc(e,"x","avgPool","float32");Mr(Mp(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Pp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Mr(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),Dp("avgPool",r,a);var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=oc.runKernel(Ba,u,c);return l=jl(l,o.dtype),s?Pp(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var zp=yc({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=hc(e,"x","avgPool3d","float32"),s=i,u=!1;4===i.rank&&(u=!0,s=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Mr(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Mr("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),Mr("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),Dp("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=oc.runKernel(Va,c,l);return d=jl(d,s.dtype),u?Pp(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Bp=yc({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Mr(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=mc(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Rl(n[0]);var r=n,a={axis:t};return oc.runKernel(eo,r,a)}});var Up=yc({sigmoid_:function(e){var t={x:hc(e,"x","sigmoid","float32")};return oc.runKernel(as,t)}});var Vp=yc({slice_:function(e,t,n){var r=hc(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return oc.runKernel(es,a,o)}});var Gp=yc({tanh_:function(e){var t={x:hc(e,"x","tanh","float32")};return oc.runKernel(_s,t)}});var Wp=yc({basicLSTMCell_:function(e,t,n,r,a,o){var i=hc(e,"forgetBias","basicLSTMCell"),s=hc(t,"lstmKernel","basicLSTMCell"),u=hc(n,"lstmBias","basicLSTMCell"),c=hc(r,"data","basicLSTMCell"),l=hc(a,"c","basicLSTMCell"),d=hc(o,"h","basicLSTMCell"),f=Bp([c,d],1),p=uf(f,s),h=ed(p,u),m=h.shape[0],v=h.shape[1]/4,y=[m,v],g=Vp(h,[0,0],y),b=Vp(h,[0,v],y),x=Vp(h,[0,2*v],y),w=Vp(h,[0,3*v],y),k=ed(rd(Up(g),Gp(b)),rd(l,Up(ed(i,x))));return[k,rd(Gp(k),Up(w))]}});var Hp=yc({batchToSpaceND_:function(e,t,n){var r=hc(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Mr(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Mr(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Mr(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return oc.runKernel(Ha,o,i)}});var Zp=yc({batchNorm_:function(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u=hc(e,"x","batchNorm"),c=hc(t,"mean","batchNorm"),l=hc(n,"variance","batchNorm");null!=a&&(i=hc(a,"scale","batchNorm")),null!=r&&(s=hc(r,"offset","batchNorm")),Mr(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Mr(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Mr(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:function(e){return 0===e.rank||1===e.rank?Pp(e,[1,1,1,e.size]):2===e.rank?Pp(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Pp(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),scale:i,offset:s,mean:c,variance:l},f={varianceEpsilon:o},p=oc.runKernel(Do,d,f);return Pp(p,u.shape)}});var qp=yc({batchNorm2d_:function(e,t,n,r,a,o){var i,s,u=hc(e,"x","batchNorm"),c=hc(t,"mean","batchNorm"),l=hc(n,"variance","batchNorm");return null!=a&&(i=hc(a,"scale","batchNorm")),null!=r&&(s=hc(r,"offset","batchNorm")),Mr(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Mr(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),Mr(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&Mr(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&Mr(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zp(u,c,l,s,i,o)}});var Xp=yc({batchNorm3d_:function(e,t,n,r,a,o){var i,s,u=hc(e,"x","batchNorm"),c=hc(t,"mean","batchNorm"),l=hc(n,"variance","batchNorm");return null!=a&&(i=hc(a,"scale","batchNorm")),null!=r&&(s=hc(r,"offset","batchNorm")),Mr(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Mr(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),Mr(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&Mr(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&Mr(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zp(u,c,l,s,i,o)}});var Kp=yc({batchNorm4d_:function(e,t,n,r,a,o){var i,s,u=hc(e,"x","batchNorm"),c=hc(t,"mean","batchNorm"),l=hc(n,"variance","batchNorm");return null!=a&&(i=hc(a,"scale","batchNorm")),null!=r&&(s=hc(r,"offset","batchNorm")),Mr(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Mr(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),Mr(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=i&&Mr(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=s&&Mr(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zp(u,c,l,s,i,o)}});var Yp=yc({bincount_:function(e,t,n){var r=hc(e,"x","bincount"),a=hc(t,"weights","bincount");Mr("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Mr(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Mr(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return oc.runKernel(Za,o,i)}});var Qp=yc({broadcastArgs_:function(e,t){var n=hc(e,"s0","broadcastArgs","int32"),r=hc(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return oc.runKernel(Xa,a)}});var Jp=yc({broadcastTo_:function(e,t){var n=hc(e,"broadcastTo","x"),r=n.shape;if(ha(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Pp(n,a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return Rl(n);var u={x:n},c={reps:i};return oc.runKernel(Ts,u,c)}});var $p=yc({ceil_:function(e){var t={x:hc(e,"x","ceil","float32")};return oc.runKernel(Ya,t)}});var eh=yc({clipByValue_:function(e,t,n){var r=hc(e,"x","clipByValue");if(Mr(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return xd(r.shape,t,r.dtype);var a={x:r},o={clipValueMin:t,clipValueMax:n};return oc.runKernel(Qa,a,o)}});var th=yc({concat1d_:function(e){return Bp(e,0)}});var nh=yc({concat2d_:function(e,t){return Bp(e,t)}});var rh=yc({concat3d_:function(e,t){return Bp(e,t)}});var ah=yc({concat4d_:function(e,t){return Bp(e,t)}});var oh=yc({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=hc(e,"x","conv2d","float32"),u=hc(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Mr(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),Mr(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Dp("conv2d",r,i);var d="NHWC"===a?c.shape[3]:c.shape[1];Mr(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Mr(Mp(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),Mr(Op(o),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),Mr(Op(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var f={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=oc.runKernel(to,f,p);return l?Pp(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var ih=yc({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,s=hc(e,"x","conv1d"),u=hc(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Pp(s,[1,s.shape[0],s.shape[1]])),Mr(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),Mr(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),Dp("conv1d",r,i),Mr(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Mr(Mp(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")})),Mr(Op(o),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),Mr(Op(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),Mr("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=Pp(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=Pp(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=oh(f,d,[1,n],r,"NHWC",[1,o],i);return Pp(p,l?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});var sh=yc({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;Mr(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Mr(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Mr(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Mr(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===o?s[3]:s[1],d="NHWC"===o?u.shape[3]:u.shape[1];Mr(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Mr(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),Dp("conv2dDerInput",a,i);var f={dy:u,filter:n},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},h=oc.runKernel(ro,f,p);return c?Pp(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var uh=yc({conv2dTranspose_:function(e,t,n,r,a,o){var i=hc(e,"x","conv2dTranspose"),s=hc(t,"filter","conv2dTranspose");return sh(n,i,s,r,a,"NHWC",o)}});var ch=yc({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=hc(e,"x","conv3d"),s=hc(t,"filter","conv3d"),u=i,c=!1;4===i.rank&&(c=!0,u=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Mr(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Mr(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Mr(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Mr(Mp(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")})),Mr("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),Mr(Op(o),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),Mr(Op(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:o},f=oc.runKernel(ao,l,d);return c?Pp(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var lh=yc({conv3DBackpropInput_:function(e,t,n,r,a){Mr(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var o=e,i=t,s=!1;4===t.rank&&(s=!0,i=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],c=i.shape[4];Mr(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")})),Mr(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(i.rank)})),Mr(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Mr(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Mr(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:i,filter:n},d={pad:a,strides:r,inputShape:o},f=oc.runKernel(io,l,d);return s?Pp(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var dh=yc({conv3dTranspose_:function(e,t,n,r,a){var o=hc(e,"x","conv3dTranspose"),i=hc(t,"filter","conv3dTranspose");return lh(n,o,i,r,a)}});var fh=yc({cos_:function(e){var t={x:hc(e,"x","cos","float32")};return oc.runKernel(so,t)}});var ph=yc({cosh_:function(e){var t={x:hc(e,"x","cosh","float32")};return oc.runKernel(uo,t)}});var hh=yc({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:hc(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return oc.runKernel(co,a,o)}});var mh=yc({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:hc(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return oc.runKernel(lo,a,o)}});var vh=yc({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=hc(e,"x","denseBincount"),o=hc(t,"weights","denseBincount");Mr("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),Mr(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),Mr(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Mr(o.size===a.size||0===o.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(o.shape,".")}));var i={x:a,weights:o},s={size:n,binaryOutput:r};return oc.runKernel(po,i,s)}});var yh=yc({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=hc(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];Mr(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),Mr(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Mr(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Mr(i%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return oc.runKernel(ho,s,u)}});var gh=yc({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=hc(e,"x","depthwiseConv2d","float32"),u=hc(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Mr(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Mr(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var d="NHWC"===a?c.shape[3]:c.shape[1];Mr(d===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),Dp("depthwiseConv2d",r,i);var f={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=oc.runKernel(mo,f,p);return l?Pp(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var bh=yc({diag_:function(e){var t={x:hc(e,"x","diag")};return oc.runKernel(go,t)}});var xh=yc({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=hc(e,"x","dilation2d"),s=hc(t,"filter","dilation2d");Mr(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(i.rank,".")})),Mr(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Mr("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o)}));var u=i,c=!1;3===i.rank&&(u=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),Mr(u.shape[3]===s.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])}));var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=oc.runKernel(bo,l,d);return c?Pp(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var wh=yc({equal_:function(e,t){var n=hc(e,"a","equal","string_or_numeric"),r=hc(t,"b","equal","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(Co,i)}});var kh=yc({where_:function(e,t,n){var r=hc(t,"a","where"),a=hc(n,"b","where"),o=hc(e,"condition","where","bool"),i=Id(Id(o.shape,r.shape),a.shape),s={condition:Jp(o,i),t:Jp(r,i),e:Jp(a,i)};return oc.runKernel(Ji,s)}});var Sh=yc({divNoNan_:function(e,t){var n=hc(e,"a","div"),r=hc(t,"b","div"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1];var i=nd(n,r),s=id(i),u=wh(r,s);return kh(u,s,i)}});var _h=yc({dot_:function(e,t){var n=hc(e,"t1","dot"),r=hc(t,"t2","dot");Mr((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(Mr(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")})),1===n.rank&&1===r.rank){var i=Pp(n,[1,-1]),s=Pp(r,[-1,1]),u=uf(i,s);return Pp(u,[])}if(1===n.rank&&2===r.rank){var c=Pp(n,[1,-1]),l=Pp(r,[r.shape[0],r.shape[1]]),d=uf(c,l);return Pp(d,[d.size])}if(2===n.rank&&1===r.rank){var f=Pp(r,[-1,1]),p=uf(n,f);return Pp(p,[p.size])}var h=Pp(r,[r.shape[0],r.shape[1]]);return uf(n,h)}});var Th=yc({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return hc(e,"tensors".concat(t),"einsum")})),o={equation:e};return oc.runKernel(So,a,o)}});var Eh=yc({elu_:function(e){var t={x:hc(e,"x","elu","float32")};return oc.runKernel(_o,t)}});var Ch=yc({erf_:function(e){var t=hc(e,"x","erf");Mr("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=jl(t,"float32"));var n={x:t};return oc.runKernel(Eo,n)}});function Ih(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Nh(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function jh(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function Rh(e,t){return Nh(e,t.map((function(e){return 1})),t)}function Ah(e,t,n){Mr(Ih(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Mh(e,t){if(Ih(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Oh(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Lh(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Dh=yc({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:hc(e,"x","max")},a={reductionIndices:t,keepDims:n};return oc.runKernel(si,r,a)}});var Ph=yc({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:hc(e,"x","min")},a={axis:t,keepDims:n};return oc.runKernel(mi,r,a)}});var Fh=yc({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=hc(e,"x","sum");"bool"===r.dtype&&(r=jl(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return oc.runKernel(ss,a,o)}});function zh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Td(e);if(1!==e.rank&&null===n)return zh(Pp(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Fh(Td(e),n);if(t===1/0)return Dh(Td(e),n);if(t===-1/0)return Ph(Td(e),n);if("euclidean"===t||2===t)return ad(Fh(kd(Td(e),hd(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Dh(Fh(Td(e),n[0]),n[1]-1);if(t===1/0)return Dh(Fh(Td(e),n[1]),n[0]);if(t===-1/0)return Ph(Fh(Td(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return ad(Fh(od(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Bh=yc({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=zh(e=hc(e,"x","norm"),t,n),o=a.shape;if(r){var i=Zr(n,e.shape);o=Rh(a.shape,i)}return Pp(a,o)}});var Uh=yc({euclideanNorm_:function(e){return Bh(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});var Vh=yc({exp_:function(e){var t={x:hc(e,"x","exp")};return oc.runKernel(Io,t)}});var Gh=yc({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=hc(e,"x","expandDims","string_or_numeric");Mr(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return oc.runKernel(No,r,a)}});var Wh=yc({expm1_:function(e){var t={x:hc(e,"x","expm1")};return oc.runKernel(jo,t)}});var Hh=yc({tile_:function(e,t){var n=hc(e,"x","tile","string_or_numeric");Mr(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return oc.runKernel(Ts,r,a)}});var Zh=yc({eye_:function(e,t,n){null==t&&(t=e);for(var r=Nl([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,o=0;o<a;++o)r.set(1,o,o);var i=Pp(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return Hh(Gh(i,0),[n[0],1,1]);if(2===n.length)return Hh(Gh(Gh(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return Hh(Gh(Gh(Gh(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var qh=yc({floor_:function(e){var t={x:hc(e,"x","floor","float32")};return oc.runKernel(Oo,t)}});var Xh=yc({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:hc(e,"x","gather"),indices:hc(t,"indices","gather","int32")},o={axis:n,batchDims:r};return oc.runKernel(Po,a,o)}});var Kh=yc({greater_:function(e,t){var n=hc(e,"a","greater","string_or_numeric"),r=hc(t,"b","greater","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(zo,i)}});var Yh=yc({greaterEqual_:function(e,t){var n=hc(e,"a","greaterEqual","string_or_numeric"),r=hc(t,"b","greaterEqual","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(Bo,i)}});var Qh=yc({isFinite_:function(e){var t={x:hc(e,"x","isFinite")};return oc.runKernel(Wo,t)}});var Jh=yc({isInf_:function(e){var t={x:hc(e,"x","isInf")};return oc.runKernel(Ho,t)}});var $h=yc({isNaN_:function(e){var t={x:hc(e,"x","isNaN")};return oc.runKernel(Zo,t)}});var em=yc({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:hc(e,"x","leakyRelu")},r={alpha:t};return oc.runKernel(qo,n,r)}});var tm=yc({less_:function(e,t){var n=hc(e,"a","less","string_or_numeric"),r=hc(t,"b","less","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(Xo,i)}});var nm=yc({lessEqual_:function(e,t){var n=hc(e,"a","lessEqual","string_or_numeric"),r=hc(t,"b","lessEqual","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(Ko,i)}});function rm(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return oc.runKernel(Yo,{},r)}var am=yc({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=hc(e,"x","localResponseNormalization");Mr(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),Mr(zr(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var i=o,s=!1;3===o.rank&&(s=!0,i=Pp(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={x:i},c={depthRadius:t,bias:n,alpha:r,beta:a},l=oc.runKernel(oi,u,c);return s?Pp(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var om=yc({log_:function(e){var t={x:hc(e,"x","log","float32")};return oc.runKernel(Qo,t)}});var im=yc({log1p_:function(e){var t={x:hc(e,"x","log1p")};return oc.runKernel(Jo,t)}});var sm=yc({softplus_:function(e){var t={x:hc(e,"x","softplus")};return oc.runKernel(os,t)}});var um=yc({logSigmoid_:function(e){var t=hc(e,"x","logSigmoid");return fd((function(e){return{value:df(sm(df(e))),gradFunc:function(t){return rd(t,Up(df(e)))}}}))(t)}});var cm=yc({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=hc(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=fd((function(e,n){var r=Dh(e,t,!0),a=Sd(e,r),o=Sd(jl(a,"float32"),om(Fh(Vh(a),t,!0)));n([o]);return{value:o,gradFunc:function(e,n){var r=(0,X.Z)(n,1)[0],a=Vh(r);return Sd(e,rd(Fh(e,t,!0),a))}}}));return r(n)}});var lm=yc({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=hc(e,"x","logSumExp"),a=Zr(t,r.shape),o=Dh(r,a,!0),i=Sd(r,o),s=Vh(i),u=Fh(s,a),c=om(u),l=ed(Pp(o,c.shape),c);if(n){var d=Rh(l.shape,a);return Pp(l,d)}return l}});var dm=yc({logicalAnd_:function(e,t){var n=hc(e,"a","logicalAnd","bool"),r=hc(t,"b","logicalAnd","bool");Id(n.shape,r.shape);var a={a:n,b:r};return oc.runKernel($o,a)}});var fm=yc({logicalNot_:function(e){var t={x:hc(e,"x","logicalNot","bool")};return oc.runKernel(ei,t)}});var pm=yc({logicalOr_:function(e,t){var n=hc(e,"a","logicalOr","bool"),r=hc(t,"b","logicalOr","bool");Id(n.shape,r.shape);var a={a:n,b:r};return oc.runKernel(ti,a)}});var hm=yc({logicalXor_:function(e,t){var n=hc(e,"a","logicalXor","bool"),r=hc(t,"b","logicalXor","bool");return Id(n.shape,r.shape),dm(pm(e,t),fm(dm(e,t)))}}),mm=2147483648;var vm=yc({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=hc(e,"sortedSequence","searchSorted"),a=hc(t,"values","searchSorted"),o=r.shape[r.shape.length-1],i=a.shape[a.shape.length-1],s=Pp(r,[-1,o]),u=Pp(a,[-1,i]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Dr(u.shape)>=mm)throw new Error("values tensor size must less than ".concat(mm));if(s.shape[1]>=mm)throw new Error("trailing dim_size must less than ".concat(mm," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return oc.runKernel(Qi,c,l)}});function ym(e,t){return vm(e,t,"left")}var gm=yc({maxPool_:function(e,t,n,r,a){var o=hc(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=Pp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Mr(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),Mr(Mp(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),Dp("maxPool",r,a);var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=oc.runKernel(ci,u,c);return s?Pp(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var bm=yc({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=hc(e,"x","maxPool3d"),s=i,u=!1;4===i.rank&&(u=!0,s=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Mr(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Mr("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)})),Dp("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=oc.runKernel(di,c,l);return u?Pp(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var xm=yc({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={x:hc(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=oc.runKernel(pi,o,i);return{result:s[0],indexes:s[1]}}});var wm=yc({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:hc(e,"x","mean")},a={axis:t,keepDims:n};return oc.runKernel(hi,r,a)}});function km(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ha(e),"complex64"===t){var n=km(e,"float32"),r=km(e,"float32");return gc(n,r)}var a=fa(Dr(e),t);return oc.makeTensor(a,e,t)}function Sm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ha(e),"complex64"===t){var n=Sm(e,"float32"),r=km(e,"float32");return gc(n,r)}var a=da(Dr(e),t);return oc.makeTensor(a,e,t)}function _m(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).indexing,r=void 0===n?"xy":n;if("xy"!==r&&"ij"!==r)throw new TypeError("".concat(r," is not a valid third argument to meshgrid"));if(void 0===e)return[];var a=hc(e,"x","meshgrid",e instanceof Fu?e.dtype:"float32");if(void 0===t)return[a];var o=hc(t,"y","meshgrid",t instanceof Fu?t.dtype:"float32"),i=Dr(a.shape),s=Dr(o.shape);return"xy"===r?(a=Pp(a,[1,-1]),o=Pp(o,[-1,1]),[uf(Sm([s,1],a.dtype),a),uf(o,Sm([1,i],o.dtype))]):(a=Pp(a,[-1,1]),o=Pp(o,[1,-1]),[uf(a,Sm([1,s],a.dtype)),uf(Sm([i,1],o.dtype),o)])}var Tm=yc({minimum_:function(e,t){var n=hc(e,"a","minimum"),r=hc(t,"b","minimum"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],"bool"===n.dtype&&(n=jl(n,"int32"),r=jl(r,"int32")),Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(vi,i)}});var Em=yc({mirrorPad_:function(e,t,n){Mr("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=hc(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Mr(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){Mr(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Mr(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var s={paddings:t,mode:n},u={x:r};return oc.runKernel(yi,u,s)}});var Cm=yc({mod_:function(e,t){var n=hc(e,"a","mod"),r=hc(t,"b","mod"),a=Ku(n,r),o=(0,X.Z)(a,2),i={a:n=o[0],b:r=o[1]};return oc.runKernel(gi,i)}});var Im=yc({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Zr(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=hc(e,"x","moments")).shape),r=wm(e,n,t),a=r.shape;t||(a=Rh(r.shape,n));var o=od(Sd(jl(e,"float32"),Pp(r,a)));return{mean:r,variance:wm(o,n,t)}}});var Nm=yc({multiRNNCell_:function(e,t,n,r){for(var a=hc(t,"data","multiRNNCell"),o=mc(n,"c","multiRNNCell"),i=mc(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,o[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var d=[],f=[],p=0;p<u.length;p+=2)d.push(u[p]),f.push(u[p+1]);return[d,f]}});var jm=yc({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=hc(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(o,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();var s={logits:1===i?Pp(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=oc.runKernel(bi,s,u);return 1===i?Pp(c,[c.size]):c}});var Rm=yc({notEqual_:function(e,t){var n=hc(e,"a","notEqual","string_or_numeric"),r=hc(t,"b","notEqual","string_or_numeric"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(ki,i)}});var Am=yc({onesLike_:function(e){var t={x:hc(e,"x","onesLike")};return oc.runKernel(Ei,t)}});var Mm=yc({outerProduct_:function(e,t){var n=hc(e,"v1","outerProduct"),r=hc(t,"v2","outerProduct");Mr(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Pp(n,[-1,1]),o=Pp(r,[1,-1]);return uf(a,o)}});var Om=yc({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=hc(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return oc.runKernel(Ni,o,a)}});var Lm=yc({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mr(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Om(e,[t],n)}});var Dm=yc({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mr(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Om(e,t,n)}});var Pm=yc({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mr(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Om(e,t,n)}});var Fm=yc({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Mr(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Om(e,t,n)}});var zm=yc({spaceToBatchND_:function(e,t,n){var r=hc(e,"x","spaceToBatchND");Mr(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Mr(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Mr(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return oc.runKernel(us,a,o)}});var Bm=yc({pool_:function(e,t,n,r,a,o,i){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var s=hc(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Mr(Mp(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(a,"'")}));var l,d=Sp(u.shape,t,o,a,r),f=[d.dilationHeight,d.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),o=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],o[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,i[t]]}));return[u,c]}([d.inHeight,d.inWidth],f,l),m=(0,X.Z)(h,2),v=m[0],y=m[1],g=p?r:"valid",b=p?u:zm(u,f,v),x=("avg"===n?function(){return Fp(b,t,o,g,i)}:function(){return gm(b,t,o,g,i)})(),w=p?x:Hp(x,f,y);return c?Pp(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var Um=yc({prelu_:function(e,t){var n={x:hc(e,"x","prelu"),alpha:hc(t,"alpha","prelu")};return oc.runKernel(Ai,n)}});var Vm=yc({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=hc(e,"x","prod");"bool"===r.dtype&&(r=jl(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return oc.runKernel(Mi,a,o)}});var Gm=yc({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return hc(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:hc(t,"paramsDenseValues","raggedGather"),indices:hc(n,"indices","raggedGather","int32")},o={outputRaggedRank:r},i=oc.runKernel(Oi,a,o);return{outputNestedSplits:i.slice(0,i.length-1),outputDenseValues:i[i.length-1]}}});var Wm=yc({raggedRange_:function(e,t,n){var r=hc(e,"starts","raggedRange"),a={starts:r,limits:hc(t,"limits","raggedRange",r.dtype),deltas:hc(n,"deltas","raggedRange",r.dtype)},o=oc.runKernel(Li,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}});var Hm=yc({raggedTensorToTensor_:function(e,t,n,r,a){var o=hc(e,"shape","raggedTensorToTensor","int32"),i=hc(t,"values","raggedTensorToTensor"),s={shape:o,values:i,defaultValue:hc(n,"defaultValue","raggedTensorToTensor",i.dtype),rowPartitionTensors:r.map((function(e,t){return hc(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},u={rowPartitionTypes:a};return oc.runKernel(Di,s,u)}});var Zm=yc({rand_:function(e,t,n){ha(e);var r=Dr(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return oc.makeTensor(a,e,n)}}),qm=r(6699),Xm=function(){function e(t,n,r,a,o){vr(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=qm.alea(i.toString())}return br(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Km=function(){function e(t,n,r,a){vr(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var o=a||Math.random();this.randu=qm.alea(o.toString()),this.randn=new Xm(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return br(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Ym=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(vr(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"===typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=qm.alea(o)}return br(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Qm=yc({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(ha(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var o=new Km(t,n,r,a),i=Nl(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var Jm=yc({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ha(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new Xm(t,n,r,!1,a),i=Nl(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var $m=yc({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return Jm(e,0,1,t,n)}});var ev=yc({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;ha(e);for(var o=Nl(e,r),i=new Ym(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});function tv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return oc.runKernel(Pi,{},a)}var nv=yc({reciprocal_:function(e){var t={x:hc(e,"x","reciprocal")};return oc.runKernel(zi,t)}});var rv=yc({relu_:function(e){var t={x:hc(e,"x","relu")};return oc.runKernel(Bi,t)}});var av=yc({relu6_:function(e){var t={x:hc(e,"x","relu6")};return oc.runKernel(Zi,t)}});var ov=yc({reverse_:function(e,t){var n={x:hc(e,"x","reverse")},r={dims:t};return oc.runKernel(qi,n,r)}});var iv=yc({reverse1d_:function(e){var t=hc(e,"x","reverse");return Mr(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),ov(t,0)}});var sv=yc({reverse2d_:function(e,t){var n=hc(e,"x","reverse");return Mr(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),ov(n,t)}});var uv=yc({reverse3d_:function(e,t){var n=hc(e,"x","reverse");return Mr(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),ov(n,t)}});var cv=yc({reverse4d_:function(e,t){var n=hc(e,"x","reverse");return Mr(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),ov(n,t)}});var lv=yc({round_:function(e){var t={x:hc(e,"x","round")};return oc.runKernel(Xi,t)}});var dv=yc({rsqrt_:function(e){var t={x:hc(e,"x","rsqrt","float32")};return oc.runKernel(Ki,t)}});var fv=yc({selu_:function(e){var t={x:hc(e,"x","selu")};return oc.runKernel($i,t)}});var pv=yc({separableConv2d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=hc(e,"x","separableConv2d"),u=hc(t,"depthwiseFilter","separableConv2d"),c=hc(n,"pointwiseFilter","separableConv2d"),l=s,d=!1;if(3===s.rank&&(d=!0,l=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Mr(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Mr(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Mr(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Mr(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),Mr(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],p=u.shape[3];Mr(c.shape[2]===f*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*p,", ")+"but got ".concat(c.shape[2],".")}));var h=gh(l,u,r,a,i,o),m=oh(h,c,1,"valid",i);return d?Pp(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function hv(){return hv=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hc(t,"x","setdiff1d"),a=hc(n,"y","setdiff1d"),Mr(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Mr(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Mr(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return o=e.sent,e.next=10,a.data();case 10:for(i=e.sent,s=new Set(i),u=0,c=0;c<o.length;c++)s.has(o[c])||u++;for(l=new Lu([u],r.dtype),d=new Lu([u],"int32"),f=0,p=0;f<o.length;f++)s.has(o[f])||(l.values[p]=o[f],d.values[p]=f,p++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}var mv=function(e,t){return hv.apply(this,arguments)};var vv=yc({sign_:function(e){var t={x:hc(e,"x","sign")};return oc.runKernel(rs,t)}});var yv=yc({sin_:function(e){var t={x:hc(e,"x","sin","float32")};return oc.runKernel(ts,t)}});var gv=yc({sinh_:function(e){var t={x:hc(e,"x","sinh")};return oc.runKernel(ns,t)}});var bv=yc({slice1d_:function(e,t,n){var r=hc(e,"x","slice1d");return Mr(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Vp(r,[t],[n])}});var xv=yc({slice2d_:function(e,t,n){var r=hc(e,"x","slice2d");return Mr(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Vp(r,t,n)}});var wv=yc({slice3d_:function(e,t,n){var r=hc(e,"x","slice3d");return Mr(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Vp(r,t,n)}});var kv=yc({slice4d_:function(e,t,n){var r=hc(e,"x","slice4d");return Mr(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Vp(r,t,n)}});var Sv=yc({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=hc(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return oc.runKernel(ls,r,a)}});var _v=yc({fft_:function(e){Mr("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return oc.runKernel(Ro,t)}});var Tv=yc({ifft_:function(e){Mr("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return oc.runKernel(Vo,t)}});var Ev=yc({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Pp(e,[r,n]);t=Tv(a)}else{var o=[r,2*(n-1)],i=Pp(ff(e),[r,n]),s=Pp(lf(e),[r,n]),u=ov(Vp(i,[0,1],[r,n-2]),1),c=rd(ov(Vp(s,[0,1],[r,n-2]),1),hd(-1)),l=Bp([i,u],1),d=Bp([s,c],1),f=Pp(gc(l,d),[o[0],o[1]]);t=Tv(f)}if(t=ff(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=Pp(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var Cv=yc({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:hc(e,"x","split")},a={numOrSizeSplits:t,axis:n};return oc.runKernel(cs,r,a)}});var Iv=yc({rfft_:function(e,t){Mr("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=Vp(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Bp([e,km(s)],e.shape.length-1),r=t}else n=e;var u=id(n),c=Pp(gc(n,u),[a,r]),l=_v(c),d=Math.floor(r/2)+1,f=ff(l),p=lf(l),h=Cv(f,[d,r-d],f.shape.length-1),m=Cv(p,[d,r-d],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,Pp(gc(h[0],m[0]),v)}});var Nv=yc({squaredDifference_:function(e,t){var n=hc(e,"a","squaredDifference"),r=hc(t,"b","squaredDifference"),a=Ku(n,r),o=(0,X.Z)(a,2);n=o[0],r=o[1],Id(n.shape,r.shape);var i={a:n,b:r};return oc.runKernel(vs,i,{})}});var jv=yc({squeeze_:function(e,t){var n=hc(e,"x","squeeze","string_or_numeric");return Pp(n,qr(n.shape,t).newShape)}});var Rv=yc({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=mc(e,"tensors","stack","string_or_numeric");Mr(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Mr(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return oc.runKernel(Ii,r,a)}});var Av=yc({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:hc(e,"x","step")},r={alpha:t};return oc.runKernel(Os,n,r)}});var Mv=yc({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:hc(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};return oc.runKernel(gs,c,l)}});var Ov=yc({tan_:function(e){var t={x:hc(e,"x","tan","float32")};return oc.runKernel(Ss,t)}});function Lv(e,t){Lr(e);var n=dc(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return bc(e,null,n,t)}function Dv(e,t,n){if(Lr(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=dc(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return bc(e,t,r,n)}function Pv(e,t,n){if(Lr(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=dc(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return bc(e,t,r,n)}function Fv(e,t,n){if(Lr(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=dc(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return bc(e,t,r,n)}function zv(e,t,n){if(Lr(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=dc(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return bc(e,t=t||r,r,n)}var Bv=yc({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=hc(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var o={x:r},i={k:t,sorted:n},s=oc.runKernel(Es,o,i),u=(0,X.Z)(s,2);return{values:u[0],indices:u[1]}}});var Uv=yc({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ha(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new Xm(t,n,r,!0,a),i=Nl(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var Vv=yc({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=hc(e,"x","unique","string_or_numeric");Mr(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},o=oc.runKernel(Ns,r,a),i=(0,X.Z)(o,2);return{values:i[0],indices:i[1]}}});var Gv=yc({unsortedSegmentSum_:function(e,t,n){var r=hc(e,"x","unsortedSegmentSum"),a=hc(t,"segmentIds","unsortedSegmentSum","int32");Mr(zr(n),(function(){return"numSegments must be of dtype int"}));var o={x:r,segmentIds:a},i={numSegments:n};return oc.runKernel(Rs,o,i)}});var Wv=yc({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=hc(e,"x","unstack","string_or_numeric");Mr(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return oc.runKernel(js,r,a)}});function Hv(e,t){return vm(e,t,"right")}function Zv(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return oc.makeVariable(e,t,n,r)}function qv(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Nl(e,"int32"),o=Nl([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}function Xv(){return(Xv=mr(pr().mark((function e(t){var n,r,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=hc(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=qv(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kv=function(e){return Xv.apply(this,arguments)};function Yv(){return Yv=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,v;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=hc(t,"tensor","boolMask"),o=hc(n,"mask","boolMask","bool"),i=null==r?0:r,s=o.rank,u=a.shape,Mr(s>0,(function(){return"mask cannot be scalar"})),Or(u.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=i;l<i+s;l++)c*=u[l];return d=u.slice(0,i).concat([c],u.slice(i+s)),f=Pp(a,d),p=Pp(o,[-1]),e.next=14,Kv(p);case 14:return h=e.sent,m=jv(h,[1]),v=Xh(f,m,i),t!==a&&a.dispose(),n!==o&&o.dispose(),m.dispose(),f.dispose(),p.dispose(),h.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}var Qv=function(e,t,n){return Yv.apply(this,arguments)};var Jv=yc({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=hc(e,"v","movingAverage"),i=hc(t,"x","movingAverage"),s=hc(n,"decay","movingAverage");Yu(o,i),Mr(Fr(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=hd(1),c=Sd(u,s),l=rd(Sd(i,o),c);if(a){Mr(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=hc(r,"step","movingAverage");l=nd(l,Sd(u,kd(s,d)))}return ed(o,l)}});var $v=yc({scatterND_:function(e,t,n){ha(n);var r=hc(e,"indices","scatterND","int32"),a=hc(t,"updates","scatterND");Ef(a,r,n);var o={indices:r,updates:a},i={shape:n};return oc.runKernel(Yi,o,i)}});var ey=yc({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ha(n);var a=hc(e,"sparseIndices","sparseToDense","int32"),o=hc(t,"sparseValues","sparseToDense","string_or_numeric"),i=hc(r,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,n,i);var s={sparseIndices:a,sparseValues:o,defaultValue:i},u={outputShape:n};return oc.runKernel(ms,s,u)}});var ty=yc({gatherND_:function(e,t){var n=hc(t,"indices","gatherND","int32"),r={params:hc(e,"x","gatherND","string_or_numeric"),indices:n};return oc.runKernel(Fo,r)}});var ny=yc({dropout_:function(e,t,n,r){var a=hc(e,"x","dropout");if(Mr("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Mr(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Fu?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(Fr(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,s=nd(qh(ed(ev(o,0,1,"float32",r),i)),i);return rd(a,s)}});function ry(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function ay(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return Lv(a,"float32")}function oy(){return oy=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p,h,m,v,y,g=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>2&&void 0!==g[2]?g[2]:1,a=hc(t,"predictions","inTopK"),o=hc(n,"targets","inTopK"),Mr(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Mr(a.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(o.rank)})),Or(a.shape.slice(0,a.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],Mr(r>0&&r<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,o.data();case 13:u=e.sent,c=s.length/i,l=i,d=Xr("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(p=f*l,h=s.subarray(p,p+l),m=[],v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((function(e,t){return t.value-e.value})),d[f]=0,y=0;case 25:if(!(y<r)){e.next=32;break}if(m[y].index!==u[f]){e.next=29;break}return d[f]=1,e.abrupt("break",32);case 29:y++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==o&&o.dispose(),e.abrupt("return",xc(d,o.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),oy.apply(this,arguments)}var iy=function(e,t){return oy.apply(this,arguments)};var sy=yc({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Pp(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Mr(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Mr(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Mr(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1];Mr(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),Mr(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),Dp("conv2dDerFilter",a,i);var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return oc.runKernel(no,d,f)}});function uy(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return rd(e,Av(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function cy(e,t){var n=t,r=Cd(e.shape,t.shape);return r.length>0&&(n=Fh(n,r)),Pp(n,e.shape)}function ly(e,t,n,r){if("linear"===t)return e;if("relu"===t)return rv(e);if("elu"===t)return Eh(e);if("relu6"===t)return av(e);if("prelu"===t)return Um(e,n);if("leakyrelu"===t)return em(e,r);if("sigmoid"===t)return Up(e);throw new Error("Unknown fused activation ".concat(t,"."))}var dy=function(e,t){return!(e>0)||"linear"===t};var fy=yc({fusedConv2d_:function(t){var n=t.x,r=t.filter,a=t.strides,o=t.pad,i=t.dataFormat,s=void 0===i?"NHWC":i,u=t.dilations,c=void 0===u?[1,1]:u,l=t.dimRoundingMode,d=t.bias,f=t.activation,p=void 0===f?"linear":f,h=t.preluActivationWeights,m=t.leakyreluAlpha;if(p=p||"linear",!1===dy(oc.state.gradientDepth,p)){Mr("NHWC"===s,(function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=oh(n,r,a,o,s,c,l);return null!=d&&(v=ed(v,d)),ly(v,p,h,m)}var y=hc(n,"x","conv2d","float32"),g=hc(r,"filter","conv2d","float32"),b=y,x=!1;3===y.rank&&(x=!0,b=Pp(y,[1,y.shape[0],y.shape[1],y.shape[2]])),Mr(4===b.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(b.rank,".")})),Mr(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),Dp("fused conv2d",o,l);var w="NHWC"===s?b.shape[3]:b.shape[1];Mr(g.shape[2]===w,(function(){return"Error in conv2d: depth of input (".concat(w,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),Mr(Mp(a,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(a," and dilations '").concat(c,"'")}));var k,S,_=Tp(b.shape,g.shape,a,c,o,l);if(null!=d){var T=Ku(k=hc(d,"bias","fused conv2d"),y),E=(0,X.Z)(T,1);k=E[0],"NHWC"===s?Id(_.outShape,k.shape):(Mr(k.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(k.shape.length,".")})),Mr(0===k.shape.length||k.shape[0]===_.outChannels||1===k.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(k.shape,") is not ")+"compatible with the number of output channels "+"(".concat(_.outChannels,")")})))}if(null!=h){var C=h.shape;if(Mr(C.length<=1||3===C.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(C.length,".")})),1===C.length)Mr(1===C[0]||C[0]===_.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(C,") is not compatible with the number of output ")+"channels (".concat(_.outChannels,").")}));else if(3===C.length)try{Id(C,_.outShape)}catch(e){var I="Error in fused conv2d: PReLU activation weights (".concat(C,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(_.outShape,").");throw Error(I)}S=hc(h,"prelu weights","fused conv2d")}var N=function(e,t){Mr("NHWC"===s,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var n=(0,X.Z)(t,4),r=n[0],i=n[1],u=n[2],l=n[3],d=uy(e,u,p);Mr(Ap(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(c,"'")}));var f=[sh(i.shape,d,r,a,o),sy(i,d,r.shape,a,o)];if(null!=l){var h=cy(l,d);f.push(h)}return f},j={x:b,filter:g,bias:k,preluActivationWeights:S},R={strides:a,pad:o,dataFormat:s,dilations:c,dimRoundingMode:l,activation:p,leakyreluAlpha:m};if(null==d){var A=fd((function(e,t,n){var r=oc.runKernel(Fs,j,R);return n([t,e,r]),x&&(r=Pp(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:N}}));return A(b,g)}var M=fd((function(e,t,n,r){var a=oc.runKernel(Fs,j,R);return r([t,e,a,n]),x&&(a=Pp(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return M(b,g,k)}});var py=yc({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Pp(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return oc.runKernel(vo,c,l)}});var hy=yc({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},d=oc.runKernel(yo,c,l);return u?Pp(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var my=yc({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(!1===dy(oc.state.gradientDepth,f)){var m=gh(t,n,r,a,i,u,c);return null!=l&&(m=ed(m,l)),ly(m,f,p,h)}var v=hc(t,"x","depthwiseConv2d","float32"),y=hc(n,"filter","depthwiseConv2d","float32"),g=v,b=!1;3===v.rank&&(b=!0,g=Pp(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Mr(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(g.rank,".")})),Mr(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),Mr(g.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(g.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==u&&(u=[1,1]),Mr(Mp(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),Dp("fused depthwiseConv2d",a,c);var x,w,k=Tp(g.shape,y.shape,r,u,a,c,!0);if(null!=l){var S=Ku(x=hc(l,"bias","fused conv2d"),v),_=(0,X.Z)(S,1);x=_[0],Id(k.outShape,x.shape)}null!=p&&(w=hc(p,"prelu weights","fused depthwiseConv2d"));var T=function(e,t){Mr(Ap(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,X.Z)(t,4),o=n[0],i=n[1],s=n[2],l=n[3],d=uy(e,s,f),p=hy(i.shape,d,o,r,a,u,c),h=py(i,d,o.shape,r,a,u,c);return null!=l?[p,h,cy(x,d)]:[p,h]},E={x:g,filter:y,bias:x,preluActivationWeights:w},C={strides:r,pad:a,dataFormat:i,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:h};if(null==l){var I=fd((function(e,t,n){var r=oc.runKernel(zs,E,C);return n([t,e,r]),b&&(r=Pp(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return I(g,y)}var N=fd((function(e,t,n,r){var a=oc.runKernel(zs,E,C);return r([t,e,a,n]),b&&(a=Pp(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}}));return N(g,y,x)}});var vy=yc({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,o=e.transposeB,i=void 0!==o&&o,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha,f=void 0===d?.2:d;if(!1===dy(oc.state.gradientDepth,c)){var p=uf(t,n,a,i);return null!=s&&(p=ed(p,s)),ly(p,c,l,f)}var h=hc(t,"a","fused matMul"),m=hc(n,"b","fused matMul"),v=Ku(h,m),y=(0,X.Z)(v,2);h=y[0],m=y[1];var g=a?h.shape[h.rank-2]:h.shape[h.rank-1],b=i?m.shape[m.rank-1]:m.shape[m.rank-2],x=a?h.shape[h.rank-1]:h.shape[h.rank-2],w=i?m.shape[m.rank-2]:m.shape[m.rank-1],k=h.shape.slice(0,-2),S=m.shape.slice(0,-2),_=Dr(k),T=Dr(S);Mr(g===b,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(b,") of Tensors with shapes ").concat(h.shape," and ")+"".concat(m.shape," and transposeA=").concat(a)+" and transposeB=".concat(i," must match.")}));var E,C,I=Id(h.shape.slice(0,-2),m.shape.slice(0,-2)).concat([x,w]),N=Pp(h,a?[_,g,x]:[_,x,g]),j=Pp(m,i?[T,w,b]:[T,b,w]);if(null!=s){var R=Ku(E=hc(s,"bias","fused matMul"),h);E=(0,X.Z)(R,1)[0],Id(I,E.shape)}null!=l&&(C=hc(l,"prelu weights","fused matMul"));var A=function(e,t){var n,r,o=(0,X.Z)(t,4),u=o[0],l=o[1],d=o[2],f=o[3],p=uy(Pp(e,d.shape),d,c);return a||i?!a&&i?(n=uf(p,l,!1,!1),r=uf(p,u,!0,!1)):a&&!i?(n=uf(l,p,!1,!0),r=uf(u,p,!1,!1)):(n=uf(l,p,!0,!0),r=uf(p,u,!0,!0)):(n=uf(p,l,!1,!0),r=uf(u,p,!0,!1)),null!=s?[n,r,cy(f,p)]:[n,r]},M={a:N,b:j,bias:E,preluActivationWeights:C},O={transposeA:a,transposeB:i,activation:c,leakyreluAlpha:f};if(null==s){var L=fd((function(e,t,n){var r=oc.runKernel(Ps,M,O);return n([e,t,r]),{value:Pp(r,I),gradFunc:A}}));return L(N,j)}var D=fd((function(e,t,n,r){var a=oc.runKernel(Ps,M,O);return r([e,t,a,n]),{value:Pp(a,I),gradFunc:A}}));return D(N,j,E)}});var yy=yc({hammingWindow_:function(e){return ay(e,.54,.46)}});var gy=yc({hannWindow_:function(e){return ay(e,.5,.5)}});var by=yc({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0,i=[];o+t<=e.size;)i.push(Vp(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=Bp([Vp(e,o,t-s),xd([s],a)]);i.push(u),o+=n}return 0===i.length?Dv([],[0,t]):Pp(Bp(i),[i.length,t])}});var xy=yc({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gy;null==r&&(r=ry(t));var o=by(e,t,n),i=rd(o,a(t));return Iv(i,r)}});var wy=yc({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=hc(e,"image","cropAndResize"),s=hc(t,"boxes","cropAndResize","float32"),u=hc(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Mr(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),Mr(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Mr(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Mr(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Mr(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Mr("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:i,boxes:s,boxInd:u},d={method:a,extrapolationValue:o,cropSize:r};return oc.runKernel(fo,l,d)}});var ky=yc({flipLeftRight_:function(e){var t=hc(e,"image","flipLeftRight","float32");Mr(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return oc.runKernel(Mo,n,{})}});var Sy=yc({grayscaleToRGB_:function(e){var t=hc(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Mr(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Mr(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Hh(t,a)}});var _y=yc({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=hc(e,"image","rotateWithOffset","float32");Mr(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r};return oc.runKernel(Ds,o,i)}});function Ty(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),Mr(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Mr(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Mr(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Mr(1===t.rank,(function(){return"scores must be a 1D tensor"})),Mr(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),Mr(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var Ey=yc({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=hc(e,"boxes","nonMaxSuppression","float32"),i=hc(t,"scores","nonMaxSuppression","float32"),s=Ty(o,i,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return oc.runKernel(Si,{boxes:o,scores:i},u)}});function Cy(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||Iy)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Iy(e,t){return e>t?1:e<t?-1:0}function Ny(e,t,n,r,a){return Ay(e,t,n,r,a,0)}function jy(e,t,n,r,a,o){return Ay(e,t,n,r,a,0,!1,o,!0)}function Ry(e,t,n,r,a,o){return Ay(e,t,n,r,a,o,!0)}function Ay(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(Ly);for(var d=o>0?-.5/o:0,f=[],p=[];f.length<n&&c.length>0;){var h=c.pop(),m=h.score,v=h.boxIndex,y=h.suppressBeginIndex;if(m<a)break;for(var g=!1,b=f.length-1;b>=y;--b){var x=My(e,v,f[b]);if(x>=r){g=!0;break}if(h.score=h.score*Oy(r,d,x),h.score<=a)break}h.suppressBeginIndex=f.length,g||(h.score===m?(f.push(v),p.push(h.score)):h.score>a&&Cy(c,h,Ly))}var w=f.length,k=n-w;s&&k>0&&(f.push.apply(f,(0,ee.Z)(new Array(k).fill(0))),p.push.apply(p,(0,ee.Z)(new Array(k).fill(0))));var S={selectedIndices:f};return i&&(S.selectedScores=p),u&&(S.validOutputs=w),S}function My(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-o)*(u-i),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var m=Math.max(o,c),v=Math.max(i,l),y=Math.min(s,d),g=Math.min(u,f),b=Math.max(y-m,0)*Math.max(g-v,0);return b/(p+h-b)}function Oy(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Ly(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Dy(){return Dy=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=hc(t,"boxes","nonMaxSuppressionAsync"),s=hc(n,"scores","nonMaxSuppressionAsync"),u=Ty(i,s,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=10,Promise.all([i.data(),s.data()]);case 10:return c=e.sent,l=c[0],d=c[1],f=Ny(l,d,r,a,o),p=f.selectedIndices,i!==t&&i.dispose(),s!==n&&s.dispose(),e.abrupt("return",Lv(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),Dy.apply(this,arguments)}var Py=function(e,t,n){return Dy.apply(this,arguments)};var Fy=yc({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=hc(e,"boxes","nonMaxSuppression"),s=hc(t,"scores","nonMaxSuppression"),u=Ty(i,s,n,r,a,o),c={boxes:i,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},d=oc.runKernel(Ti,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});function zy(){return zy=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,v=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,o=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,i=v.length>5&&void 0!==v[5]?v[5]:0,s=hc(t,"boxes","nonMaxSuppressionAsync"),u=hc(n,"scores","nonMaxSuppressionAsync"),c=Ty(s,u,r,a,o,i),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,i=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,d=l[0],f=l[1],p=Ry(d,f,r,a,o,i),h=p.selectedIndices,m=p.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:Lv(h,"int32"),selectedScores:Lv(m)});case 19:case"end":return e.stop()}}),e)}))),zy.apply(this,arguments)}var By=function(e,t,n){return zy.apply(this,arguments)};var Uy=yc({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=hc(e,"boxes","nonMaxSuppression"),s=hc(t,"scores","nonMaxSuppression"),u=Ty(i,s,n,r,a,null),c={boxes:i,scores:s},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:o},d=oc.runKernel(_i,c,l);return{selectedIndices:d[0],validOutputs:d[1]}}});function Vy(){return Vy=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,o=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,i=x.length>5&&void 0!==x[5]&&x[5],s=hc(t,"boxes","nonMaxSuppressionAsync"),u=hc(n,"scores","nonMaxSuppressionAsync"),c=Ty(s,u,r,a,o,null),l=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,h=(0,X.Z)(p,2),m=h[0],v=h[1],y=jy(m,v,l,d,f,i),g=y.selectedIndices,b=y.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:Lv(g,"int32"),validOutputs:hd(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),Vy.apply(this,arguments)}var Gy=function(e,t,n){return Vy.apply(this,arguments)};var Wy=yc({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=hc(e,"images","resizeBilinear");Mr(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Mr(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Mr(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=Pp(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,X.Z)(t,0);var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=oc.runKernel(Wi,s,u);return i?Pp(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Hy=yc({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=hc(e,"images","resizeNearestNeighbor");Mr(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Mr(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Mr("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Mr(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=Pp(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,X.Z)(t,0);var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=oc.runKernel(Vi,s,u);return i?Pp(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Zy=yc({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=hc(e,"image","threshold"),c=u.shape[0]*u.shape[1],l=rd(Lv([s]),255);if(Mr(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),Mr(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),Mr("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),Mr("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===u.shape[2]){var d=Cv(u,[1,1,1],-1),f=(0,X.Z)(d,3);t=f[0],n=f[1],r=f[2];var p=rd(t,.2989),h=rd(n,.587),m=rd(r,.114);a=ed(ed(p,h),m)}else a=e;"otsu"===o&&(l=function(e,t){for(var n,r,a,o,i,s,u=Lv([-1]),c=Lv([0]),l=Lv([0]),d=0;d<e.size-1;d++){n=Vp(e,0,d+1),r=Vp(e,d+1),i=nd(Fh(n),t),s=nd(Fh(r),t);var f=Fh(rd(n,tv(0,n.size)));a=nd(f,Fh(n));var p=xd(r.shape,n.size),h=ed(tv(0,r.size),p),m=rd(r,h);o=nd(Fh(m),Fh(r));var v=Sd(a,o),y=Sd(a,o),g=rd(i,s);l=rd(rd(g,v),y);var b=Kh(l,c);c=kh(b,l,c),u=kh(b,Lv([d]),u)}return u}(Yp(jl(lv(a),"int32"),xc([]),256),c));var v=i?nm(a,l):Kh(a,l);return jl(rd(v,255),"int32")}});var qy=yc({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=hc(e,"image","transform","float32"),s=hc(t,"transforms","transform","float32");Mr(4===i.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(i.rank,".")})),Mr(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Mr(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,".")}));var u={image:i,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return oc.runKernel(Cs,u,c)}});var Xy=yc({bandPart_:function(e,t,n){Mr(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Mr(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=hc(e,"a","bandPart");Mr(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,o=r.shape.slice(-2),i=(0,X.Z)(o,2),s=i[0],u=i[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=Pp(tv(0,s,1,"int32"),[-1,1]),l=tv(0,u,1,"int32"),d=Sd(c,l),f=dm(nm(d,hd(+t,"int32")),Yh(d,hd(-n,"int32"))),p=km([s,u],r.dtype);return Pp(Rv(Wv(Pp(r,[-1,s,u])).map((function(e){return kh(f,e,p)}))),a)}});var Ky=yc({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Mr(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Mr(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Cv(e,e.shape[0],0).map((function(e){return jv(e,[0])}));Mr(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var o=[],i=e,s=function(e){o.push(oc.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=rd(Fh(rd(o[n],t)),o[n]);t=Sd(t,r)}return nd(t,Bh(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?Rv(o,0):o}});function Yy(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return oc.tidy((function(){Mr(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Zh(n),o=Rl(e),i=Dv([[1]],[1,1]),s=Rl(i),u=n>=r?r:n,c=function(e){var t=o,u=s,c=a,l=oc.tidy((function(){var t=Vp(o,[e,e],[n-e,1]),u=Bh(t),c=Vp(o,[e,e],[1,1]),l=kh(Kh(c,0),Dv([[-1]]),Dv([[1]])),d=Sd(c,rd(l,u)),f=nd(t,d);s=1===f.shape[0]?Rl(i):Bp([i,Vp(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var p=df(nd(uf(l,d),u)),h=Vp(o,[e,0],[n-e,r]),m=rd(p,s),v=pf(s);if(0===e)o=Sd(h,uf(m,uf(v,h)));else{var y=Sd(h,uf(m,uf(v,h)));o=Bp([Vp(o,[0,0],[e,r]),y],0)}var g=pf(m),b=Vp(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Sd(b,uf(uf(b,s),g));else{var x=Sd(b,uf(uf(b,s),g));a=Bp([Vp(a,[0,0],[n,e]),x],1)}return[s,o,a]})),d=(0,X.Z)(l,3);s=d[0],o=d[1],a=d[2],Vl([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Vp(a,[0,0],[n,r]),o=Vp(o,[0,0],[r,r])),[a,o]}))}var Qy,Jy=yc({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Mr(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Yy(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Wv(Pp(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach((function(e){var n=Yy(e,t),r=(0,X.Z)(n,2),i=r[0],s=r[1];a.push(i),o.push(s)})),[Pp(Rv(a,0),e.shape),Pp(Rv(o,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Qy||(Qy={}));var $y=yc({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qy.SUM_BY_NONZERO_WEIGHTS,r=hc(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=hc(t,"weights","computeWeightedLoss"));var o=null==a?r:rd(r,a);if(n===Qy.NONE)return o;if(n===Qy.SUM)return Fh(o);if(n===Qy.MEAN){if(null==a)return wm(o);var i=r.size/a.size,s=nd(Fh(o),Fh(a));return i>1?nd(s,hd(i)):s}if(n===Qy.SUM_BY_NONZERO_WEIGHTS){if(null==a)return nd(Fh(o),hd(r.size));var u=rd(a,Sm(r.shape)),c=jl(Fh(Rm(u,hd(0))),"float32");return nd(Fh(o),c)}throw Error("Unknown reduction: ".concat(n))}});var eg=yc({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qy.SUM_BY_NONZERO_WEIGHTS,a=hc(e,"labels","absoluteDifference"),o=hc(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=hc(n,"weights","absoluteDifference")),Or(a.shape,o.shape,"Error in absoluteDifference: ");var s=Td(Sd(a,o));return $y(s,i,r)}});var tg=yc({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qy.SUM_BY_NONZERO_WEIGHTS,o=hc(e,"labels","cosineDistance"),i=hc(t,"predictions","cosineDistance"),s=null;null!=r&&(s=hc(r,"weights","cosineDistance")),Or(o.shape,i.shape,"Error in cosineDistance: ");var u=hd(1),c=Sd(u,Fh(rd(o,i),n,!0));return $y(c,s,a)}});var ng=yc({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qy.SUM_BY_NONZERO_WEIGHTS,a=hc(e,"labels","hingeLoss"),o=hc(t,"predictions","hingeLoss"),i=null;null!=n&&(i=hc(n,"weights","hingeLoss")),Or(a.shape,o.shape,"Error in hingeLoss: ");var s=hd(1);a=Sd(rd(hd(2),a),s);var u=rv(Sd(s,rd(a,o)));return $y(u,i,r)}});var rg=yc({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qy.SUM_BY_NONZERO_WEIGHTS,o=hc(e,"labels","huberLoss"),i=hc(t,"predictions","huberLoss"),s=null;null!=n&&(s=hc(n,"weights","huberLoss")),Or(o.shape,i.shape,"Error in huberLoss: ");var u=hd(r),c=Td(Sd(i,o)),l=Tm(c,u),d=Sd(c,l),f=ed(rd(hd(.5),od(l)),rd(u,d));return $y(f,s,a)}});var ag=yc({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qy.SUM_BY_NONZERO_WEIGHTS,o=hc(e,"labels","logLoss"),i=hc(t,"predictions","logLoss"),s=null;null!=n&&(s=hc(n,"weights","logLoss")),Or(o.shape,i.shape,"Error in logLoss: ");var u=hd(1),c=hd(r),l=df(rd(o,om(ed(i,c)))),d=rd(Sd(u,o),om(ed(Sd(u,i),c))),f=Sd(l,d);return $y(f,s,a)}});var og=yc({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qy.SUM_BY_NONZERO_WEIGHTS,a=hc(e,"labels","meanSquaredError"),o=hc(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=hc(n,"weights","meanSquaredError")),Or(a.shape,o.shape,"Error in meanSquaredError: ");var s=Nv(a,o);return $y(s,i,r)}});var ig=yc({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qy.SUM_BY_NONZERO_WEIGHTS,o=hc(e,"multiClassLabels","sigmoidCrossEntropy"),i=hc(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=hc(n,"weights","sigmoidCrossEntropy")),Or(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=hd(r),c=hd(1),l=hd(.5);o=ed(rd(o,Sd(c,u)),rd(l,u))}var d=function(e,t){var n=hc(e,"labels","sigmoidCrossEntropyWithLogits"),r=hc(t,"logits","sigmoidCrossEntropyWithLogits");Or(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=rv(r),o=rd(r,n),i=im(Vh(df(Td(r))));return ed(Sd(a,o),i)}(o,i);return $y(d,s,a)}});var sg=yc({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qy.SUM_BY_NONZERO_WEIGHTS,o=hc(e,"onehotLabels","softmaxCrossEntropy"),i=hc(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=hc(n,"weights","softmaxCrossEntropy")),Or(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=hd(r),c=hd(1),l=hd(o.shape[1]);o=ed(rd(o,Sd(c,u)),nd(u,l))}var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=fd((function(e,t,r){var a=lm(t,[n],!0),o=Sd(jl(t,"float32"),a);r([e,o]);var i=df(rd(o,e));return{value:Fh(i,[n]),gradFunc:function(e,t){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=Rh(e.shape,[n]);return[rd(Pp(e,i),Sd(jl(a,"float32"),Vh(o))),rd(Pp(e,i),Sd(Vh(o),jl(a,"float32")))]}}}));return r(e,t)}(o,i);return $y(d,s,a)}});var ug=yc({sparseFillEmptyRows_:function(e,t,n,r){var a=hc(e,"indices","sparseFillEmptyRows","int32"),o=hc(t,"values","sparseFillEmptyRows"),i=hc(n,"denseShape","sparseFillEmptyRows","int32"),s=hc(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:o,denseShape:i,defaultValue:s},c=oc.runKernel(ds,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var cg=yc({sparseReshape_:function(e,t,n){var r=hc(e,"inputIndices","sparseReshape","int32"),a=hc(t,"inputShape","sparseReshape","int32"),o=hc(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));var i={inputIndices:r,inputShape:a,newShape:o},s=oc.runKernel(fs,i);return{outputIndices:s[0],outputShape:s[1]}}});var lg=yc({sparseSegmentMean_:function(e,t,n){var r=hc(e,"data","sparseSegmentMean"),a=hc(t,"indices","sparseSegmentMean","int32"),o=hc(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return oc.runKernel(ps,i)}});var dg=yc({sparseSegmentSum_:function(e,t,n){var r=hc(e,"data","sparseSegmentSum"),a=hc(t,"indices","sparseSegmentSum","int32"),o=hc(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return oc.runKernel(hs,i)}});var fg=yc({stringNGrams_:function(e,t,n,r,a,o,i,s){var u=hc(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=hc(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:s},d={data:u,dataSplits:c},f=oc.runKernel(bs,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var pg=yc({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=hc(e,"input","stringSplit","string"),a=hc(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var o={skipEmpty:n},i={input:r,delimiter:a},s=oc.runKernel(xs,i,o);return{indices:s[0],values:s[1],shape:s[2]}}});var hg,mg=yc({stringToHashBucketFast_:function(e,t){var n=hc(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return oc.runKernel(ws,a,r)}}),vg={fft:_v,ifft:Tv,rfft:Iv,irfft:Ev},yg={hammingWindow:yy,hannWindow:gy,frame:by,stft:xy},gg={flipLeftRight:ky,grayscaleToRGB:Sy,resizeNearestNeighbor:Hy,resizeBilinear:Wy,rotateWithOffset:_y,cropAndResize:wy,nonMaxSuppression:Ey,nonMaxSuppressionAsync:Py,nonMaxSuppressionWithScore:Fy,nonMaxSuppressionWithScoreAsync:By,nonMaxSuppressionPadded:Uy,nonMaxSuppressionPaddedAsync:Gy,threshold:Zy,transform:qy},bg={bandPart:Xy,gramSchmidt:Ky,qr:Jy},xg={absoluteDifference:eg,computeWeightedLoss:$y,cosineDistance:tg,hingeLoss:ng,huberLoss:rg,logLoss:ag,meanSquaredError:og,sigmoidCrossEntropy:ig,softmaxCrossEntropy:sg},wg={sparseFillEmptyRows:ug,sparseReshape:cg,sparseSegmentMean:lg,sparseSegmentSum:dg},kg={stringNGrams:fg,stringSplit:pg,stringToHashBucketFast:mg},Sg=cp,_g="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Tg(){return new Promise((function(e){return _g((function(){return e()}))}))}function Eg(e,t){var n=e[0].length;e.forEach((function(e,t){Mr(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Mr(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)Mr(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Cg(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Ig(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var o=n[a],i=r[r.length-n.length+a],s=r[i];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(o," but shape[").concat(a+e,"] = ").concat(s))}else r[i]=o}return r}function Ng(e){var t,n={FIRST_DIM_SIZE:hg.FIRST_DIM_SIZE,VALUE_ROWIDS:hg.VALUE_ROWIDS,ROW_LENGTHS:hg.ROW_LENGTHS,ROW_SPLITS:hg.ROW_SPLITS,ROW_LIMITS:hg.ROW_LIMITS,ROW_STARTS:hg.ROW_STARTS},r=[],a=wr(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!(o in n))break;r.push(n[o])}}catch(sQ){a.e(sQ)}finally{a.f()}return r}function jg(e){return 0===e.length?0:e[0]===hg.FIRST_DIM_SIZE?e.length-1:e.length}function Rg(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var o=e[a],i=t[a+1];if(o>=0&&i>=0&&1!==o&&o!==i)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(o," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(i))}}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(hg||(hg={}));var Ag=30;function Mg(e){return e<=Ag?e:ia(e,Math.floor(Math.sqrt(e)))}function Og(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Lg(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,o=0;o<a;++o)r=r.concat([e[o+1]/t[o],t[o]]);r=r.concat(e.slice(a+1))}return r}function Dg(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],o=[],i=1;i<e;++i)i>=2*t+1||i%2===1?o.push(i):a.push(i);n.push.apply(n,a),n.push(0),n.push.apply(n,o)}return n}function Pg(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function Fg(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function zg(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Bg=1.7580993408473768,Ug=1.0507009873554805,Vg=.3275911,Gg=.254829592,Wg=-.284496736,Hg=1.421413741,Zg=-1.453152027,qg=1.061405429;function Xg(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Kg(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Yg(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Qg(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Jg(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $g(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function eb(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function tb(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var nb="->",rb=/->/g,ab=",",ob="...";function ib(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(rb,"").length)/nb.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(nb,'").'));var r=e.split(nb),a=(0,X.Z)(r,2),o=a[0],i=a[1];Mr(-1===o.indexOf(ob),(function(){return'The ellipsis notation ("'.concat(ob,'") is not supported yet.')}));var s=o.split(ab),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(){var e=i[d];if(!s.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===c.indexOf(e)&&c.push(e)},d=0;d<i.length;++d)l();for(var f=0;f<o.length;++f){var p=o[f];-1===c.indexOf(p)&&p!==ab&&c.push(p)}for(var h=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");h[m]=[];for(var v=0;v<s[m].length;++v)h[m].push(c.indexOf(s[m][v]))}for(var y=c.length,g=[],b=i.length;b<y;++b)g.push(b);return{allDims:c,summedDims:g,idDims:h}}function sb(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function ub(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Mr(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function cb(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,c=wr(db(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===i.indexOf(l)&&(a[s].push(l),i.push(l))}}catch(sQ){c.e(sQ)}finally{c.f()}}return{path:r,steps:a}}function lb(e){return e.every((function(e,t){return e===t}))}function db(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function fb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Mr(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Mr(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}Mr(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function pb(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function hb(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function mb(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function vb(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function yb(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function gb(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function bb(e,t){var n=Dr(e),r=Dr(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function xb(e,t){var n=Dr(e),r=Dr(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function wb(){return"segment ids must be >= 0"}function kb(){return"segment ids are not increasing"}function Sb(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function _b(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Tb(e,t){var n,r=!1;for(e<=Ag?(n=e,r=!0):n=ia(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ia(e,n+1);return n}function Eb(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function Cb(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function Ib(e){try{return e.map((function(e){return gu(e)}))}catch(sQ){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(sQ))}}function Nb(e){return e.map((function(e){return yu(e)}))}!function(){var e,t=wr(Od);try{for(t.s();!(e=t.n()).done;){yd(e.value)}}catch(sQ){t.e(sQ)}finally{t.f()}}();var jb={kernelName:Ea,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,Av(jl(n,"float32"),-1))}}}},Rb={kernelName:Ca,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){var t=od(jl(n,"float32")),r=ad(Sd(hd(1),t));return df(nd(e,r))}}}},Ab={kernelName:Ia,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){var t=ad(Sd(od(jl(n,"float32")),1));return nd(e,t)}}}},Mb={kernelName:Na,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=e,n=Cd(r.shape,o);return n.length>0&&(t=Fh(t,n)),Pp(t,r.shape)},b:function(){var t=e,n=Cd(a.shape,o);return n.length>0&&(t=Fh(t,n)),Pp(t,a.shape)}}}},Ob={kernelName:ja,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Lb={kernelName:Ma,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return id(n)}}}},Db={kernelName:Oa,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return id(n)}}}},Pb={kernelName:La,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,ad(Sd(hd(1),od(jl(n,"float32")))))}}}},Fb={kernelName:Da,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){var t=ad(ed(hd(1),od(jl(n,"float32"))));return nd(e,t)}}}},zb={kernelName:za,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=ed(od(r),od(a)),n=rd(e,nd(a,t)),i=Cd(r.shape,o);return i.length>0&&(n=Fh(n,i)),Pp(n,r.shape)},b:function(){var t=ed(od(r),od(a)),n=df(rd(e,nd(r,t))),i=Cd(a.shape,o);return i.length>0&&(n=Fh(n,i)),Pp(n,a.shape)}}}},Bb={kernelName:Pa,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,ed(od(jl(n,"float32")),1))}}}},Ub={kernelName:Fa,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,Sd(hd(1),od(jl(n,"float32"))))}}}};var Vb=yc({avgPool3dGrad_:function(e,t,n,r,a,o){var i=hc(e,"dy","avgPool3dGrad"),s=hc(t,"input","avgPool3dGrad"),u=i,c=s,l=!1;4===s.rank&&(l=!0,u=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Mr(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),Mr(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),Dp("avgPool3dGrad",a,o);var d={dy:u,input:c},f={filterSize:n,strides:r,pad:a,dimRoundingMode:o},p=oc.runKernel(Ga,d,f);return l?Pp(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Gb={kernelName:Va,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.filterSize,o=n.strides,i=n.pad,s=n.dimRoundingMode;return{x:function(){return Vb(e,r,a,o,i,s)}}}};var Wb=yc({avgPoolGrad_:function(e,t,n,r,a){var o=hc(e,"dy","avgPoolGrad"),i=hc(t,"input","avgPoolGrad");Mr(i.rank===o.rank,(function(){return"Rank of input (".concat(i.rank,") does not match rank of dy (").concat(o.rank,")")}));var s=i,u=o,c=!1;3===i.rank&&(c=!0,s=Pp(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=Pp(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Mr(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Mr(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},d={filterSize:n,strides:r,pad:a},f=oc.runKernel(Ua,l,d);return c?Pp(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),Hb={kernelName:Ba,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.filterSize,o=n.strides,i=n.pad;return{x:function(){return Wb(e,r,a,o,i)}}}},Zb={kernelName:Wa,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.transposeA,s=n.transposeB;return i||s?!i&&s?{a:function(){return uf(e,o,!1,!1)},b:function(){return uf(e,a,!0,!1)}}:i&&!s?{a:function(){return uf(o,e,!1,!0)},b:function(){return uf(a,e,!1,!1)}}:{a:function(){return uf(o,e,!0,!0)},b:function(){return uf(e,a,!0,!0)}}:{a:function(){return uf(e,o,!1,!0)},b:function(){return uf(a,e,!0,!1)}}}},qb={kernelName:Ha,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return zm(e,r,a)}}}},Xb={kernelName:qa,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),s=a.length-1;s>=0;s--)if(a[s]===o[s])i[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(o,"]."));for(var u=[],c=0;c<i.length;c++)i[c]>1&&u.push(c);return{x:function(){return Fh(e,u,!0)}}}},Kb={kernelName:Ka,gradFunc:function(e){return{x:function(){return e.clone()}}}},Yb={kernelName:Ya,gradFunc:function(e){return{x:function(){return id(e)}}}},Qb={kernelName:Qa,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.clipValueMin,o=n.clipValueMax;return{x:function(){return kh(dm(Yh(r,a),nm(r,o)),e,id(e))}}}},Jb={kernelName:$a,inputsToSave:["x"],gradFunc:jb.gradFunc},$b={kernelName:eo,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Zr(n.axis,t[0].shape)[0],o=r.map((function(e){return e[a]}));return Cv(e,o,a).map((function(e){return function(){return e}}))}},ex={kernelName:to,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return Mr(Ap(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(i,"'")})),{x:function(){return sh(a.shape,e,o,s,u,c)},filter:function(){return sy(a,e,o.shape,s,u,c)}}}},tx={kernelName:ro,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return oh(e,o,i,s,u,1,c)},filter:function(){return sy(e,a,o.shape,i,s,u,c)}}}};var nx=yc({conv3DBackpropFilter_:function(e,t,n,r,a){var o=e;4===e.rank&&(o=Pp(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var i=t;4===i.rank&&(i=Pp(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Mr(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")})),Mr(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(i.shape,".")})),Mr(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Mr(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Mr(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(i.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:o,dy:i},u={strides:r,pad:a,filterShape:n};return oc.runKernel(oo,s,u)}}),rx={kernelName:ao,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad;Mr(Ap(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var i=(0,X.Z)(t,2),s=i[0],u=i[1];return{x:function(){return lh(s.shape,e,u,a,o)},filter:function(){return nx(s,e,u.shape,a,o)}}}},ax={kernelName:so,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(df(yv(jl(n,"float32"))),e)}}}},ox={kernelName:uo,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(gv(jl(n,"float32")),e)}}}},ix={kernelName:lo,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.axis,o=n.exclusive,i=n.reverse;return{x:function(){var t=Mh([a],r.rank),n=mh(e,a,o,!i);return null!=t&&(n=pf(n,t)),n}}}},sx={kernelName:mo,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad,i=n.dimRoundingMode,s=null==r?[1,1]:r;Mr(Ap(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=(0,X.Z)(t,2),c=u[0],l=u[1];return Mr(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),Mr(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),Mr(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),Mr(Mp(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),Dp("depthwiseConv2d",o,i),{x:function(){return hy(c.shape,e,l,a,o,s,i)},filter:function(){return py(c,e,l.shape,a,o,s,i)}}}},ux={kernelName:bo,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i={x:a,filter:o,dy:e},s={x:a,filter:o,dy:e};return{x:function(){return oc.runKernel(xo,i,n)},filter:function(){return oc.runKernel(wo,s,n)}}}},cx={kernelName:_o,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,X.Z)(t,1)[0]};return{x:function(){return oc.runKernel(To,n)}}}},lx={kernelName:Eo,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0],r=rd(Vh(df(od(n))),2/Math.sqrt(Math.PI));return{x:function(){return rd(e,r)}}}},dx={kernelName:Io,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,n)}}}},fx={kernelName:No,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{input:function(){return Pp(e,n.shape)}}}},px={kernelName:jo,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,Vh(n))}}}},hx={kernelName:Oo,gradFunc:function(e){return{x:function(){return id(e)}}}},mx={kernelName:Lo,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=nd(e,jl(a,"float32")),n=Cd(r.shape,o);return n.length>0?Pp(Fh(t,n),r.shape):t},b:function(){var t=rd(e,jl(r,"float32")),n=Cd(a.shape,o);n.length>0&&(t=Pp(Fh(t,n),a.shape));var i=od(a);return df(nd(t,jl(i,"float32")))}}}},vx={kernelName:Do,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,X.Z)(t,4),o=a[0],i=a[1],s=a[2],u=a[3],c=null==u?hd(1):u,l=Cd(i.shape,o.shape),d=[];if(1===i.rank){for(var f=0;f<o.shape.length-1;++f)d.push(o.shape[f]);d.push(1)}var p=Sd(o,i),h=rd(e,c),m=dv(ed(s,hd(r))),v=rd(rd(rd(m,m),m),hd(-.5));return{x:function(){return 1===i.rank?Pp(rd(rd(e,Hh(Pp(m,[1,1,1,i.shape[0]]),d)),c),o.shape):Pp(rd(rd(e,m),c),o.shape)},mean:function(){var e=rd(rd(m,hd(-1)),h);return 1===i.rank&&(e=Fh(e,l)),Pp(e,i.shape)},variance:function(){var e=rd(rd(v,p),h);return 1===i.rank&&(e=Fh(e,l)),Pp(e,i.shape)},scale:function(){var t=rd(p,m),n=rd(e,t);return 1===i.rank&&(n=Fh(n,l)),Pp(n,i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=Fh(t,l)),Pp(t,i.shape)}}}},yx={kernelName:Po,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.axis,s=Zr(i,a.shape)[0];return{x:function(){var t=a.shape,n=o.size,r=t.slice(0,s),u=r.length,c=t.slice(i,t.length).slice(1),l=c.length,d=gx(0,u),f=gx(u+1,u+1+l),p=bx([r,[n],c]),h=Pp(e,p),m=Pp(o,[n]),v=bx([[u],d,f]),y=pf(h,v),g=Gv(y,m,a.shape[s]),b=Oh(v);return g=pf(g,b)},indices:function(){return o}}}};function gx(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function bx(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var xx={kernelName:Bo,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1];return{a:function(){return id(r)},b:function(){return id(a)}}}},wx={kernelName:Uo,gradFunc:function(e){return{x:function(){return jl(e,"float32")}}}},kx={kernelName:Wo,gradFunc:function(e){return{x:function(){return id(e)}}}},Sx={kernelName:Ho,gradFunc:function(e){return{x:function(){return id(e)}}}},_x={kernelName:Zo,gradFunc:function(e){return{x:function(){return id(e)}}}},Tx={kernelName:qo,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.alpha,o=Kh(r,0);return{x:function(){return kh(o,e,rd(e,a))}}}},Ex={kernelName:Jo,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,ed(n,1))}}}},Cx={kernelName:Qo,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,jl(n,"float32"))}}}},Ix={kernelName:ri,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=Vh(r);return Sd(e,rd(Fh(e,a,!0),t))}}}};var Nx=yc({localResponseNormalizationBackprop_:function(e,t,n){var r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return oc.runKernel(ii,r,a)}}),jx={kernelName:oi,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return Nx(a,o,e,i,s,u,c)}}}};function Rx(e,t,n,r){return t.rank<n.rank&&(t=Pp(t,Rh(t.shape,r))),e.rank<n.rank&&(e=Pp(e,Rh(e.shape,r))),{x:function(){return rd(e,jl(wh(n,t),e.dtype))}}}var Ax={kernelName:si,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],o=Rx(e,t[1],a,Zr(r,a.shape));return{x:function(){return o.x()}}}},Mx={kernelName:ui,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1];return{a:function(){return rd(e,jl(Yh(r,a),"float32"))},b:function(){return rd(e,jl(tm(r,a),"float32"))}}}};var Ox=yc({maxPool3dGrad_:function(e,t,n,r,a,o,i){var s=hc(e,"dy","maxPool3dGrad"),u=hc(t,"input","maxPool3dGrad"),c=hc(n,"output","maxPool3dGrad"),l=s,d=u,f=c,p=!1;4===u.rank&&(p=!0,l=Pp(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Pp(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=Pp(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Mr(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),Mr(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),Mr(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(f.rank,".")})),Dp("maxPool3dGrad",o,i);var h={dy:l,input:d,output:f},m={filterSize:r,strides:a,pad:o,dimRoundingMode:i},v=oc.runKernel(fi,h,m);return p?Pp(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),Lx={kernelName:di,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return Ox(e,a,o,i,s,u,c)}}}};var Dx=yc({maxPoolGrad_:function(e,t,n,r,a,o,i){var s=hc(e,"dy","maxPoolGrad"),u=hc(t,"input","maxPoolGrad"),c=hc(n,"output","maxPoolGrad");Mr(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),Mr(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),Mr(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),Dp("maxPoolGrad",o,i);var l={dy:s,input:u,output:c},d={filterSize:r,strides:a,pad:o,dimRoundingMode:i};return oc.runKernel(li,l,d)}}),Px={kernelName:ci,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,X.Z)(t,2),a=r[0],o=r[1],i=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return Dx(e,a,o,i,s,u)}}}},Fx={kernelName:yi,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Vp(e,a,r.shape)}}}},zx={kernelName:Ni,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Vp(e,a,r.shape)}}}},Bx={kernelName:Ri,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,X.Z)(t,3),r=n[0],a=n[1],o=n[2],i=r,s=a,u=Id(i.shape,s.shape);return{a:function(){var t=jl(s,"float32"),n=rd(e,rd(t,kd(i,Sd(t,hd(1))))),r=Cd(i.shape,u);return r.length>0&&(n=Fh(n,r)),Pp(n,i.shape)},b:function(){var t=Kh(i,0),n=kh(t,om(i),id(i)),r=rd(e,rd(o,n)),a=Cd(s.shape,u);return a.length>0&&(r=Fh(r,a)),Pp(r,s.shape)}}}};function Ux(e,t,n){var r=e.shape.length,a=r-n.length,o=Mh(n,r),i=e;null!=o&&(i=pf(e,o));var s=i.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Pp(t,r),o=hh(e,n,!0,!1),i=hh(e,n,!0,!0),s=rd(o,i);return rd(a,s)}(i.reshape(s),t,a);if(c=c.reshape(i.shape),null!=o){var l=Oh(o);c=pf(c,l)}return c}var Vx={kernelName:$i,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){var t=Kh(n,hd(0)),r=hd(Bg),a=hd(Ug),o=rd(e,a),i=rd(rd(e,r),Vh(jl(n,"float32")));return kh(t,o,i)}}}},Gx={kernelName:us,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Hp(e,r,a)}}}},Wx={kernelName:cs,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Bp(e,r)}}}},Hx={kernelName:Ts,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.reps;return{x:function(){var t=id(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=ed(t,Vp(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var o=0;o<a[0];++o)for(var i=0;i<a[1];++i)t=ed(t,Vp(e,[o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=ed(t,Vp(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var d=0;d<a[1];++d)for(var f=0;f<a[2];++f)for(var p=0;p<a[3];++p)t=ed(t,Vp(e,[l*r.shape[0],d*r.shape[1],f*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};for(var Zx=0,qx=[jb,Rb,Ab,Mb,Ob,Lb,Db,Pb,Fb,zb,Bb,Ub,Gb,Hb,Zb,qb,Xb,Kb,Yb,Qb,Jb,$b,tx,ex,rx,ax,ox,ix,sx,ux,{kernelName:ko,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=nd(e,jl(a,"float32")),n=Cd(r.shape,o);return n.length>0?Pp(Fh(t,n),r.shape):t},b:function(){var t=rd(e,jl(r,"float32")),n=Cd(a.shape,o);n.length>0&&(t=Pp(Fh(t,n),a.shape));var i=od(a);return df(nd(t,jl(i,"float32")))}}}},cx,lx,dx,fx,px,mx,hx,vx,yx,xx,wx,kx,Sx,_x,Tx,Ex,Cx,Ix,jx,Ax,Ax,Mx,Lx,Px,{kernelName:hi,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=Zr(n.axis,r.shape),o=Dr(jh(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Pp(e,t);return nd(rd(n,Sm(r.shape,"float32")),o)}}}},{kernelName:mi,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,X.Z)(t,2),o=a[0],i=Rx(e,a[1],o,Zr(r,o.shape));return{x:function(){return i.x()}}}},{kernelName:vi,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1];return{a:function(){return rd(e,jl(nm(r,a),"float32"))},b:function(){return rd(e,jl(Kh(r,a),"float32"))}}}},Fx,{kernelName:gi,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=Cd(r.shape,o);return t.length>0?Pp(Fh(e,t),r.shape):e},b:function(){var t=rd(e,df(qh(nd(r,a)))),n=Cd(a.shape,o);return n.length>0?Pp(Fh(t,n),a.shape):t}}}},{kernelName:xi,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=rd(e,jl(a,"float32")),n=Cd(r.shape,o);return n.length>0?Pp(Fh(t,n),r.shape):t},b:function(){var t=rd(e,jl(r,"float32")),n=Cd(a.shape,o);return n.length>0?Pp(Fh(t,n),a.shape):t}}}},{kernelName:wi,gradFunc:function(e){return{x:function(){return df(e)}}}},{kernelName:Ci,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return km(n.shape,"float32")}}}},{kernelName:Ei,gradFunc:function(e){return{x:function(){return id(e)}}}},{kernelName:Ii,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Wv(e,r).map((function(e){return function(){return e}}))}},zx,zx,Bx,{kernelName:Ai,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Kh(r,0);return{x:function(){return kh(o,e,rd(e,a))},alpha:function(){var t=kh(o,id(e),rd(e,r)),n=Cd(a.shape,e.shape);return n.length>0&&(t=Fh(t,n)),Pp(t,a.shape)}}}},{kernelName:Mi,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.axis,o=[];return o=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return Ux(r,e,o)}}}},{kernelName:zi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,df(od(n)))}}}},{kernelName:Zi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0],r=rd(nm(n,6),Av(n));return{x:function(){return rd(e,jl(r,"float32"))}}}},{kernelName:Bi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,jl(Av(n),"float32"))}}}},{kernelName:Ui,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return Pp(e,n.shape)}}}},{kernelName:Wi,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,X.Z)(t,1)[0]};return{images:function(){return oc.runKernel(Hi,r,n)}}}},{kernelName:Vi,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,X.Z)(t,1)[0]};return{images:function(){return oc.runKernel(Gi,r,n)}}}},{kernelName:qi,gradFunc:function(e,t,n){var r=Zr(n.dims,e.shape);return{x:function(){return ov(e,r)}}}},{kernelName:Xi,gradFunc:function(e){return{x:function(){return id(e)}}}},{kernelName:Ki,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return df(nd(e,rd(kd(n,1.5),2)))}}}},{kernelName:Ji,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{condition:function(){return jl(id(n),"float32")},t:function(){return rd(e,jl(n,e.dtype))},e:function(){return rd(e,jl(fm(n),e.dtype))}}}},Vx,{kernelName:as,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,rd(n,Sd(hd(1),n)))}}}},{kernelName:rs,gradFunc:function(e){return{x:function(){return id(e)}}}},{kernelName:ts,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(fh(jl(n,"float32")),e)}}}},{kernelName:ns,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(ph(jl(n,"float32")),e)}}}},{kernelName:es,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,X.Z)(t,1)[0],a=n.begin,o=n.size,i=r.shape,s=Wf(r,a,o),u=(0,X.Z)(s,2),c=u[0],l=u[1],d=[],f=0;f<e.rank;f++)d.push([c[f],i[f]-c[f]-l[f]]);return{x:function(){return Om(e,d)}}}},{kernelName:ls,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=n.dim,o=rd(e,r);return{logits:function(){return Sd(o,rd(Fh(o,[a],true),r))}}}},{kernelName:os,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,Up(n))}}}},Gx,Gx,Wx,Wx,{kernelName:is,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,rd(ad(jl(n,"float32")),2))}}}},{kernelName:vs,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=hd(2);return{a:function(){return rd(e,rd(o,Sd(r,a)))},b:function(){return rd(e,rd(o,Sd(a,r)))}}}},{kernelName:ys,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(e,rd(jl(n,"float32"),2))}}}},{kernelName:Os,gradFunc:function(e){return{x:function(){return id(e)}}}},{kernelName:ks,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,X.Z)(t,2),r=n[0],a=n[1],o=Id(r.shape,a.shape);return{a:function(){var t=e,n=Cd(r.shape,o);return n.length>0&&(t=Fh(t,n)),Pp(t,r.shape)},b:function(){var t=e,n=Cd(a.shape,o);return n.length>0&&(t=Fh(t,n)),Pp(df(t),a.shape)}}}},{kernelName:ss,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,X.Z)(t,1)[0],a=r.shape.slice();Zr(n.axis,r.shape).forEach((function(e){a[e]=1}));var o=Pp(e,a),i=rd(o,Sm(r.shape,"float32"));return{x:function(){return i}}}},{kernelName:Ss,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return nd(e,od(fh(n)))}}}},{kernelName:_s,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return rd(Sd(hd(1),od(n)),e)}}}},Hx,{kernelName:Is,gradFunc:function(e,t,n){var r=Oh(n.perm);return{x:function(){return pf(e,r)}}}},{kernelName:js,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Rv(e,r)}}}},{kernelName:Rs,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,X.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=Nd(t,id(t)),r=Xh(e,n),a=Yh(t,hd(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=Gh(a,i+1);a=dm(a,Sm(r.shape,"bool"));var s=id(r);return kh(a,r,s)}(e,n)}}}},{kernelName:Ms,gradFunc:function(e){return{x:function(){return id(e)}}}}];Zx<qx.length;Zx++){Xs(qx[Zx])}function Xx(e,t,n){return Xx=Tu()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&at(a,n.prototype),a},Xx.apply(null,arguments)}function Kx(e){var t="function"===typeof Map?new Map:void 0;return Kx=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Xx(e,arguments,_u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),at(n,e)},Kx(e)}zu().prototype.abs=function(){return this.throwIfDisposed(),Td(this)},zu().prototype.acos=function(){return this.throwIfDisposed(),lp(this)},zu().prototype.acosh=function(){return this.throwIfDisposed(),dp(this)},zu().prototype.add=function(e){return this.throwIfDisposed(),ed(this,e)},zu().prototype.all=function(e,t){return this.throwIfDisposed(),pp(this,e,t)},zu().prototype.any=function(e,t){return this.throwIfDisposed(),hp(this,e,t)},zu().prototype.argMax=function(e){return this.throwIfDisposed(),mp(this,e)},zu().prototype.argMin=function(e){return this.throwIfDisposed(),vp(this,e)},zu().prototype.asScalar=function(){return this.throwIfDisposed(),Mr(1===this.size,(function(){return"The array must have only 1 element."})),Pp(this,[])},zu().prototype.asType=function(e){return this.throwIfDisposed(),jl(this,e)},zu().prototype.as1D=function(){return this.throwIfDisposed(),Pp(this,[this.size])},zu().prototype.as2D=function(e,t){return this.throwIfDisposed(),Pp(this,[e,t])},zu().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Pp(this,[e,t,n])},zu().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Pp(this,[e,t,n,r])},zu().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Pp(this,[e,t,n,r,a])},zu().prototype.asin=function(){return this.throwIfDisposed(),yp(this)},zu().prototype.asinh=function(){return this.throwIfDisposed(),gp(this)},zu().prototype.atan=function(){return this.throwIfDisposed(),bp(this)},zu().prototype.atan2=function(e){return this.throwIfDisposed(),xp(this,e)},zu().prototype.atanh=function(){return this.throwIfDisposed(),wp(this)},zu().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Fp(this,e,t,n,r)},zu().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Hp(this,e,t)},zu().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Zp(this,e,t,n,r,a)},zu().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Jp(this,e)},zu().prototype.cast=function(e){return this.throwIfDisposed(),jl(this,e)},zu().prototype.ceil=function(){return this.throwIfDisposed(),$p(this)},zu().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),eh(this,e,t)},zu().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Fu&&(e=[e]),Bp([this].concat((0,ee.Z)(e)),t)},zu().prototype.conv1d=function(e,t,n,r,a,o){return this.throwIfDisposed(),ih(this,e,t,n,r,a,o)},zu().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),uh(this,e,t,n,r,a)},zu().prototype.conv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),oh(this,e,t,n,r,a,o)},zu().prototype.cos=function(){return this.throwIfDisposed(),fh(this)},zu().prototype.cosh=function(){return this.throwIfDisposed(),ph(this)},zu().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),hh(this,e,t,n)},zu().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),mh(this,e,t,n)},zu().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),yh(this,e,t)},zu().prototype.depthwiseConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),gh(this,e,t,n,r,a,o)},zu().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),xh(this,e,t,n,r,a)},zu().prototype.divNoNan=function(e){return this.throwIfDisposed(),Sh(this,e)},zu().prototype.div=function(e){return this.throwIfDisposed(),nd(this,e)},zu().prototype.dot=function(e){return this.throwIfDisposed(),_h(this,e)},zu().prototype.elu=function(){return this.throwIfDisposed(),Eh(this)},zu().prototype.equal=function(e){return this.throwIfDisposed(),wh(this,e)},zu().prototype.erf=function(){return this.throwIfDisposed(),Ch(this)},zu().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Uh(this,e,t)},zu().prototype.exp=function(){return this.throwIfDisposed(),Vh(this)},zu().prototype.expandDims=function(e){return this.throwIfDisposed(),Gh(this,e)},zu().prototype.expm1=function(){return this.throwIfDisposed(),Wh(this)},zu().prototype.fft=function(){return this.throwIfDisposed(),_v(this)},zu().prototype.flatten=function(){return this.throwIfDisposed(),Pp(this,[this.size])},zu().prototype.floor=function(){return this.throwIfDisposed(),qh(this)},zu().prototype.floorDiv=function(e){return this.throwIfDisposed(),td(this,e)},zu().prototype.gather=function(e,t){return this.throwIfDisposed(),Xh(this,e,t)},zu().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Yh(this,e)},zu().prototype.greater=function(e){return this.throwIfDisposed(),Kh(this,e)},zu().prototype.ifft=function(){return this.throwIfDisposed(),Tv(this)},zu().prototype.irfft=function(){return this.throwIfDisposed(),Ev(this)},zu().prototype.isFinite=function(){return this.throwIfDisposed(),Qh(this)},zu().prototype.isInf=function(){return this.throwIfDisposed(),Jh(this)},zu().prototype.isNaN=function(){return this.throwIfDisposed(),$h(this)},zu().prototype.leakyRelu=function(e){return this.throwIfDisposed(),em(this,e)},zu().prototype.lessEqual=function(e){return this.throwIfDisposed(),nm(this,e)},zu().prototype.less=function(e){return this.throwIfDisposed(),tm(this,e)},zu().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),am(this,e,t,n,r)},zu().prototype.logSigmoid=function(){return this.throwIfDisposed(),um(this)},zu().prototype.logSoftmax=function(e){return this.throwIfDisposed(),cm(this,e)},zu().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),lm(this,e,t)},zu().prototype.log=function(){return this.throwIfDisposed(),om(this)},zu().prototype.log1p=function(){return this.throwIfDisposed(),im(this)},zu().prototype.logicalAnd=function(e){return this.throwIfDisposed(),dm(this,e)},zu().prototype.logicalNot=function(){return this.throwIfDisposed(),fm(this)},zu().prototype.logicalOr=function(e){return this.throwIfDisposed(),pm(this,e)},zu().prototype.logicalXor=function(e){return this.throwIfDisposed(),hm(this,e)},zu().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),uf(this,e,t,n)},zu().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),gm(this,e,t,n,r)},zu().prototype.max=function(e,t){return this.throwIfDisposed(),Dh(this,e,t)},zu().prototype.maximum=function(e){return this.throwIfDisposed(),Nd(this,e)},zu().prototype.mean=function(e,t){return this.throwIfDisposed(),wm(this,e,t)},zu().prototype.min=function(e,t){return this.throwIfDisposed(),Ph(this,e,t)},zu().prototype.minimum=function(e){return this.throwIfDisposed(),Tm(this,e)},zu().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Em(this,e,t)},zu().prototype.mod=function(e){return this.throwIfDisposed(),Cm(this,e)},zu().prototype.mul=function(e){return this.throwIfDisposed(),rd(this,e)},zu().prototype.neg=function(){return this.throwIfDisposed(),df(this)},zu().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Bh(this,e,t,n)},zu().prototype.notEqual=function(e){return this.throwIfDisposed(),Rm(this,e)},zu().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),cf(this,e,t,n)},zu().prototype.onesLike=function(){return this.throwIfDisposed(),Am(this)},zu().prototype.pad=function(e,t){return this.throwIfDisposed(),Om(this,e,t)},zu().prototype.pool=function(e,t,n,r,a,o){return this.throwIfDisposed(),Bm(this,e,t,n,r,a,o)},zu().prototype.pow=function(e){return this.throwIfDisposed(),kd(this,e)},zu().prototype.prelu=function(e){return this.throwIfDisposed(),Um(this,e)},zu().prototype.prod=function(e,t){return this.throwIfDisposed(),Vm(this,e,t)},zu().prototype.reciprocal=function(){return this.throwIfDisposed(),nv(this)},zu().prototype.relu=function(){return this.throwIfDisposed(),rv(this)},zu().prototype.relu6=function(){return this.throwIfDisposed(),av(this)},zu().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Pp(this,e.shape)},zu().prototype.reshape=function(e){return this.throwIfDisposed(),Pp(this,e)},zu().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Wy(this,e,t,n)},zu().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Hy(this,e,t,n)},zu().prototype.reverse=function(e){return this.throwIfDisposed(),ov(this,e)},zu().prototype.rfft=function(){return this.throwIfDisposed(),Iv(this)},zu().prototype.round=function(){return this.throwIfDisposed(),lv(this)},zu().prototype.rsqrt=function(){return this.throwIfDisposed(),dv(this)},zu().prototype.selu=function(){return this.throwIfDisposed(),fv(this)},zu().prototype.separableConv2d=function(e,t,n,r,a,o){return this.throwIfDisposed(),pv(this,e,t,n,r,a,o)},zu().prototype.sigmoid=function(){return this.throwIfDisposed(),Up(this)},zu().prototype.sign=function(){return this.throwIfDisposed(),vv(this)},zu().prototype.sin=function(){return this.throwIfDisposed(),yv(this)},zu().prototype.sinh=function(){return this.throwIfDisposed(),gv(this)},zu().prototype.slice=function(e,t){return this.throwIfDisposed(),Vp(this,e,t)},zu().prototype.softmax=function(e){return this.throwIfDisposed(),Sv(this,e)},zu().prototype.softplus=function(){return this.throwIfDisposed(),sm(this)},zu().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),zm(this,e,t)},zu().prototype.split=function(e,t){return this.throwIfDisposed(),Cv(this,e,t)},zu().prototype.sqrt=function(){return this.throwIfDisposed(),ad(this)},zu().prototype.square=function(){return this.throwIfDisposed(),od(this)},zu().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Nv(this,e)},zu().prototype.squeeze=function(e){return this.throwIfDisposed(),jv(this,e)},zu().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Fu?[this,e]:[this].concat((0,ee.Z)(e));return Rv(n,t)},zu().prototype.step=function(e){return this.throwIfDisposed(),Av(this,e)},zu().prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return this.throwIfDisposed(),Mv(this,e,t,n,r,a,o,i,s)},zu().prototype.sub=function(e){return this.throwIfDisposed(),Sd(this,e)},zu().prototype.sum=function(e,t){return this.throwIfDisposed(),Fh(this,e,t)},zu().prototype.tan=function(){return this.throwIfDisposed(),Ov(this)},zu().prototype.tanh=function(){return this.throwIfDisposed(),Gp(this)},zu().prototype.tile=function(e){return this.throwIfDisposed(),Hh(this,e)},zu().prototype.toBool=function(){return this.throwIfDisposed(),jl(this,"bool")},zu().prototype.toFloat=function(){return this.throwIfDisposed(),jl(this,"float32")},zu().prototype.toInt=function(){return this.throwIfDisposed(),jl(this,"int32")},zu().prototype.topk=function(e,t){return this.throwIfDisposed(),Bv(this,e,t)},zu().prototype.transpose=function(e){return this.throwIfDisposed(),pf(this,e)},zu().prototype.unique=function(e){return this.throwIfDisposed(),Vv(this,e)},zu().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Gv(this,e,t)},zu().prototype.unstack=function(e){return this.throwIfDisposed(),Wv(this,e)},zu().prototype.where=function(e,t){return this.throwIfDisposed(),kh(e,this,t)},zu().prototype.zerosLike=function(){return this.throwIfDisposed(),id(this)};var Yx=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),Object.setPrototypeOf(Ft(r),n.prototype),r}return br(n)}(Kx(Error)),Qx=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),Object.setPrototypeOf(Ft(r),n.prototype),r}return br(n)}(Kx(Error)),Jx=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),Object.setPrototypeOf(Ft(r),n.prototype),r}return br(n)}(Kx(Error)),$x=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),Object.setPrototypeOf(Ft(r),n.prototype),r}return br(n)}(Kx(Error)),ew=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),Object.setPrototypeOf(Ft(r),n.prototype),r}return br(n)}(Kx(Error)),tw=(Error,function(){function e(t){vr(this,e),this.maxEntries=t||100,this.cache=new Map}return br(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function nw(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function rw(e,t){if(!e)throw new ew(t)}function aw(e,t){var n,r=0,a=wr(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(sQ){a.e(sQ)}finally{a.f()}return r}function ow(e){return 1===e.length?e[0]:e}function iw(e){return Array.isArray(e)?e:[e]}function sw(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function uw(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var cw={};function lw(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function dw(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return dw(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?dw(a):e[r]=a.value)}}function fw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var o,i=e;if(i in n)o=n[i];else if(i in cw)o=cw[i];else if(null==(o=t[i]))throw new Jx("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var s=e;if(null==s.className||null==s.config)throw new Jx("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,c,l=s.className;if(l in n){var d=(0,X.Z)(n[l],2);u=d[0],c=d[1]}else if(l in cw){var f=(0,X.Z)(cw.className,2);u=f[0],c=f[1]}else if(l in t){var p=(0,X.Z)(t[l],2);u=p[0],c=p[1]}if(null==u)throw new Jx("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var h={},m=0,v=Object.keys(cw);m<v.length;m++){var y=v[m];h[y]=cw[y]}for(var g=0,b=Object.keys(n);g<b.length;g++){var x=b[g];h[x]=n[x]}s.config.customObjects=h;for(var w=Object.assign({},cw),k=0,S=Object.keys(n);k<S.length;k++){var _=S[k];cw[_]=n[_]}dw(s.config);var T=c(u,s.config,n,a);return cw=Object.assign({},w),T}for(var E=Object.assign({},cw),C=0,I=Object.keys(n);C<I.length;C++){var N=I[C];cw[N]=n[N]}var j=new u(s.config);return cw=Object.assign({},E),j}function pw(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function hw(e){if(null==e)return e;var t,n=[],r=wr(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(sQ){r.e(sQ)}finally{r.f()}return n}function mw(e){if(null==e)throw new Jx("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function vw(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Jx("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function yw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return rw(n>=0),rw(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function gw(e,t){Array.isArray(e)?(Mr(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return gw(e,"element ".concat(n+1," of ").concat(t))}))):Mr(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(bw(e),".")}))}function bw(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return bw(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function xw(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var ww=0;function kw(){return ww++}var Sw={};function _w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Sw||(Sw[e]=0),Sw[e]+=1,e+Sw[e].toString()}var Tw=["channelsFirst","channelsLast"],Ew=["nearest","bilinear"],Cw=["valid","same","causal"],Iw=["max","avg"],Nw=["sum","mul","concat","ave"],jw=new Map;function Rw(e){vw(Tw,"DataFormat",e)}function Aw(e){vw(Cw,"PaddingMode",e)}function Mw(e){vw(Iw,"PoolMode",e)}var Ow=[],Lw="/";function Dw(t,n){Ow.push(t);try{var r=n();return Ow.pop(),r}catch(e){throw Ow.pop(),e}}function Pw(e){if(!Uw(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Ow.length?"":Ow.join(Lw)+Lw)+e}function Fw(e){if(!Uw(e))throw new Error("Not a valid tensor name: '"+e+"'");jw.has(e)||jw.set(e,0);var t=jw.get(e);if(jw.set(e,jw.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return jw.set(n,1),n}return e}var zw,Bw=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Uw(e){return!!e.match(Bw)}function Vw(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function Gw(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function Ww(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function Hw(e,t){if(t<e)throw new Jx("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function Zw(){return null==zw&&(zw=Jl().epsilon()),zw}function qw(e,t){return jl(e,t)}function Xw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Pp(e,n)}function Kw(e,t,n){return Ul((function(){switch(e.rank){case 1:return bv(e,t,n);case 2:return xv(e,[t,0],[n,e.shape[1]]);case 3:return wv(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return kv(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Vp(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Vp(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Jx("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Yw(e,t,n){return Ul((function(){switch(e.rank){case 1:return bv(e,t,n);case 2:return xv(e,[0,t],[e.shape[0],n]);case 3:return wv(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return kv(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Jx("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Qw(e,t,n,r){return Ul((function(){switch(e.rank){case 1:return bv(e,t,n);case 2:switch(r){case 1:return Kw(e,t,n);case 2:return Yw(e,t,n);default:throw new Jx("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return Kw(e,t,n);case 2:return wv(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Yw(e,t,n);default:throw new Jx("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return Kw(e,t,n);case 2:return kv(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return kv(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Yw(e,t,n);default:throw new Jx("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new Jx("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Jw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Bp(e,n)}function $w(e,t){switch(e.rank){case 1:return th([e,t]);case 2:return nh([e,t],0);case 3:return rh([e,t],0);case 4:return ah([e,t],0);default:throw new Jx("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function ek(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Jx("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Hh(e,t)}function tk(e){return Jm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function nk(e,t,n,r){if(e.rank<2||t.rank<2)throw new $x("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new $x("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return vy({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?ok(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),o=a.pop();e=Pp(e,[-1,o]);var i=t.shape.slice(),s=i.pop(),u=i.pop(),c=[].concat((0,ee.Z)(i),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Pp(pf(t,l),[u,-1]);var d=[].concat((0,ee.Z)(a),(0,ee.Z)(c));return Pp(vy({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?ok(e.rank,r,"channelsLast"):null,activation:n}),d)}function rk(e,t,n){return Ul((function(){return t=Array.isArray(t)?Lv(t,"int32"):jl(t,"int32"),Xh(e,t,n)}))}function ak(e){return rd(e,e)}function ok(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Jx("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Pp(t,[1,r[0],1,1,1]):Pp(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Pp(t,[1,1,1,1,r[0]]):Pp(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Pp(t,[1,r[0],1,1]):Pp(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Pp(t,[1,1,1,r[0]]):Pp(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Pp(t,[1,r[0],1]):Pp(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Pp(t,[1,1,r[0]]):Pp(t,[1].concat(r))}else if(e<3)return t;throw new Jx("Unsupported input rank by biasAdd: ".concat(t.rank))}function ik(e,t,n){return Ul((function(){return null==n&&(n="channelsLast"),Rw(n),ed(e,ok(e.rank,t,n))}))}function sk(e,t,n,r){return Ul((function(){return ny(e,t,n,r)}))}function uk(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var ck=["fanIn","fanOut","fanAvg"],lk=["normal","uniform","truncatedNormal"];var dk=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(md),fk=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e,t){return km(e,t)}}]),n}(dk);fk.className="Zeros",yd(fk);var pk=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e,t){return Sm(e,t)}}]),n}(dk);pk.className="Ones",yd(pk);var hk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),r=t.call(this),"object"!==typeof e)throw new Jx("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new Jx("config must have value set but got ".concat(e));return r.value=e.value,r}return br(n,[{key:"apply",value:function(e,t){var n=this;return Ul((function(){return rd(hd(n.value),Sm(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(dk);hk.className="Constant",yd(hk);var mk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return br(n,[{key:"apply",value:function(e,t){return ev(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(dk);mk.className="RandomUniform",yd(mk);var vk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return br(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new $x("randomNormal does not support dType ".concat(t,"."));return tk(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(dk);vk.className="RandomNormal",yd(vk);var yk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return br(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new $x("truncatedNormal does not support dType ".concat(t,"."));return Uv(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(dk);yk.className="TruncatedNormal",yd(yk);var gk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return br(n,[{key:"apply",value:function(e,t){var n=this;return Ul((function(){if(2!==e.length||e[0]!==e[1])throw new Jx("Identity matrix initializer can only be used for 2D square matrices.");return rd(n.gain,Zh(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(dk);gk.className="Identity",yd(gk);var bk=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a;if(vr(this,n),r=t.call(this),e.scale<0)throw new Jx("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,vw(ck,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){vw(lk,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return br(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Rw(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=Vw(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var o=Vw(e,0,e.length-2);t=e[e.length-2]*o,n=e[e.length-1]*o}}else{var i=Vw(e);t=Math.sqrt(i),n=Math.sqrt(i)}return[t,n]}(e),r=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(r+a)/2),"normal"===this.distribution){var i=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new $x("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Uv(e,0,i,t,this.seed)}var s=Math.sqrt(3*o);return ev(e,-s,s,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(dk);bk.className="VarianceScaling",yd(bk);var xk=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);xk.className="GlorotUniform",yd(xk);var wk=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);wk.className="GlorotNormal",yd(wk);var kk=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);kk.className="HeNormal",yd(kk);var Sk=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);Sk.className="HeUniform",yd(Sk);var _k=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);_k.className="LeCunNormal",yd(_k);var Tk=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return br(n,[{key:"getClassName",value:function(){return bk.className}}]),n}(bk);Tk.className="LeCunUniform",yd(Tk);var Ek=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new $x("Random seed is not implemented for Orthogonal Initializer yet.");return r}return br(n,[{key:"apply",value:function(e,t){var n=this;return Ul((function(){if(e.length<2)throw new $x("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=tk(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=bg.gramSchmidt(t);return e[0]>e[1]&&(r=pf(r)),rd(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(dk);Ek.className="Orthogonal",yd(Ek);var Ck={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Ik(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fw(e,vd.getMap().classNameMap,t,"initializer")}function Nk(e){return lw(e)}function jk(e){if("string"===typeof e){var t=e in Ck?Ck[e]:e;if("GlorotNormal"===t)return new wk;if("GlorotUniform"===t)return new xk;if("HeNormal"===t)return new kk;if("HeUniform"===t)return new Sk;if("LeCunNormal"===t)return new _k;if("LeCunUniform"===t)return new Tk;var n={};return n.className=t,n.config={},Ik(n)}return e instanceof dk?e:Ik(e)}function Rk(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ak(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Mk(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new Jx("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Ok(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Jx("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Lk(e){var t,n=0,r=wr(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(sQ){r.e(sQ)}finally{r.f()}return n}var Dk="Variable",Pk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dk,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;vr(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=kw(),r=null==r?Dk:r,this.originalName=Pw(r),this.name=Fw(this.originalName),this.trainable_=a,this.constraint=o,this.val=Zv(t,this.trainable_,this.name,this.dtype)}return br(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Fk(e){return e.map((function(e){return e.read()}))}function zk(e){e.forEach((function(e){e[0].write(e[1])}))}var Bk=br((function e(t){vr(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),Uk=br((function e(t,n,r,a,o,i,s){vr(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=o,this.outputTensorIndex=s,this.id=kw(),null!=i&&(this.originalName=Pw(i),this.name=Fw(this.originalName)),this.rank=n.length})),Vk=0,Gk=function(){function e(t,n){vr(this,e),this.callArgs=n,this.id=Vk++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=wr(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;null!=o&&o.outboundNodes.push(this)}}catch(sQ){a.e(sQ)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return br(e,[{key:"getConfig",value:function(){var e,t=[],n=wr(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(sQ){n.e(sQ)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),Wk=0,Hk=function(e){Su(n,e);var t=Eu(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vr(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=Wk++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var o=e.getClassName();a=sw(o)+"_"+_w(o)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var i;if(null!=r.batchInputShape)i=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),i=[s].concat(r.inputShape)}e.batchInputShape=i;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return br(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Qx("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Jx("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return ow(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return ow(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Yx("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Yx("Layer ".concat(this.name)+" is not connected, no input to return.");return ow(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Yx("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Yx("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ow(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=iw(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=iw(this.inputSpec);if(e.length!==t.length)throw new Jx("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new Jx("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(o));if(null!=a.maxNDim&&o>a.maxNDim)throw new Jx("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(o));if(null!=a.minNDim&&o<a.minNDim)throw new Jx("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(o,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new Jx("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var i=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?i[u]:i[i.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new Jx("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(i,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var f=a.shape[d],p=r.shape[d];if(null!=f&&null!=p&&f!==p)throw new Jx("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=iw(e),o=!0,i=wr(a);try{for(i.s();!(r=i.n()).done;){if(!(r.value instanceof Uk)){o=!1;break}}}catch(sQ){i.e(sQ)}finally{i.f()}var s,u=!0,c=wr(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof Uk){u=!1;break}}}catch(sQ){c.e(sQ)}finally{c.f()}if(o===u)throw new Jx("Arguments to apply() must be all SymbolicTensors or all Tensors");return Dw(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,o=[],i=wr(iw(e));try{for(i.s();!(r=i.n()).done;){var s=r.value;o.push(s.shape)}}catch(sQ){i.e(sQ)}finally{i.f()}n.build(ow(o)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),d=[],f=wr(iw(l));try{for(f.s();!(c=f.n()).done;){var p=c.value;-1!==a.indexOf(p)&&(p=p.clone()),d.push(p)}}catch(sQ){f.e(sQ)}finally{f.f()}if(l=ow(d),null!=n.activityRegularizer)throw new $x("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var h,m=function(e){e=iw(e);var t,n=[],r=wr(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(sQ){r.e(sQ)}finally{r.f()}return ow(n)}(e),v=n.computeOutputShape(m),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),h=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new Uk(y,r,n,iw(e),t,n.name,a)})):new Uk(y,v,n,iw(e),t,n.name),n.addInboundNode(e,h,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new $x("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Yx("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=wr(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(sQ){n.e(sQ)}finally{n.f()}if(1===t.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new Yx("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Qx("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Lk(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return Fk(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Ul((function(){var n=t.weights;if(n.length!==e.length)throw new Jx('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=Fk(n),o=0;o<a.length;++o){var i=a[o],s=n[o],u=e[o];if(!Fr(i.shape,u.shape))throw new Jx("Layer weight shape ".concat(i.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}zk(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,o,i,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Jx("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():jk("zeros"));var u=r.apply(t,n),c=new Pk(u,n,e,o,i);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==o&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=iw(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,ee.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=iw(e);t=iw(t),n=iw(n),r=iw(r),a=Ak(a),o=Ak(o);var u,c=[],l=[],d=[],f=wr(s);try{for(f.s();!(u=f.n()).done;){var p=u.value;c.push(p.sourceLayer),l.push(p.nodeIndex),d.push(p.tensorIndex)}}catch(sQ){f.e(sQ)}finally{f.f()}new Gk({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(md);function Zk(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],o=0;o<r.inboundLayers.length;o++){var i,s=wr(Zk(r.inputTensors[o],r.inboundLayers[o],r.nodeIndices[o]));try{for(s.s();!(i=s.n()).done;){var u=i.value;-1===a.indexOf(u)&&a.push(u)}}catch(sQ){s.e(sQ)}finally{s.f()}}return a}var qk=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:_w("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Jx("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new Jx("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Jx("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var o=e.dtype||"float32";r.batchInputShape=a,r.dtype=o,r.inputSpec=[{shape:a}];var i=new Uk(r.dtype,r.batchInputShape,Ft(r),[],{},r.name);return i.nodeIndex=0,i.tensorIndex=0,new Gk({outboundLayer:Ft(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return br(n,[{key:"apply",value:function(e,t){throw new Jx("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Hk);function Xk(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Jx("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new qk({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}qk.className="InputLayer",yd(qk);var Kk=function(){function e(t){if(vr(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=wr(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.add(o.key,o.value)}}catch(sQ){a.e(sQ)}finally{a.f()}}}return br(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new Jx("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return jl(t,e.dtype)}catch(sQ){throw new Jx("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof Uk){if(null==this.id2Value[e.id])throw new Jx("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new Jx("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof Uk){if(null==this.id2Value[e.id])throw new Jx("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new Jx("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Vl(this.id2Mask)}}]),e}(),Yk=new tw,Qk=new tw;function Jk(e,t,n,r){var a,o=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),d=wr(u);try{for(d.s();!(a=d.n()).done;){var f=a.value;-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null)}}catch(sQ){d.e(sQ)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h=u.join(",")+"|"+t.names().sort().join(","),m=Yk.get(h);if(null==m){var v=function(e,t){Mr(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=eS(e[0],t);n=a.sorted,r=a.recipientMap}else{var o,i=new Set,s=wr(e);try{for(s.s();!(o=s.n()).done;){var u,c=eS(o.value,t),l=c.sorted,d=c.recipientMap,f=wr(l);try{for(f.s();!(u=f.n()).done;){var p=u.value;i.has(p.name)||(n.push(p),i.add(p.name))}}catch(sQ){f.e(sQ)}finally{f.f()}var h=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)h(m)}}catch(sQ){s.e(sQ)}finally{s.f()}}return{sorted:n,recipientCounts:$k(r)}}(s,t);m=v.sorted,p=v.recipientCounts,Yk.put(h,m),Qk.put(h,p)}p={},o||Object.assign(p,Qk.get(h));for(var y=new Kk(t),g=0;g<m.length;++g){if(null!=r){var b=zl().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=m[g],w=x.sourceLayer;if(!(w instanceof qk)){var k,S=[],_=[],T=[],E=!1,C=wr(x.inputs);try{for(C.s();!(k=C.n()).done;){var I=k.value,N=y.getValue(I),j=y.getMask(I);S.push(N),_.push(j),null!=j&&(E=!0),o||(p[I.name]--,0!==p[I.name]||t.hasKey(I)||-1!==u.indexOf(I.name)||N.isDisposed||!0===I.sourceLayer.stateful||T.push(N))}}catch(sQ){C.e(sQ)}finally{C.f()}E&&((n=n||{}).mask=_[0]);var R=iw(w.apply(S,n)),A=null;w.supportsMasking&&(A=w.computeMask(S,_));for(var M=tS(x),O=Array.isArray(M)?M:[M],L=0;L<O.length;++L){y.hasKey(O[L])||y.add(O[L],R[L],Array.isArray(A)?A[0]:A);var D=u.indexOf(O[L].name);-1!==D&&(c[D]=R[L])}o||Vl(T)}}return y.disposeMasks(),i?c:c[0]}function $k(e){var t={};for(var n in e)t[n]=e[n].size;return t}function eS(e,t){var n,r=new Set,a=[],o={},i=wr(t.names());try{for(i.s();!(n=i.n()).done;){var s=n.value;r.add(s)}}catch(sQ){i.e(sQ)}finally{i.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var d=c[c.length-1]===u.length-1;if(0===l.inputs.length||d)u.pop(),a.push(l),r.add(l.name),d&&c.pop();else{c.push(u.length-1);var f,p=wr(l.inputs);try{for(p.s();!(f=p.n()).done;){var h=f.value;null==o[h.name]&&(o[h.name]=new Set),o[h.name].add(l.name),r.has(h.name)||u.push(h)}}catch(sQ){p.e(sQ)}finally{p.f()}}}}return{sorted:a,recipientMap:o}}function tS(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,o=wr(e.sourceLayer.inboundNodes[r].outputTensors);try{for(o.s();!(a=o.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(sQ){o.e(sQ)}finally{o.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function nS(e,t){return Ul((function(){return ad(Fh(rd(e,e),t,!0))}))}wa().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=Yk&&Yk.setMaxEntries(e),null!=Qk&&Qk.setMaxEntries(e)}));var rS=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"getConfig",value:function(){return{}}}]),n}(md),aS=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return br(n,[{key:"apply",value:function(e){var t=this;return Ul((function(){var n=nS(e,t.axis),r=eh(n,0,t.maxValue);return rd(e,nd(r,ed(Zw(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(rS);aS.className="MaxNorm",yd(aS);var oS=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return br(n,[{key:"apply",value:function(e){var t=this;return Ul((function(){return nd(e,ed(Zw(),nS(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(rS);oS.className="UnitNorm",yd(oS);var iS=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return rv(e)}}]),n}(rS);iS.className="NonNeg",yd(iS);var sS=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return br(n,[{key:"apply",value:function(e){var t=this;return Ul((function(){var n=nS(e,t.axis),r=ed(rd(t.rate,eh(n,t.minValue,t.maxValue)),rd(1-t.rate,n));return rd(e,nd(r,ed(Zw(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(rS);sS.className="MinMaxNorm",yd(sS);var uS,cS={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function lS(e){return lw(e)}function dS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fw(e,vd.getMap().classNameMap,t,"constraint")}function fS(e){return null==e?null:"string"===typeof e?dS({className:e in cS?cS[e]:e,config:{}}):e instanceof rS?e:dS(e)}function pS(e){return new aS(e)}function hS(e){return new oS(e)}function mS(){return new iS}function vS(e){return new sS(e)}function yS(){return new fk}function gS(){return new pk}function bS(e){return new hk(e)}function xS(e){return new mk(e)}function wS(e){return new vk(e)}function kS(e){return new yk(e)}function SS(e){return new gk(e)}function _S(e){return new bk(e)}function TS(e){return new xk(e)}function ES(e){return new wk(e)}function CS(e){return new kk(e)}function IS(e){return new Sk(e)}function NS(e){return new _k(e)}function jS(e){return new Tk(e)}function RS(e){return new Ek(e)}function AS(e){return MS.apply(this,arguments)}function MS(){return MS=mr(pr().mark((function e(t){var n,r,a,o,i,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],a=[],t)"number"!==typeof(i=t[o])&&(s=i,n.push(s.data()),r.push(o),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];Vl(a);case 12:case"end":return e.stop()}}),e)}))),MS.apply(this,arguments)}function OS(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(uS||(uS={}));var LS=125,DS=function(){function e(){vr(this,e),this.validationData=null}return br(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),PS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;vr(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return br(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=wr(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(sQ){n.e(sQ)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=wr(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(sQ){n.e(sQ)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=wr(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=wr(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=wr(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=wr(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,o.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=mr(pr().mark((function e(t){var n,r,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=wr(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=mr(pr().mark((function e(t){var n,r,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=wr(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),FS=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.call(this)}return br(n,[{key:"onEpochBegin",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=pr().mark((function e(t){var a,o,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"===typeof(a=n[t])?(i.totals.hasOwnProperty(t)||(i.totals[t]=0),i.totals[t]=i.totals[t]+a*r):(t in i.totals?o=i.totals[t]:i.totals[t]=0,s=Ul((function(){return ed(i.totals[t],rd(a,r))})),i.totals[t]=s,null!=o&&o.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=pr().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return o=e.t1.value,e.delegateYield(a(o),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=wr(this.params.metrics),e.prev=2,o=pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=i.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"===typeof i.totals[t]?n[t]=i.totals[t]/i.seen:Ul((function(){var e=rd(nd(1,i.seen),i.totals[t]);n[t]=e,i.totals[t].dispose(),Gl(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(o(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(DS),zS=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"onTrainBegin",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(o=this.history[a],i=0;i<o.length;++i)"number"!==typeof o[i]&&(s=o[i],t.push(s.data()),n.push(a),r.push(i));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(DS),BS=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;if(vr(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Tg,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=LS),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return ra(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():mu();return function(){var o=null!=n?n():mu();return o-a<t?r:(a=o,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(Ft(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return br(n,[{key:"maybeWait",value:function(){var e=mr(pr().mark((function e(t,n,r){var a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,AS(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,AS(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,AS(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,AS(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,AS(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):ra(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,AS(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,AS(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(DS);function US(e,t){return null==e&&(e={}),e instanceof DS?[e]:Array.isArray(e)&&e[0]instanceof DS?e:iw(e).map((function(e){return new BS(e,t)}))}var VS=function(){function e(){vr(this,e)}return br(e,null,[{key:"registerCallbackConstructor",value:function(t,n){Mr(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new Jx("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,ee.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function GS(e,t,n,r,a,o,i,s,u){var c=new zS,l=[new FS].concat((0,ee.Z)(VS.createCallbacks(t)));null!=e&&l.push.apply(l,(0,ee.Z)(e)),l.push(c);var d=new PS(l);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:o,batchSize:i,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:c}}function WS(){return WS="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_u(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},WS.apply(this,arguments)}function HS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return fw(e,vd.getMap().classNameMap,t,"layer",n)}function ZS(e,t){return Ul((function(){"float32"!==e.dtype&&(e=jl(e,"float32"));var n=Fh(ak(e),t,!0),r=xd(n.shape,Zw()),a=ad(Nd(n,r));return nd(e,a)}))}function qS(e,t){return Ul((function(){return wm(ak(Sd(t,e)),-1)}))}function XS(e,t){return Ul((function(){return wm(Td(Sd(t,e)),-1)}))}function KS(e,t){return Ul((function(){var n=Sd(e,t),r=eh(Td(e),Zw(),Number.MAX_VALUE),a=Td(nd(n,r));return rd(100,wm(a,-1))}))}function YS(e,t){return Ul((function(){var n=eh(t,Zw(),Number.MAX_VALUE),r=om(ed(1,n)),a=eh(e,Zw(),Number.MAX_VALUE),o=om(ed(1,a));return wm(ak(Sd(r,o)),-1)}))}function QS(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ul((function(){if(n)t=Sv(t);else{var r=Fh(t,t.shape.length-1,!0);t=nd(t,r)}return t=eh(t,Zw(),1-Zw()),df(Fh(rd(jl(e,"float32"),om(t)),t.shape.length-1))}))}function JS(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ul((function(){var r=jl(qh(function(e){var t=[Vw(e.shape)];return Pp(e,t)}(e)),"int32"),a=(t=eh(t,Zw(),1-Zw())).shape;return QS(Pp(cf(r,a[a.length-1]),a),t,n)}))}function $S(e,t){return Ul((function(){var n;return n=eh(t,Zw(),1-Zw()),n=om(nd(n,Sd(1,n))),wm(function(e,t){if(!Fr(e.shape,t.shape))throw new Jx("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Ul((function(){var n=rv(t),r=df(Td(t));return ed(Sd(n,rd(t,e)),im(Vh(r)))}))}(e,n),-1)}))}function e_(e,t){return Ul((function(){var n=eh(e,Zw(),1),r=eh(t,Zw(),1);return Fh(rd(e,om(nd(n,r))),-1)}))}function t_(e,t){return Ul((function(){var n=ZS(e,-1),r=ZS(t,-1),a=rd(n,r);return df(Fh(a,-1))}))}VS.constructors={};var n_={meanSquaredError:qS,meanAbsoluteError:XS,meanAbsolutePercentageError:KS,meanSquaredLogarithmicError:YS,squaredHinge:function(e,t){return Ul((function(){var n=Nd(0,Sd(1,rd(e,t)));return wm(ak(n),-1)}))},hinge:function(e,t){return Ul((function(){var n=Nd(0,Sd(1,rd(e,t)));return wm(n,-1)}))},categoricalHinge:function(e,t){return Ul((function(){var n=Fh(rd(e,t),-1),r=Dh(rd(Sd(1,e),t),-1);return Nd(0,ed(1,Sd(r,n)))}))},logcosh:function(e,t){return Ul((function(){var n=Math.log(2),r=Sd(t,e),a=Sd(ed(r,sm(rd(-2,r))),n);return wm(a,-1)}))},categoricalCrossentropy:QS,sparseCategoricalCrossentropy:JS,binaryCrossentropy:$S,kullbackLeiblerDivergence:e_,poisson:function(e,t){return Ul((function(){var n=om(ed(Zw(),t));return wm(Sd(t,rd(e,n)),-1)}))},cosineProximity:t_};function r_(e){if("string"===typeof e){if(e in n_)return n_[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Jx(t)}return e}function a_(e,t){return Ul((function(){var n=rd(.5,Am(t)),r=qw(Kh(t,n),e.dtype);return wm(wh(e,r),-1)}))}function o_(e,t){return Ul((function(){return qw(wh(mp(e,-1),mp(t,-1)),"float32")}))}function i_(e,t){return Ul((function(){return jl(Fh(dm(wh(e,1),wh(t,1))),"float32")}))}function s_(e,t){return Ul((function(){var n=i_(e,t),r=function(e,t){return Ul((function(){return jl(Fh(dm(wh(e,0),wh(t,1))),"float32")}))}(e,t),a=ed(n,r);return jl(kh(Kh(a,0),nd(n,a),0),"float32")}))}function u_(e,t){return Ul((function(){var n=i_(e,t),r=function(e,t){return Ul((function(){return jl(Fh(dm(wh(e,1),wh(t,0))),"float32")}))}(e,t),a=ed(n,r);return jl(kh(Kh(a,0),nd(n,a),0),"float32")}))}function c_(e,t){return $S(e,t)}function l_(e,t){return e.rank===t.rank&&(e=jv(e,[e.rank-1])),(t=mp(t,-1)).dtype!==e.dtype&&(t=jl(t,e.dtype)),jl(wh(e,t),"float32")}var d_=QS,f_=JS,p_={binaryAccuracy:a_,categoricalAccuracy:o_,precision:s_,categoricalCrossentropy:d_,sparseCategoricalCrossentropy:f_,mse:qS,MSE:qS,mae:XS,MAE:XS,mape:KS,MAPE:KS,cosine:t_};function h_(e){if(rw(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(n_);n<r.length;n++){var a=r[n];if(n_[a]===e){t=a;break}}if(void 0!==t)return t;for(var o=0,i=Object.keys(p_);o<i.length;o++){var s=i[o];if(p_[s]===e){t=s;break}}return void 0!==t?t:e.name}var m_=1048576;function v_(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!y_(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>m_&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(m_,"."))}}function y_(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!y_(e[r]))return!1}return!0}if(Array.isArray(e)){var a,o=wr(e);try{for(o.s();!(a=o.n()).done;){if(!y_(a.value))return!1}}catch(sQ){o.e(sQ)}finally{o.f()}return!0}return!1}var i=typeof e;return"string"===i||"number"===i||"boolean"===i}function g_(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,o=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var o=0,i=n;o<i.length;o++){var s=i[o];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,ee.Z)(s))}if(t){var u,c=wr(e.layers);try{for(c.s();!(u=c.n()).done;){var l,d=u.value,f=!1,p=wr(d.inboundNodes);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(-1!==r.indexOf(h)){if(f){t=!1;break}f=!0}}}catch(sQ){p.e(sQ)}finally{p.f()}if(!t)break}}catch(sQ){c.e(sQ)}finally{c.f()}}return t}(e),i=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!o)for(var s in i.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,ee.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),b_(i,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)o?x_(c[l],n,a):w_(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=function(e){var t;t=null!=e.collectedTrainableWeights?Lk(e.collectedTrainableWeights):Lk(e.trainableWeights);return t}(e),f=Lk(e.nonTrainableWeights);a("Total params: ".concat(d+f)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}function b_(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function x_(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(sQ){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(sQ){r="multiple"}var o=e.name,i=e.getClassName();b_(["".concat(o," (").concat(i,")"),a,r,e.countParams().toString()],t,n)}function w_(e,t,n,r){var a,o;try{o=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(sQ){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch(sQ){a="multiple"}var i,s=[],u=wr(e.inboundNodes);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var d=c.inboundLayers[l].name,f=c.nodeIndices[l],p=c.tensorIndices[l];s.push("".concat(d,"[").concat(f,"][").concat(p,"]"))}}}catch(sQ){u.e(sQ)}finally{u.f()}var h=e.name,m=e.getClassName(),v=0===s.length?"":s[0];b_(["".concat(h," (").concat(m,")"),o,a,e.countParams().toString(),v],t,r);for(var y=1;y<s.length;++y)b_(["","","","",s[y]],t,r)}function k_(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function S_(e,t){if(null===e)return null;if("string"===typeof e)return uw(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];k_(t,a,o)?n.push(o):n.push(S_(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)i[c]=l;else{var d=uw(c);i[d]=S_(l,d)}}return i}function __(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return sw(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var o=e[a];k_(t,a,o)?n.push(o):n.push(__(o,t))}return n}for(var i={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],d=sw(c);i[d]="name"!==c&&"className"!==c||"string"!==typeof l?__(l,c):l}return i}var T_="4.2.0",E_=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=_w(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],hw(r.inputs).length!==r.inputs.length)throw new Jx("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));hw(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var o,i=wr(r.outputs);try{for(i.s();!(o=i.n()).done;){var s=o.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(sQ){i.e(sQ)}finally{i.f()}var d,f=wr(r.inputs);try{for(f.s();!(d=f.n()).done;){var p=d.value,h=p.sourceLayer,m=p.nodeIndex,v=p.tensorIndex;rw(0===m,"input layer has >1 nodes"),rw(0===v,"input layer has >1 tensors"),r.inputLayers.push(h),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}}catch(sQ){f.e(sQ)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var y=0;y<r.inputLayers.length;y++){var g=r.inputLayers[y];if(!(g instanceof qk))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(g.getClassName(),"."));r.inputNames.push(g.name),r.feedInputShapes.push(g.batchInputShape),r.feedInputNames.push(g.name)}var b,x=wr(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(sQ){x.e(sQ)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,S={},_={},T={},E={},C={},I=[],N=function e(t,a,o,i,s,u){null!=i&&null!=s&&null!=u||(i=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=i.inboundNodes[s];if(-1!==o.indexOf(c))throw new Qx("The tensor ".concat(t.name,' at layer "').concat(i.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(i,s)),i.id in C||(C[i.id]=Object.keys(C).length),-1===o.indexOf(c)&&o.push(c);for(var l=c.inboundLayers.length,d=0;d<l;d++){e(c.inputTensors[d],a,o,c.inboundLayers[d],c.nodeIndices[d],c.tensorIndices[d])}for(a.push(c);o.indexOf(c)>=0;)o.splice(o.indexOf(c),1);I.push(c)}},j=[],R=[],A=wr(r.outputs);try{for(A.s();!(k=A.n()).done;){N(k.value,j,R)}}catch(sQ){A.e(sQ)}finally{A.f()}var M,O=wr(I.slice().reverse());try{for(O.s();!(M=O.n()).done;){var L=M.value;_[L.id]=L,L.id in S||(S[L.id]=0);var D=S[L.id],P=null==T[L.outboundLayer.id]?0:T[L.outboundLayer.id];D=Math.max(D,P),T[L.outboundLayer.id]=D,E[L.outboundLayer.id]=L.outboundLayer,S[L.id]=D;for(var F=0;F<L.inboundLayers.length;F++){var z=L.inboundLayers[F],B=L.nodeIndices[F],U=z.inboundNodes[B],V=null==S[U.id]?0:S[U.id];S[U.id]=Math.max(D+1,V),_[U.id]=U}}}catch(sQ){O.e(sQ)}finally{O.f()}var G={};for(var W in S){var H=S[W];H in G||(G[H]=[]),G[H].push(_[W])}var Z={};for(var q in T){var X=T[q];X in Z||(Z[X]=[]),Z[X].push(E[q])}var K=Object.keys(Z).map((function(e){return parseInt(e,10)})).sort(pw);r.layers=[];var Y,Q=wr(K);try{for(Q.s();!(Y=Q.n()).done;){var J=Z[Y.value];J.sort((function(e,t){var n=C[e.id],r=C[t.id];return n<r?-1:n>r?1:0}));var $,ee=wr(J);try{for(ee.s();!($=ee.n()).done;){var te=$.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(sQ){ee.e(sQ)}finally{ee.f()}}}catch(sQ){Q.e(sQ)}finally{Q.f()}r.layersByDepth=Z,K=Object.keys(G).map((function(e){return parseInt(e,10)})).sort(pw);var ne,re=r.inputs.slice(),ae=[],oe=wr(K);try{for(oe.s();!(ne=oe.n()).done;){var ie,se=wr(G[ne.value]);try{for(se.s();!(ie=se.n()).done;){var ue=ie.value,ce=ue.outboundLayer;if(null!=ce){var le,de=wr(ue.inputTensors);try{for(de.s();!(le=de.n()).done;){var fe=le.value;if(-1===re.indexOf(fe))throw new Qx("Graph disconnected: cannot obtain value for tensor ".concat(fe)+' at layer "'.concat(ce.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ae))}}catch(sQ){de.e(sQ)}finally{de.f()}var pe,he=wr(ue.outputTensors);try{for(he.s();!(pe=he.n()).done;){var me=pe.value;re.push(me)}}catch(sQ){he.e(sQ)}finally{he.f()}ae.push(ce.name)}}}catch(sQ){se.e(sQ)}finally{se.f()}}}catch(sQ){oe.e(sQ)}finally{oe.f()}r.nodesByDepth=G;var ve,ye=r.layers.map((function(e){return e.name})),ge=wr(ye);try{var be=function(){var e=ve.value,t=ye.filter((function(t){return t===e})).length;if(1!==t)throw new Qx('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ye))};for(ge.s();!(ve=ge.n()).done;)be()}catch(sQ){ge.e(sQ)}finally{ge.f()}return r.outboundNodes=[],r.inboundNodes=[],new Gk({outboundLayer:Ft(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return br(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=wr(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(sQ){n.e(sQ)}finally{n.f()}var a,o=wr(this.internalContainerRefs);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.numDisposedVariables+=i.dispose().numDisposedVariables}}catch(sQ){o.e(sQ)}finally{o.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new Jx("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=wr(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(sQ){n.e(sQ)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=wr(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,ee.Z)(r.nonTrainableWeights))}}catch(sQ){n.e(sQ)}finally{n.f()}if(!this.trainable){var a,o=[],i=wr(this.layers);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,ee.Z)(s.trainableWeights))}}catch(sQ){i.e(sQ)}finally{i.f()}return o.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,o=wr(this.layers);try{for(o.s();!(t=o.n()).done;){var i,s=wr(t.value.weights);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(null!=r[u.originalName])throw new Jx("Duplicate weight name: ".concat(u.originalName));r[u.originalName]=u,a++}}catch(sQ){s.e(sQ)}finally{s.f()}}}catch(sQ){o.e(sQ)}finally{o.f()}var c=[];for(var l in e){var d=l;if(null==r[l]){var f=l.split("/");d=f.slice(0,-2).concat([f[f.length-1]]).join("/")}if(null!=r[d])c.push([r[d],e[l]]);else if(n)throw new Jx("Provided weight data has no target variable: ".concat(l));delete r[d]}if(n){var p=[];for(var h in r)p.push(h);if(p.length>0)throw new Jx("".concat(p.length," of ").concat(a," weights are not set: ")+"".concat(p))}zk(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(T_),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=__(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Ul((function(){e=iw(e);for(var r=new Kk,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Jk(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Ul((function(){var r;return e=iw(e),r=null==t?nw(null,e.length):iw(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Ak(e);if(t.length!==this.inputLayers.length)throw new Jx("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r];n[a.name+"_0_0"]=o}var i=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(pw);if(i.length>1){var s,u=wr(i);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,d=wr(this.nodesByDepth[l]);try{for(d.s();!(c=d.n()).done;){var f=c.value,p=f.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var h=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],y=f.nodeIndices[m],g=f.tensorIndices[m],b=n["".concat(v.name,"_").concat(y,"_").concat(g)];h.push(b)}for(var x=Ak(p.computeOutputShape(ow(h))),w=p.inboundNodes.indexOf(f),k=0;k<x.length;k++){n["".concat(p.name,"_").concat(w,"_").concat(k)]=x[k]}}}}catch(sQ){d.e(sQ)}finally{d.f()}}}catch(sQ){u.e(sQ)}finally{u.f()}}for(var S=[],_=[],T=0;T<this.outputLayers.length;T++){var E=this.outputLayers[T],C=this.outputLayersNodeIndices[T],I=this.outputLayersTensorIndices[T],N="".concat(E.name,"_").concat(C,"_").concat(I);_.push(N)}for(var j=0;j<_.length;j++){var R=_[j];rw(R in n),S.push(n[R])}return ow(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=nw(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],i=t[r];n[a.id]=[o,i]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(pw),c=wr(u);try{for(c.s();!(s=c.n()).done;){var l,d=s.value,f=wr(this.nodesByDepth[d]);try{for(f.s();!(l=f.n()).done;){var p,h=l.value,m=h.outboundLayer,v=h.inputTensors,y=h.outputTensors,g=new Array,b=wr(v);try{for(b.s();!(p=b.n()).done;){var x=p.value;x.id in n&&g.push(n[x.id])}}catch(sQ){b.e(sQ)}finally{b.f()}if(g.length===v.length){var w={},k=void 0,S=void 0,_=void 0,T=void 0;if(null!=h.callArgs&&(w=h.callArgs),1===g.length){var E=(0,X.Z)(g[0],2),C=E[0],I=E[1];null==w.mask&&(w.mask=I),_=iw(m.call(C,w)),T=iw(m.computeMask(C,I)),k=[C],S=[I]}else k=g.map((function(e){return e[0]})),S=g.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),_=iw(m.call(k,w)),T=iw(m.computeMask(k,S));if(m.activityRegularizer)throw new $x("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var N=0;N<y.length;++N){var j=y[N],R=_[N],A=T[N];n[j.id]=[R,A]}}}}catch(sQ){f.e(sQ)}finally{f.f()}}}catch(sQ){c.e(sQ)}finally{c.f()}var M,O=[],L=[],D=[],P=wr(this.outputs);try{for(P.s();!(M=P.n()).done;){var F=M.value;rw(F.id in n,"Could not compute output ".concat(F.name," : ").concat(F.id));var z=(0,X.Z)(n[F.id],2),B=z[0],U=z[1];D.push(B.shape),O.push(B),L.push(U)}}catch(sQ){P.e(sQ)}finally{P.f()}return[O,L,D]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},o=wr(this.layers);try{for(o.s();!(r=o.n()).done;){var i=r.value;t=i instanceof n?1:0;for(var s=0;s<i.inboundNodes.length;s++){var u=n.nodeKey(i,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(sQ){o.e(sQ)}finally{o.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new Jx("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new Jx("Provide either a layer name or layer index");var n,r=wr(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(sQ){r.e(sQ)}finally{r.f()}throw new Jx("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Ul((function(){var t,r=[],a=wr(e.layers);try{for(a.s();!(t=a.n()).done;)for(var o=t.value,i=0;i<o.inboundNodes.length;++i){var s=n.nodeKey(o,i);e.containerNodes.has(s)&&r.push.apply(r,(0,ee.Z)(o.calculateLosses()))}}catch(sQ){a.e(sQ)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],o=wr(this.layers);try{for(o.s();!(e=o.n()).done;){for(var i=e.value,s=i.getClassName(),u=i.getConfig(),c=[],l=0;l<i.inboundNodes.length;l++){var d=i.inboundNodes[l],f=n.nodeKey(i,l),p={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch(sQ){console.warn("Layer ".concat(i.name," was passed ")+"non-serializable keyword arguments: "+"".concat(d.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(d.inboundLayers.length>0){for(var h=[],m=0;m<d.inboundLayers.length;m++){var v=d.inboundLayers[m],y=d.nodeIndices[m],g=d.tensorIndices[m],b=r[n.nodeKey(v,y)];null==b&&(b=0),h.push([v.name,b,g,p])}c.push(h)}}}var x={};x.name=i.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(sQ){o.e(sQ)}finally{o.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],_=this.inputLayersNodeIndices[k],T=n.nodeKey(S,_);if(this.containerNodes.has(T)){var E=r[T];null!==E&&void 0!==E||(E=0);var C=this.inputLayersTensorIndices[k];w.push([S.name,E,C])}}t.inputLayers=w;for(var I=[],N=0;N<this.outputLayers.length;N++){var j=this.outputLayers[N],R=this.outputLayersNodeIndices[N],A=n.nodeKey(j,R);if(this.containerNodes.has(A)){var M=r[A];null!==M&&void 0!==M||(M=0);var O=this.outputLayersTensorIndices[N];I.push([j.name,M,O])}}return t.outputLayers=I,t}},{key:"stateful",get:function(){if(this._stateful)throw new Jx("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=wr(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(sQ){t.e(sQ)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Ul((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function i(e,t){var n,a,i=[],s=wr(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void o(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void o(e,t);var p=f.inboundNodes[l];i.push(p.outputTensors[d])}}catch(sQ){s.e(sQ)}finally{s.f()}i.length>0&&e.apply(ow(i),n)}function s(e){var a=e.name,i=HS(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(n),r[a]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new Jx("Corrupted configuration, expected array for nodeData: ".concat(e));o(i,e)}))}var u,c=t.name,l=t.layers,d=wr(l);try{for(d.s();!(u=d.n()).done;){s(u.value)}}catch(sQ){d.e(sQ)}finally{d.f()}for(;!mw(a);){var f,p=wr(l);try{for(p.s();!(f=p.n()).done;){var h=f.value,m=r[h.name];if(m.name in a){var v=a[m.name];delete a[m.name];var y,g=wr(v);try{for(g.s();!(y=g.n()).done;){i(m,y.value)}}catch(sQ){g.e(sQ)}finally{g.f()}}}}catch(sQ){p.e(sQ)}finally{p.f()}}var b,x=[],w=[],k=wr(t.inputLayers);try{for(k.s();!(b=k.n()).done;){var S=b.value,_=S[0],T=S[1],E=S[2];rw(_ in r);var C=r[_].inboundNodes[T].outputTensors;x.push(C[E])}}catch(sQ){k.e(sQ)}finally{k.f()}var I,N=wr(t.outputLayers);try{for(N.s();!(I=N.n()).done;){var j=I.value,R=j[0],A=j[1],M=j[2];rw(R in r);var O=r[R].inboundNodes[A].outputTensors;w.push(O[M])}}catch(sQ){N.e(sQ)}finally{N.f()}return new e({inputs:x,outputs:w,name:c})}}]),n}(Hk);function C_(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function I_(e,t){return C_(e,t,"classWeight")}function N_(e,t,n,r){return j_.apply(this,arguments)}function j_(){return(j_=mr(pr().mark((function e(t,n,r,a){var o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=Ul((function(){if(1===t.shape.length)return Rl(t);if(2===t.shape.length){if(t.shape[1]>1){return mp(t,1)}if(1===t.shape[1])return Pp(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),Vl(o),s=[],i.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Lv(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R_(e,t){return rd(e,t)}var A_=32;function M_(e,t){var n,r,a=t;n=a.xs,r=a.ys,Mr(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=O_("input",e.inputNames,n),i=O_("output",e.outputNames,r),s=o[0].shape[0];Mr(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),Mr(i.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(i.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){Mr(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<o.length;c++)u(c);for(var l=function(t){Mr(i[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<i.length;d++)l(d);return{xs:o,ys:i}}function O_(e,t,n){if(n instanceof Fu)return[n];if(Array.isArray(n))return Mr(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],o=wr(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(null==n[i])throw new Jx("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));a.push(n[i])}}catch(sQ){o.e(sQ)}finally{o.f()}return a}function L_(e){if(3===e.length)throw new $x("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function D_(e,t,n){return P_.apply(this,arguments)}function P_(){return P_=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C,I,N,j,R,A,M,O,L,D;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Mr(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Mr(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Mr(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),Mr(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),Mr(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(z_(r.validationData)?Mr(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=L_(r.validationData),i=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),d=o?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),f=US(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,h=GS(f,p,r.epochs,null,null,F_(n,r),null,o,d),m=h.callbackList,v=h.history,m.setModel(t),t.history=v,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,y=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:g=e.sent;case 27:if(!(y<r.epochs)){e.next=98;break}return b={},e.next=31,m.onEpochBegin(y);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:g=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,g.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return S=M_(t,k.value),_=S.xs,T=S.ys,(E={}).batch=w,E.size=_[0].shape[0],e.next=51,m.onBatchBegin(w,E);case 51:if(C=[],null==r.classWeight){e.next=64;break}I=I_(r.classWeight,t.outputNames),N=0;case 55:if(!(N<I.length)){e.next=64;break}return e.t0=C,e.next=59,N_(T[N],null,I[N]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++N,e.next=55;break;case 64:for(j=_.concat(T).concat(C),R=c(j),Vl(j),A=0;A<l.length;++A)M=l[A],O=R[A],E[M]=O,Gl(O);return e.next=70,m.onBatchEnd(w,E);case 70:OS(E),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!o){e.next=86;break}if(L=void 0,!z_(r.validationData)){e.next=84;break}return e.t2=iw,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=iw(t.evaluate(i,s,{batchSize:null==r.validationBatchSize?A_:r.validationBatchSize,verbose:0}));case 85:for(D=0;D<t.metricsNames.length;++D)b["val_".concat(t.metricsNames[D])]=L[D];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(y,b);case 93:if(y++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),P_.apply(this,arguments)}function F_(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function z_(e){return"function"===typeof e.iterator}function B_(e,t,n){return U_.apply(this,arguments)}function U_(){return U_=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,o=t.testFunction,i=[],!(r.verbose>0)){e.next=6;break}throw new $x("Verbose mode is not implemented yet.");case 6:if(Mr(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),"function"!==typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,l=pr().mark((function e(){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,i=Ul((function(){if(n.value){var e=M_(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=Ul((function(){return o(s)}));if(Vl(s),0===c)for(var d=0;d<l.length;++d)i.push(hd(0));for(var f=s[0].shape[0],p=function(e){var t=l[e],n=i[e];i[e]=Ul((function(){return ed(i[e],rd(f,t))})),c>0&&Vl(n)},h=0;h<l.length;++h)p(h);Vl(l),u+=f,++c}return i})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<i.length;++d)f=i[d],i[d]=nd(i[d],u),Vl(f);return e.abrupt("return",ow(i));case 27:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e){Mr(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function G_(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return Kw(e,t,n-t)})):Kw(e,t,n-t)}function W_(e,t){return Ul((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return W_(e,t)})):rk(e,"int32"===t.dtype?t:jl(t,"int32"))}))}function H_(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function Z_(e){var t=[];e instanceof Fu&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Xw(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function q_(e,t){if(null!=e){var n=[];if(t instanceof Fu)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var o=[];if(e instanceof Fu)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var i in e){var s=e[i];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function X_(e){return Array.isArray(e)}function K_(e){return!function(e){return e instanceof Fu}(e)&&!X_(e)}function Y_(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var i=!1;if(X_(e)&&e.length>0)i=!0;else if(K_(e)){for(var s in e)if(e.hasOwnProperty(s)){i=!0;break}}else i=!0;if(i)throw new Jx("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(K_(e)){r=[];var u,c=wr(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new Jx('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(sQ){c.e(sQ)}finally{c.f()}}else if(X_(e)){if(e.length!==t.length)throw new Jx("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new Jx("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=Z_(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var f=r[d];if(f.shape.length!==n[d].length)throw new Jx("Error when checking ".concat(o,": expected ").concat(t[d]," ")+"to have ".concat(n[d].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var p=0;p<n[d].length;++p)if(0!==p||a){var h=f.shape[p],m=n[d][p];if(null!=m&&m>=0&&h!==m)throw new Jx("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[d].slice(1,n[d].length),"] ")+"(i.e.,tensor shape [*,".concat(n[d].slice(1,n[d].length),"])")+" but the ".concat(o," received an input with ").concat(f.shape[0])+" examples, each with shape [".concat(f.shape.slice(1,f.shape.length),"]")+" (tensor shape [".concat(f.shape,"])"))}}return r}function Q_(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Jx("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new Jx("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var s=r[i];if(s.shape.length!==n[i].length)throw new Jx("Error when checking ".concat(o,": expected ").concat(t[i]," ")+"to have ".concat(n[i].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[i].length;++u)if(0!==u||a){var c=s.shape[u],l=n[i][u];if(null!=l&&l!==c)throw new Jx("Error when checking ".concat(o,": expected ")+"".concat(t[i]," to have shape ").concat(JSON.stringify(n[i])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var J_=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).isTraining=!1,r}return br(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Jx("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");g_(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Sg.adagrad(.01)},Adadelta:function(){return Sg.adadelta(1,.95,Zw())},Adam:function(){return Sg.adam(.001,.9,.999,Zw())},Adamax:function(){return Sg.adamax(.002,.9,.999,Zw(),0)},RMSProp:function(){return Sg.rmsprop(.001,.9,0,Zw())},SGD:function(){return Sg.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Jx("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof gd))throw new Jx("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Jx("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return r_(e)}))}else{var a=r_(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new Jx('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var i,s=wr(this.outputNames);try{for(s.s();!(i=s.n()).done;){var u=i.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(r_(e.loss[u]))}}catch(sQ){s.e(sQ)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],d=this.outputNames[c];this.feedOutputNames.push(d),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Dw("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],o=wr(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(sQ){o.e(sQ)}finally{o.f()}return a}(e.metrics,this.outputNames);Dw("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,o,i,s=wr(n);try{var u=function(){var n,s=i.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===$S?-1!==["accuracy","acc"].indexOf(s)?a=a_:-1!==["crossentropy","ce"].indexOf(s)&&(a=c_):t.lossFunctions[e]===JS?-1!==["accuracy","acc"].indexOf(s)?a=l_:-1!==["crossentropy","ce"].indexOf(s)&&(a=f_):-1!==["accuracy","acc"].indexOf(s)?a=o_:-1!==["crossentropy","ce"].indexOf(s)&&(a=d_),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),o=a,r=""+u}else{var l=function(e){if("string"===typeof e&&e in p_)return p_[e];if("string"!==typeof e&&null!=e)return e;throw new Jx("Unknown metric ".concat(e))}(s);o=l,r=""+h_(s)}Dw(r,(function(){n=o})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(i=s.n()).done;)u()}catch(sQ){s.e(sQ)}finally{s.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;V_(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var o=a[0].concat(a[1]);this.makeTestFunction();var i=this.testFunction;return ow(this.testLoop(i,o,r,n.verbose,n.steps))}finally{q_(a[0],e),q_(a[1],t)}}},{key:"evaluateDataset",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",B_(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Jx("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new Jx("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new Jx("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new Kk;if(e instanceof Fu&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Jx("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else{var s,u=wr(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new Jx("No value is provided for the model's input ".concat(c.name));o.add(c,l)}}catch(sQ){u.e(sQ)}finally{u.f()}}var d=Jk(a,o);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=nw(null,e.length),r=e.length,a=wr(this.layers);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,i=Array.isArray(o.output)?o.output:[o.output],s=i.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=i[c],r--),0===r)break}if(0===r)break}}catch(sQ){a.e(sQ)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new Jx("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ul((function(){var a=t.checkNumSamples(e);if(r)throw new $x("Verbose predictLoop() is not implemented yet.");for(var o=H_(a,n),i=t.outputs.map((function(e){return[]})),s=function(n){Ul((function(){var r=o[n][0],a=o[n][1],i=G_(e,r,a),s=[];if(Array.isArray(i))for(var u=0;u<i.length;++u)s.push({key:t.inputs[u],value:i[u]});else s.push({key:t.inputs[0],value:i});var c=new Kk(s);return Jk(t.outputs,c)})).forEach((function(e,t){return i[t].push(e)}))},u=0;u<o.length;++u)s(u);return ow(i.map((function(e){return Bp(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Z_(e);Q_(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return V_(r),this.predictLoop(n,r)}finally{q_(n,e)}}},{key:"predictOnBatch",value:function(e){Q_(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Qx("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var o=this.feedOutputShapes[a];this.feedLossFns[a]===JS?r.push(o.slice(0,o.length-1).concat([1])):r.push(o)}if(function(e,t,n){var r=hw(e.map((function(e){return e.shape[0]})));r.sort();var a=hw(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new Jx("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new Jx("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Fr(r,a))throw new Jx("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=Y_(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Y_(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){for(var r=[qS,$S,QS],a=0;a<e.length;++a){var o=e[a],i=t[a],s=n[a];if(null!=i){if(i===QS&&1===o.shape[o.shape.length-1])throw new Jx("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(i))for(var u=o.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var d=u[l],f=c[l];if(null!=f&&d!==f)throw new Jx("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new Jx("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=mr(pr().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(h.length>4&&void 0!==h[4])||h[4],i=h.length>5?h[5]:void 0,s=this.standardizeUserDataXY(t,n,o,i),u=(0,X.Z)(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}f=I_(a,this.outputNames),d=[],p=0;case 10:if(!(p<f.length)){e.next=19;break}return e.t0=d,e.next=14,N_(l[p],null,f[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[c,l,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return Ul((function(){var i=r.checkNumSamples(t,n,o,"steps"),s=[];if(a>0)throw new $x("Verbose mode is not implemented yet.");if(null!=o)throw new $x("steps mode in testLoop() is not implemented yet");for(var u=H_(i,n),c=Lv(Hw(0,i)),l=0;l<u.length;++l){var d=u[l][0],f=u[l][1],p=Kw(c,d,f-d),h=W_(t,p),m=e(h);if(0===l)for(var v=0;v<m.length;++v)s.push(hd(0));for(var y=0;y<m.length;++y){var g=m[y];s[y]=ed(s[y],rd(f-d,g))}}for(var b=0;b<s.length;++b)s[b]=nd(s[b],i);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(aw(e,r)>1){var o=aw(e.slice(0,n),r);a+="_".concat(o)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),i=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new Kk(t),l=Jk(e.outputs,c,{training:!0}),d=0;d<e.lossFunctions.length;++d){var f=(0,e.lossFunctions[d])(a[d],l[d]);null!=o[d]&&(f=R_(f,o[d]));var p=wm(f);n.push(p),u=0===d?f:ed(u,f)}for(var h=0;h<e.metricsTensors.length;++h){var m=void 0;if(e.outputs.length>1&&h<e.outputs.length)m=n[h];else{var v=e.metricsTensors[h][0],y=e.metricsTensors[h][1];m=wm(v(a[y],l[y]))}Gl(m),i.push(m)}return u=wm(u),e.calculateLosses().forEach((function(e){u=ed(u,e)})),u}),!0,s)].concat(i)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Ul((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],s=0;s<e.inputs.length;++s)i.push({key:e.inputs[s],value:a[s]});for(var u=new Kk(i),c=Jk(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var d=e.lossFunctions[l],f=wm(d(o[l],c[l]));n=0===l?f:ed(n,f),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],m=e.metricsTensors[p][1],v=wm(h(o[m],c[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C.length>2&&void 0!==C[2]?C[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,V_(p=null==r.batchSize?32:r.batchSize),!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,false,p);case 10:if(h=e.sent,a=h[0],o=h[1],f=h[2],m=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(m=!0,2!==r.validationData.length){e.next=22;break}u=r.validationData[0],c=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new $x("validationData including sample weights is not supported yet.");case 26:throw new Jx("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return!0,e.next=30,this.standardizeUserData(u,c,null,null,true,p);case 30:y=e.sent,l=y[0],d=y[1],v=l.concat(d),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(m=!0,g=Math.floor(a[0].shape[0]*(1-r.validationSplit)),b=a[0].shape[0],l=G_(a,g,b),i=a,a=G_(a,0,g),d=G_(o,g,b),s=o,o=G_(o,0,g),v=l.concat(d)):null!=r.validationSteps&&(m=!0);case 37:return x=a.concat(o).concat(f),this.checkTrainableWeightsConsistency(),w=this.makeTrainFunction(),k=this.getDedupedMetricsNames(),m?(this.makeTestFunction(),S=this.testFunction,_=k.slice().concat(k.map((function(e){return"val_"+e})))):(S=null,v=[],_=k.slice()),T=US(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(w,x,k,p,r.epochs,r.verbose,T,S,v,r.shuffle,_,r.initialEpoch,null,null);case 45:return E=e.sent,e.abrupt("return",E);case 47:return e.prev=47,this.isTraining=!1,q_(a,t),q_(o,n),q_(i,t),q_(s,n),q_(l,u),q_(d,c),null!=f&&Vl(f),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var e=mr(pr().mark((function e(t,n,r,a,o,i,s,u,c,l,d,f,p,h){var m,v,y,g,b,x,w,k,S=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==o&&(o=1),null==l&&(l=!0),null==f&&(f=0),m=!1,null!=u&&null!=c&&(m=!0),null==h){e.next=10;break}if(m=!0,null!=p){e.next=10;break}throw new Jx("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(v=this.checkNumSamples(n,a,p,"steps_per_epoch"))&&(y=Hw(0,v)),null==i&&(i=1),g=GS(s,i,o,f,v,p,a,m,d),b=g.callbackList,x=g.history,b.setModel(this),this.history=x,e.next=18,b.onTrainBegin();case 18:this.stopTraining_=!1,w=pr().mark((function e(){var o,i,s,d,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(k);case 2:if(o={},null==p){e.next=7;break}throw new $x("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==l){e.next=11;break}throw new $x("batch shuffling is not implemneted yet");case 11:l&&Tr(y);case 12:i=Lv(y),s=H_(v,a),d=pr().mark((function e(l){var d;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,b.onBatchBegin(l,d);case 3:return Ul((function(){var e=s[l][0],f=s[l][1],p=Kw(i,e,f-e);d.batch=l,d.size=f-e;for(var h=W_(n,p),v=t(h),y=0;y<r.length;++y){var g=r[y],b=v[y];d[g]=b,Gl(b)}if(l===s.length-1&&m)for(var x=S.testLoop(u,c,a),w=0;w<r.length;++w){var k=r[w],_=x[w];Gl(_),o["val_"+k]=_}})),e.next=6,b.onBatchEnd(l,d);case 6:if(OS(d),!S.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),f=0;case 16:if(!(f<s.length)){e.next=24;break}return e.delegateYield(d(f),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++f,e.next=16;break;case 24:i.dispose();case 25:return e.next=27,b.onEpochEnd(k,o);case 27:if(!S.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),k=f;case 21:if(!(k<o)){e.next=29;break}return e.delegateYield(w(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++k,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,o,i,s,u,c,l,d,f,p,h){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D_(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],o=r[1],i=this.makeTrainFunction(),s=i(a.concat(o)),u=[],c=wr(s),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return d=l.value,e.next=15,d.data();case 15:f=e.sent,u.push(f[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return Vl(s),q_(r[0],t),q_(r[1],n),e.abrupt("return",ow(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:a[o]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=WS(_u(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=zl().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-zl().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=sw(this.loss);else if(Array.isArray(this.loss)){var t,n=wr(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(sQ){n.e(sQ)}finally{n.f()}e=this.loss.map((function(e){return sw(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,o=0,i=r;o<i.length;o++){var s=i[o];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=sw(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[sw(h_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return sw(h_(e))}));var e={};for(var t in this.metrics)e[t]=sw(h_(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=HS(S_(e.optimizer_config));if("string"===typeof e.loss)t=uw(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return uw(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=uw(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return uw(e)}));else if(null!=e.metrics)for(var o in n={},e.metrics)n[o]=uw(e.metrics[o]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i,u,c,l,d,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=Gc(t)).length){e.next=6;break}throw new Jx("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Jx("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Jx("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,Sc(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,o=this.toJSON(null,false),i={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(T_),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return i.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=s,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,d=l.data,f=l.specs,(u=a.specs).push.apply(u,(0,ee.Z)(f)),a.data=Rc([a.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,v_(this.userDefinedMetadata,this.name,true),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,e.abrupt("return",t.save(i));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){v_(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(E_);J_.className="Model",yd(J_);var $_=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n)}(J_);function eT(e,t){return tT.apply(this,arguments)}function tT(){return tT=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=S_(r),o=HS(a,n),null==t.weightsManifest){e.next=15;break}return e.next=9,Hd(t.weightsManifest,t.pathPrefix,o.weights.map((function(e){return e.originalName})));case 9:i=e.sent,s={},u=wr(o.weights);try{for(u.s();!(c=u.n()).done;)l=c.value,s[l.originalName]=i[l.originalName]}catch(sQ){u.e(sQ)}finally{u.f()}o.loadWeights(s),Vl(i);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),tT.apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return(rT=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=Wc(t,n)).length){e.next=7;break}r.push($d(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new Jx("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",aT(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aT(e,t,n){return oT.apply(this,arguments)}function oT(){return oT=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new Jx("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(o=a.modelTopology).model_config&&(o=o.model_config),i=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&i,u=HS(S_(o),n,s),null!=(c=a.trainingConfig)&&u.loadTrainingConfig(c),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new Jx("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(l=iT(a.weightData,a.weightSpecs),d=l.modelWeights,f=l.optimizerWeights,u.loadWeights(d,i),!(null!=u.optimizer&&f.length>0)){e.next=22;break}return e.next=22,u.optimizer.setWeights(f);case 22:Vl(d),Vl(f.map((function(e){return e.tensor})));case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}function iT(e,t){var n=Tc(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}$_.className="Functional",yd($_);var sT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:_w("sequential_"),null!=e.layers){var a,o=wr(e.layers);try{for(o.s();!(a=o.n()).done;){var i=a.value;r.add(i)}}catch(sQ){o.e(sQ)}finally{o.f()}}return r}return br(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new Jx("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof J_;if(r){if(1!==(t=e).outputs.length)throw new Jx("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new Jx("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Jx("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Xk({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new Jx("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Jx("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Zk(this.outputs[0])}this.inboundNodes=[],new Gk({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:nw(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Ok(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new J_({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),WS(_u(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),WS(_u(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Qx("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Qx("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=mr(pr().mark((function e(t,n){var r,a=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Qx("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Qx("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new Jx("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new Jx("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=wr(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(sQ){n.e(sQ)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Jx("Legacy serialization format not supported yet.");r=t}else Mr(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var i=new e(o);if(!(i instanceof n))throw new $x("Sequential.fromConfig called on non-Sequential input: ".concat(i));var s,u=wr(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=HS(c,undefined,a);a&&l.setFastWeightInitDuringBuild(!0),i.add(l)}}catch(sQ){u.e(sQ)}finally{u.f()}return i}}]),n}(J_);function uT(e){return new J_(e)}function cT(e){return new sT(e)}function lT(e){return Xk(e)}function dT(e,t){VS.registerCallbackConstructor(e,t)}sT.className="Sequential",yd(sT);var fT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"getConfig",value:function(){return{}}}]),n}(md),pT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new $x("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Eh(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}]),n}(fT);pT.className="elu",yd(pT);var hT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return fv(e)}}]),n}(fT);hT.className="selu",yd(hT);var mT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return rv(e)}}]),n}(fT);mT.className="relu",yd(mT);var vT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return Ul((function(){return Tm(6,rv(e))}))}}]),n}(fT);vT.className="relu6",yd(vT);var yT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return e}}]),n}(fT);yT.className="linear",yd(yT);var gT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return Up(e)}}]),n}(fT);gT.className="sigmoid",yd(gT);var bT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return function(e){return Ul((function(){var t=ed(.5,rd(.2,e));return eh(t,0,1)}))}(e)}}]),n}(fT);bT.className="hardSigmoid",yd(bT);var xT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return sm(e)}}]),n}(fT);xT.className="softplus",yd(xT);var wT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return function(e){return Ul((function(){return nd(e,ed(Td(e),1))}))}(e)}}]),n}(fT);wT.className="softsign",yd(wT);var kT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return Gp(e)}}]),n}(fT);kT.className="tanh",yd(kT);var ST=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return Sv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(fT);ST.className="softmax",yd(ST);var _T=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return cm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(fT);_T.className="logSoftmax",yd(_T);var TT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Ul((function(){return rd(Up(rd(e,t)),e)}))}}]),n}(fT);TT.className="swish",yd(TT);var ET=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e){return Ul((function(){return rd(e,Gp(sm(e)))}))}}]),n}(fT);function CT(e){return e.getClassName()}function IT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fw(e,vd.getMap().classNameMap,t,"activation")}function NT(e){if(null==e){var t={className:"linear",config:{}};return IT(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},IT(n)}return e instanceof fT?e:IT(e)}function jT(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}ET.className="mish",yd(ET);var RT=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n)}(md),AT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this),jT(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return br(n,[{key:"apply",value:function(e){var t=this;return Ul((function(){var n=km([1]);return t.hasL1&&(n=ed(n,Fh(rd(t.l1,Td(e))))),t.hasL2&&(n=ed(n,Fh(rd(t.l2,ak(e))))),Pp(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(RT);AT.className="L1L2",yd(AT);var MT={l1l2:"L1L2"};function OT(e){return lw(e)}function LT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fw(e,vd.getMap().classNameMap,t,"regularizer")}function DT(e){return null==e?null:"string"===typeof e?LT({className:e in MT?MT[e]:e,config:{}}):e instanceof RT?e:LT(e)}var PT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return br(n,[{key:"call",value:function(e,t){e=Mk(e);var n=rv(e);return null!=this.maxValue&&(n=eh(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);PT.className="ReLU",yd(PT);var FT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return br(n,[{key:"call",value:function(e,t){var n=Mk(e);return em(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);FT.className="LeakyReLU",yd(FT);var zT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=jk(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=DT(e.alphaRegularizer),r.alphaConstraint=fS(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Jx("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return br(n,[{key:"build",value:function(e){var t=(e=Ok(e)).slice(1);if(null!=this.sharedAxes){var n,r=wr(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(sQ){r.e(sQ)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var o=1;o<e.length;++o)a[o]=e[o];this.inputSpec=[new Bk({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Mk(e),Um(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Nk(this.alphaInitializer),alphaRegularizer:OT(this.alphaRegularizer),alphaConstraint:lS(this.alphaConstraint),sharedAxes:this.sharedAxes},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);zT.className="PReLU",yd(zT);var BT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new $x("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return br(n,[{key:"call",value:function(e,t){var n=Mk(e);return Eh(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);BT.className="ELU",yd(BT);var UT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return br(n,[{key:"call",value:function(e,t){var n=Mk(e);return rd(n,jl(Kh(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);UT.className="ThresholdedReLU",yd(UT);var VT=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new ST).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return br(n,[{key:"call",value:function(e,t){var n=Mk(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);function GT(e,t,n){if("number"===typeof e)return nw(e,t);if(e.length!==t)throw new Jx("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((o=a)!==parseInt(o.toString(),10))throw new Jx("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var o}function WT(e,t,n,r){var a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function HT(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Ww([n-t,0]);else{if("same"!==r)throw new Jx("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function ZT(e,t){return Ul((function(){return Rw(t),"channelsFirst"===t?pf(e,[0,2,3,1]):e}))}function qT(e,t){return Ul((function(){return Rw(t),"channelsFirst"===t?pf(e,[0,2,3,4,1]):e}))}function XT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Ul((function(){if(null==o&&(o="channelsLast"),Rw(o),3!==e.shape.length)throw new Jx("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new Jx("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new Jx("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=pf(e,[0,2,1])),"causal"===a)throw new $x("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=ih(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=ik(s,n)),s}))}function KT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Ul((function(){if(null==o&&(o="channelsLast"),Rw(o),3!==e.rank&&4!==e.rank)throw new Jx("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new Jx("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=ZT(e,o);if("causal"===a)throw new $x("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=fy({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(u=pf(u,[0,3,1,2])),u}))}function YT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0;return Ul((function(){if(null==o&&(o="channelsLast"),Rw(o),4!==e.rank&&5!==e.rank)throw new Jx("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new Jx("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=qT(e,o);if("causal"===a)throw new $x("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=ch(s,t,r,"same"===a?"same":"valid","NDHWC",i),null!=n&&(s=ik(s,n)),"channelsFirst"===o&&(s=pf(s,[0,4,1,2,3])),s}))}VT.className="Softmax",yd(VT);var QT=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;if(vr(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,gw(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new $x("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=GT(r.kernelSize,e,"kernelSize"),a.strides=GT(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Aw(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Rw(a.dataFormat),a.activation=NT(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=jk(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=fS(r.biasConstraint),a.biasRegularizer=DT(r.biasRegularizer),a.activityRegularizer=DT(r.activityRegularizer),a.dilationRate=GT(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new Jx("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new Jx("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new Jx("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return br(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:CT(this.activation),useBias:this.useBias,biasInitializer:Nk(this.biasInitializer),biasRegularizer:OT(this.biasRegularizer),activityRegularizer:OT(this.activityRegularizer),biasConstraint:lS(this.biasConstraint)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(rw("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!yw(e.kernelSize,"number",1,3))throw new Jx("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Hk),JT=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,gw(a.filters,"filters"),a.kernelInitializer=jk(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=fS(r.kernelConstraint),a.kernelRegularizer=DT(r.kernelRegularizer),a}return br(n,[{key:"build",value:function(e){e=Ok(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jx("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,Pe.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t;e=Mk(e);var r=null==n.bias?null:n.bias.read(),a=xw(n.activation.getClassName());if(null!=a&&2===n.rank)t=KT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=XT(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=KT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new $x("convolutions greater than 3D are not implemented yet.");t=YT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Ok(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=WT(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t)).push(this.filters):(o.push(this.filters),o=o.concat(t)),o}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Nk(this.kernelInitializer),kernelRegularizer:OT(this.kernelRegularizer),kernelConstraint:lS(this.kernelConstraint)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Jx("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(QT),$T=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return br(n,[{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!yw(e.kernelSize,"number",1,2))throw new Jx("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(JT);$T.className="Conv2D",yd($T);var eE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return br(n,[{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Jx("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(JT);eE.className="Conv3D",yd(eE);var tE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).inputSpec=[new Bk({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new Jx("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return br(n,[{key:"build",value:function(e){if(4!==(e=Ok(e)).length)throw new Jx("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jx("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bk({ndim:4,axes:(0,Pe.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e);if(4!==t.shape.length)throw new Jx("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=o[r],u=o[a],c=n.kernelSize[0],l=n.kernelSize[1],d=n.strides[0],f=n.strides[1],p=[i,HT(s,d,c,n.padding),HT(u,f,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=pf(t,[0,2,3,1]));var h=uh(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=pf(h,[0,3,1,2])),null!=n.bias&&(h=ik(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Ok(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=HT(a[n],s,o,this.padding),a[r]=HT(a[r],u,i,this.padding),a}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}($T);tE.className="Conv2DTranspose",yd(tE);var nE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).inputSpec=[new Bk({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new Jx("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return br(n,[{key:"build",value:function(e){if(5!==(e=Ok(e)).length)throw new Jx("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jx("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Bk({ndim:5,axes:(0,Pe.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e);if(5!==t.shape.length)throw new Jx("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,o,i=t.shape,s=i[0];"channelsFirst"===n.dataFormat?(o=2,r=3,a=4):(o=1,r=2,a=3);var u=i[o],c=i[r],l=i[a],d=n.kernelSize[0],f=n.kernelSize[1],p=n.kernelSize[2],h=n.strides[0],m=n.strides[1],v=n.strides[2],y=[s,HT(u,h,d,n.padding),HT(c,m,f,n.padding),HT(l,v,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=pf(t,[0,2,3,4,1]));var g=dh(t,n.kernel.read(),y,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(g=pf(g,[0,4,1,2,3])),null!==n.bias&&(g=ik(g,n.bias.read(),n.dataFormat)),null!==n.activation&&(g=n.activation.apply(g)),g}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,o=(e=Ok(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var i=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],d=this.strides[2];return o[t]=this.filters,o[n]=HT(o[n],c,i,this.padding),o[r]=HT(o[r],l,s,this.padding),o[a]=HT(o[a],d,u,this.padding),o}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(eE);nE.className="Conv3DTranspose",yd(nE);var rE=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;if(vr(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new Jx("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new Jx("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new Jx("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=jk(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=DT(r.depthwiseRegularizer),a.depthwiseConstraint=fS(r.depthwiseConstraint),a.pointwiseInitializer=jk(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=DT(r.pointwiseRegularizer),a.pointwiseConstraint=fS(r.pointwiseConstraint),a}return br(n,[{key:"build",value:function(e){if((e=Ok(e)).length<this.rank+2)throw new Jx("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Jx("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Bk({ndim:this.rank+2,axes:(0,Pe.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t;if(e=Mk(e),1===n.rank)throw new $x("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=pf(e,[0,2,3,1])),t=pv(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=ik(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=pf(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Nk(this.depthwiseInitializer),e.pointwiseInitializer=Nk(this.pointwiseInitializer),e.depthwiseRegularizer=OT(this.depthwiseRegularizer),e.pointwiseRegularizer=OT(this.pointwiseRegularizer),e.depthwiseConstraint=lS(this.depthwiseConstraint),e.pointwiseConstraint=lS(this.pointwiseConstraint),e}}]),n}(JT);rE.className="SeparableConv";var aE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,2,e)}return br(n)}(rE);aE.className="SeparableConv2D",yd(aE);var oE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return br(n,[{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!yw(e.kernelSize,"number",1,1))throw new Jx("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(JT);oE.className="Conv1D",yd(oE);var iE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return br(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(e=Mk(e),"channelsLast"===n.dataFormat){var t=Qw(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Qw(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Qw(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Qw(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);iE.className="Cropping2D",yd(iE);var sE=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a;return vr(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rw(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,vw(Ew,"InterpolationFormat",a),r}return br(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=pf(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i="nearest"===n.interpolation?gg.resizeNearestNeighbor(t,[a,o]):gg.resizeBilinear(t,[a,o]);return pf(i,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?gg.resizeNearestNeighbor(t,[s,u]):gg.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);sE.className="UpSampling2D",yd(sE);var uE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=jk(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=fS(e.depthwiseConstraint),r.depthwiseRegularizer=DT(e.depthwiseRegularizer),r}return br(n,[{key:"build",value:function(e){if((e=Ok(e)).length<4)throw new Jx("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Jx("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return Ul((function(){null==a&&(a="channelsLast"),Rw(a);var i=ZT(e,a);if(4!==e.rank)throw new Jx("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new Jx("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return i=gh(i,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===a&&(i=pf(i,[0,3,1,2])),i}))}(e=Mk(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=ik(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Ok(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=WT(t,this.kernelSize[0],this.padding,this.strides[0]),o=WT(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Nk(this.depthwiseInitializer),e.depthwiseRegularizer=OT(this.depthwiseRegularizer),e.depthwiseConstraint=lS(this.depthwiseRegularizer),e}}]),n}(QT);function cE(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Jx("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function lE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Ul((function(){var u=t.shape.length;if(u<3)throw new Jx("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(Hw(2,u));if(t=pf(t,c),null!=o)throw new $x("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=jl(jl(a,"bool"),"float32")).rank===u-1&&(a=Gh(a,-1)),a=pf(a,c)),r&&(t=ov(t,0),null!=a&&(a=ov(a,0)));var l,d,f=[],p=n,h=t.shape[0],m=Wv(t);null!=a&&(d=Wv(a));for(var v,y=function(t){var n=m[t],r=Ul((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var o=Ul((function(){var e=d[t],n=Sd(Am(e),e);return{output:ed(rd(r[0],e),rd(p[0],n)),newStates:p.map((function(t,a){return ed(rd(r[1][a],e),rd(t,n))}))}}));l=o.output,p=o.newStates}s&&f.push(l)},g=0;g<h;++g)y(g);if(s){v=Rv(f,1)}return[l,v,p]}))}uE.className="DepthwiseConv2D",yd(uE);var dE=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a;if(vr(this,n),r=t.call(this,e),null==e.cell)throw new Jx("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new bE({cells:e.cell}):e.cell).stateSize)throw new Jx("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Bk({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return br(n,[{key:"getStates",value:function(){return null==this.states_?Hw(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Rk(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,o=[],i=wr(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push([e[0],s])}}catch(sQ){i.e(sQ)}finally{i.f()}return[n].concat(o)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Ul((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new $x("Constants support is not implemented in RNN yet.");Rk(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Bk({shape:[t,null].concat((0,ee.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Fr(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new Jx("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new Bk({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ul((function(){if(!t.stateful)throw new Yx("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new Jx("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return km([r,e])})):t.states_=[km([r,t.cell.stateSize])];else if(null==e)Vl(t.states_),null!=t.keptStates&&(Vl(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return km([r,e])})):t.states_[0]=km([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Jx("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Vl(t.states_);for(var a=0;a<t.states_.length;++a){var o=e[a],i=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,i];if(!Fr(o.shape,s))throw new Jx("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[a]=o}}t.states_=t.states_.map((function(e){return Gl(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=cE(e,r,a,this.numConstants);e=o.inputs,r=o.initialState,a=o.constants;var i=[],s=[];if(null!=r){t.initialState=r,i=i.concat(r),this.stateSpec=[];var u,c=wr(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new Bk({shape:l.shape}))}}catch(sQ){c.e(sQ)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,i=i.concat(a),this.numConstants=a.length),i[0]instanceof Uk){var d=[e].concat(i),f=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=f;var h=WS(_u(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=p,h}return WS(_u(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,o=null==t?null:t.initialState;e=Mk(e),null==o&&(o=n.stateful?n.states_:n.getInitialState(e));var i=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(o.length!==i)throw new Jx("RNN Layer has ".concat(i," state(s) but was passed ")+"".concat(o.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=lE((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,o,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(d):f}))}},{key:"getInitialState",value:function(e){var t=this;return Ul((function(){var n=km(e.shape);return n=Xw(n=Fh(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?ek(n,[1,e]):n})):t.cell.stateSize>1?[ek(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){WS(_u(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=HS(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(Hk);dE.className="RNN",yd(dE);var fE=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n)}(Hk),pE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,gw(r.units,"units"),r.activation=NT(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jk(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jk(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jk(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=DT(e.kernelRegularizer),r.recurrentRegularizer=DT(e.recurrentRegularizer),r.biasRegularizer=DT(e.biasRegularizer),r.kernelConstraint=fS(e.kernelConstraint),r.recurrentConstraint=fS(e.recurrentConstraint),r.biasConstraint=fS(e.biasConstraint),r.dropout=Gw([1,Ww([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Gw([1,Ww([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return br(n,[{key:"build",value:function(e){e=Ok(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(2!==e.length)throw new Jx("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=xE({ones:function(){return Am(e)},rate:n.dropout,training:o,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=xE({ones:function(){return Am(r)},rate:n.recurrentDropout,training:o,dropoutFunc:n.dropoutFunc}));var i=n.dropoutMask,s=n.recurrentDropoutMask;a=nk(null!=i?rd(e,i):e,n.kernel.read()),null!=n.bias&&(a=ik(a,n.bias.read())),null!=s&&(r=rd(r,s));var u=ed(a,nk(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:CT(this.activation),useBias:this.useBias,kernelInitializer:Nk(this.kernelInitializer),recurrentInitializer:Nk(this.recurrentInitializer),biasInitializer:Nk(this.biasInitializer),kernelRegularizer:OT(this.kernelRegularizer),recurrentRegularizer:OT(this.recurrentRegularizer),biasRegularizer:OT(this.biasRegularizer),activityRegularizer:OT(this.activityRegularizer),kernelConstraint:lS(this.kernelConstraint),recurrentConstraint:lS(this.recurrentConstraint),biasConstraint:lS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(fE);pE.className="SimpleRNNCell",yd(pE);var hE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),e.cell=new pE(e),t.call(this,e)}return br(n,[{key:"call",value:function(e,t){var r=this;return Ul((function(){null!=r.cell.dropoutMask&&(Vl(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Vl(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return WS(_u(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(dE);hE.className="SimpleRNN",yd(hE);var mE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Jx("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,gw(r.units,"units"),r.activation=NT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=NT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jk(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jk(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jk(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=DT(e.kernelRegularizer),r.recurrentRegularizer=DT(e.recurrentRegularizer),r.biasRegularizer=DT(e.biasRegularizer),r.kernelConstraint=fS(e.kernelConstraint),r.recurrentConstraint=fS(e.recurrentConstraint),r.biasConstraint=fS(e.biasConstraint),r.dropout=Gw([1,Ww([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Gw([1,Ww([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return br(n,[{key:"build",value:function(e){var t=(e=Ok(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(2!==e.length)throw new Jx("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=xE({ones:function(){return Am(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=xE({ones:function(){return Am(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var o,i,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=rd(e,u[0]));var l=nk(e,n.kernel.read());n.useBias&&(l=ik(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=rd(a,c[0]));var d=n.recurrentKernel.read(),f=Cv(d,[2*n.units,n.units],d.rank-1),p=(0,X.Z)(f,2),h=p[0],m=p[1],v=nk(a,h),y=Cv(l,3,l.rank-1),g=(0,X.Z)(y,3),b=g[0],x=g[1],w=g[2],k=Cv(v,2,v.rank-1),S=(0,X.Z)(k,2),_=S[0],T=S[1];o=n.recurrentActivation.apply(ed(b,_)),i=n.recurrentActivation.apply(ed(x,T));var E=nk(rd(i,a),m);s=n.activation.apply(ed(w,E));var C=ed(rd(o,a),rd(ed(1,df(o)),s));return[C,C]}))}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:CT(this.activation),recurrentActivation:CT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nk(this.kernelInitializer),recurrentInitializer:Nk(this.recurrentInitializer),biasInitializer:Nk(this.biasInitializer),kernelRegularizer:OT(this.kernelRegularizer),recurrentRegularizer:OT(this.recurrentRegularizer),biasRegularizer:OT(this.biasRegularizer),activityRegularizer:OT(this.activityRegularizer),kernelConstraint:lS(this.kernelConstraint),recurrentConstraint:lS(this.recurrentConstraint),biasConstraint:lS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(fE);mE.className="GRUCell",yd(mE);var vE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new mE(e),t.call(this,e)}return br(n,[{key:"call",value:function(e,t){var r=this;return Ul((function(){null!=r.cell.dropoutMask&&(Vl(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Vl(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return WS(_u(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(dE);vE.className="GRU",yd(vE);var yE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,gw(r.units,"units"),r.activation=NT(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=NT(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=jk(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=jk(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=jk(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=DT(e.kernelRegularizer),r.recurrentRegularizer=DT(e.recurrentRegularizer),r.biasRegularizer=DT(e.biasRegularizer),r.kernelConstraint=fS(e.kernelConstraint),r.recurrentConstraint=fS(e.recurrentConstraint),r.biasConstraint=fS(e.biasConstraint),r.dropout=Gw([1,Ww([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Gw([1,Ww([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return br(n,[{key:"build",value:function(e){var t,n,r=(e=Ok(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,o=this.units;n=new(t=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e,t){var n=a.apply([o]),r=(new pk).apply([o]),i=a.apply([2*o]);return $w($w(n,r),i)}}]),n}(dk),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new Jx("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],o=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=xE({ones:function(){return Am(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=xE({ones:function(){return Am(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var i,s,u,c,l=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=rd(e,l[0]));var f=nk(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=rd(a,d[0])),f=ed(f,nk(a,n.recurrentKernel.read())),n.useBias&&(f=ik(f,n.bias.read()));var p=Cv(f,4,f.rank-1),h=(0,X.Z)(p,4),m=h[0],v=h[1],y=h[2],g=h[3];i=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(v),u=ed(rd(s,o),rd(i,n.activation.apply(y))),c=n.recurrentActivation.apply(g);var b=rd(c,n.activation.apply(u));return[b,b,u]}))}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:CT(this.activation),recurrentActivation:CT(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Nk(this.kernelInitializer),recurrentInitializer:Nk(this.recurrentInitializer),biasInitializer:Nk(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:OT(this.kernelRegularizer),recurrentRegularizer:OT(this.recurrentRegularizer),biasRegularizer:OT(this.biasRegularizer),activityRegularizer:OT(this.activityRegularizer),kernelConstraint:lS(this.kernelConstraint),recurrentConstraint:lS(this.recurrentConstraint),biasConstraint:lS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(fE);yE.className="LSTMCell",yd(yE);var gE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new yE(e),t.call(this,e)}return br(n,[{key:"call",value:function(e,t){var r=this;return Ul((function(){null!=r.cell.dropoutMask&&(Vl(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Vl(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return WS(_u(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(dE);gE.className="LSTM",yd(gE);var bE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).cells=e.cells,r}return br(n,[{key:"stateSize",get:function(){var e,t=[],n=wr(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,ee.Z)(r.stateSize)):t.push(r.stateSize)}}catch(sQ){n.e(sQ)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r,a=e.slice(1),o=[],i=wr(n.cells.slice().reverse());try{for(i.s();!(r=i.n()).done;){var s=r.value;Array.isArray(s.stateSize)?o.push(a.splice(0,s.stateSize.length)):o.push(a.splice(0,1))}}catch(sQ){i.e(sQ)}finally{i.f()}o.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var d=n.cells[l];a=o[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),c.push(u.slice(1))}a=[];var f,p=wr(c.slice().reverse());try{for(p.s();!(f=p.n()).done;){var h,m=f.value;(h=a).push.apply(h,(0,ee.Z)(m))}}catch(sQ){p.e(sQ)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;Rk(e)&&(e=e[0]),this.cells.forEach((function(n,r){Dw("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=wr(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,ee.Z)(r.trainableWeights))}}catch(sQ){n.e(sQ)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=wr(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,ee.Z)(r.nonTrainableWeights))}}catch(sQ){n.e(sQ)}finally{n.f()}if(!this.trainable){var a,o=[],i=wr(this.cells);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push.apply(o,(0,ee.Z)(s.trainableWeights))}}catch(sQ){i.e(sQ)}finally{i.f()}return o.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=wr(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,ee.Z)(r.weights))}}catch(sQ){n.e(sQ)}finally{n.f()}return Fk(t)}},{key:"setWeights",value:function(e){var t,n=[],r=wr(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,o=a.weights.length,i=e.splice(o),s=0;s<a.weights.length;++s)n.push([a.weights[s],i[s]])}catch(sQ){r.e(sQ)}finally{r.f()}zk(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=wr(t.cells);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push(HS(i,r))}}catch(sQ){o.e(sQ)}finally{o.f()}return new e({cells:a})}}]),n}(fE);function xE(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,o=e.count,i=void 0===o?1:o,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):sk(t(),n)},c=function(){return uk(u,t,a)};return!i||i<=1?Gl(c().clone()):Array(i).fill(void 0).map(c).map((function(e){return Gl(e.clone())}))}bE.className="StackedRNNCells",yd(bE);var wE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},kE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),e.unroll)throw new $x("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new $x("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Bk({ndim:5})],r}return br(n,[{key:"call",value:function(e,t){var r=this;return Ul((function(){if(null!=r.cell.dropoutMask&&(Vl(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Vl(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new Jx("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;return WS(_u(n.prototype),"call",r).call(r,e,{mask:a,training:o,initialState:i})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,ee.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,ee.Z)(Array(2).fill([e[0]].concat((0,ee.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Ul((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),o=km([a[0]].concat((0,ee.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(o):[o]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ul((function(){if(!t.stateful)throw new Yx("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),o=[a[0]].concat((0,ee.Z)(a.slice(2)));if(null==r[0])throw new Jx("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return km(o)})):t.states_=[km(o)];else if(null==e)Vl(t.states_),null!=t.keptStates&&(Vl(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return km(o)})):t.states_[0]=km(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Jx("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Vl(t.states_);for(var i=0;i<t.states_.length;++i){var s=e[i],u=o;if(!Fr(s.shape,u))throw new Jx("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[i]=s}}t.states_=t.states_.map((function(e){return Gl(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,o=t.padding,i=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],d=WT(c,a[0],o,i[0],s[0]),f=WT(l,a[1],o,i[1],s[1]);return[].concat((0,ee.Z)(e.slice(0,2)),(0,ee.Z)(u?[r,d,f]:[d,f,r]))}}]),n}(dE);kE.className="ConvRNN2D";var SE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;vr(this,n);var a=e.filters,o=e.kernelSize,i=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,gw(r.filters,"filters"),r.kernelSize=GT(o,2,"kernelSize"),r.kernelSize.forEach((function(e){return gw(e,"kernelSize")})),r.strides=GT(i||1,2,"strides"),r.strides.forEach((function(e){return gw(e,"strides")})),r.padding=s||"valid",Aw(r.padding),r.dataFormat=u||"channelsLast",Rw(r.dataFormat),r.dilationRate=GT(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return gw(e,"dilationRate")})),r}return br(n,[{key:"build",value:function(e){var t;e=Ok(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Jx("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var i;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;i=new(t=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"apply",value:function(e,t){return Jw([s.apply([u]),Sm([u]),s.apply([2*u])])}}]),n}(dk),t.className="CustomInit",t)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,i,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(3!==e.length)throw new Jx("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],o=e[1],i=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=xE({ones:function(){return Am(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?rd(t[n],e):e},c=u(a,s,0),l=u(a,s,1),d=u(a,s,2),f=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=xE({ones:function(){return Am(o)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,h=u(o,p,0),m=u(o,p,1),v=u(o,p,2),y=u(o,p,3),g=Cv(n.kernel.read(),4,3),b=(0,X.Z)(g,4),x=b[0],w=b[1],k=b[2],S=b[3],_=n.useBias?Cv(n.bias.read(),4):[null,null,null,null],T=(0,X.Z)(_,4),E=T[0],C=T[1],I=T[2],N=T[3];c=n.inputConv(c,x,E,n.padding),l=n.inputConv(l,w,C,n.padding),d=n.inputConv(d,k,I,n.padding),f=n.inputConv(f,S,N,n.padding);var j=Cv(n.recurrentKernel.read(),4,3),R=(0,X.Z)(j,4),A=R[0],M=R[1],O=R[2],L=R[3];h=n.recurrentConv(h,A),m=n.recurrentConv(m,M),v=n.recurrentConv(v,O),y=n.recurrentConv(y,L);var D=n.recurrentActivation.apply(ed(c,h)),P=n.recurrentActivation.apply(ed(l,m)),F=ed(rd(P,i),rd(D,n.activation.apply(ed(d,v)))),z=rd(n.recurrentActivation.apply(ed(f,y)),n.activation.apply(F));return[z,z,F]}))}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t=(e.units,wE(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=oh(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?ik(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return oh(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(yE);SE.className="ConvLSTM2DCell",yd(SE);var _E=function(e){Su(n,e);var t=Eu(n);function n(e){vr(this,n);var r=new SE(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return br(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(kE);_E.className="ConvLSTM2D",yd(_E);var TE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return br(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,o=n.getNoiseShape(r);return uk((function(){return sk(r,n.rate,o,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return WS(_u(n.prototype),"dispose",this).call(this)}}]),n}(Hk);TE.className="Dropout",yd(TE);var EE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return br(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(TE);EE.className="SpatialDropout1D",yd(EE);var CE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,gw(r.units,"units"),r.activation=NT(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=jk(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=jk(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=fS(e.kernelConstraint),r.biasConstraint=fS(e.biasConstraint),r.kernelRegularizer=DT(e.kernelRegularizer),r.biasRegularizer=DT(e.biasRegularizer),r.activityRegularizer=DT(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return br(n,[{key:"build",value:function(e){var t=(e=Ok(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,Pe.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Ok(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r,a=Mk(e),o=xw(n.activation.getClassName());return null!=o?r=nk(a,n.kernel.read(),o,n.bias?n.bias.read():null):(r=nk(a,n.kernel.read()),null!=n.bias&&(r=ik(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:CT(this.activation),useBias:this.useBias,kernelInitializer:Nk(this.kernelInitializer),biasInitializer:Nk(this.biasInitializer),kernelRegularizer:OT(this.kernelRegularizer),biasRegularizer:OT(this.biasRegularizer),activityRegularizer:OT(this.activityRegularizer),kernelConstraint:lS(this.kernelConstraint),biasConstraint:lS(this.biasConstraint)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);CE.className="Dense",yd(CE);var IE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return br(n,[{key:"computeOutputShape",value:function(e){var t,n=wr((e=Ok(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new Jx('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(sQ){n.e(sQ)}finally{n.f()}return[e[0],Vw(e,1)]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],o=2;o<r.rank;++o)a.push(o);a.push(1),r=pf(r,a)}return function(e){if(e.rank<=1)throw new Jx("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],Vw(e.shape,1)];return Pp(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);IE.className="Flatten",yd(IE);var NE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=NT(e.activation),r}return br(n,[{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:CT(this.activation)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);NE.className="Activation",yd(NE);var jE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return br(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return e=Mk(e),t=e,r=n.n,Ul((function(){if(2!==t.shape.length)throw new Jx("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return ek(Xw(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);jE.className="RepeatVector",yd(jE);var RE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;vr(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return br(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var s=r[i];if(this.isUnknown(s)){if(null!==o)throw new Jx("Can only specifiy one unknown dimension.");o=i}else a*=s}var u=Vw(e);if(null!==o){if(0===a||u%a!==0)throw new Jx(n);r[o]=u/a}else if(u!==a)throw new Jx(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Pp(r,o)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);RE.className="Reshape",yd(RE);var AE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=Hw(1,e.dims.length+1);if(!Fr(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Bk({ndim:r.dims.length+1})],r}return br(n,[{key:"computeOutputShape",value:function(e){var t=(e=Ok(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return pf(Mk(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);AE.className="Permute",yd(AE);var ME=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return br(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Mk(e);return hp(Rm(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e),a=hp(Rm(r,n.maskValue),-1,!0);return rd(r,jl(a,r.dtype))}))}}]),n}(Hk);ME.className="Masking",yd(ME);var OE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(iw(e.inputLength))}return r.inputDim=e.inputDim,gw(r.inputDim,"inputDim"),r.outputDim=e.outputDim,gw(r.outputDim,"outputDim"),r.embeddingsInitializer=jk(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=DT(e.embeddingsRegularizer),r.activityRegularizer=DT(e.activityRegularizer),r.embeddingsConstraint=fS(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return br(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Ul((function(){return n.maskZero?(e=Mk(e),Rm(e,id(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Ok(e),null==this.inputLength)return[].concat((0,ee.Z)(e),[this.outputDim]);var t=iw(this.inputLength);if(t.length!==e.length-1)throw new Jx('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new Jx('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=o),n++}return[e[0]].concat((0,ee.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);"int32"!==r.dtype&&(r=qw(r,"int32"));var a=rk(n.embeddings.read(),Pp(r,[r.size]));return Pp(a,Ok(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Nk(this.embeddingsInitializer),embeddingsRegularizer:OT(this.embeddingsRegularizer),activityRegularizer:OT(this.activityRegularizer),embeddingsConstraint:lS(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);OE.className="Embedding",yd(OE);var LE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return br(n,[{key:"mergeFunction",value:function(e){throw new $x}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new Jx("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ok(e)]),e.length<2)throw new Jx("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=wr(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(sQ){r.e(sQ)}finally{r.f()}if((n=hw(n)).length>1)throw new Jx("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var s=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===hw(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,o=Ww(r),i=wr(e);try{for(i.s();!(a=i.n()).done;){for(var s=a.value,u=s.rank,c=0;c<o-u;++c)s=Xw(s,1);t.push(s)}}catch(sQ){i.e(sQ)}finally{i.f()}return n.mergeFunction(t)}var l,d=!1,f=wr(e);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=p.rank;if(null==h){var m=p.shape,v=m[0],y=m.slice(1).concat([v]),g=Pp(p,[v].concat(Vw(m.slice(1))));g=pf(g,[1,0]),g=Pp(g,y),t.push(g),d=!0}else if(h>1){var b=Hw(1,h).concat([0]);t.push(pf(p,b)),d=!0}else t.push(p)}}catch(sQ){f.e(sQ)}finally{f.f()}var x=n.mergeFunction(t),w=x.rank;if(d)if(null==w){var k=x.shape,S=k[k.length-1],_=[S].concat(k.slice(0,k.length-1));x=Pp(pf(Pp(x,[-1,S]),[1,0]),_)}else if(w>1){var T=[w-1].concat(Hw(0,w-1));x=pf(x,T)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,o=[],i=wr(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;null!=s&&null!==s[0]&&o.push(s[0])}}catch(sQ){i.e(sQ)}finally{i.f()}return t=1===(o=hw(o)).length?o.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Ul((function(){if(null==t)return null;if(!Array.isArray(t))throw new Jx("`mask` should be an Array");if(!Array.isArray(e))throw new Jx("`inputs` should be an Array");if(t.length!==e.length)throw new Jx("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Gh(e,0)})))[0],r=1;r<t.length-1;++r)n=dm(n,t[r]);return n}))}}]),n}(Hk),DE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"mergeFunction",value:function(e){return Ul((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=ed(t,e[n]);return t}))}}]),n}(LE);DE.className="Add",yd(DE);var PE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"mergeFunction",value:function(e){return Ul((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=rd(t,e[n]);return t}))}}]),n}(LE);PE.className="Multiply",yd(PE);var FE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"mergeFunction",value:function(e){return Ul((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=ed(t,e[n]);return rd(1/e.length,t)}))}}]),n}(LE);FE.className="Average",yd(FE);var zE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"mergeFunction",value:function(e){return Ul((function(){for(var t=e[0],n=1;n<e.length;++n)t=Nd(t,e[n]);return t}))}}]),n}(LE);zE.className="Maximum",yd(zE);var BE=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"mergeFunction",value:function(e){return Ul((function(){for(var t=e[0],n=1;n<e.length;++n)t=Tm(t,e[n]);return t}))}}]),n}(LE);BE.className="Minimum",yd(BE);var UE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return br(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Jx("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=wr(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(sQ){r.e(sQ)}finally{r.f()}if(!n){for(var a=[],o=0;o<e.length;++o){var i=e[o].slice();i.splice(this.axis,1);var s,u=!1,c=wr(a);try{for(c.s();!(s=c.n()).done;){if(Fr(s.value,i)){u=!0;break}}}catch(sQ){c.e(sQ)}finally{c.f()}u||a.push(i)}if(a.length>1)throw new Jx("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Ul((function(){return Jw(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Jx("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,o=wr(n.slice(1));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(null==r[a]||null==i[a]){r[a]=null;break}r[a]+=i[a]}}catch(sQ){o.e(sQ)}finally{o.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new Jx("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Jx("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Jx("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Ul((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(jl(Am(e[o]),"bool")):t[o].rank<e[o].rank?a.push(Gh(t[o],-1)):a.push(t[o]);var i=Bp(a,n.axis);return pp(i,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(LE);function VE(e,t){for(;e<0;)e+=t;return e}UE.className="Concatenate",yd(UE);var GE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return br(n,[{key:"build",value:function(e){Mr(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new $x("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Jx("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new Jx("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return VE(t,e[n].shape.length)})):[VE(this.axes,n.shape.length),VE(this.axes,r.shape.length)],this.normalize&&(n=ZS(n,t[0]),r=ZS(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new $x("batchDot is not implemented for tensors of 4D or higher rank yet");if(Mr(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),Mr(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new $x("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var o=n;return Ul((function(){var n,i;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Pp(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=Pp(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)i=o[0]===o[1]?Fh(rd(e,t),o[0]):Fh(rd(pf(e,[1,0]),t),o[1]);else{var d=o[0]!==e.shape.length-1,f=o[1]===t.shape.length-1;i=uf(e,t,d,f)}if(n>0){for(var p,h=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)h.push(m);i=jv(i,h)}return 1===i.shape.length&&(i=Gh(i,1)),i}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[VE(this.axes,e.length),VE(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){Mr(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new $x("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(LE);GE.className="Dot",yd(GE);var WE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return br(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);return uk((function(){return ed(tk(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(Hk);WE.className="GaussianNoise",yd(WE);var HE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return br(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t);var r=Mk(e);if(n.rate>0&&n.rate<1){return uk((function(){var e=Math.sqrt(n.rate/(1-n.rate));return rd(r,tk(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(Hk);HE.className="GaussianDropout",yd(HE);var ZE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return br(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Mk(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=WS(_u(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Ul((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return uk((function(){var t=Mk(e),a=-1.7580993408473766,o=Yh(ev(r),n.rate);o=qw(o,"float32");var i=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-i*a*n.rate,u=ed(rd(t,o),rd(ed(o,-1),a));return ed(rd(u,i),s)}),(function(){return Mk(e)}),t.training||!1)}return e}))}}]),n}(Hk);function qE(e,t,n,r,a){var o,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=qp(e,t,n,r,a,i);else if(3===e.rank)o=Xp(e,t,n,r,a,i);else{if(4!==e.rank)throw new $x("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=Kp(e,t,n,r,a,i)}return o}function XE(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Fr(r.slice().sort(),Hw(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Ul((function(){var o=Im(e,r),i=o.mean,s=o.variance;return[qE(e,i,s,n,t,a),i,s]}))}(e,t,n,r,a):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Ul((function(){var o,i=Im(e,r),s=i.mean,u=i.variance,c=[],l=wr(Hw(0,e.rank));try{for(l.s();!(o=l.n()).done;){var d=o.value;-1!==r.indexOf(d)?c.push(1):c.push(e.shape[d])}}catch(sQ){l.e(sQ)}finally{l.f()}var f=Pp(s,c),p=Pp(u,c),h=null==t?null:Pp(t,c),m=null==n?null:Pp(n,c);return[qE(e,f,p,m,h,a),s,u]}))}(e,t,n,r,a)}ZE.className="AlphaDropout",yd(ZE);var KE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=jk(e.betaInitializer||"zeros"),r.gammaInitializer=jk(e.gammaInitializer||"ones"),r.movingMeanInitializer=jk(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=jk(e.movingVarianceInitializer||"ones"),r.betaConstraint=fS(e.betaConstraint),r.gammaConstraint=fS(e.gammaConstraint),r.betaRegularizer=DT(e.betaRegularizer),r.gammaRegularizer=DT(e.gammaRegularizer),r}return br(n,[{key:"build",value:function(e){e=Ok(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Jx("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Bk({ndim:e.length,axes:(0,Pe.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r=null!=t.training&&t.training,a=Mk(e),o=a.shape,i=o.length,s=Hw(0,i),u=n.axis>=0?n.axis:n.axis+i;s.splice(u,1);var c=nw(1,i);c[u]=o[u];var l=s.slice();l.sort();var d=!Fr(l,Hw(0,i).slice(0,i-1));if(!r)return function(){if(d){var e=Pp(n.movingMean.read(),c),t=Pp(n.movingVariance.read(),c),r=n.center?Pp(n.beta.read(),c):null,o=n.scale?Pp(n.gamma.read(),c):null;return qE(a,e,t,r,o,n.epsilon)}return qE(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=XE(a,n.gamma.read(),n.beta.read(),s,n.epsilon),p=(0,X.Z)(f,3),h=p[0],m=p[1],v=p[2],y=function(e,t,n){Ul((function(){var r=1-n,a=e.read(),o=rd(Sd(a,t),r);e.write(Sd(a,o))}))};return y(n.movingMean,m,n.momentum),y(n.movingVariance,v,n.momentum),h}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nk(this.betaInitializer),gammaInitializer:Nk(this.gammaInitializer),movingMeanInitializer:Nk(this.movingMeanInitializer),movingVarianceInitializer:Nk(this.movingVarianceInitializer),betaRegularizer:OT(this.betaRegularizer),gammaRegularizer:OT(this.gammaRegularizer),betaConstraint:lS(this.betaConstraint),gammaConstraint:lS(this.gammaConstraint)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);KE.className="BatchNormalization",yd(KE);var YE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,o=wr(r.axis);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(sQ){o.e(sQ)}finally{o.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=jk(e.betaInitializer||"zeros"),r.gammaInitializer=jk(e.gammaInitializer||"ones"),r.betaRegularizer=DT(e.betaRegularizer),r.gammaRegularizer=DT(e.gammaRegularizer),r.supportsMasking=!0,r}return br(n,[{key:"build",value:function(e){var t=(e=Ok(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=wr(this.axis);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o<0||o>=t)throw new Error("Invalid axis: ".concat(o))}}catch(sQ){a.e(sQ)}finally{a.f()}if(this.axis.length!==hw(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var i=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",i,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",i,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Mk(e),a=r.shape,o=a.length;return Ul((function(){var e,t=Im(r,n.axis,!0),i=t.mean,s=t.variance,u=nw(1,o),c=wr(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(sQ){c.e(sQ)}finally{c.f()}for(var d=function(e){return null!=e&&e.shape.length!==o?Pp(e,u):e},f=n.scale?d(n.gamma.read()):null,p=n.center?d(n.beta.read()):null,h=[],m=[],v=0;v<o;++v)-1!==n.axis.indexOf(v)?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return i=Hh(i,h),s=Hh(s,h),null!=f&&(f=Hh(f,m)),null!=p&&(p=Hh(p,m)),qE(r,i,s,p,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Nk(this.betaInitializer),gammaInitializer:Nk(this.gammaInitializer),betaRegularizer:OT(this.betaRegularizer),gammaRegularizer:OT(this.gammaRegularizer)},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);YE.className="LayerNormalization",yd(YE);var QE=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Jx("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,o;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Jx("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new Jx("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));o=e.padding[1]}r.padding=[a,o]}return r.inputSpec=[new Bk({ndim:4})],r}return br(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Ok(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return t=Mk(e),r=n.padding,a=n.dataFormat,Ul((function(){if(4!==t.rank)throw new Jx("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new Jx("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new Jx("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],Om(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk);function JE(e,t,n,r,a,o){return Ul((function(){var i;Rw(a),Mw(o),Aw(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=ZT(e,a);var s="same"===r?"same":"valid";return i="max"===o?gm(e,t,n,s):Fp(e,t,n,s),"channelsFirst"===a&&(i=pf(i,[0,3,1,2])),i}))}function $E(e,t,n,r,a,o){return Ul((function(){var i;Rw(a),Mw(o),Aw(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=qT(e,a);var s="same"===r?"same":"valid";return i="max"===o?bm(e,t,n,s):zp(e,t,n,s),"channelsFirst"===a&&(i=pf(i,[0,4,1,2,3])),i}))}QE.className="ZeroPadding2D",yd(QE);var eC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Jx("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(gw(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Jx("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return gw(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Aw(r.padding),r.inputSpec=[new Bk({ndim:3})],r}return br(n,[{key:"computeOutputShape",value:function(e){var t=WT((e=Ok(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){n.invokeCallHook(e,t),e=Xw(Mk(e),2);var r=n.poolingFunction(Mk(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return jv(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk),tC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),JE(e,t,n,r,a,"max")}}]),n}(eC);tC.className="MaxPooling1D",yd(tC);var nC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),JE(e,t,n,r,a,"avg")}}]),n}(eC);nC.className="AveragePooling1D",yd(nC);var rC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Jx("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return gw(r.poolSize,"poolSize"),gw(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rw(r.dataFormat),Aw(r.padding),r.inputSpec=[new Bk({ndim:4})],r}return br(n,[{key:"computeOutputShape",value:function(e){e=Ok(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=WT(t,this.poolSize[0],this.padding,this.strides[0]),n=WT(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return n.invokeCallHook(e,t),n.poolingFunction(Mk(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk),aC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),JE(e,t,n,r,a,"max")}}]),n}(rC);aC.className="MaxPooling2D",yd(aC);var oC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),JE(e,t,n,r,a,"avg")}}]),n}(rC);oC.className="AveragePooling2D",yd(oC);var iC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Jx("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return gw(r.poolSize,"poolSize"),gw(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rw(r.dataFormat),Aw(r.padding),r.inputSpec=[new Bk({ndim:5})],r}return br(n,[{key:"computeOutputShape",value:function(e){e=Ok(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=WT(t,this.poolSize[0],this.padding,this.strides[0]),n=WT(n,this.poolSize[1],this.padding,this.strides[1]),r=WT(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return n.invokeCallHook(e,t),n.poolingFunction(Mk(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk),sC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),$E(e,t,n,r,a,"max")}}]),n}(iC);sC.className="MaxPooling3D",yd(sC);var uC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e)}return br(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Rw(a),Aw(r),$E(e,t,n,r,a,"avg")}}]),n}(iC);uC.className="AveragePooling3D",yd(uC);var cC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).inputSpec=[new Bk({ndim:3})],r}return br(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new $x}}]),n}(Hk),lC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e||{})}return br(n,[{key:"call",value:function(e,t){return Ul((function(){var t=Mk(e);return wm(t,1)}))}}]),n}(cC);lC.className="GlobalAveragePooling1D",yd(lC);var dC=function(e){Su(n,e);var t=Eu(n);function n(e){return vr(this,n),t.call(this,e||{})}return br(n,[{key:"call",value:function(e,t){return Ul((function(){var t=Mk(e);return Dh(t,1)}))}}]),n}(cC);dC.className="GlobalMaxPooling1D",yd(dC);var fC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rw(r.dataFormat),r.inputSpec=[new Bk({ndim:4})],r}return br(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new $x}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Hk),pC=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e);return"channelsLast"===n.dataFormat?wm(t,[1,2]):wm(t,[2,3])}))}}]),n}(fC);pC.className="GlobalAveragePooling2D",yd(pC);var hC=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e);return"channelsLast"===n.dataFormat?Dh(t,[1,2]):Dh(t,[2,3])}))}}]),n}(fC);hC.className="GlobalMaxPooling2D",yd(hC);var mC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).layer=e.layer,r}return br(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){WS(_u(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=HS(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(Hk),vC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return br(n,[{key:"build",value:function(e){if((e=Ok(e)).length<3)throw new Jx("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),WS(_u(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Ok(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return lE((function(e,r){return[Mk(n.layer.call(e,t)),[]]}),e=Mk(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(mC);vC.className="TimeDistributed",yd(vC);var yC="concat",gC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;vr(this,n),r=t.call(this,e);var a=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=a,r.forwardLayer=HS(o),a.goBackwards=!0!==a.goBackwards;var i,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=HS(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?yC:e.mergeMode,i=r.mergeMode,vw(Nw,"BidirectionalMergeMode",i),e.weights)throw new $x("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return br(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):ow(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var o=cE(e,r,a,this.numConstants);if(e=o.inputs,r=o.initialState,a=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return WS(_u(n.prototype),"apply",this).call(this,e,t);var i=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new Jx("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push.apply(i,(0,ee.Z)(r));var c=r.map((function(e){return new Bk({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,(0,ee.Z)(c))}if(null!=a)throw new $x("Support for constants in Bidirectional layers is not implemented yet.");for(var l=i[0]instanceof Uk,d=0,f=i;d<f.length;d++){if(f[d]instanceof Uk!==l)throw new Jx("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(i),h=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=h;var v=WS(_u(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,v}return WS(_u(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r,a,o,i,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=ov(a,1)),"concat"===n.mergeMode?i=Jw([r,a]):"sum"===n.mergeMode?i=ed(r,a):"ave"===n.mergeMode?i=rd(.5,ed(r,a)):"mul"===n.mergeMode?i=rd(r,a):null==n.mergeMode&&(i=[r,a]),n.returnState?null==n.mergeMode?i.concat(o):[i].concat(o):i}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Dw(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Dw(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){WS(_u(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=HS(t.layer);if(delete t.layer,null!=t.numConstants)throw new $x("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(mC);gC.className="Bidirectional",yd(gC);var bC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return br(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return Ul((function(){return"float32"!==(e=Mk(e)).dtype&&(e=qw(e,"float32")),ed(rd(e,n.scale),n.offset)}))}}]),n}(Hk);bC.className="Rescaling",yd(bC);var xC=gg.resizeBilinear,wC=gg.cropAndResize,kC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return br(n,[{key:"centerCrop",value:function(e,t,n,r,a,o,i,s){return Ul((function(){var u,c=!1,l=[t/o,n/i,(r+t)/o,(a+n)/i],d=[];3===e.rank?(c=!0,u=Rv([e])):u=e;for(var f=0;f<u.shape[0];f++)d.push(l);var p=xc(d,[d.length,4]),h=tv(0,d.length,1,"int32"),m=wC(u,p,h,[r,a],"nearest");return qw(c?Mk(Wv(m)):m,s)}))}},{key:"upsize",value:function(e,t,n,r){return Ul((function(){return qw(xC(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=Mk(e),r=t.dtype,a=t.shape,o=a[a.length-3],i=a[a.length-2],s=0;o!==n.height&&(s=Math.floor((o-n.height)/2));var u=0;return i!==n.width&&0===(u=Math.floor((i-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(t,s,u,n.height,n.width,o,i,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=Ok(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(Hk);kC.className="CenterCrop",yd(kC);var SC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return br(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=Ok(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var r;if("int32"!==(e=Mk(e)).dtype&&(e=qw(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new Jx("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=Mk(t.countWeights)}var a=Dh(e),o=Ph(e),i=Kh(n.numTokens,a).bufferSync().get(0),s=Yh(o,0).bufferSync().get(0);if(!i||!s)throw new Jx("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=Mk(e);if("int32"!==a.dtype&&(a=qw(a,"int32")),"int"===t)return a;var o=a.shape;if(0===a.rank&&(a=Gh(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Gh(a,-1)),a.rank>2)throw new Jx("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(o)+" which would result in output rank ".concat(a.rank,"."));var i,s=["multiHot","oneHot"].includes(t),u=a;if(i=vh(u,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return i;if(r)return rd(i,r);throw new Jx("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(Hk);SC.className="CategoryEncoding",yd(SC);var _C=new Set(["bilinear","nearest"]),TC=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!_C.has(e.interpolation))throw new Jx("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return br(n,[{key:"computeOutputShape",value:function(e){var t=(e=Ok(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=WS(_u(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return Ul((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return gg.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return gg.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,ee.Z)(_C)," are supported"))}))}}]),n}(Hk);function EC(e){return new qk(e)}function CC(e){return new BT(e)}function IC(e){return new PT(e)}function NC(e){return new FT(e)}function jC(e){return new zT(e)}function RC(e){return new VT(e)}function AC(e){return new UT(e)}function MC(e){return new oE(e)}function OC(e){return new $T(e)}function LC(e){return new tE(e)}function DC(e){return new eE(e)}function PC(e){return new nE(e)}function FC(e){return new aE(e)}function zC(e){return new iE(e)}function BC(e){return new sE(e)}function UC(e){return new uE(e)}function VC(e){return new NE(e)}function GC(e){return new CE(e)}function WC(e){return new TE(e)}function HC(e){return new EE(e)}function ZC(e){return new IE(e)}function qC(e){return new jE(e)}function XC(e){return new RE(e)}function KC(e){return new AE(e)}function YC(e){return new OE(e)}function QC(e){return new DE(e)}function JC(e){return new FE(e)}function $C(e){return new UE(e)}function eI(e){return new zE(e)}function tI(e){return new BE(e)}function nI(e){return new PE(e)}function rI(e){return new GE(e)}function aI(e){return new KE(e)}function oI(e){return new YE(e)}function iI(e){return new QE(e)}function sI(e){return new nC(e)}function uI(e){return sI(e)}function cI(e){return sI(e)}function lI(e){return new oC(e)}function dI(e){return lI(e)}function fI(e){return lI(e)}function pI(e){return new uC(e)}function hI(e){return pI(e)}function mI(e){return pI(e)}function vI(e){return new lC(e)}function yI(e){return new pC(e)}function gI(e){return new dC(e)}function bI(e){return new hC(e)}function xI(e){return new tC(e)}function wI(e){return new aC(e)}function kI(e){return new sC(e)}function SI(e){return new vE(e)}function _I(e){return new mE(e)}function TI(e){return new gE(e)}function EI(e){return new yE(e)}function CI(e){return new hE(e)}function II(e){return new pE(e)}function NI(e){return new _E(e)}function jI(e){return new SE(e)}function RI(e){return new dE(e)}function AI(e){return new bE(e)}function MI(e){return new gC(e)}function OI(e){return new vC(e)}TC.className="Resizing",yd(TC);var LI=gI,DI=bI,PI=xI,FI=wI;function zI(e){return new WE(e)}function BI(e){return new HE(e)}function UI(e){return new ZE(e)}function VI(e){return new ME(e)}function GI(e){return new bC(e)}function WI(e){return new kC(e)}function HI(e){return new TC(e)}function ZI(e){return new SC(e)}function qI(e,t){return a_(e,t)}function XI(e,t){return c_(e,t)}function KI(e,t){return l_(e,t)}function YI(e,t){return o_(e,t)}function QI(e,t){return d_(e,t)}function JI(e,t){return s_(e,t)}function $I(e,t){return u_(e,t)}function eN(e,t){return t_(e,t)}function tN(e,t){return XS(e,t)}function nN(e,t){return KS(e,t)}function rN(e,t){return KS(e,t)}function aN(e,t){return KS(e,t)}function oN(e,t){return qS(e,t)}function iN(e,t){return qS(e,t)}function sN(e,t){return qS(e,t)}function uN(e){return new AT(e)}function cN(e){return jT(t=e),new AT({l1:null!=t?t.l1:null,l2:0});var t}function lN(e){return jT(t=e),new AT({l2:null!=t?t.l2:null,l1:0});var t}var dN=function(e){Su(n,e);var t=Eu(n);function n(){var e;return vr(this,n),(e=t.apply(this,arguments)).model=null,e}return br(n,[{key:"setModel",value:function(e){if(!(e instanceof J_))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(DS);function fN(e,t){return e<t}function pN(e,t){return e>t}var hN=function(e){Su(n,e);var t=Eu(n);function n(e){var r;if(vr(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new $x("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. ")+"Falling back to mode 'auto'."),r.mode="auto"),"min"===r.mode?r.monitorFunc=fN:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=pN:r.monitorFunc=fN,r.monitorFunc===fN&&(r.minDelta*=-1),r}return br(n,[{key:"onTrainBegin",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===fN?1/0:-1/0;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AS(n);case 2:if(null!=(r=this.getMonitorValue(n))){e.next=5;break}return e.abrupt("return");case 5:this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. ")+"Available metrics are: ".concat(Object.keys(e))),t}}]),n}(dN);var mN,vN,yN={earlyStopping:function(e){return new hN(e)}};wa().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(mN||(mN={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(vN||(vN={}));var gN={};function bN(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};gN[e]=n}function xN(e){return gN[e]}function wN(e){delete gN[e]}function kN(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return SN(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return SN(e,n,r,a)}));var u=SN(t.inputNames.slice(i)[0],n,r,a),c=u.dataSync();return"number"===o.type?c[0]:ca(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function SN(e,t,n,r){var a=EN(e),o=(0,X.Z)(a,2),i=o[0],s=o[1];if(null!=r){var u=r.getHashTableHandleByName(i);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[TN(i,e)]}));return void 0!==c?t[TN(i,c)][s]:void 0}function _N(e,t){var n=EN(e),r=(0,X.Z)(n,3),a=r[0],o=r[1],i=r[2];return[TN(a,t&&t.currentContextId),o,i]}function TN(e,t){return t?"".concat(e,"-").concat(t):e}function EN(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function CN(e,t,n){var r=kN("pad",e,t,n);if("explicit"===r){r=kN("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function IN(e){return e.kept?e:Rl(e)}var NN=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],jN=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],RN=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],AN=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],MN=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],ON=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],LN=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],DN=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],PN=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],FN=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],zN=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],BN=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],UN=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],VN=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],GN=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],WN=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],HN=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],ZN=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],qN=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],XN=function(){function e(){var t;vr(this,e);var n=[_,T,E,C,I,N,j,R,A,M,O,L,D,P,F,z,B,U,V],r=(t=[]).concat.apply(t,(0,ee.Z)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return br(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=_N(e),a=(0,X.Z)(r,3),o=a[0],i=a[2],u=s[o];if(null!=u.outputs){var c=u.outputs.indexOf(i);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=_N(e),n=(0,X.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=_N(e),n=(0,X.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:o,placeholders:a,signature:n,functions:p};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=xN(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=YN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=YN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=ij(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ij(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=JN(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=JN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=oj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=oj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=QN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=QN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=uj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=uj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=aj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=aj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=sj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=sj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=tj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=tj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=nj(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=nj(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=ej(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ej(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=_N(e.name),n=(0,X.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:$N(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,o.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=_N(e),o=(0,X.Z)(r,3),i=o[0],s=o[2],u=a[i];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=_N(s[e.name]),n=(0,X.Z)(t,2),r=n[0],o=n[1],u=a[r];null!=u&&(u.defaultOutput=o,i.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function KN(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=wa().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function YN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?KN(a.s,r):n}function QN(e,t,n){var r=e[t];return r?r.b:n}function JN(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function $N(e){switch("string"===typeof e&&(e=mN[e]),e){case mN.DT_FLOAT:case mN.DT_HALF:return"float32";case mN.DT_INT32:case mN.DT_INT64:case mN.DT_INT8:case mN.DT_UINT8:return"int32";case mN.DT_BOOL:return"bool";case mN.DT_DOUBLE:return"float32";case mN.DT_STRING:return"string";default:return null}}function ej(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function tj(e,t,n){var r=e[t];return r&&r.type?$N(r.type):n}function nj(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return $N(e)})):n}function rj(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function aj(e,t,n){var r=e[t];return r&&r.shape?rj(r.shape):n}function oj(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function ij(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return KN(e,r)})):n}function sj(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return rj(e)})):n}function uj(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var cj=function(){function e(t,n,r){var a=this;vr(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return br(e,[{key:"getInput",value:function(e){return SN(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return SN(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return JN(this.node.rawAttrs,e,t);if(null!=n.s)return YN(this.node.rawAttrs,e,t);if(null!=n.b)return QN(this.node.rawAttrs,e,t);if(null!=n.shape)return aj(this.node.rawAttrs,e,t);if(null!=n.type)return tj(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return oj(this.node.rawAttrs,e,t);if(null!=n.list.s)return ij(this.node.rawAttrs,e,t);if(null!=n.list.shape)return sj(this.node.rawAttrs,e,t);if(null!=n.list.b)return uj(this.node.rawAttrs,e,t);if(null!=n.list.type)return nj(this.node.rawAttrs,e,t)}return t}}]),e}(),lj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(kN("a",e,t,n),kN("b",e,t,n))];case"AddN":return[r.addN(kN("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(kN("a",e,t,n),kN("b",e,t,n))];case"Mul":return[r.mul(kN("a",e,t,n),kN("b",e,t,n))];case"RealDiv":case"Div":return[r.div(kN("a",e,t,n),kN("b",e,t,n))];case"DivNoNan":return[r.divNoNan(kN("a",e,t,n),kN("b",e,t,n))];case"FloorDiv":return[r.floorDiv(kN("a",e,t,n),kN("b",e,t,n))];case"Sub":return[r.sub(kN("a",e,t,n),kN("b",e,t,n))];case"Minimum":return[r.minimum(kN("a",e,t,n),kN("b",e,t,n))];case"Maximum":return[r.maximum(kN("a",e,t,n),kN("b",e,t,n))];case"Pow":return[r.pow(kN("a",e,t,n),kN("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(kN("a",e,t,n),kN("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},dj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(kN("x",e,t,n))];case"Acos":return[r.acos(kN("x",e,t,n))];case"Acosh":return[r.acosh(kN("x",e,t,n))];case"Asin":return[r.asin(kN("x",e,t,n))];case"Asinh":return[r.asinh(kN("x",e,t,n))];case"Atan":return[r.atan(kN("x",e,t,n))];case"Atan2":return[r.atan2(kN("x",e,t,n),kN("y",e,t,n))];case"Atanh":return[r.atanh(kN("x",e,t,n))];case"Ceil":return[r.ceil(kN("x",e,t,n))];case"Complex":return[r.complex(kN("real",e,t,n),kN("imag",e,t,n))];case"Cos":return[r.cos(kN("x",e,t,n))];case"Cosh":return[r.cosh(kN("x",e,t,n))];case"Elu":return[r.elu(kN("x",e,t,n))];case"Erf":return[r.erf(kN("x",e,t,n))];case"Exp":return[r.exp(kN("x",e,t,n))];case"Expm1":return[r.expm1(kN("x",e,t,n))];case"Floor":return[r.floor(kN("x",e,t,n))];case"Log":return[r.log(kN("x",e,t,n))];case"Log1p":return[r.log1p(kN("x",e,t,n))];case"Imag":return[r.imag(kN("x",e,t,n))];case"Neg":return[r.neg(kN("x",e,t,n))];case"Reciprocal":return[r.reciprocal(kN("x",e,t,n))];case"Real":return[r.real(kN("x",e,t,n))];case"Relu":return[r.relu(kN("x",e,t,n))];case"Round":return[r.round(kN("x",e,t,n))];case"Selu":return[r.selu(kN("x",e,t,n))];case"Sigmoid":return[r.sigmoid(kN("x",e,t,n))];case"Sin":return[r.sin(kN("x",e,t,n))];case"Sign":return[r.sign(kN("x",e,t,n))];case"Sinh":return[r.sinh(kN("x",e,t,n))];case"Softplus":return[r.softplus(kN("x",e,t,n))];case"Sqrt":return[r.sqrt(kN("x",e,t,n))];case"Square":return[r.square(kN("x",e,t,n))];case"Tanh":return[r.tanh(kN("x",e,t,n))];case"Tan":return[r.tan(kN("x",e,t,n))];case"ClipByValue":return[r.clipByValue(kN("x",e,t,n),kN("clipValueMin",e,t,n),kN("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(kN("x",e,t,n))];case"Rsqrt":return[r.rsqrt(SN(e.inputNames[0],t,n))];case"Prod":return[r.prod(kN("x",e,t,n),kN("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(kN("x",e,t,n),kN("alpha",e,t,n))];case"Prelu":return[r.prelu(kN("x",e,t,n),kN("alpha",e,t,n))];case"IsNan":return[r.isNaN(SN(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function fj(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Mr(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];Mr(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function pj(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function hj(e,t,n){var r=mj(e,n),a=!pj(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=mj(e.shape,r)})),!pj(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function mj(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}var vj=function(){function e(t,n,r,a,o,i,s){vr(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=hd(0),Gl(this.idTensor)}return br(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),fj(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Gl(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return xc([],[0].concat(this.elementShape));var r=this.readMany(e);return fj(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Rv(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return xc([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return fj(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Bp(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,ee.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Wv(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:t.size/r,i=[];Ul((function(){t=Pp(t,[1,r,o]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],o];i[s]=Pp(Vp(t,u,c),n.elementShape)}return i}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,i)}}]),e}(),yj=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;vr(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));fj(n,e.shape,"TensorList shape mismatch: "),Gl(e)})),this.idTensor=hd(0),this.maxNumElements=a,Gl(this.idTensor)}return br(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,ee.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));fj(e,this.elementShape,"TensorList shape mismatch: ");var a=hj(this.elementShape,this.tensors,e);return Ul((function(){var e=n.tensors.map((function(e){return Pp(e,a)}));return Rv(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=hj(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,fj(r.shape,e,"TensorList shape mismatch: "),Pp(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(fj(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Gl(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));fj(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=hj(this.elementShape,this.tensors,t);return Pp(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));fj(this.elementShape,t.shape,"TensorList shape mismatch: "),Gl(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));fj(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=hj(this.elementShape,this.tensors,n);return 0===e.length?xc([],[0].concat(a)):Ul((function(){var t=e.map((function(e){return Pp(r.tensors[e],a)}));return Rv(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));fj(this.elementShape,t,"TensorList shape mismatch: ");var r=hj(this.elementShape,this.tensors,t);return 0===this.size()?xc([],[0].concat(r)):Ul((function(){var e=n.tensors.map((function(e){return Pp(e,r)}));return Bp(e,0)}))}}]),e}();function gj(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));fj(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Wv(e);return new yj(a,t,r)}function bj(e,t,n,r){return new yj([],e,t,r)}function xj(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,ee.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new yj([],n,e.dtype,r),i=Wv(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}function wj(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=mj(e.shape.slice(1),n),i=0===r?0:e.size/r,s=Ul((function(){var n=[];e=Pp(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],i];n[s]=Pp(Vp(e,u,c),o)}return e.dispose(),n})),u=new yj([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var kj=function(){var e=mr(pr().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C,I,N,j,R,A,M,O,L,D,P,F,z,B,U,V,G,W,H,Z,q,X,K,Y,Q,J,$,ee,te,ne,re,ae,oe,ie,se,ue,ce,le,de,fe,pe,he,me,ve,ye,ge,be,xe,we,ke,Se,_e,Te,Ee,Ce,Ie,Ne,je,Re,Ae,Me,Oe,Le,De,Pe,Fe,ze,Be,Ue,Ve,Ge,We,He,Ze,qe,Xe,Ke,Ye,Qe,Je,$e,et,tt,nt,rt,at,ot;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?136:"TensorListStack"===e.t0?142:"TensorListFromTensor"===e.t0?148:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?154:"TensorListPushBack"===e.t0?159:"TensorListPopBack"===e.t0?164:"TensorListSplit"===e.t0?169:"TensorListLength"===e.t0?175:"TensorListResize"===e.t0?178:184;break;case 3:return a=kN("thenBranch",t,n,r),o=kN("elseBranch",t,n,r),i=kN("cond",t,n,r),s=kN("args",t,n,r),e.next=9,i.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return u=kN("body",t,n,r),c=kN("cond",t,n,r),l=kN("args",t,n,r),e.next=20,r.functionMap[c].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 20:return d=e.sent,f=l.map((function(e){return e.id})),e.next=24,d[0].data();case 24:p=e.sent,d.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||e.dispose()})),h=l,m=pr().mark((function e(){var t,n,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h,e.next=3,r.functionMap[u].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap);case 3:return h=e.sent,n=h.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[c].executeFunctionAsync(h,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:p=e.sent,a.forEach((function(e){e.kept||-1!==f.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!p[0]){e.next=32;break}return e.delegateYield(m(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",h);case 33:return v=kN("pred",t,n,r),e.abrupt("return",[IN(v)]);case 35:return y=kN("pred",t,n,r),(g=kN("data",t,n,r)).kept||(g=IN(g)),e.next=40,y.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,g],e.next=45;break;case 44:e.t2=[g,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(b=t.inputNames.find((function(e){return void 0!==SN(e,n,r)})),!b){e.next=50;break}return x=SN(b,n,r),e.abrupt("return",[IN(x)]);case 50:return e.abrupt("return",void 0);case 51:return w=kN("frameName",t,n,r),k=kN("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[IN(k)]);case 55:return S=kN("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[IN(S)]);case 58:return _=kN("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[IN(_)]);case 61:return T=kN("size",t,n,r),E=kN("dtype",t,n,r),C=kN("elementShape",t,n,r),I=kN("dynamicSize",t,n,r),N=kN("clearAfterRead",t,n,r),j=kN("identicalElementShapes",t,n,r),R=kN("name",t,n,r),A=new vj(R,E,T,C,j,I,N),r.addTensorArray(A),e.abrupt("return",[A.idTensor,hd(1)]);case 71:return M=kN("tensorArrayId",t,n,r),O=kN("index",t,n,r),L=kN("tensor",t,n,r),(D=r.getTensorArray(M.id)).write(O,L),e.abrupt("return",[D.idTensor]);case 77:return P=kN("tensorArrayId",t,n,r),F=kN("index",t,n,r),z=r.getTensorArray(P.id),e.abrupt("return",[z.read(F)]);case 81:return B=kN("tensorArrayId",t,n,r),U=kN("indices",t,n,r),V=kN("dtype",t,n,r),G=r.getTensorArray(B.id),e.abrupt("return",[G.gather(U,V)]);case 86:return W=kN("tensorArrayId",t,n,r),H=kN("indices",t,n,r),Z=kN("tensor",t,n,r),(q=r.getTensorArray(W.id)).scatter(H,Z),e.abrupt("return",[q.idTensor]);case 92:return X=kN("tensorArrayId",t,n,r),K=r.getTensorArray(X.id),Y=kN("dtype",t,n,r),e.abrupt("return",[K.concat(Y)]);case 96:return Q=kN("tensorArrayId",t,n,r),J=kN("tensor",t,n,r),$=kN("lengths",t,n,r),(ee=r.getTensorArray(Q.id)).split($,J),e.abrupt("return",[ee.idTensor]);case 102:return te=kN("tensorArrayId",t,n,r),ne=r.getTensorArray(te.id),e.abrupt("return",[hd(ne.size(),"int32")]);case 105:return re=kN("tensorArrayId",t,n,r),(ae=r.getTensorArray(re.id)).clearAndClose(),e.abrupt("return",[ae.idTensor]);case 109:return oe=kN("tensorListId",t,n,r),ie=kN("index",t,n,r),se=kN("tensor",t,n,r),(ue=r.getTensorList(oe.id)).setItem(ie,se),e.abrupt("return",[ue.idTensor]);case 115:return ce=kN("tensorListId",t,n,r),le=kN("index",t,n,r),de=kN("elementShape",t,n,r),fe=kN("elementDType",t,n,r),pe=r.getTensorList(ce.id),e.abrupt("return",[pe.getItem(le,de,fe)]);case 121:return he=kN("indices",t,n,r),me=kN("tensor",t,n,r),ve=kN("elementShape",t,n,r),ye=kN("numElements",t,n,r),ge=xj(me,he,ve,ye),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 128:return be=kN("elementShape",t,n,r),xe=kN("elementDType",t,n,r),we="TensorListReserve"===t.op?"numElements":"maxNumElements",ke=kN(we,t,n,r),Se="TensorListReserve"===t.op?-1:ke,_e=bj(be,xe,0,Se),r.addTensorList(_e),e.abrupt("return",[_e.idTensor]);case 136:return Te=kN("tensorListId",t,n,r),Ee=kN("indices",t,n,r),Ce=kN("elementShape",t,n,r),Ie=kN("elementDType",t,n,r),Ne=r.getTensorList(Te.id),e.abrupt("return",[Ne.gather(Ee,Ie,Ce)]);case 142:return je=kN("tensorListId",t,n,r),Re=kN("elementShape",t,n,r),Ae=kN("elementDType",t,n,r),Me=kN("numElements",t,n,r),Oe=r.getTensorList(je.id),e.abrupt("return",[Oe.stack(Re,Ae,Me)]);case 148:return Le=kN("tensor",t,n,r),De=kN("elementShape",t,n,r),Pe=kN("elementDType",t,n,r),Fe=gj(Le,De,Pe),r.addTensorList(Fe),e.abrupt("return",[Fe.idTensor]);case 154:return ze=kN("tensorListId",t,n,r),Be=r.getTensorList(ze.id),Ue=kN("dtype",t,n,r),Ve=kN("elementShape",t,n,r),e.abrupt("return",[Be.concat(Ue,Ve)]);case 159:return Ge=kN("tensorListId",t,n,r),We=kN("tensor",t,n,r),(He=r.getTensorList(Ge.id)).pushBack(We),e.abrupt("return",[He.idTensor]);case 164:return Ze=kN("tensorListId",t,n,r),qe=kN("elementShape",t,n,r),Xe=kN("elementDType",t,n,r),Ke=r.getTensorList(Ze.id),e.abrupt("return",[Ke.popBack(qe,Xe)]);case 169:return Ye=kN("tensor",t,n,r),Qe=kN("elementShape",t,n,r),Je=kN("lengths",t,n,r),$e=wj(Ye,Je,Qe),r.addTensorList($e),e.abrupt("return",[$e.idTensor]);case 175:return et=kN("tensorListId",t,n,r),tt=r.getTensorList(et.id),e.abrupt("return",[hd(tt.size(),"int32")]);case 178:return nt=kN("tensorListId",t,n,r),rt=kN("size",t,n,r),at=r.getTensorList(nt.id),ot=at.resize(rt),r.addTensorList(ot),e.abrupt("return",[ot.idTensor]);case 184:throw TypeError("Node type ".concat(t.op," is not implemented"));case 185:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Sj(e,t,n){var r=kN("fusedOps",e,t,n),a=(0,X.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,u=!s,c="prelu"===i,l="fusedbatchnorm"===o,d=kN("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=kN("strides",e,t,n),p=CN(e,t,n),h=kN("dataFormat",e,t,n).toUpperCase(),m=kN("dilations",e,t,n),v=kN("args",e,t,n),y=(0,X.Z)(v,2),g=y[0],b=y[1];return u&&(b=g,g=void 0),{stride:f,pad:p,dataFormat:h,dilations:m,biasArg:g,preluArg:b,activationFunc:i,leakyreluAlpha:kN("leakyreluAlpha",e,t,n)}}var _j=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Conv1D":var a=kN("stride",e,t,n),o=kN("pad",e,t,n),i=kN("dataFormat",e,t,n).toUpperCase(),s=kN("dilation",e,t,n);return[r.conv1d(kN("x",e,t,n),kN("filter",e,t,n),a,o,i,s)];case"Conv2D":var u=kN("strides",e,t,n),c=CN(e,t,n),l=kN("dataFormat",e,t,n).toUpperCase(),d=kN("dilations",e,t,n);return[r.conv2d(kN("x",e,t,n),kN("filter",e,t,n),[u[1],u[2]],c,l,[d[1],d[2]])];case"_FusedConv2D":var f=Sj(e,t,n),p=f.stride,h=f.pad,m=f.dataFormat,v=f.dilations,y=f.biasArg,g=f.preluArg,b=f.activationFunc,x=f.leakyreluAlpha;return[r.fused.conv2d({x:kN("x",e,t,n),filter:kN("filter",e,t,n),strides:[p[1],p[2]],pad:h,dataFormat:m,dilations:[v[1],v[2]],bias:y,activation:b,preluActivationWeights:g,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var w=Sj(e,t,n),k=w.stride,S=w.pad,_=w.dataFormat,T=w.dilations,E=w.biasArg,C=w.preluArg,I=w.activationFunc,N=w.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:kN("x",e,t,n),filter:kN("filter",e,t,n),strides:[k[1],k[2]],pad:S,dataFormat:_,dilations:[T[1],T[2]],bias:E,activation:I,preluActivationWeights:C,leakyreluAlpha:N})];case"Conv2DBackpropInput":case"Conv2dTranspose":var j=kN("outputShape",e,t,n),R=kN("strides",e,t,n),A=CN(e,t,n);return[r.conv2dTranspose(kN("x",e,t,n),kN("filter",e,t,n),j,[R[1],R[2]],A)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var M=kN("strides",e,t,n),O=CN(e,t,n),L=kN("dilations",e,t,n),D=kN("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(kN("input",e,t,n),kN("filter",e,t,n),[M[1],M[2]],O,D,[L[1],L[2]])];case"Conv3D":var P=kN("strides",e,t,n),F=kN("pad",e,t,n),z=kN("dataFormat",e,t,n).toUpperCase(),B=kN("dilations",e,t,n);return[r.conv3d(kN("x",e,t,n),kN("filter",e,t,n),[P[1],P[2],P[3]],F,z,[B[1],B[2],B[3]])];case"AvgPool":var U=kN("strides",e,t,n),V=kN("pad",e,t,n),W=kN("kernelSize",e,t,n);return[r.avgPool(kN("x",e,t,n),[W[1],W[2]],[U[1],U[2]],V)];case"MaxPool":var H=kN("strides",e,t,n),Z=kN("pad",e,t,n),q=kN("kernelSize",e,t,n);return[r.maxPool(kN("x",e,t,n),[q[1],q[2]],[H[1],H[2]],Z)];case"MaxPoolWithArgmax":var X=kN("strides",e,t,n),K=kN("pad",e,t,n),Y=kN("kernelSize",e,t,n),Q=kN("includeBatchInIndex",e,t,n),J=r.maxPoolWithArgmax(kN("x",e,t,n),[Y[1],Y[2]],[X[1],X[2]],K,Q);return[J.result,J.indexes];case"AvgPool3D":var $=kN("strides",e,t,n),ee=kN("pad",e,t,n),te=kN("kernelSize",e,t,n);return[r.avgPool3d(kN("x",e,t,n),[te[1],te[2],te[3]],[$[1],$[2],$[3]],ee)];case"MaxPool3D":var ne=kN("strides",e,t,n),re=kN("pad",e,t,n),ae=kN("kernelSize",e,t,n);return[r.maxPool3d(kN("x",e,t,n),[ae[1],ae[2],ae[3]],[ne[1],ne[2],ne[3]],re)];case"Dilation2D":var oe=kN("strides",e,t,n),ie=kN("pad",e,t,n),se=kN("dilations",e,t,n),ue=oe[1],ce=oe[2],le=se[1],de=se[2];return[r.dilation2d(kN("x",e,t,n),kN("filter",e,t,n),[ue,ce],ie,[le,de],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Tj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Fill":var a=kN("shape",e,t,n),o=kN("dtype",e,t,n),i=kN("value",e,t,n);return[r.fill(a,i,o)];case"LinSpace":var s=kN("start",e,t,n),u=kN("stop",e,t,n),c=kN("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=kN("logits",e,t,n),d=kN("numSamples",e,t,n),f=kN("seed",e,t,n);return[r.multinomial(l,d,f)];case"OneHot":var p=kN("indices",e,t,n),h=kN("depth",e,t,n),m=kN("onValue",e,t,n),v=kN("offValue",e,t,n),y=kN("dtype",e,t,n);return[r.oneHot(p,h,m,v,y)];case"Ones":return[r.ones(kN("shape",e,t,n),kN("dtype",e,t,n))];case"OnesLike":return[r.onesLike(kN("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(kN("shape",e,t,n),kN("dtype",e,t,n),kN("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(kN("shape",e,t,n),kN("minval",e,t,n),kN("maxval",e,t,n),kN("dtype",e,t,n))];case"Range":var g=kN("start",e,t,n),b=kN("stop",e,t,n),x=kN("step",e,t,n);return[r.range(g,b,x,kN("dtype",e,t,n))];case"TruncatedNormal":var w=kN("shape",e,t,n),k=kN("mean",e,t,n),S=kN("stdDev",e,t,n),_=kN("seed",e,t,n);return[r.truncatedNormal(w,k,S,kN("dtype",e,t,n),_)];case"Zeros":return[r.zeros(kN("shape",e,t,n),kN("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(kN("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Ej(e,t,n){return{boxes:kN("boxes",e,t,n),scores:kN("scores",e,t,n),maxOutputSize:kN("maxOutputSize",e,t,n),iouThreshold:kN("iouThreshold",e,t,n),scoreThreshold:kN("scoreThreshold",e,t,n),softNmsSigma:kN("softNmsSigma",e,t,n)}}var Cj=function(){var e=mr(pr().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C,I,N,j=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=j.length>4&&void 0!==j[4]?j[4]:G,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return i=Ej(t,n,r),s=i.boxes,u=i.scores,c=i.maxOutputSize,l=i.iouThreshold,d=i.scoreThreshold,f=i.softNmsSigma,e.next=7,o.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,d,f);case 7:return p=e.sent,e.abrupt("return",[p.selectedIndices,p.selectedScores]);case 9:return h=Ej(t,n,r),m=h.boxes,v=h.scores,y=h.maxOutputSize,g=h.iouThreshold,b=h.scoreThreshold,x=kN("padToMaxOutputSize",t,n,r),e.next=13,o.image.nonMaxSuppressionPaddedAsync(m,v,y,g,b,x);case 13:return w=e.sent,e.abrupt("return",[w.selectedIndices,w.validOutputs]);case 15:return k=Ej(t,n,r),S=k.boxes,_=k.scores,T=k.maxOutputSize,E=k.iouThreshold,C=k.scoreThreshold,e.next=18,o.image.nonMaxSuppressionAsync(S,_,T,E,C);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return I=o.cast(kN("condition",t,n,r),"bool"),e.next=23,o.whereAsync(I);case 23:return e.t2=e.sent,N=[e.t2],I.dispose(),e.abrupt("return",N);case 27:return e.abrupt("return",o.setdiff1dAsync(kN("x",t,n,r),kN("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ij=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"LowerBound":var a=kN("sortedSequence",e,t,n),o=kN("values",e,t,n);return[r.lowerBound(a,o)];case"TopKV2":var i=kN("x",e,t,n),s=kN("k",e,t,n),u=kN("sorted",e,t,n),c=r.topk(i,s,u);return[c.values,c.indices];case"UpperBound":var l=kN("sortedSequence",e,t,n),d=kN("values",e,t,n);return[r.upperBound(l,d)];case"Unique":var f=kN("x",e,t,n),p=r.unique(f);return[p.values,p.indices];case"UniqueV2":var h=kN("x",e,t,n),m=kN("axis",e,t,n),v=r.unique(h,m);return[v.values,v.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Nj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=kN("default",e,t,n);return[SN(e.name,t,n)||a];case"Placeholder":return[SN(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[IN(kN("x",e,t,n))];case"IdentityN":return kN("x",e,t,n).map((function(e){return IN(e)}));case"Snapshot":return[IN(kN("x",e,t,n))];case"Shape":return[r.tensor1d(kN("x",e,t,n).shape,"int32")];case"ShapeN":return kN("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(kN("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(kN("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var o=kN("x",e,t,n),i=kN("data",e,t,n),s=kN("message",e,t,n),u=kN("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(var c=0;c<i.length;c++)console.log(Array.prototype.slice.call(i[c].dataSync()).slice(0,u));return[o];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},jj=function(){function e(t,n){vr(this,e),this.keyDType=t,this.valueDType=n,this.handle=hd(0),this.tensorMap=new Map,Gl(this.handle)}return br(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return hd(this.size(),"int32")}},{key:"import",value:function(){var e=mr(pr().mark((function e(t,n){var r,a=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",Ul((function(){var e=Wv(n),t=r.length,o=e.length;Mr(t===o,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(o," ")+"elements."}));for(var i=0;i<t;i++){var s=r[i],u=e[i];Gl(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=mr(pr().mark((function e(t,n){var r,a=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Ul((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return Rv(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),Rj=function(){var e=mr(pr().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,v,y,g;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"InitializeTable"===e.t0||"InitializeTableV2"===e.t0||"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?13:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?21:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?29:32;break;case 3:if(null==(o=a.getHashTableHandleByName(t.name))){e.next=8;break}return e.abrupt("return",[o]);case 8:return i=kN("keyDType",t,n,r),s=kN("valueDType",t,n,r),u=new jj(i,s),a.addHashTable(t.name,u),e.abrupt("return",[u.handle]);case 13:return c=kN("tableHandle",t,n,r,a),l=kN("keys",t,n,r),d=kN("values",t,n,r),f=a.getHashTableById(c.id),e.next=19,f.import(l,d);case 19:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 21:return p=kN("tableHandle",t,n,r,a),h=kN("keys",t,n,r),m=kN("defaultValue",t,n,r),v=a.getHashTableById(p.id),e.next=27,v.find(h,m);case 27:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 29:return y=kN("tableHandle",t,n,r,a),g=a.getHashTableById(y.id),e.abrupt("return",[g.tensorSize()]);case 32:throw TypeError("Node type ".concat(t.op," is not implemented"));case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Aj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"ResizeBilinear":var a=kN("images",e,t,n),o=kN("size",e,t,n),i=kN("alignCorners",e,t,n),s=kN("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[o[0],o[1]],i,s)];case"ResizeNearestNeighbor":var u=kN("images",e,t,n),c=kN("size",e,t,n),l=kN("alignCorners",e,t,n),d=kN("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,d)];case"CropAndResize":var f=kN("image",e,t,n),p=kN("boxes",e,t,n),h=kN("boxInd",e,t,n),m=kN("cropSize",e,t,n),v=kN("method",e,t,n),y=kN("extrapolationValue",e,t,n);return[r.image.cropAndResize(f,p,h,m,v,y)];case"ImageProjectiveTransformV3":var g=kN("images",e,t,n),b=kN("transforms",e,t,n),x=kN("outputShape",e,t,n),w=kN("fillValue",e,t,n),k=kN("interpolation",e,t,n),S=kN("fillMode",e,t,n);return[r.image.transform(g,b,k.toLowerCase(),S.toLowerCase(),w,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Mj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Equal":return[r.equal(kN("a",e,t,n),kN("b",e,t,n))];case"NotEqual":return[r.notEqual(kN("a",e,t,n),kN("b",e,t,n))];case"Greater":return[r.greater(kN("a",e,t,n),kN("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(kN("a",e,t,n),kN("b",e,t,n))];case"Less":return[r.less(kN("a",e,t,n),kN("b",e,t,n))];case"LessEqual":return[r.lessEqual(kN("a",e,t,n),kN("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(kN("a",e,t,n),kN("b",e,t,n))];case"LogicalNot":return[r.logicalNot(kN("a",e,t,n))];case"LogicalOr":return[r.logicalOr(kN("a",e,t,n),kN("b",e,t,n))];case"Select":case"SelectV2":return[r.where(kN("condition",e,t,n),kN("a",e,t,n),kN("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Oj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(kN("a",e,t,n),kN("b",e,t,n),kN("transposeA",e,t,n),kN("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[kN("equation",e,t,n)].concat((0,ee.Z)(kN("tensors",e,t,n))))];case"Transpose":return[r.transpose(kN("x",e,t,n),kN("perm",e,t,n))];case"_FusedMatMul":var a=kN("fusedOps",e,t,n),o=(0,X.Z)(a,2),i=o[0],s=o[1],u="biasadd"===i,c="prelu"===s,l=kN("numArgs",e,t,n),d=kN("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=kN("args",e,t,n),p=(0,X.Z)(f,2),h=p[0],m=p[1];return[r.fused.matMul({a:kN("a",e,t,n),b:kN("b",e,t,n),transposeA:kN("transposeA",e,t,n),transposeB:kN("transposeB",e,t,n),bias:h,activation:s,preluActivationWeights:m,leakyreluAlpha:d})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Lj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(kN("x",e,t,n),kN("axis",e,t,n),kN("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(kN("x",e,t,n),kN("mean",e,t,n),kN("variance",e,t,n),kN("offset",e,t,n),kN("scale",e,t,n),kN("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(kN("x",e,t,n),kN("radius",e,t,n),kN("bias",e,t,n),kN("alpha",e,t,n),kN("beta",e,t,n))];case"Softmax":return[r.softmax(kN("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(kN("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(kN("sparseIndices",e,t,n),kN("outputShape",e,t,n),kN("sparseValues",e,t,n),kN("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Dj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"RaggedGather":var a=r.raggedGather(kN("paramsNestedSplits",e,t,n),kN("paramsDenseValues",e,t,n),kN("indices",e,t,n),kN("outputRaggedRank",e,t,n)),o=a.outputNestedSplits,i=a.outputDenseValues;return o.concat(i);case"RaggedRange":var s=r.raggedRange(kN("starts",e,t,n),kN("limits",e,t,n),kN("splits",e,t,n));return[s.rtNestedSplits,s.rtDenseValues];case"RaggedTensorToTensor":return[r.raggedTensorToTensor(kN("shape",e,t,n),kN("values",e,t,n),kN("defaultValue",e,t,n),kN("rowPartitionTensors",e,t,n),kN("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Pj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Max":var a=kN("axis",e,t,n),o=kN("keepDims",e,t,n);return[r.max(kN("x",e,t,n),a,o)];case"Mean":var i=kN("axis",e,t,n),s=kN("keepDims",e,t,n);return[r.mean(kN("x",e,t,n),i,s)];case"Min":var u=kN("axis",e,t,n),c=kN("keepDims",e,t,n);return[r.min(kN("x",e,t,n),u,c)];case"Sum":var l=kN("axis",e,t,n),d=kN("keepDims",e,t,n);return[r.sum(kN("x",e,t,n),l,d)];case"All":var f=kN("axis",e,t,n),p=kN("keepDims",e,t,n);return[r.all(kN("x",e,t,n),f,p)];case"Any":var h=kN("axis",e,t,n),m=kN("keepDims",e,t,n);return[r.any(kN("x",e,t,n),h,m)];case"ArgMax":var v=kN("axis",e,t,n);return[r.argMax(kN("x",e,t,n),v)];case"ArgMin":var y=kN("axis",e,t,n);return[r.argMin(kN("x",e,t,n),y)];case"Prod":var g=kN("axis",e,t,n),b=kN("keepDims",e,t,n);return[r.prod(kN("x",e,t,n),g,b)];case"Cumprod":var x=kN("axis",e,t,n),w=kN("exclusive",e,t,n),k=kN("reverse",e,t,n);return[r.cumprod(kN("x",e,t,n),x,w,k)];case"Cumsum":var S=kN("axis",e,t,n),_=kN("exclusive",e,t,n),T=kN("reverse",e,t,n);return[r.cumsum(kN("x",e,t,n),S,_,T)];case"Bincount":var E=kN("x",e,t,n),C=kN("weights",e,t,n),I=kN("size",e,t,n);return[r.bincount(E,C,I)];case"DenseBincount":var N=kN("x",e,t,n),j=kN("weights",e,t,n),R=kN("size",e,t,n),A=kN("binaryOutput",e,t,n);return[r.denseBincount(N,j,R,A)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Fj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"ConcatV2":case"Concat":var a=kN("n",e,t,n),o=kN("axis",e,t,n),i=kN("tensors",e,t,n);return i=i.slice(0,a),[r.concat(i,o)];case"Gather":var s=kN("x",e,t,n),u=kN("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=kN("axis",e,t,n),l=kN("batchDims",e,t,n),d=kN("x",e,t,n),f=kN("indices",e,t,n);return[r.gather(d,r.cast(f,"int32"),c,l)];case"Reverse":for(var p=kN("dims",e,t,n),h=[],m=0;m<p.length;m++)p[m]&&h.push(m);var v=kN("x",e,t,n);return[r.reverse(v,h)];case"ReverseV2":var y=kN("axis",e,t,n),g=kN("x",e,t,n);return[r.reverse(g,y)];case"Slice":var b=kN("begin",e,t,n),x=kN("size",e,t,n);return[r.slice(kN("x",e,t,n),b,x)];case"StridedSlice":var w=kN("begin",e,t,n),k=kN("end",e,t,n),S=kN("strides",e,t,n),_=kN("beginMask",e,t,n),T=kN("endMask",e,t,n),E=kN("ellipsisMask",e,t,n),C=kN("newAxisMask",e,t,n),I=kN("shrinkAxisMask",e,t,n),N=kN("x",e,t,n);return[r.stridedSlice(N,w,k,S,_,T,E,C,I)];case"Pack":return Ul((function(){var a=kN("axis",e,t,n),o=kN("tensors",e,t,n),i=o[0].shape,s=r.squeeze(o[0]).shape,u=o.map((function(e){var t=Fr(e.shape,i);if(!t&&!Fr(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(u,a)]}));case"Unpack":var j=kN("axis",e,t,n),R=kN("tensor",e,t,n);return r.unstack(R,j);case"Tile":var A=kN("reps",e,t,n);return[r.tile(kN("x",e,t,n),A)];case"Split":case"SplitV":var M=kN("axis",e,t,n),O=kN("numOrSizeSplits",e,t,n),L=kN("x",e,t,n);return r.split(L,O,M);case"ScatterNd":var D=kN("indices",e,t,n),P=kN("values",e,t,n),F=kN("shape",e,t,n);return[r.scatterND(D,P,F)];case"GatherNd":var z=kN("x",e,t,n),B=kN("indices",e,t,n);return[r.gatherND(z,B)];case"SparseToDense":var U=kN("sparseIndices",e,t,n),V=kN("outputShape",e,t,n),W=kN("sparseValues",e,t,n),H=kN("defaultValue",e,t,n);return[r.sparseToDense(U,W,V,W.dtype===H.dtype?H:r.cast(H,W.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},zj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(kN("indices",e,t,n),kN("values",e,t,n),kN("denseShape",e,t,n),kN("defaultValue",e,t,n));return[a.outputIndices,a.outputValues,a.emptyRowIndicator,a.reverseIndexMap];case"SparseReshape":var o=r.sparse.sparseReshape(kN("inputIndices",e,t,n),kN("inputShape",e,t,n),kN("newShape",e,t,n));return[o.outputIndices,o.outputShape];case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(kN("data",e,t,n),kN("indices",e,t,n),kN("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(kN("data",e,t,n),kN("indices",e,t,n),kN("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Bj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"FFT":return[r.fft(kN("x",e,t,n))];case"IFFT":return[r.ifft(kN("x",e,t,n))];case"RFFT":return[r.rfft(kN("x",e,t,n))];case"IRFFT":return[r.irfft(kN("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Uj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"StringNGrams":var a=r.string.stringNGrams(kN("data",e,t,n),kN("dataSplits",e,t,n),kN("separator",e,t,n),kN("nGramWidths",e,t,n),kN("leftPad",e,t,n),kN("rightPad",e,t,n),kN("padWidth",e,t,n),kN("preserveShortSequences",e,t,n));return[a.nGrams,a.nGramsSplits];case"StringSplit":var o=r.string.stringSplit(kN("input",e,t,n),kN("delimiter",e,t,n),kN("skipEmpty",e,t,n));return[o.indices,o.values,o.shape];case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(kN("input",e,t,n),kN("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Vj=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G;switch(e.op){case"Cast":return[r.cast(kN("x",e,t,n),kN("dtype",e,t,n))];case"ExpandDims":var a=kN("axis",e,t,n);return[r.expandDims(kN("x",e,t,n),a)];case"Squeeze":var o=kN("axis",e,t,n);return[r.squeeze(kN("x",e,t,n),o)];case"Reshape":return[r.reshape(kN("x",e,t,n),kN("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(kN("x",e,t,n),kN("padding",e,t,n),kN("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(kN("x",e,t,n),kN("padding",e,t,n),kN("constantValue",e,t,n))];case"SpaceToBatchND":var i=kN("blockShape",e,t,n),s=kN("paddings",e,t,n);return[r.spaceToBatchND(kN("x",e,t,n),i,s)];case"BatchToSpaceND":var u=kN("blockShape",e,t,n),c=kN("crops",e,t,n);return[r.batchToSpaceND(kN("x",e,t,n),u,c)];case"DepthToSpace":var l=kN("blockSize",e,t,n),d=kN("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(kN("x",e,t,n),l,d)];case"BroadcastTo":return[r.broadcastTo(kN("x",e,t,n),kN("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(kN("s0",e,t,n),kN("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function Gj(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ul,o=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return lj(e,t,n)}));case"basic_math":return a((function(){return dj(e,t,n)}));case"control":return kj(e,t,n);case"convolution":return a((function(){return _j(e,t,n)}));case"creation":return a((function(){return Tj(e,t,n)}));case"dynamic":return Cj(e,t,n);case"evaluation":return a((function(){return Ij(e,t,n)}));case"image":return a((function(){return Aj(e,t,n)}));case"graph":return a((function(){return Nj(e,t,n)}));case"logical":return a((function(){return Mj(e,t,n)}));case"matrices":return a((function(){return Oj(e,t,n)}));case"normalization":return a((function(){return Lj(e,t,n)}));case"ragged":return a((function(){return Dj(e,t,n)}));case"reduction":return a((function(){return Pj(e,t,n)}));case"slice_join":return a((function(){return Fj(e,t,n)}));case"sparse":return a((function(){return zj(e,t,n)}));case"spectral":return a((function(){return Bj(e,t,n)}));case"string":return a((function(){return Uj(e,t,n)}));case"transformation":return a((function(){return Vj(e,t,n)}));case"hash_table":return Rj(e,t,n,r);case"custom":var o=xN(e.op);if(o&&o.customExecutor)return o.customExecutor(new cj(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return ya(o)?o.then((function(e){return[].concat(e)})):[].concat(o)}var Wj=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};vr(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return br(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function Hj(e,t,n,r){var a=new Set,o=[],i=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return EN(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return EN(e.name)[0]})));for(var d=(0,ee.Z)(t);d.length>0;){var f=d.pop();(Kj(f)||Yj(f)||Qj(f))&&null==i&&(s=(i=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):o.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var Zj=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],qj=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],Xj=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function Kj(e){return Zj.indexOf(e.op)>=0}function Yj(e){return qj.indexOf(e.op)>=0}function Qj(e){return Xj.indexOf(e.op)>=0}var Jj=function(){function t(e,n){var r=this;vr(this,t),this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((function(n){r._functionExecutorMap[n]=new t(e.functions[n],r)}))}return br(t,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,ee.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=Hj(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return EN(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var u=new Set,c=[];o.length>0;){var l=o.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&o.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"cloneAndKeepTensor",value:function(e){if(null==e)return null;var t=e.clone();return Gl(t),t}},{key:"cloneTensorList",value:function(e){var t=this;if(!e)return null;var n=e.map((function(e){return t.cloneAndKeepTensor(e)}));return n}},{key:"cloneTensorMap",value:function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,X.Z)(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))}},{key:"execute",value:function(t,n){var r=this;this.disposeIntermediateTensors(),t=this.mapInputs(t);var a=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);var o=a.map((function(e){return r.graph.nodes[EN(e)[0]]})),i=n.map((function(e){return EN(e)[0]})),s=i.map((function(e){return r.graph.nodes[e]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(o,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(t,s),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=wa().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}var l={},d={};return Ul((function(){var e=new Wj(r.weightMap,l,d,r.functionExecutorMap),a=Object.assign({},r.weightMap);r.keepIntermediateTensors&&(r.clonedTensorsMap=r.cloneTensorMap(r.weightMap)),Object.keys(t).forEach((function(e){var n=EN(e),o=(0,X.Z)(n,2),i=o[0],s=[];s[o[1]]=t[e],a[i]=s,r.keepIntermediateTensors&&(r.clonedTensorsMap[i]=r.cloneTensorList(s))}));for(var o=r.getFrozenTensorIds(a),s={},u=0;u<c.length;u++){var f=c[u];if(!a[f.name]){var p=Gj(f,a,e,r._resourceManager);if(ya(p))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[f.name]=p,r.keepIntermediateTensors&&(r.clonedTensorsMap[f.name]=r.cloneTensorList(p)),r.checkTensorForDisposal(f.name,f,a,e,o,i,s)}}return null==r.parent&&e.dispose(o),n.map((function(t){return SN(t,a,e)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[TN(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n=wr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&!r.isDisposed&&r.dispose()}}catch(sQ){n.e(sQ)}finally{n.f()}})),this.clonedTensorsMap=null)}},{key:"getIntermediateTensors",value:function(){return this.clonedTensorsMap}},{key:"_executeAsync",value:function(){var t=mr(pr().mark((function t(n,r){var a,o,i,s,u,c,l,d,f,p=arguments;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=p.length>2&&void 0!==p[2]&&p[2],o=p.length>3&&void 0!==p[3]?p[3]:{},i=p.length>4&&void 0!==p[4]?p[4]:{},this.disposeIntermediateTensors(),a||(n=this.mapInputs(n),this.checkInputs(n),this.checkInputShapeAndType(n),r=this.mapOutputs(r),this.checkOutputs(r));try{this.keepIntermediateTensors=wa().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}return s=new Wj(this.weightMap,o,i,this.functionExecutorMap),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),t.next=10,this.executeWithControlFlow(n,s,r,a);case 10:return u=t.sent,c=r.map((function(e){return SN(e,u,s)})),l=c.map((function(e){return e.id})),d=Object.keys(n).map((function(e){return n[e].id})),f=new Set([].concat((0,ee.Z)(l),(0,ee.Z)(d),(0,ee.Z)(this.weightIds))),Object.values(u).forEach((function(e){e.forEach((function(e){!e||e.isDisposed||f.has(e.id)||e.dispose()}))})),null==this.parent&&s.dispose(f),t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=mr(pr().mark((function e(t,n,r){var a,o=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=mr(pr().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return k.graph.nodes[EN(e)[0]]})),s=r.map((function(e){return EN(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),c=Hj(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,f=c.dynamicNode,p=c.syncInputs,h=[].concat((0,ee.Z)(i),(0,ee.Z)(this.graph.weights),(0,ee.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=EN(e),r=(0,X.Z)(n,2),a=r[0],o=[];o[r[1]]=t[e],m[a]=o})),v={},y=this.getFrozenTensorIds(m),g={};case 12:if(!(h.length>0)){e.next=18;break}return b=this.processStack(i,h,n,m,g,y,s,v,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!Kj(e)&&!SN(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=f&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,o,i,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&kN("isConstant",e.node,r,n)){var f=_N(e.node.name,n),p=(0,X.Z)(f,1);d=p[0]}if(null==r[e.node.name]){var h=Gj(e.node,r,n,c._resourceManager);if(!d){var m=_N(e.node.name,n),v=(0,X.Z)(m,1);d=v[0]}var y=n.currentContext;ya(h)?l.push(h.then((function(l){return r[d]=l,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(l)),n.currentContext=y,c.checkTensorForDisposal(d,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=h,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(h)),c.checkTensorForDisposal(d,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=_N(e.name,n),s=(0,X.Z)(i,1)[0];!a[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!SN(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!SN(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=EN(n),o=(0,X.Z)(a,1)[0],i=t.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){var s=i.attrParams.shape.value;Mr(s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e})),(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Mr(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t,n,r={};for(var a in e){var o=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=o?r[o.name]=e[a]:r[a]=e[a]}return r}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=EN(e),r=(0,X.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)||void 0===n?void 0:n.outputs)||void 0===r?void 0:r[e];return null!=a?a.name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=EN(e),r=(0,X.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),t}(),$j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vr(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return br(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),eR="?tfjs-format=file",tR="model.json",nR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;vr(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new $j}return br(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return ya(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new Jj(XN.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var o=XN.Instance.transformGraph(e.modelInitializer);this.initializer=new Jj(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addStructuredOutputNames",value:function(e){var t=this;if(this.structuredOutputKeys){var n={};return(e instanceof Fu?[e]:e).forEach((function(e,r){return n[t.structuredOutputKeys[r]]=e})),n}return e}},{key:"predict",value:function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}},{key:"predictAsync",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.executeAsync(t,this.outputNodes);case 2:return r=e.sent,e.abrupt("return",this.addStructuredOutputNames(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"normalizeInputs",value:function(e){var t,n=this;if(!(e instanceof Fu)&&!Array.isArray(e)){var r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(var a in r){var o=r[a];null!=o.resourceId&&(e[a]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];var i=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+i!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-i," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var s=0;return this.inputNodes.reduce((function(t,r){var a,o,i,u=null===(i=null===(o=null===(a=n.signature)||void 0===a?void 0:a.inputs)||void 0===o?void 0:o[r])||void 0===i?void 0:i.resourceId;return t[r]=null!=u?n.resourceIdToCapturedInput[u]:e[s++],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.initializer){e.next=2;break}return e.abrupt("return",[]);case 2:if(null!=this.initializerSignature){e.next=6;break}return e.abrupt("return",this.initializer.executeAsync({},[]));case 6:return e.abrupt("return",this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;r<n.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.resourceIdToCapturedInput){e.next=6;break}return e.t0=this,e.next=4,this.executeInitializerGraphAsync();case 4:e.t1=e.sent,e.t0.setResourceIdToCapturedInput.call(e.t0,e.t1);case 6:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=10,this.executor.executeAsync(t,n);case 10:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Vl(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),e}();function rR(e){return aR.apply(this,arguments)}function aR(){return aR=mr(pr().mark((function e(t){var n,r,a,o=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:s,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=iR(t)),a=new nR(t,n,r),e.next=9,a.load();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),aR.apply(this,arguments)}function oR(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");var t;if(e instanceof Array){var n=(0,X.Z)(e,2),r=n[0],a=n[1];if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");t=af(Oc(r,Fc(r.weightsManifest),a))}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=af(e)}var o=new nR(t);return o.load(),o}function iR(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat(tR).concat(eR)}var sR="4.2.0";function uR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(hR(e)){var o=Array.isArray(e)?[]:{};for(var i in r.add(e),e){var s=uR(e[i],t,n,r);o[i]=s}return r.delete(e),e.__proto__&&(o.__proto__=e.__proto__),o}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function cR(e){return lR(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:dR)}function lR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(hR(r)){var o=Array.isArray(r)?[]:{};n.add(r);var i=function(r){var a=lR(e.map((function(e){return e[r]})),t,n);o[r]=a};for(var s in r)i(s);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function dR(e){return null===e?null:hR(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function fR(e,t){return pR.apply(this,arguments)}function pR(){return pR=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,uR(t,n,r),a=0,o=Array.from(r.keys());case 3:if(!(a<o.length)){e.next=14;break}if(i=o[a],!ya(s=r.get(i))){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(i,u);case 11:a++,e.next=3;break;case 14:return c=uR(t,n,r),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)}))),pR.apply(this,arguments)}function hR(e){var t=!1;wa().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof r(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Fu)&&!(e instanceof Promise)&&!t)}function mR(e){return function(e,t){return uR(e,t)}(e,vR)}function vR(e){return e instanceof Fu?{value:e.clone(),recurse:!1}:hR(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var yR=function(){function e(t){if(vr(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return br(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=wr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(sQ){n.e(sQ)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),gR=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.call(this,n.INITIAL_CAPACITY)}return br(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){WS(_u(n.prototype),"isFull",this).call(this)&&this.expand(),WS(_u(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){WS(_u(n.prototype),"isFull",this).call(this)&&this.expand(),WS(_u(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(yR);function bR(e){return new TR(e)}function xR(e){return new ER(e)}function wR(e,t){return new PR(e,t)}function kR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SR.FAIL;return new FR(e,t)}gR.INITIAL_CAPACITY=32;var SR,_R=function(){function e(){vr(this,e)}return br(e,[{key:"toArray",value:function(){var e=mr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=mr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new MR(this,e)}},{key:"filter",value:function(e){return new RR(this,e)}},{key:"map",value:function(e){return new AR(this,e)}},{key:"mapAsync",value:function(e){return new OR(this,e)}},{key:"serialMapAsync",value:function(e){return new OR(this,e).serial()}},{key:"flatmap",value:function(e){return new DR(this,e)}},{key:"forEachAsync",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){return new jR(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dR;return this.rowMajorBatch(e,t).map((function(e){return cR(e,n)}))}},{key:"concatenate",value:function(e,t){return new PR(bR([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new NR(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new IR(this,e)}},{key:"prefetch",value:function(e){return new zR(this,e)}},{key:"shuffle",value:function(e,t){return new BR(this,e,t)}},{key:"serial",value:function(){return new CR(this)}}]),e}(),TR=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).items=e,r.trav=0,r}return br(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:mR(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),ER=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).nextFn=e,r}return br(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),CR=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),IR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Vl(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),NR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),jR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return vr(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=o,a.lastRead=Promise.resolve({value:null,done:!1}),a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),RR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Vl(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),AR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=Ju(t.value),r=this.transform(t.value),a=Ju(r),o=wr(n);try{for(o.s();!(i=o.n()).done;)Qu(s=i.value,a)||s.dispose()}catch(sQ){o.e(sQ)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),MR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),OR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=Ju(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=Ju(r),o=wr(n);try{for(o.s();!(i=o.n()).done;)Qu(s=i.value,a)||s.dispose()}catch(sQ){o.e(sQ)}finally{o.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),LR=function(e){Su(n,e);var t=Eu(n);function n(){var e;return vr(this,n),(e=t.call(this)).outputQueue=new gR,e.lastRead=Promise.resolve({value:null,done:!1}),e}return br(n,[{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),DR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=Ju(t.value),r=this.transform(t.value),a=Ju(r),this.outputQueue.pushAll(r),o=wr(n);try{for(o.s();!(i=o.n()).done;)Qu(s=i.value,a)||s.dispose()}catch(sQ){o.e(sQ)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(LR),PR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return br(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_R);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(SR||(SR={}));var FR=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SR.FAIL;return vr(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return br(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof _R?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,fR(this.iterators,a);case 7:if(o=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===SR.FAIL?14:e.t0===SR.SHORTEST?15:(e.t0,SR.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:o,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),zR=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new yR(r),a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(_R),BR=function(e){Su(n,e);var t=Eu(n);function n(e,r,a){var o;return vr(this,n),(o=t.call(this,e,r)).upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=qm.alea(a||mu().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return br(n,[{key:"next",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=mr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zR),UR=function(){function e(){vr(this,e),this.size=null}return br(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return Mr(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,HR));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Ul((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return VR(mr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Ul((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return VR(mr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return VR(mr(pr().mark((function n(){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,VR(mr(pr().mark((function t(){var r;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=xR(mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",wR(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=qm.alea(t||mu().toString());return VR(mr(pr().mark((function t(){var o;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.int32(),n&&(o+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,o.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function VR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Su(a,n);var r=Eu(a);function a(){var e;return vr(this,a),(e=r.apply(this,arguments)).size=t,e}return br(a,[{key:"iterator",value:function(){var t=mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(UR))}function GR(e){return VR(mr(pr().mark((function t(){return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",bR(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function WR(e){if(!hR(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return VR(mr(pr().mark((function t(){var n;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fR(e,(function(e){if(e instanceof UR)return{value:e.iterator(),recurse:!1};if(hR(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",kR(n,SR.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)}function HR(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Fu||bu(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Fu?Rv(e):xc(e)}(e),recurse:!1}:{value:null,recurse:!0}}UR.MAX_BUFFER_SIZE=1e4;var ZR=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).input=e,r}return br(n,[{key:"iterator",value:function(){var e=mr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return t=e.sent,n=t.decodeUTF8(),r=n.split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(UR),qR='"',XR=Symbol("out"),KR=Symbol("field"),YR=Symbol("quote"),QR=Symbol("quoteafterquote"),JR=Symbol("quoteinquote"),$R=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new ZR(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(Mr(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return br(n,[{key:"columnNames",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=7;break}throw new Error("Column names must be provided if there is no header line.");case 7:this.fullColumnNames&&t&&Mr(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}));case 8:if(this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),Mr(0===(r=Object.keys(n).filter((function(e){return n[e]>1}))).length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=22;break}a=0,o=Object.keys(this.columnConfigs);case 14:if(!(a<o.length)){e.next=22;break}if(i=o[a],-1!==this.fullColumnNames.indexOf(i)){e.next=19;break}throw new Error('The key "'+i+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 19:a++,e.next=14;break;case 22:this.columnNamesValidated=!0;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=14;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return r=n.value,a=this.parseRow(r,!1),e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=mr(pr().mark((function e(){var t,n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.next=5,this.base.iterator();case 5:return t=e.sent,this.hasHeader&&(t=t.skip(1)),e.abrupt("return",t.map((function(e){return n.makeDataElement(e)})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var o=this.fullColumnNames[a],i=this.columnConfigs?this.columnConfigs[o]:null;if(!this.configuredColumnsOnly||i){var s=t[a],u=null;if(""===s)if(i&&void 0!==i.default)u=i.default;else{if(i&&(i.required||i.isLabel))throw new Error("Required column ".concat(o," is empty in this line: ").concat(e));u=void 0}else{var c=Number(s);if(isNaN(c))u=i&&"bool"===i.dtype?this.getBoolean(s):s;else if(i&&i.dtype)switch(i.dtype){case"float32":default:u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s)}else u=c}i&&i.isLabel?r[o]=u:n[o]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,o=XR,i=0;i<a;i++)switch(o){case XR:switch(e.charAt(i)){case qR:r=i+1,o=YR;break;case this.delimiter:if(r=i+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),o=XR;break;default:o=KR,r=i}break;case KR:if(e.charAt(i)===this.delimiter)n.push(e.substring(r,i)),o=XR,r=i+1;break;case YR:if(e.charAt(i)===qR)o=QR;break;case QR:switch(e.charAt(i)){case this.delimiter:n.push(e.substring(r,i-1)),o=XR,r=i+1;break;case qR:o=YR;break;default:o=JR}break;case JR:if(e.charAt(i)===qR)o=YR}if(o===QR?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(UR),eA=function(e){Su(n,e);var t=Eu(n);function n(e){var r;vr(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between "+"2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return br(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=mr(pr().mark((function e(){var t,n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=17;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=19;break;case 17:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=19;break}throw new Error("Mismatch in sampling rate: "+"Expected: ".concat(this.sampleRateHz,"; ")+"Actual: ".concat(this.audioContext.sampleRate));case 19:return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),e.abrupt("return");case 27:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(o=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var o=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(o),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(Dr(t));return n.set(e,n.length-e.length),xc(n,t)}}],[{key:"create",value:function(){var e=mr(pr().mark((function e(){var t,r,a=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},wa().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(_R),tA=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;if(vr(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=Lv([0],"int32"),a.webcamConfig.centerCrop){var o=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,i=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-o)/2,u=(1-i)/2,c=s+o,l=i+u;a.cropBox=Dv([u,s,l,c],[1,4])}else a.cropBox=Dv([0,0,1,1],[1,4]);return a}return br(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=mr(pr().mark((function e(){var t=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&Mr("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". ")+"Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 11:if(this.stream){e.next=13;break}throw new Error("Could not obtain video from webcam.");case 13:try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,e.abrupt("return",new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}})));case 17:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=Sf(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return Ul((function(){var n,r=Gh(jl(e,"float32"),0),a=(n=gg.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return Pp(n,a.slice(1))}))}},{key:"capture",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=mr(pr().mark((function e(t){var r,a,o=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},wa().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=9;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=7;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 7:t.width=r.resizeWidth,t.height=r.resizeHeight;case 9:return a=new n(t,r),e.next=12,a.start();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_R),nA=br((function e(){vr(this,e)})),rA=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"split",value:function(e){return new aA(this,e)}}]),n}(_R),aA=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.impl=new oA(e,r),a}return br(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(rA),oA=function(e){Su(n,e);var t=Eu(n);function n(e,r){var a;return vr(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=wr(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)o=a.value,this.outputQueue.push(o)}catch(sQ){r.e(sQ)}finally{r.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(LR),iA=function(e){Su(n,e);var t=Eu(n);function n(){return vr(this,n),t.apply(this,arguments)}return br(n,[{key:"decodeUTF8",value:function(){return new sA(this)}}]),n}(_R),sA=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),(r=t.call(this)).upstream=e,r.impl=new uA(e),r}return br(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(rA),uA=function(e){Su(n,e);var t=Eu(n);function n(e){var a;if(vr(this,n),(a=t.call(this)).upstream=e,wa().get("IS_BROWSER"))a.decoder=new TextDecoder("utf-8");else{var o=r(1601).StringDecoder;a.decoder=new o("utf8")}return a}return br(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var e=mr(pr().mark((function e(){var t,n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=7;break}return e.abrupt("return",!1);case 7:n=t.value;case 8:return r=wa().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(LR),cA=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vr(this,n),(r=t.call(this)).file=e,r.options=a,Mr(e instanceof Uint8Array||!!wa().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return br(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=mr(pr().mark((function e(){var t,n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var o=n.file.slice(n.offset,r);a.readAsArrayBuffer(o)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(iA);function lA(e){return dA.apply(this,arguments)}function dA(){return dA=mr(pr().mark((function e(t){var n,r,a,o,i,s,u=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2?u[2]:void 0,"string"===typeof t?a=t:(a=t.url,o=fA(t)),e.next=5,(r||vu)(a,o);case 5:if(!(i=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,i.arrayBuffer();case 10:return e.t1=e.sent,s=new e.t0(e.t1),e.abrupt("return",new cA(s,n));case 15:throw new Error(i.statusText);case 16:case"end":return e.stop()}}),e)}))),dA.apply(this,arguments)}var fA=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function pA(e){return"string"===typeof e&&"file://"===e.slice(0,7)}var hA=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vr(this,n),(r=t.call(this)).input=e,r.options=a,r}return br(n,[{key:"iterator",value:function(){var e=mr(pr().mark((function e(){var t;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pA(this.input)&&wa().get("IS_NODE")&&(t=r(7792),this.input=t.readFileSync(this.input.slice(7))),e.abrupt("return",new cA(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(nA),mA=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vr(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return br(n,[{key:"iterator",value:function(){var e=mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pA(this.url)){e.next=4;break}return e.abrupt("return",new hA(this.url,this.fileOptions).iterator());case 4:return e.abrupt("return",lA(this.url,this.fileOptions));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(nA);function vA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new $R(new mA(e),t)}function yA(e){var t=xR(e);return VR(mr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function gA(e){return VR(mr(pr().mark((function t(){var n;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",xR((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function bA(e,t){return xA.apply(this,arguments)}function xA(){return(xA=mr(pr().mark((function e(t,n){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tA.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wA(e){return kA.apply(this,arguments)}function kA(){return(kA=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eA.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SA="4.2.0";function _A(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Mr("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var TA=qv,EA=function(e){Su(n,e);var t=Eu(n);function n(){var e;return vr(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new kr(Ft(e),Fl()),e}return br(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,wa().get("IS_NODE")&&Bs("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ta(n[0])){var a=n.map((function(e){return yu(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?Xg(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):la(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return gu(e)}));return Nl(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Nl(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return Fl().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mu(),t(),r=mu()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){_A([e],"where");var t=this.readSync(e.dataId);return TA(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return WS(_u(n.prototype),"epsilon",this).call(this)}}]),n}(Sr);EA.nextDataId=0;function CA(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(_A(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=Dr(s.shape),d=n||s.dtype,f=Kr(d,l),p=0;p<l;++p)f[p]=t(c[p],o);return u.makeTensorInfo(s.shape,d,f)}}function IA(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(_A(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}Ql("cpu",(function(){return new EA}),1);var NA=CA(_o,(function(e){return e>=0?e:Math.exp(e)-1})),jA={kernelName:_o,backendName:"cpu",kernelFunc:NA};function RA(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var AA={kernelName:Uo,backendName:"cpu",kernelFunc:RA};function MA(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;_A([a],"leakyRelu");for(var i=Dr(a.shape),s=n.data.get(a.dataId).values,u=Xr("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var OA={kernelName:qo,backendName:"cpu",kernelFunc:MA};function LA(e){return function(t,n,r,a,o){var i=Id(t,n),s=i.length,u=sa(i),c=Xr(o,Dr(i)),l=t.length,d=n.length,f=sa(t),p=sa(n),h=Ed(t,i),m=Ed(n,i);if(h.length+m.length===0)for(var v=0;v<c.length;++v)c[v]=e(r[v%r.length],a[v%a.length]);else for(var y=function(){var t=va(g,s,u),n=t.slice(-l);h.forEach((function(e){return n[e]=0}));var o=ma(n,l,f),i=t.slice(-d);m.forEach((function(e){return i[e]=0}));var v=ma(i,d,p);c[g]=e(r[o],a[v])},g=0;g<c.length;++g)y();return[c,i]}}var DA=LA((function(e,t){return e<0?t*e:e}));function PA(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;_A([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=DA(r.shape,a.shape,o,i,"float32"),u=(0,X.Z)(s,2),c=u[0],l=u[1];return n.makeTensorInfo(l,"float32",c)}var FA={kernelName:Ai,backendName:"cpu",kernelFunc:PA},zA=CA(Bi,(function(e){return Math.max(0,e)})),BA={kernelName:Bi,backendName:"cpu",kernelFunc:zA},UA=CA(Zi,(function(e){return Math.min(Math.max(0,e),6)})),VA={kernelName:Zi,backendName:"cpu",kernelFunc:UA};function GA(e){return function(t,n,r){for(var a=Xr(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}var WA=GA((function(e){return 1/(1+Math.exp(-e))})),HA=CA(as,(function(e){return 1/(1+Math.exp(-e))})),ZA={kernelName:as,backendName:"cpu",kernelFunc:HA};function qA(e,t,n,r,a){if("linear"===n)return RA({inputs:{x:t},backend:e});if("relu"===n)return zA({inputs:{x:t},backend:e});if("elu"===n)return NA({inputs:{x:t},backend:e});if("relu6"===n)return UA({inputs:{x:t},backend:e});if("prelu"===n)return PA({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return MA({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return HA({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function XA(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var KA={kernelName:Ja,backendName:"cpu",kernelFunc:XA};function YA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return XA({inputs:{real:YA(e,t,"float32"),imag:YA(e,t,"float32")},backend:e});var r=fa(Dr(t),n);return e.makeTensorInfo(t,n,r)}function QA(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var JA={kernelName:Fi,backendName:"cpu",kernelFunc:QA};function $A(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=hu([0],n),o=LA((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),i=(0,X.Z)(o,2),s=i[0];return[i[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function eM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return RA({inputs:{x:a},backend:n});var i=YA(n,a.shape,a.dtype),s=eM({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=XA({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=QA({inputs:{input:a},backend:n}),l=eM({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),l}if(!Jr(a.dtype,o)){var d=RA({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}var f=$A(n.data.get(a.dataId).values,a.shape,a.dtype,o),p=(0,X.Z)(f,3),h=p[0],m=p[1],v=p[2];return n.makeTensorInfo(h,m,v)}var tM={kernelName:Ka,backendName:"cpu",kernelFunc:eM};function nM(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,u=o;_A([i,s],e);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,d="string"===i.dtype?Ib(c):c,f="string"===i.dtype?Ib(l):l,p=r||i.dtype,h=t(i.shape,s.shape,d,f,p),m=(0,X.Z)(h,2),v=m[0],y=m[1];return u.makeTensorInfo(y,p,v)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){var c=eM({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,p=u.data.get(d.dataId).values,h=u.data.get(f.dataId).values,m=eM({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),v=u.data.get(m.dataId),y=v.complexTensorInfos.real,g=v.complexTensorInfos.imag,b=u.data.get(y.dataId).values,x=u.data.get(g.dataId).values,w=n(i.shape,s.shape,p,h,b,x),k=(0,X.Z)(w,3),S=k[0],_=k[1],T=k[2],E=u.makeTensorInfo(T,"float32",S),C=u.makeTensorInfo(T,"float32",_),I=XA({inputs:{real:E,imag:C},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(C),I}var N=u.data.get(i.dataId).values,j=u.data.get(s.dataId).values,R=r||i.dtype,A=t(i.shape,s.shape,N,j,R),M=(0,X.Z)(A,2),O=M[0],L=M[1];return u.makeTensorInfo(L,R,O)}}function rM(e){return function(t,n,r,a,o,i){var s=Id(t,n),u=Dr(s),c=s.length,l=sa(s),d=Xr("float32",u),f=Xr("float32",u),p=Ed(t,s),h=Ed(n,s),m=Xg(r,a),v=Xg(o,i),y=t.length,g=sa(t),b=n.length,x=sa(n);if(p.length+h.length===0)for(var w=0;w<d.length;w++){var k=w%m.length,S=w%v.length,_=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);d[w]=_.real,f[w]=_.imag}else for(var T=function(){var t=va(E,c,l),n=t.slice(-y);p.forEach((function(e){return n[e]=0}));var r=ma(n,y,g),a=t.slice(-b);h.forEach((function(e){return a[e]=0}));var o=ma(a,b,x),i=e(m[2*r],m[2*r+1],v[2*o],v[2*o+1]);d[E]=i.real,f[E]=i.imag},E=0;E<d.length;E++)T();return[d,f,s]}}var aM=LA((function(e,t){return e+t})),oM=rM((function(e,t,n,r){return{real:e+n,imag:t+r}})),iM=nM(Na,aM,oM),sM={kernelName:Na,backendName:"cpu",kernelFunc:iM};function uM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=Dr(a.shape),s=Hr(o,i),u=Dr(s);Mr(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var cM={kernelName:Ui,backendName:"cpu",kernelFunc:uM};function lM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;_A([a,o],"matMul");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],f=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),v=Dr(h),y=Dr(m),g=Id(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,p]);Mr(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(o.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")}));for(var b=s?[y,p,d]:[y,d,p],x=uM({inputs:{x:a},backend:n,attrs:{shape:i?[v,l,f]:[v,f,l]}}),w=uM({inputs:{x:o},backend:n,attrs:{shape:b}}),k=i?x.shape[1]:x.shape[2],S=i?x.shape[2]:x.shape[1],_=s?w.shape[1]:w.shape[2],T=Math.max(v,y),E=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,I=sa(x.shape),N=sa(w.shape),j=i?[I[0],1,I[1]]:[I[0],I[1],1],R=(0,X.Z)(j,3),A=R[0],M=R[1],O=R[2],L=s?[1,N[1],N[0]]:[N[1],1,N[0]],D=(0,X.Z)(L,3),P=D[0],F=D[1],z=D[2],B=S*_,U=Nl([T,S,_],x.dtype),V=U.values,G=n.blockSize,W=0;W<T;W++)for(var H=W%v,Z=W%y,q=0;q<S;q+=G)for(var K=Math.min(q+G,S),Y=0;Y<_;Y+=G)for(var Q=Math.min(Y+G,_),J=0;J<k;J+=G)for(var $=Math.min(J+G,k),ee=q;ee<K;ee++)for(var te=Y;te<Q;te++){for(var ne=0,re=J;re<$;re++){ne+=E[H*A+ee*M+re*O]*C[re*P+te*F+Z*z]}V[W*B+(ee*_+te)]+=ne}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(g,U.dtype,U.values)}var dM={kernelName:Wa,backendName:"cpu",kernelFunc:lM};var fM={kernelName:Ps,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,f=i.transposeB,p=i.activation,h=i.leakyreluAlpha,m=[];t=lM({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:o}),c&&(n=iM({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),p&&(r=qA(o,t,p,l,h),m.push(t),t=r);for(var v=0,y=m;v<y.length;v++){var g=y[v];o.disposeIntermediateTensorInfo(g)}return t}};function pM(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var hM={kernelName:Ea,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;_A(t,"abs");var r=new Float32Array(Dr(t.shape));return r=pM(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},mM=CA(Ca,(function(e){return Math.acos(e)})),vM={kernelName:Ca,backendName:"cpu",kernelFunc:mM},yM=CA(Ia,(function(e){return Math.acosh(e)})),gM={kernelName:Ia,backendName:"cpu",kernelFunc:yM};var bM={kernelName:ja,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;_A(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=Nl(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function xM(e,t,n,r,a){for(var o=t.length,i=Dr(t),s=sa(t),u=sa(a),c=Xr(n,Dr(a)),l=0;l<i;++l){for(var d=va(l,o,s),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[r[p]];c[ma(f,o,u)]=e[l]}return c}function wM(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;_A(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=xM(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var kM={kernelName:Is,backendName:"cpu",kernelFunc:wM};var SM={kernelName:Ra,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;_A(a,"all");var s=Zr(o,a.shape),u=s,c=Mh(u,a.shape.length),l=a;null!=c&&(l=wM({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Lh(u.length,a.shape.length)),Ah("all",u,l.shape.length);for(var d=jh(l.shape,u),f=(0,X.Z)(d,2),p=f[0],h=Dr(f[1]),m=fa(Dr(p),l.dtype),v=n.data.get(l.dataId).values,y=0;y<m.length;++y){for(var g=y*h,b=v[g],x=0;x<h;++x){var w=v[g+x];b=b&&w}m[y]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,m);if(i){var S=uM({inputs:{x:k},backend:n,attrs:{shape:Rh(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var _M={kernelName:Aa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;_A(a,"any");var s=Zr(o,a.shape),u=s,c=Mh(u,a.shape.length),l=a;null!=c&&(l=wM({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Lh(u.length,a.shape.length)),Ah("any",u,l.shape.length);for(var d=jh(l.shape,u),f=(0,X.Z)(d,2),p=f[0],h=Dr(f[1]),m=fa(Dr(p),l.dtype),v=n.data.get(l.dataId).values,y=0;y<m.length;++y){for(var g=y*h,b=v[g],x=0;x<h;++x){var w=v[g+x];b=b||w}m[y]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,m);if(i){var S=uM({inputs:{x:k},backend:n,attrs:{shape:Rh(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var TM={kernelName:Ma,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;_A(a,"argMax");var i=Zr(o,a.shape),s=Mh(i,a.shape.length),u=a,c=[];null!=s&&(u=wM({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=Lh(i.length,u.shape.length)),Ah("argMax",i=[i[0]],u.shape.length);for(var l=jh(u.shape,i),d=(0,X.Z)(l,2),f=d[0],p=d[1],h=fa(Dr(f),"int32"),m=Dr(p),v=n.data.get(u.dataId).values,y=0;y<h.length;++y){for(var g=y*m,b=v[g],x=0,w=0;w<m;++w){var k=v[g+w];k>b&&(b=k,x=w)}h[y]=x}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}};var EM={kernelName:Oa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;_A(a,"argMin");var i=Zr(o,a.shape),s=Mh(i,a.shape.length),u=a,c=[];null!=s&&(u=wM({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=Lh(i.length,u.shape.length)),Ah("argMin",i=[i[0]],u.shape.length);for(var l=jh(u.shape,i),d=(0,X.Z)(l,2),f=d[0],p=d[1],h=fa(Dr(f),"int32"),m=Dr(p),v=n.data.get(u.dataId).values,y=0;y<h.length;++y){for(var g=y*m,b=v[g],x=0,w=0;w<m;++w){var k=v[g+w];k<b&&(b=k,x=w)}h[y]=x}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}},CM=CA(La,(function(e){return Math.asin(e)})),IM={kernelName:La,backendName:"cpu",kernelFunc:CM},NM=CA(Da,(function(e){return Math.asinh(e)})),jM={kernelName:Da,backendName:"cpu",kernelFunc:NM},RM=CA(Pa,(function(e){return Math.atan(e)})),AM={kernelName:Pa,backendName:"cpu",kernelFunc:RM},MM=LA((function(e,t){return Math.atan2(e,t)})),OM=nM(za,MM),LM={kernelName:za,backendName:"cpu",kernelFunc:OM},DM=CA(Fa,(function(e){return Math.atanh(e)})),PM={kernelName:Fa,backendName:"cpu",kernelFunc:DM};function FM(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Nl(a.outShape,n),v=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],g=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*y,k=x*r[0],S=0;S<a.inChannels;++S)for(var _=0;_<a.outHeight;++_)for(var T=_*i-f,E=Math.max(0,T),C=Math.min(a.inHeight,l+T),I=w+_*g,N=0;N<a.outWidth;++N){for(var j=N*s-p,R=Math.max(0,j),A=Math.min(a.inWidth,d+j),M=h,O=0,L=0,D=E;D<C;D+=u){for(var P=k+D*r[1],F=R;F<A;F+=c){var z=e[P+F*r[2]+S];"max"===o&&z>M?M=z:"avg"===o&&(O+=z,L++)}if(isNaN(M))break}v[I+N*b+S]="avg"===o?O/L:M}return m}function zM(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=Nl(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=Nl(t,n,e),v=0;v<r.batchSize;++v)for(var y=0;y<r.inChannels;++y)for(var g=0;g<r.outHeight;++g){for(var b=g*s-p,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,d+b),k=0;k<r.outWidth;++k){for(var S=k*u-h,_=S;_<0;)_+=l;for(var T=Math.min(r.inWidth,f+S),E=Number.NEGATIVE_INFINITY,C=-1,I=x;I<w;I+=c)for(var N=I-b,j=_;j<T;j+=l){var R=j-S,A=m.get(v,I,j,y);A>E&&(E=A,C=a?o?((v*r.inHeight+I)*r.inWidth+j)*r.inChannels+y:(I*r.inWidth+j)*r.inChannels+y:N*f+R)}i.set(C,v,g,k,y)}}return i}function BM(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,y=a.padInfo.left,g="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Nl(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],_=a.outShape[4],T=0;T<a.batchSize;++T)for(var E=T*w,C=T*r[0],I=0;I<a.inChannels;++I)for(var N=0;N<a.outDepth;++N){for(var j=N*i-m,R=j;R<0;)R+=c;for(var A=Math.min(a.inDepth,f+j),M=E+N*k,O=0;O<a.outHeight;++O){for(var L=O*s-v,D=L;D<0;)D+=l;for(var P=Math.min(a.inHeight,p+L),F=M+O*S,z=0;z<a.outWidth;++z){for(var B=z*u-y,U=B;U<0;)U+=d;for(var V=Math.min(a.inWidth,h+B),G=F+z*_,W=g,H=0,Z=0,q=R;q<A;q+=c){for(var X=C+q*r[1],K=D;K<P;K+=l){for(var Y=X+K*r[2],Q=U;Q<V;Q+=d){var J=e[Y+Q*r[3]+I];if("max"===o&&J>W?W=J:"avg"===o&&(H+=J,Z++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}x[G+I]="avg"===o?H/Math.max(Z,1):W}}}return b}var UM={kernelName:Ba,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_A(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;Mr(Mp(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=Sp(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Fr(l.inShape,l.outShape))c=RA({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=sa(a.shape),p=FM(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var VM={kernelName:Va,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;_A(a,"avgPool3d");var l=_p(a.shape,o,i,1,s,u,c),d=BM(n.data.get(a.dataId).values,a.shape,a.dtype,sa(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var GM={kernelName:Ga,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;_A([a,o],"avgPool3DGrad");for(var l=_p(o.shape,i,s,1,u,c),d=l.strideDepth,f=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,v=l.filterWidth,y=l.dilationDepth,g=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,w=l.effectiveFilterHeight,k=l.effectiveFilterWidth,S=x-1-l.padInfo.front,_=k-1-l.padInfo.left,T=w-1-l.padInfo.top,E=Nl(o.shape,"float32"),C=1/(h*m*v),I=n.bufferSync(a),N=0;N<l.batchSize;++N)for(var j=0;j<l.inChannels;++j)for(var R=0;R<l.inDepth;++R)for(var A=0;A<l.inHeight;++A)for(var M=0;M<l.inWidth;++M){for(var O=R-S,L=A-T,D=M-_,P=0,F=0;F<x;F+=y){var z=(O+F)/d;if(!(z<0||z>=l.outDepth||Math.floor(z)!==z))for(var B=0;B<w;B+=g){var U=(L+B)/f;if(!(U<0||U>=l.outHeight||Math.floor(U)!==U))for(var V=0;V<k;V+=b){var G=(D+V)/p;if(!(G<0||G>=l.outWidth||Math.floor(G)!==G))P+=I.get(N,z,U,G,j)}}}E.set(P*C,N,R,A,M,j)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var WM={kernelName:Ua,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;_A([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=Sp(i.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterHeight,g=l.effectiveFilterWidth,b=g-1-l.padInfo.left,x=y-1-l.padInfo.top,w=Nl(i.shape,"float32"),k=1/(p*h),S=n.data.get(a.dataId).values,_=Nl(a.shape,"float32",S),T=0;T<l.batchSize;++T)for(var E=0;E<l.inChannels;++E)for(var C=0;C<l.inHeight;++C)for(var I=0;I<l.inWidth;++I){for(var N=C-x,j=I-b,R=0,A=0;A<y;A+=m){var M=(N+A)/d;if(!(M<0||M>=l.outHeight||Math.floor(M)!==M))for(var O=0;O<g;O+=v){var L=(j+O)/f;if(!(L<0||L>=l.outWidth||Math.floor(L)!==L))R+=_.get(T,M,L,E)}}w.set(R*k,T,C,I,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var HM={kernelName:Do,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;Mr(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Mr(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Mr(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),_A([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),v=h.length,y=p.length,g=f.length,b=d.length,x=0,w=0,k=0,S=0,_=0;_<l.length;++_)m[_]=h[x++]+(l[_]-d[w++])*p[k++]/Math.sqrt(f[S++]+c),x>=v&&(x=0),w>=b&&(w=0),k>=y&&(k=0),S>=g&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function ZM(e,t,n,r,a){var o=Vf(r,t,n),i=Dr(n),s=sa(r);if(o){var u=Gf(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c=Nl(r,a,"string"===a?Ib(e):e),l=Nl(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,ee.Z)(p))].concat((0,ee.Z)(f)))}return"string"===a?Nb(l.values):l.values}function qM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;_A(a,"slice");var s=Wf(a,o,i),u=(0,X.Z)(s,2),c=u[0],l=u[1];jf(a,c,l);var d=ZM(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,d)}var XM={kernelName:es,backendName:"cpu",kernelFunc:qM};var KM={kernelName:Ha,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;_A([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=Lg(a.shape,o,s),c=Dg(u.length,o.length),l=Pg(a.shape,o,s),d=Fg(i,o.length),f=zg(l,i,o.length),p=uM({inputs:{x:a},backend:n,attrs:{shape:u}}),h=wM({inputs:{x:p},backend:n,attrs:{perm:c}}),m=uM({inputs:{x:h},backend:n,attrs:{shape:l}}),v=qM({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}};function YM(e,t,n,r,a){for(var o=Dr(r),i=fa(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function QM(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=Nl([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}var JM={kernelName:Za,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=YM(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var $M={kernelName:Xa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=Id(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},eO=GA((function(e){return Math.ceil(e)})),tO=IA(Ya,eO),nO={kernelName:Ya,backendName:"cpu",kernelFunc:tO},rO=CA(Qa,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),aO={kernelName:Qa,backendName:"cpu",kernelFunc:rO},oO={kernelName:$a,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Dr(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};function iO(e,t,n,r){var a=Kr(n,Dr(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=Dr(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?Ib(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}function sO(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var uO={kernelName:Go,backendName:"cpu",kernelFunc:sO};function cO(e){var t=e.inputs,n=e.backend,r=Zr(e.attrs.axis,t[0].shape)[0];Eg(t.map((function(e){return e.shape})),r);var a=Cg(t.map((function(e){return e.shape})),r);if(0===Dr(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return Dr(e.shape)>0}));if(1===o.length)return RA({inputs:{x:o[0]},backend:n});if("complex64"===o[0].dtype){var i=o.map((function(e){return QA({inputs:{input:e},backend:n})})),s=o.map((function(e){return sO({inputs:{input:e},backend:n})})),u=cO({inputs:i,backend:n,attrs:{axis:r}}),c=cO({inputs:s,backend:n,attrs:{axis:r}}),l=XA({inputs:{real:u,imag:c},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var d=o.map((function(e){var t=Dr(e.shape.slice(r));return uM({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=Cg(d.map((function(e){return e.shape})),1);var p=1===d[0].shape[0],h=iO(f,a,t[0].dtype,p),m=Cg(o.map((function(e){return e.shape})),r),v=n.makeTensorInfo(m,t[0].dtype,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var lO={kernelName:eo,backendName:"cpu",kernelFunc:cO};function dO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;_A([a,o],"conv2d");for(var d=Lp(u),f=Tp(a.shape,o.shape,i,c,s,l,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,v=f.dilationWidth,y=f.padInfo.left,g=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new Lu(f.outShape,a.dtype),w=sa(a.shape),k=sa(o.shape),S=w[0],_=b?w[1]:w[2],T=b?w[2]:1,E=b?1:w[1],C=x.strides[0],I=b?x.strides[1]:x.strides[2],N=b?x.strides[2]:1,j=b?1:x.strides[1],R=n.data.get(a.dataId).values,A=n.data.get(o.dataId).values,M=x.values,O=0;O<f.batchSize;++O)for(var L=O*S,D=O*C,P=0;P<f.outHeight;++P)for(var F=D+P*I,z=P*f.strideHeight-g,B=0;B<p;++B){var U=z+B*m;if(!(U<0||U>=f.inHeight))for(var V=B*k[0],G=L+U*_,W=0;W<f.outWidth;++W)for(var H=F+W*N,Z=W*f.strideWidth-y,q=0;q<h;++q){var X=Z+q*v;if(!(X<0||X>=f.inWidth))for(var K=G+X*T,Y=V+q*k[1],Q=0;Q<f.inChannels;++Q){for(var J=R[K+Q*E],$=0;$<f.outChannels;++$)M[H+$*j]+=J*A[Y+$];Y+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,M)}var fO={kernelName:to,backendName:"cpu",kernelFunc:dO};var pO={kernelName:no,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;_A([a,o],"conv2dBackpropFilter");for(var d=Lp(u),f=Tp(a.shape,l,i,1,s,c,!1,d),p=f.strideHeight,h=f.strideWidth,m=f.filterHeight,v=f.filterWidth,y="channelsLast"===f.dataFormat,g=new Lu(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(o.dataId).values,S=new Lu(a.shape,a.dtype,w),_=new Lu(o.shape,o.dtype,k),T=0;T<m;++T)for(var E=Math.max(0,Math.ceil((x-T)/p)),C=Math.min(f.outHeight,(f.inHeight+x-T)/p),I=0;I<v;++I)for(var N=Math.max(0,Math.ceil((b-I)/h)),j=Math.min(f.outWidth,(f.inWidth+b-I)/h),R=0;R<f.inChannels;++R)for(var A=0;A<f.outChannels;++A){for(var M=0,O=0;O<f.batchSize;++O)for(var L=E;L<C;++L)for(var D=T+L*p-x,P=N;P<j;++P){var F=I+P*h-b;M+=y?S.get(O,D,F,R)*_.get(O,L,P,A):S.get(O,R,D,F)*_.get(O,A,L,P)}g.set(M,T,I,R,A)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var hO={kernelName:ro,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;_A([a,o],"conv2dBackpropInput");var d=sa(o.shape),f=sa(a.shape),p=Lp(c),h=Tp(i,o.shape,s,1,u,l,!1,p),m=new Lu(h.inShape,"float32"),v=m.values,y=n.data.get(a.dataId).values,g=n.data.get(o.dataId).values,b=(0,X.Z)(d,3),x=b[0],w=b[1],k=b[2],S=h.batchSize,_=h.filterHeight,T=h.filterWidth,E=h.inChannels,C=h.inHeight,I=h.inWidth,N=h.outChannels,j=h.outHeight,R=h.outWidth,A=h.strideHeight,M=h.strideWidth;p=h.dataFormat;for(var O=_-1-h.padInfo.top,L=T-1-h.padInfo.left,D="channelsLast"===p,P=m.strides[0],F=D?m.strides[1]:m.strides[2],z=D?m.strides[2]:1,B=D?1:m.strides[1],U=f[0],V=D?f[1]:f[2],G=D?f[2]:1,W=D?1:f[1],H=0;H<S;++H)for(var Z=0;Z<E;++Z)for(var q=0;q<C;++q)for(var K=q-O,Y=Math.max(0,Math.ceil(K/A)),Q=Math.min(j,(_+K)/A),J=0;J<I;++J){for(var $=J-L,ee=Math.max(0,Math.ceil($/M)),te=Math.min(R,(T+$)/M),ne=0,re=Y;re<Q;++re)for(var ae=re*A-K,oe=ee;oe<te;++oe)for(var ie=U*H+V*re+G*oe,se=x*(_-1-ae)+w*(T-1-(oe*M-$))+k*Z,ue=0;ue<N;++ue){ne+=y[ie+W*ue]*g[se+ue]}v[P*H+F*q+z*J+B*Z]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var mO={kernelName:ao,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;_A([a,o],"conv3d");for(var c=Ep(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,p=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,v=c.padInfo,y=v.front,g=v.left,b=v.top,x=new Lu(c.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(o.dataId).values,S=x.values,_=sa(a.shape),T=sa(o.shape),E=0;E<c.batchSize;++E)for(var C=E*_[0],I=E*x.strides[0],N=0;N<c.outDepth;++N)for(var j=I+N*x.strides[1],R=N*c.strideDepth-y,A=0;A<l;++A){var M=R+A*p;if(!(M<0||M>=c.inDepth))for(var O=A*T[0],L=C+M*_[1],D=0;D<c.outHeight;++D)for(var P=j+D*x.strides[2],F=D*c.strideHeight-b,z=0;z<d;++z){var B=F+z*h;if(!(B<0||B>=c.inHeight))for(var U=O+z*T[1],V=L+B*_[2],G=0;G<c.outWidth;++G)for(var W=P+G*c.outChannels,H=G*c.strideWidth-g,Z=0;Z<f;++Z){var q=H+Z*m;if(!(q<0||q>=c.inWidth))for(var X=U+Z*T[2],K=V+q*c.inChannels,Y=X,Q=0;Q<c.inChannels;++Q){for(var J=w[K+Q],$=0;$<c.outChannels;++$)S[W+$]+=J*k[Y+$];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var vO={kernelName:oo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape;_A([a,o],"conv3dBackpropFilterV2");for(var c=sa(a.shape),l=sa(o.shape),d=Ep(a.shape,u,i,1,s),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,v=d.filterHeight,y=d.filterWidth,g=new Lu(d.filterShape,"float32"),b=g.values,x=(0,X.Z)(g.strides,4),w=x[0],k=x[1],S=x[2],_=x[3],T=n.data.get(o.dataId).values,E=(0,X.Z)(l,4),C=E[0],I=E[1],N=E[2],j=E[3],R=n.data.get(a.dataId).values,A=(0,X.Z)(c,4),M=A[0],O=A[1],L=A[2],D=A[3],P=d.padInfo.front,F=d.padInfo.left,z=d.padInfo.top,B=0;B<m;++B)for(var U=Math.max(0,Math.ceil((P-B)/f)),V=Math.min(d.outDepth,(d.inDepth+P-B)/f),G=B*w,W=0;W<v;++W)for(var H=Math.max(0,Math.ceil((z-W)/p)),Z=Math.min(d.outHeight,(d.inHeight+z-W)/p),q=W*k+G,K=0;K<y;++K)for(var Y=Math.max(0,Math.ceil((F-K)/h)),Q=Math.min(d.outWidth,(d.inWidth+F-K)/h),J=K*S+q,$=0;$<d.inChannels;++$)for(var ee=$*_+J,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*M,oe=re*C,ie=U;ie<V;++ie)for(var se=(B+ie*f-P)*O+ae,ue=ie*I+oe,ce=H;ce<Z;++ce)for(var le=(W+ce*p-z)*L+se,de=ce*N+ue,fe=Y;fe<Q;++fe){var pe=fe*j+de;ne+=R[(K+fe*h-F)*D+le+$]*T[pe+te]}b[ee+te]=ne}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var yO={kernelName:io,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape;_A([a],"conv3dBackpropInputV2");for(var c=sa(a.shape),l=sa(o.shape),d=Ep(u,o.shape,s,1,i),f=new Lu(d.inShape,"float32"),p=f.values,h=(0,X.Z)(f.strides,4),m=h[0],v=h[1],y=h[2],g=h[3],b=n.data.get(a.dataId).values,x=(0,X.Z)(c,4),w=x[0],k=x[1],S=x[2],_=x[3],T=n.data.get(o.dataId).values,E=(0,X.Z)(l,4),C=E[0],I=E[1],N=E[2],j=E[3],R=d.batchSize,A=d.filterDepth,M=d.filterHeight,O=d.filterWidth,L=d.inChannels,D=d.inDepth,P=d.inHeight,F=d.inWidth,z=d.outChannels,B=d.outDepth,U=d.outHeight,V=d.outWidth,G=d.strideDepth,W=d.strideHeight,H=d.strideWidth,Z=A-1-d.padInfo.front,q=M-1-d.padInfo.top,K=O-1-d.padInfo.left,Y=0;Y<R;++Y)for(var Q=0;Q<L;++Q)for(var J=0;J<D;++J)for(var $=J-Z,ee=Math.max(0,Math.ceil($/G)),te=Math.min(B,(A+$)/G),ne=0;ne<P;++ne)for(var re=ne-q,ae=Math.max(0,Math.ceil(re/W)),oe=Math.min(U,(M+re)/W),ie=0;ie<F;++ie){for(var se=ie-K,ue=Math.max(0,Math.ceil(se/H)),ce=Math.min(V,(O+se)/H),le=0,de=ee;de<te;++de)for(var fe=de*G-$,pe=ae;pe<oe;++pe)for(var he=pe*W-re,me=ue;me<ce;++me)for(var ve=w*Y+k*de+S*pe+_*me,ye=C*(A-1-fe)+I*(M-1-he)+N*(O-1-(me*H-se))+j*Q,ge=0;ge<z;++ge){le+=b[ve+ge]*T[ye+ge]}p[m*Y+v*J+y*ne+g*ie+Q]=le}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},gO=CA(so,(function(e){return Math.cos(e)})),bO={kernelName:so,backendName:"cpu",kernelFunc:gO},xO=CA(uo,(function(e){return Math.cosh(e)})),wO={kernelName:uo,backendName:"cpu",kernelFunc:xO};var kO={kernelName:fo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=(0,X.Z)(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=o.shape[0],v=(0,X.Z)(s,2),y=v[0],g=v[1],b=Nl([m,y,g,h],"float32"),x=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,k=n.data.get(a.dataId).values,S=sa(a.shape),_=sa(b.shape),T=0;T<m;T++){var E=4*T,C=x[E],I=x[E+1],N=x[E+2],j=x[E+3],R=w[T];if(!(R>=d))for(var A=y>1?(N-C)*(f-1)/(y-1):0,M=g>1?(j-I)*(p-1)/(g-1):0,O=0;O<y;O++){var L=y>1?C*(f-1)+O*A:.5*(C+N)*(f-1);if(L<0||L>f-1)for(var D=0;D<g;D++)for(var P=0;P<h;P++){var F=P+D*_[2]+O*_[1]+T*_[0];b.values[F]=c}else if("bilinear"===u)for(var z=Math.floor(L),B=Math.ceil(L),U=L-z,V=0;V<g;V++){var G=g>1?I*(p-1)+V*M:.5*(I+j)*(p-1);if(G<0||G>p-1)for(var W=0;W<h;W++){var H=W+V*_[2]+O*_[1]+T*_[0];b.values[H]=c}else for(var Z=Math.floor(G),q=Math.ceil(G),K=G-Z,Y=0;Y<h;Y++){var Q=Y+Z*S[2]+z*S[1]+R*S[0],J=k[Q],$=k[Q=Y+q*S[2]+z*S[1]+R*S[0]],ee=k[Q=Y+Z*S[2]+B*S[1]+R*S[0]],te=J+($-J)*K,ne=ee+(k[Q=Y+q*S[2]+B*S[1]+R*S[0]]-ee)*K;Q=Y+V*_[2]+O*_[1]+T*_[0],b.values[Q]=te+(ne-te)*U}}else for(var re=0;re<g;++re){var ae=g>1?I*(p-1)+re*M:.5*(I+j)*(p-1);if(ae<0||ae>p-1)for(var oe=0;oe<h;oe++){var ie=oe+re*_[2]+O*_[1]+T*_[0];b.values[ie]=c}else for(var se=Math.round(ae),ue=Math.round(L),ce=0;ce<h;ce++){var le=ce+se*S[2]+ue*S[1]+R*S[0],de=ce+re*_[2]+O*_[1]+T*_[0];b.values[de]=k[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var SO={kernelName:co,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;_A(a,"cumprod");var u=Mh([o],a.shape.length),c=a;null!=u&&(c=wM({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Lh(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=qu(c.dtype,"int32"),f=da(Dr(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=h)for(var y=0;y<h;y++){var g=m(v,y);if(0===y)f[g]=i?1:p[g];else{var b=m(v,y-1);f[g]=i?p[b]*f[b]:p[g]*f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var w=wM({inputs:{x:x},backend:n,attrs:{perm:Oh(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var _O={kernelName:lo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;_A(a,"cumsum");var u=Mh([o],a.shape.length),c=a;null!=u&&(c=wM({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Lh(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=qu(c.dtype,"int32"),f=fa(Dr(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=h)for(var y=0;y<h;y++){var g=m(v,y);if(0===y)f[g]=i?0:p[g];else{var b=m(v,y-1);f[g]=i?p[b]+f[b]:p[g]+f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var w=wM({inputs:{x:x},backend:n,attrs:{perm:Oh(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),w}return x}};var TO={kernelName:po,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=YM(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=QM(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var EO={kernelName:ho,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;Mr("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,f=c*o,p=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*f*p),v=0,y=0;y<s;++y)for(var g=0;g<d;++g)for(var b=Math.floor(g/o),x=g%o,w=0;w<f;++w)for(var k=Math.floor(w/o),S=(x*o+w%o)*p,_=0;_<p;++_){var T=_+S+l*(k+c*(b+u*y));m[v++]=h[T]}return n.makeTensorInfo([s,d,f,p],a.dtype,m)}};function CO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;_A([a,o],"depthwiseConv2DNative");var l=sa(a.shape),d=sa(o.shape),f=u;null==f&&(f=[1,1]),Mr(Mp(i,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(f,"'")}));for(var p=Tp(a.shape,o.shape,i,f,s,c,!0),h=p.filterHeight,m=p.filterWidth,v=p.dilationHeight,y=p.dilationWidth,g=p.padInfo,b=g.left,x=g.top,w=p.outChannels/p.inChannels,k=new Lu(p.outShape,a.dtype),S=n.data.get(a.dataId).values,_=n.data.get(o.dataId).values,T=k.values,E=0;E<p.batchSize;++E)for(var C=E*l[0],I=E*k.strides[0],N=0;N<p.outHeight;++N)for(var j=I+N*k.strides[1],R=N*p.strideHeight-x,A=0;A<h;++A){var M=R+A*v;if(!(M<0||M>=p.inHeight))for(var O=A*d[0],L=C+M*l[1],D=0;D<p.outWidth;++D)for(var P=j+D*k.strides[2],F=D*p.strideWidth-b,z=0;z<m;++z){var B=F+z*y;if(!(B<0||B>=p.inWidth))for(var U=O+z*d[1],V=L+B*p.inChannels,G=P,W=U,H=0;H<p.inChannels;++H){for(var Z=S[V+H],q=0;q<w;++q)T[G+q]+=Z*_[W+q];G+=w,W+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var IO={kernelName:mo,backendName:"cpu",kernelFunc:CO};var NO={kernelName:vo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;_A([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=Tp(a.shape,l,i,s,u,c,!0),f=d.strideHeight,p=d.strideWidth,h=d.filterHeight,m=d.filterWidth,v=new Lu(d.filterShape,"float32"),y=d.padInfo.left,g=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,w=new Lu(a.shape,a.dtype,x),k=n.data.get(o.dataId).values,S=new Lu(o.shape,o.dtype,k),_=0;_<h;++_)for(var T=Math.max(0,Math.ceil((g-_)/f)),E=Math.min(d.outHeight,(d.inHeight+g-_)/f),C=0;C<m;++C)for(var I=Math.max(0,Math.ceil((y-C)/p)),N=Math.min(d.outWidth,(d.inWidth+y-C)/p),j=0;j<d.outChannels;++j){for(var R=Math.trunc(j/b),A=j%b,M=0,O=0;O<d.batchSize;++O)for(var L=T;L<E;++L)for(var D=_+L*f-g,P=I;P<N;++P){var F=C+P*p-y;M+=w.get(O,D,F,R)*S.get(O,L,P,j)}v.set(M,_,C,R,A)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var jO={kernelName:yo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;_A([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=sa(a.shape),f=sa(o.shape),p=Tp(l,o.shape,i,s,u,c,!0),h=new Lu(p.inShape,"float32"),m=h.values,v=(0,X.Z)(h.strides,3),y=v[0],g=v[1],b=v[2],x=n.data.get(a.dataId).values,w=(0,X.Z)(d,3),k=w[0],S=w[1],_=w[2],T=n.data.get(o.dataId).values,E=(0,X.Z)(f,3),C=E[0],I=E[1],N=E[2],j=p.batchSize,R=p.filterHeight,A=p.filterWidth,M=p.inChannels,O=p.inHeight,L=p.inWidth,D=p.outChannels,P=p.outHeight,F=p.outWidth,z=p.strideHeight,B=p.strideWidth,U=R-1-p.padInfo.top,V=A-1-p.padInfo.left,G=D/M,W=0;W<j;++W)for(var H=0;H<M;++H)for(var Z=0;Z<O;++Z)for(var q=Z-U,K=Math.max(0,Math.ceil(q/z)),Y=Math.min(P,(R+q)/z),Q=0;Q<L;++Q){for(var J=Q-V,$=Math.max(0,Math.ceil(J/B)),ee=Math.min(F,(A+J)/B),te=0,ne=K;ne<Y;++ne)for(var re=ne*z-q,ae=$;ae<ee;++ae)for(var oe=k*W+S*ne+_*ae,ie=C*(R-1-re)+I*(A-1-(ae*B-J))+N*H,se=0;se<G;++se){te+=x[oe+(H*G+se)]*T[ie+se]}m[y*W+g*Z+b*Q+H]=te}return n.makeTensorInfo(h.shape,h.dtype,h.values)}};var RO={kernelName:go,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Dr(r.shape),o=n.data.get(r.dataId).values,i=Nl([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat((0,ee.Z)(r.shape),(0,ee.Z)(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},AO={kernelName:bo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(o.dataId).values,p=o.shape.length,h=kp(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,v=h.inHeight,y=h.inWidth,g=h.inChannels,b=h.outHeight,x=h.outWidth,w=h.padInfo,k=h.strideHeight,S=h.strideWidth,_=h.filterHeight,T=h.filterWidth,E=h.dilationHeight,C=h.dilationWidth,I=h.outShape,N=Dr(I),j=I.length,R=Kr(a.dtype,N),A=0;A<m;++A)for(var M=0;M<b;++M)for(var O=M*k-w.top,L=0;L<x;++L)for(var D=L*S-w.left,P=0;P<g;++P){for(var F=Number.MIN_SAFE_INTEGER,z=0;z<_;++z){var B=O+z*E;if(B>=0&&B<v)for(var U=0;U<T;++U){var V=D+U*C;if(V>=0&&V<y){var G=ma([A,B,V,P],d,sa(a.shape)),W=ma([z,U,P],p,sa(o.shape)),H=l[G]+f[W];H>F&&(F=H)}}}R[ma([A,M,L,P],j,sa(I))]=F}return{dataId:c.write(hu(R,a.dtype),I,a.dtype),shape:I,dtype:a.dtype}}},MO={kernelName:wo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=ca(a.shape,l.data.get(a.dataId).values),f=ca(o.shape,l.data.get(o.dataId).values),p=kp(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,y=p.inChannels,g=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,T=p.dilationHeight,E=p.dilationWidth,C=p.outShape;Mr(i.rank===C.length,(function(){return"Error in ".concat(wo,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank)}));for(var I=ca(C,l.data.get(i.dataId).values),N=pa(o.shape,o.dtype),j=0;j<h;++j)for(var R=0;R<g;++R)for(var A=R*w-x.top,M=0;M<b;++M)for(var O=M*k-x.left,L=0;L<y;++L){for(var D=Number.MIN_SAFE_INTEGER,P=0,F=0,z=0;z<S;++z){var B=A+z*T;if(B>=0&&B<m)for(var U=0;U<_;++U){var V=O+U*E;if(V>=0&&V<v){var G=d[j][B][V][L]+f[z][U][L];G>D&&(D=G,P=z,F=U)}}}N[P][F][L]+=I[j][R][M][L]}return{dataId:l.write(hu(N,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},OO={kernelName:xo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=ca(a.shape,l.data.get(a.dataId).values),f=ca(o.shape,l.data.get(o.dataId).values),p=kp(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,y=p.inChannels,g=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,_=p.filterWidth,T=p.dilationHeight,E=p.dilationWidth,C=p.outShape;Mr(i.rank===C.length,(function(){return"Error in ".concat(xo,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(i.rank)}));for(var I=ca(C,l.data.get(i.dataId).values),N=pa(a.shape,a.dtype),j=0;j<h;++j)for(var R=0;R<g;++R)for(var A=R*w-x.top,M=0;M<b;++M)for(var O=M*k-x.left,L=0;L<y;++L){for(var D=Number.MIN_SAFE_INTEGER,P=A<0?0:A,F=O<0?0:O,z=0;z<S;++z){var B=A+z*T;if(B>=0&&B<m)for(var U=0;U<_;++U){var V=O+U*E;if(V>=0&&V<v){var G=d[j][B][V][L]+f[z][U][L];G>D&&(D=G,P=B,F=V)}}}N[j][P][F][L]+=I[j][R][M][L]}return{dataId:l.write(hu(N,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},LO=LA((function(e,t){return e*t})),DO=rM((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),PO=nM(xi,LO,DO),FO={kernelName:xi,backendName:"cpu",kernelFunc:PO};function zO(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;_A(o,"sum");var u=(t="bool"===o.dtype?eM({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):RA({inputs:{x:o},backend:r})).shape.length,c=Zr(i,t.shape),l=Mh(c,u),d=c,f=t;null!=l&&(f=wM({inputs:{x:t},backend:r,attrs:{perm:l}}),d=Lh(d.length,u)),Ah("sum",d,f.shape.length);for(var p=jh(f.shape,d),h=(0,X.Z)(p,2),m=h[0],v=h[1],y=YA(r,m,qu(f.dtype,"int32")),g=Dr(v),b=r.data.get(y.dataId).values,x=r.data.get(f.dataId).values,w=0;w<b.length;++w){for(var k=w*g,S=0,_=0;_<g;++_)S+=x[k+_];b[w]=S}if(s){var T=y;y=uM({inputs:{x:y},backend:r,attrs:{shape:Rh(y.shape,c)}}),r.disposeIntermediateTensorInfo(T)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(f),y}var BO={kernelName:ss,backendName:"cpu",kernelFunc:zO};var UO={kernelName:So,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=ib(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;ub(o.length,s,r);for(var u=cb(i,s),c=u.path,l=u.steps,d=l.length,f=null,p=o.length,h=[],m=0;m<d;++m){var v,y=wr(l[m]);try{for(y.s();!(v=y.n()).done;){var g=v.value,b=sb(p,s[g]),x=b.permutationIndices,w=b.expandDims,k=void 0;lb(x)?k=r[g]:(k=wM({inputs:{x:r[g]},backend:n,attrs:{perm:x}}),h.push(k));for(var S=k.shape.slice(),_=0;_<w.length;++_)S.splice(w[_],0,1);Fr(k.shape,S)||(k=uM({inputs:{x:k},backend:n,attrs:{shape:S}}),h.push(k)),null===f?f=k:(f=PO({inputs:{a:k,b:f},backend:n}),h.push(f))}}catch(sQ){y.e(sQ)}finally{y.f()}m<d-1&&(c[m]>=0&&(f=zO({inputs:{x:f},backend:n,attrs:{axis:c[m]-(o.length-p),keepDims:!1}}),h.push(f)),p--)}for(var T=0,E=h;T<E.length;T++){var C=E[T];C!==f&&n.disposeIntermediateTensorInfo(C)}return f}};var VO={kernelName:To,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;_A([r,a],"eluGrad");for(var o=new Float32Array(Dr(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},GO=LA((function(e,t){return e===t?1:0})),WO=nM(Co,GO,null,"bool"),HO={kernelName:Co,backendName:"cpu",kernelFunc:WO},ZO=Vg,qO=Gg,XO=Wg,KO=Hg,YO=Zg,QO=qg,JO=CA(Eo,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+ZO*n);return t*(1-((((QO*r+YO)*r+KO)*r+XO)*r+qO)*r*Math.exp(-n*n))})),$O={kernelName:Eo,backendName:"cpu",kernelFunc:JO},eL=GA((function(e){return Math.exp(e)})),tL=IA(Io,eL,"float32"),nL={kernelName:Io,backendName:"cpu",kernelFunc:tL};function rL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(Mr(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),uM({inputs:{x:a},backend:n,attrs:{shape:s}})}var aL={kernelName:No,backendName:"cpu",kernelFunc:rL},oL=GA((function(e){return Math.expm1(e)})),iL=IA(jo,oL),sL={kernelName:jo,backendName:"cpu",kernelFunc:iL},uL=LA((function(e,t){return e/t})),cL=nM(ko,uL),lL={kernelName:ko,backendName:"cpu",kernelFunc:cL},dL=LA((function(e,t){return e-t})),fL=rM((function(e,t,n,r){return{real:e-n,imag:t-r}})),pL=nM(ks,dL,fL),hL={kernelName:ks,backendName:"cpu",kernelFunc:pL};function mL(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=Dr(c),d=Xr("float32",l),f=Xr("float32",l),p=0;p<a;p++){for(var h=qM({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=qM({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),v=XA({inputs:{real:h,imag:m},backend:n}),y=vL(v,t,n),g=Xg(y.real,y.imag),b=0;b<o;b++){var x=Jg(g,b);d[p*o+b]=x.real,f[p*o+b]=x.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var w=n.makeTensorInfo(c,"float32",d),k=n.makeTensorInfo(c,"float32",f),S=XA({inputs:{real:w,imag:k},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),S}function vL(e,t,n){var r=Dr(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((y=r)&y-1)){var s=yL(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",pu(r,"float32")),f=RA({inputs:{x:d},backend:n}),p=lL.kernelFunc({inputs:{a:c,b:d},backend:n}),h=lL.kernelFunc({inputs:{a:l,b:f},backend:n}),m=n.data.get(p.dataId).values,v=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:v}}return s}var y,g=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=tb(a*s,t,n),c=Jg(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),$g(r,o,i,a)}return r}(Xg(o,i),r,t);return Kg(g)}function yL(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=Xg(e,t),i=n/2,s=Yg(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),p=XA({inputs:{real:d,imag:f},backend:a}),h=Qg(o),m=h.real,v=h.imag,y=[m.length],g=a.makeTensorInfo(y,"float32",m),b=a.makeTensorInfo(y,"float32",v),x=XA({inputs:{real:g,imag:b},backend:a}),w=yL(u,c,i,r,a),k=w.real,S=w.imag,_=[k.length],T=a.makeTensorInfo(_,"float32",k),E=a.makeTensorInfo(_,"float32",S),C=XA({inputs:{real:T,imag:E},backend:a}),I=yL(m,v,i,r,a),N=I.real,j=I.imag,R=[N.length],A=a.makeTensorInfo(R,"float32",N),M=a.makeTensorInfo(R,"float32",j),O=XA({inputs:{real:A,imag:M},backend:a}),L=eb(n,r),D=[L.real.length],P=a.makeTensorInfo(D,"float32",L.real),F=a.makeTensorInfo(D,"float32",L.imag),z=XA({inputs:{real:P,imag:F},backend:a}),B=PO({inputs:{a:z,b:O},backend:a}),U=iM({inputs:{a:C,b:B},backend:a}),V=pL({inputs:{a:C,b:B},backend:a}),G=QA({inputs:{input:U},backend:a}),W=QA({inputs:{input:V},backend:a}),H=sO({inputs:{input:U},backend:a}),Z=sO({inputs:{input:V},backend:a}),q=cO({inputs:[G,W],backend:a,attrs:{axis:0}}),X=cO({inputs:[H,Z],backend:a,attrs:{axis:0}}),K=a.data.get(q.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:K,imag:Y}}var gL={kernelName:Ro,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Dr(r.shape),o=r.shape[r.shape.length-1],i=uM({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=mL(i,!1,n),u=uM({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};function bL(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||aa(a),i=Kr(o,Dr(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var xL={kernelName:Ao,backendName:"cpu",kernelFunc:bL};var wL={kernelName:Mo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=Xr(r.dtype,Dr(r.shape)),i=(0,X.Z)(r.shape,4),s=i[0],u=i[1],c=i[2],l=i[3],d=a.data.get(r.dataId).values,f=0;f<s;f++)for(var p=f*c*u*l,h=0;h<u;h++)for(var m=h*(c*l),v=0;v<c;v++)for(var y=v*l,g=0;g<l;g++){var b=Math.round(c-v-1),x=p+m+y+g,w=d[x];if(b>=0&&b<c)w=d[p+m+b*l+g];o[x]=w}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},kL=GA((function(e){return Math.floor(e)})),SL=IA(Oo,kL),_L={kernelName:Oo,backendName:"cpu",kernelFunc:SL},TL=LA((function(e,t){return Math.floor(e/t)})),EL=nM(Lo,TL,null,"int32"),CL={kernelName:Lo,backendName:"cpu",kernelFunc:EL};var IL={kernelName:Fs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=dO({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var v=m;if("NCHW"===l&&1===i.shape.length&&1!==i.shape[0]){var y=uM({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=iM({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=iM({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(v)}if(p){var g=m;if("NCHW"===l&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){var b=uM({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=qA(n,m,p,b,h),n.disposeIntermediateTensorInfo(b)}else m=qA(n,m,p,s,h);n.disposeIntermediateTensorInfo(g)}return m}};var NL={kernelName:zs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=CO({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var v=m;m=iM({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var y=m;m=qA(n,m,p,s,h),n.disposeIntermediateTensorInfo(y)}return m}};function jL(e,t,n,r,a,o,i,s,u){for(var c=Nl([r,o],n),l=0;l<r;l++){for(var d=[],f=0,p=0;p<a;p++){var h=e[l*a+p];f+=h*i[p],d.push(h)}if(f<0||f>=u/o)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<o;m++)c.values[l*o+m]=t.get.apply(t,(0,ee.Z)(t.indexToLoc(f*o+m)))}return c}var RL={kernelName:Fo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=Dr(r.shape),i=a.shape,s=i[i.length-1],u=_f(r,a),c=(0,X.Z)(u,4),l=c[0],d=c[1],f=c[2],p=c[3];if(0===d)return n.makeTensorInfo(l,r.dtype,[]);var h=jL(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,f,p,r.shape,o);return n.makeTensorInfo(l,r.dtype,h.values)}};function AL(e,t,n){for(var r=Nl(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var ML={kernelName:Po,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;_A([a,o],"gatherV2");for(var u=Zr(i,a.shape)[0],c=n.data.get(o.dataId).values,l=a.shape[u],d=function(){var e=c[f];Mr(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d();var p=s;null==s&&(p=0);var h=Dr(o.shape),m=Cb(a,o,u,p),v=uM({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),y=uM({inputs:{x:o},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),g=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],b=n.bufferSync(y),x=AL(n.bufferSync(v),b,g);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}},OL=LA((function(e,t){return e>t?1:0})),LL=nM(zo,OL,null,"bool"),DL={kernelName:zo,backendName:"cpu",kernelFunc:LL},PL=LA((function(e,t){return e>=t?1:0})),FL=nM(Bo,PL,null,"bool"),zL={kernelName:Bo,backendName:"cpu",kernelFunc:FL};var BL={kernelName:Vo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Dr(r.shape),o=r.shape[r.shape.length-1],i=uM({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=mL(i,!0,n),u=uM({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},UL=CA(Wo,(function(e){return Number.isFinite(e)?1:0}),"bool"),VL={kernelName:Wo,backendName:"cpu",kernelFunc:UL},GL=CA(Ho,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),WL={kernelName:Ho,backendName:"cpu",kernelFunc:GL},HL=CA(Zo,(function(e){return Number.isNaN(e)?1:0}),"bool"),ZL={kernelName:Zo,backendName:"cpu",kernelFunc:HL},qL=LA((function(e,t){return e<t?1:0})),XL=nM(Xo,qL,null,"bool"),KL={kernelName:Xo,backendName:"cpu",kernelFunc:XL},YL=LA((function(e,t){return e<=t?1:0})),QL=nM(Ko,YL,null,"bool"),JL={kernelName:Ko,backendName:"cpu",kernelFunc:QL};function $L(e,t,n){var r=(t-e)/(n-1),a=fa(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var eD={kernelName:Yo,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=$L(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},tD=GA((function(e){return Math.log(e)})),nD=IA(Qo,tD),rD={kernelName:Qo,backendName:"cpu",kernelFunc:nD},aD=CA(Jo,(function(e){return Math.log1p(e)})),oD={kernelName:Jo,backendName:"cpu",kernelFunc:aD},iD=LA((function(e,t){return e&&t})),sD=nM($o,iD,null,"bool"),uD={kernelName:$o,backendName:"cpu",kernelFunc:sD},cD=CA(ei,(function(e){return e?0:1}),"bool"),lD={kernelName:ei,backendName:"cpu",kernelFunc:cD},dD=LA((function(e,t){return e||t})),fD=nM(ti,dD,null,"bool"),pD={kernelName:ti,backendName:"cpu",kernelFunc:fD};var hD={kernelName:oi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;_A(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=Dr(a.shape),p=new Float32Array(f);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<f;m++){var v=h(m),y=d[m]*Math.pow(i+s*v,-u);p[m]=y}return n.makeTensorInfo(a.shape,a.dtype,p)}};var mD={kernelName:ii,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;_A(i,"LRNGrad");for(var d=Dr(i.shape),f=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,v=new Float32Array(d),y=d,g=0;g<y;g++){for(var b=g%f,x=g-b+Math.max(0,b-s),w=g-b+Math.min(f,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(h[S],2);k=c*k+u;for(var _=x;_<w;_++){var T=-2*c*l*h[_]*m[g]/k;g===_&&(T+=Math.pow(k,-l)),T*=p[g],v[_]+=T}}return n.makeTensorInfo(i.shape,a.dtype,v)}};function vD(e,t,n,r){for(var a=Xr(r,Dr(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];(Number.isNaN(c)||c>s)&&(s=c)}a[o]=s}return a}function yD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,u=a.shape,c=u.length,l=Zr(o,u),d=l,f=Mh(d,c),p=s.data.get(a.dataId).values;if(null!=f){for(var h=new Array(c),m=0;m<h.length;m++)h[m]=u[f[m]];p=xM(p,u,a.dtype,f,h),d=Lh(d.length,c),u=h}_A(a,"max"),Ah("max",d,c);var v=jh(u,d),y=(0,X.Z)(v,2),g=y[0],b=vD(p,Dr(y[1]),g,a.dtype),x=s.write(b,g,a.dtype),w=g;i&&(w=Rh(g,l));return{dataId:x,shape:w,dtype:a.dtype}}var gD={kernelName:si,backendName:"cpu",kernelFunc:yD},bD=LA((function(e,t){return Math.max(e,t)})),xD=nM(ui,bD),wD={kernelName:ui,backendName:"cpu",kernelFunc:xD};var kD={kernelName:ci,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_A(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;Mr(Mp(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=Sp(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Fr(l.inShape,l.outShape))c=RA({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=sa(a.shape),p=FM(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var SD={kernelName:di,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;_A(a,"maxPool3d");var l=_p(a.shape,o,i,1,s,u,c),d=BM(n.data.get(a.dataId).values,a.shape,a.dtype,sa(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var _D={kernelName:fi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;_A([a,o],"maxPool3DGrad");for(var l=_p(o.shape,i,s,1,u,c),d=function(e,t){for(var n=Nl(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var y=0;y<t.outDepth;++y){for(var g=y*r-f,b=g;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+g),w=0;w<t.outHeight;++w){for(var k=w*a-p,S=k;S<0;)S+=s;for(var _=Math.min(t.inHeight,l+k),T=0;T<t.outWidth;++T){for(var E=T*o-h,C=E;C<0;)C+=u;for(var I=Math.min(t.inWidth,d+E),N=Number.NEGATIVE_INFINITY,j=-1,R=b;R<x;R+=i)for(var A=R-g,M=S;M<_;M+=s)for(var O=M-k,L=C;L<I;L+=u){var D=L-E,P=e.get(m,R,M,L,v);P>=N&&(N=P,j=A*l*d+O*l+D)}n.set(j,m,y,w,T,v)}}}return n}(n.bufferSync(o),l),f=l.strideDepth,p=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,v=l.dilationHeight,y=l.dilationWidth,g=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,w=g-1-l.padInfo.front,k=x-1-l.padInfo.left,S=b-1-l.padInfo.top,_=Nl(o.shape,"float32"),T=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var C=0;C<l.inChannels;++C)for(var I=0;I<l.inDepth;++I)for(var N=0;N<l.inHeight;++N)for(var j=0;j<l.inWidth;++j){for(var R=I-w,A=N-S,M=j-k,O=0,L=0;L<g;L+=m){var D=(R+L)/f;if(!(D<0||D>=l.outDepth||Math.floor(D)!==D))for(var P=0;P<b;P+=v){var F=(A+P)/p;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var z=0;z<x;z+=y){var B=(M+z)/h;if(!(B<0||B>=l.outWidth||Math.floor(B)!==B)){var U=g*b*x-1-d.get(E,D,F,B,C)===L*b*x+P*x+z?1:0;if(0!==U)O+=T.get(E,D,F,B,C)*U}}}}_.set(O,E,I,N,j,C)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var TD={kernelName:li,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;_A([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=Sp(i.shape,s,u,1,c,l),f=n.data.get(i.dataId).values,p=Nl(d.outShape,i.dtype,zM(f,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,v=d.dilationHeight,y=d.dilationWidth,g=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,w=g-1-d.padInfo.top,k=Nl(i.shape,"float32"),S=n.data.get(a.dataId).values,_=Nl(a.shape,"float32",S),T=0;T<d.batchSize;++T)for(var E=0;E<d.inChannels;++E)for(var C=0;C<d.inHeight;++C)for(var I=0;I<d.inWidth;++I){for(var N=C-w,j=I-x,R=0,A=0;A<g;A+=v){var M=(N+A)/h;if(!(M<0||M>=d.outHeight||Math.floor(M)!==M))for(var O=0;O<b;O+=y){var L=(j+O)/m;if(!(L<0||L>=d.outWidth||Math.floor(L)!==L)){var D=g*b-1-p.get(T,M,L,E)===A*b+O?1:0;if(0!==D)R+=_.get(T,M,L,E)*D}}}k.set(R,T,C,I,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var ED={kernelName:pi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;_A(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=Sp(a.shape,o,i,[1,1],s),f=function(e,t,n,r,a){var o=FM(e,0,n,sa(t),a,"max"),i=zM(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,u,d),p=(0,X.Z)(f,2),h=p[0],m=p[1],v=c.write(h,d.outShape,a.dtype),y=c.write(m,d.outShape,a.dtype);return[{dataId:v,shape:d.outShape,dtype:a.dtype},{dataId:y,shape:d.outShape,dtype:"int32"}]}};var CD={kernelName:hi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=Zr(o,a.shape),u=Dr(jh(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=eM({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var f=cL({inputs:{a:d,b:l},backend:n});c.push(f);var p=zO({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:i}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var ID={kernelName:mi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;_A(a,"min");var s=Zr(o,a.shape),u=s,c=Mh(u,a.shape.length),l=a;null!=c&&(l=wM({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Lh(u.length,a.shape.length)),Ah("min",u,l.shape.length);for(var d=jh(l.shape,u),f=(0,X.Z)(d,2),p=f[0],h=Dr(f[1]),m=fa(Dr(p),l.dtype),v=n.data.get(l.dataId).values,y=0;y<m.length;++y){for(var g=y*h,b=v[g],x=0;x<h;++x){var w=v[g+x];(Number.isNaN(w)||w<b)&&(b=w)}m[y]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,m);if(i){var S=uM({inputs:{x:k},backend:n,attrs:{shape:Rh(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}},ND=LA((function(e,t){return Math.min(e,t)})),jD=nM(vi,ND),RD={kernelName:vi,backendName:"cpu",kernelFunc:jD};var AD={kernelName:yi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;_A(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,p=sa(a.shape),h=Dr(s),m=s.length,v=sa(s),y=Xr(a.dtype,h),g=0;g<h;g++){for(var b=va(g,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var w=ma(b,f,p);y[g]=d[w]}return{dataId:n.write(y,s,a.dtype),shape:s,dtype:a.dtype}}},MD=LA((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),OD=nM(gi,MD),LD={kernelName:gi,backendName:"cpu",kernelFunc:OD};function DD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));var u=Zr([s],a.shape),c=yD({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=Rh(c.shape,u),d=uM({inputs:{x:c},backend:n,attrs:{shape:l}}),f=pL({inputs:{a:a,b:d},backend:n}),p=tL({inputs:{x:f},backend:n}),h=zO({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=uM({inputs:{x:h},backend:n,attrs:{shape:l}}),v=cL({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var PD={kernelName:ls,backendName:"cpu",kernelFunc:DD};var FD={kernelName:bi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;_A(a,"multinomial");for(var u=s?a:DD({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,o],p=fa(Dr(f),"int32"),h=0;h<c;++h){var m=h*l,v=new Float32Array(l-1);v[0]=d[m];for(var y=1;y<v.length;++y)v[y]=v[y-1]+d[m+y];for(var g=qm.alea(i.toString()),b=h*o,x=0;x<o;++x){var w=g();p[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){p[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}};function zD(e,t,n){var r=pu(-1,n);return LO([],t,r,e,n)}var BD={kernelName:wi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;_A(r,"neg");var a=zD(n.data.get(r.dataId).values,r.shape,r.dtype),o=(0,X.Z)(a,2),i=o[0],s=o[1];return n.makeTensorInfo(s,r.dtype,i)}},UD=Ny;var VD={kernelName:Si,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;_A(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=UD(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},GD=jy;var WD={kernelName:_i,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;_A(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=GD(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},HD=Ry;var ZD={kernelName:Ti,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;_A(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=HD(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},qD=LA((function(e,t){return e!==t?1:0})),XD=nM(ki,qD,null,"bool"),KD={kernelName:ki,backendName:"cpu",kernelFunc:XD};var YD={kernelName:Ci,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue;_A(a,"oneHot");var c=Dr(a.shape),l=new Float32Array(c*i);l.fill(u);for(var d=n.data.get(a.dataId).values,f=0;f<c;++f)d[f]>=0&&d[f]<i&&(l[f*i+d[f]]=s);return n.makeTensorInfo([].concat((0,ee.Z)(a.shape),[i]),o,l)}};function QD(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=QA({inputs:{input:r},backend:n}),o=QD({inputs:{x:a},backend:n}),i=sO({inputs:{input:r},backend:n}),s=QD({inputs:{x:i},backend:n}),u=XA({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return bL({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var JD={kernelName:Ms,backendName:"cpu",kernelFunc:QD};var $D={kernelName:Ei,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=QA({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=sO({inputs:{input:a},backend:r}),u=QD({inputs:{x:s},backend:r}),c=XA({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return bL({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function eP(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return rL({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){Or(a,e.shape,"All tensors passed to stack must have matching shapes"),Mr(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=cO({inputs:t.map((function(e){var t=rL({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var tP={kernelName:Ii,backendName:"cpu",kernelFunc:eP};var nP={kernelName:Ni,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;_A(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=Dr(a.shape),d=a.shape.length,f=sa(a.shape),p=Dr(s),h=s.length,m=sa(s),v=Xr(a.dtype,p);0!==i&&v.fill(i);for(var y=0;y<l;y++){v[ma(va(y,d,f).map((function(e,t){return e+u[t]})),h,m)]=c[y]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},rP=LA((function(e,t){return Math.pow(e,t)})),aP=nM(Ri,rP),oP={kernelName:Ri,backendName:"cpu",kernelFunc:aP};function iP(e,t,n,r){for(var a=jh(e,r),o=(0,X.Z)(a,2),i=o[0],s=o[1],u=qu(t,"int32"),c=fa(Dr(i),u),l=Dr(s),d=0;d<c.length;++d){for(var f=d*l,p=1,h=0;h<l;++h)p*=n[f+h];c[d]=p}return{outVals:c,outShape:i,outDtype:u}}var sP={kernelName:Mi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;_A(a,"prod");var s=a.shape.length,u=Zr(o,a.shape),c=Mh(u,s),l=u,d=a,f=[];null!=c&&(d=wM({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=Lh(l.length,s));var p=n.data.get(d.dataId).values,h=iP(d.shape,d.dtype,p,l),m=h.outVals,v=h.outShape,y=h.outDtype,g=v;return i&&(g=Rh(v,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(g,y,m)}};function uP(e,t,n,r){var a=[],o=0,i=t.length-1+n.length,s=new Array(i).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],d=1;d<u+1;++d)s[c].push(d*l)}for(var f=0;f<e.length;++f){for(var p=e[f],h=e[f]+1,m=0;m<n.length;++m){var v=n[m],y=m+t.length-1;if(y>=0)for(var g=s[y],b=g[g.length-1]-v[p],x=p;x<h;++x)s[y].push(v[x+1]+b);p=v[p],h=v[h]}h!==p&&(a.push([p,h]),o+=h-p)}return{outSplits:s,valueSlices:a,numValues:o}}function cP(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function lP(e,t,n,r,a){var o=t.slice();o[0]=a;var i=Kr(n,Dr(o)),s=e.length;return function(e,t,n,r,a,o){var i,s=cP(t,2)[1],u=cP(o,2)[1],c=0,l=wr(n);try{for(l.s();!(i=l.n()).done;)for(var d=i.value,f=d[0];f<d[1];++f){for(var p=0;p<r;++p)a[c*u+p]=e[f*s+p];++c}}catch(sQ){l.e(sQ)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],i,o),[i,o]}function dP(e,t,n,r,a,o,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=va(r,t.length,sa(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(o,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=uP(o,i,e,r[0]),c=u.outSplits,l=u.valueSlices,d=u.numValues,f=function(e){for(var t=[],n=function(){var n=Kr("int32",e[r].length);t.push(n),e[r].forEach((function(e,t){return n[t]=e}))},r=0;r<e.length;++r)n();return t}(c),p=lP(n,r,a,l,d);return[f,p[0],p[1]]}var fP={kernelName:Oi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,o=t.paramsDenseValues,i=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),c=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values,d=dP(s,u,c,o.shape,o.dtype,l,i.shape),f=(0,X.Z)(d,3),p=f[0],h=f[1],m=f[2],v=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(m,o.dtype,h);return v.concat([y])}},pP=2147483647;function hP(e,t,n,r,a,o,i){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,c=0===i.length,l=[];s||l.push(t[0]),u||l.push(a[0]),c||l.push(i[0]);for(var d=1;d<l.length;++d)if(l[d]!==l[d-1])throw new Error("starts, limits, and deltas must have the same shape");var f=0===l.length?1:l[0],p=Kr("int32",f+1);p[0]=0;for(var h=0;h<f;++h){var m=s?e[0]:e[h],v=u?r[0]:r[h],y=c?o[0]:o[h];if(0===y)throw new Error("Requires delta != 0");var g=void 0;if(y>0&&v<m||y<0&&v>m)g=0;else if((g=Math.ceil(Math.abs((v-m)/y)))>pP)throw new Error("Requires ((limit - start) / delta) <= ".concat(pP));p[h+1]=p[h]+g}for(var b=Kr(n,p[f]),x=0,w=0;w<f;++w)for(var k=p[w+1]-p[w],S=s?e[0]:e[w],_=c?o[0]:o[w],T=0;T<k;++T)b[x++]=S,S+=_;return[p,b]}var mP={kernelName:Li,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,o=t.deltas,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=hP(i,r.shape,r.dtype,s,a.shape,u,o.shape),l=(0,X.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}},vP=hg,yP=function(){function e(t,n,r,a,o,i,s,u,c,l){vr(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=Ng(l),this.raggedRank=jg(this.rowPartitionTypes)}return br(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===vP.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===vP.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case vP.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case vP.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(vP[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return bP(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;Rg(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=Ig(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(var a=1;a<=this.raggedRank;++a)r[a]<0&&(r[a]=this.getMaxWidth(a));return r}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],o=0,i=0;i<r;++i,o+=t)a.push(o);for(var s=r;s<e;++s)a.push(-1);return Mr(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a-1;++i){var s=e[i+1]-e[i],u=Math.min(r,s),c=t[i];-1===c&&(u=0);for(var l=0;l<u;++l)o.push(c),c+=n;for(var d=0;d<s-u;++d)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,o=[];if(0===a)return[];var i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];o.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++i<r?u+=n:u=-1);else{if(i=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case vP.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case vP.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(vP[o]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case vP.FIRST_DIM_SIZE:return e[0];case vP.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case vP.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(vP[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=bP(t,!1),o=Kr(this.valuesDType,Dr(a));if(n[0]*t[0]>0){for(var i=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){i=this.calculateOutputIndex(s-1,i,n[s],t[s])}this.setOutput(this.raggedRank,i,o,a)}return[a,o]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,o=n,i=r.slice(),s=Dr(i=i.slice(e+1)),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;Ul((function(){var e=Pp(c,l),t=Jp(e,i);c=t.dataSync()}))}for(var d=0,f=0,p=0,h=0;h<=u;++h){var m=h<u?t[h]:-1;if(m!==p){if(f<p){var v=a.subarray(d*s);gP(o.subarray(f*s),v,(p-f)*s)}if(h>=u){var y=n.length;m=Math.floor(y/s)}if(m>p)if(1===this.defaultValue.length)o.subarray(p*s,m*s).fill(this.defaultValue[0]),p=m;else for(;m>p;){gP(o.slice(p*s),c,s),++p}m<0?(d=h+1,f=p):(d=h,p=(f=p)+1)}else++p}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,o=1;o<t;++o){var i=e[o];i!==r&&(r=i,a=Math.max(o-n,a),n=o)}return Math.max(t-n,a)}}]),e}();function gP(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function bP(e,t){var n,r=[],a=wr(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o<0){if(!t)throw new Error("Dimension ".concat(o," must be >= 0"));if(o<-1)throw new Error("Dimension ".concat(o," must be >= -1"));o=-1}r.push(o)}}catch(sQ){a.e(sQ)}finally{a.f()}return r}function xP(e,t,n,r,a,o,i,s,u,c){return new yP(e,t,n,r,a,o,i,s,u,c).compute()}var wP={kernelName:Di,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,o=t.values,i=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,f=s.map((function(e){return n.data.get(e.dataId).values})),p=s.map((function(e){return e.shape})),h=xP(c,a.shape,l,o.shape,o.dtype,d,i.shape,f,p,u),m=(0,X.Z)(h,2),v=m[0],y=m[1];return n.makeTensorInfo(v,o.dtype,y)}};function kP(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return fa(0,r);var a=fa(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}var SP={kernelName:Pi,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=kP(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},_P=CA(zi,(function(e){return 1/e})),TP={kernelName:zi,backendName:"cpu",kernelFunc:_P};var EP={kernelName:Wi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;_A(a,"resizeBilinear");for(var u=sa(a.shape),c=(0,X.Z)(s,2),l=c[0],d=c[1],f=(0,X.Z)(a.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],y=n.data.get(a.dataId).values,g=new Float32Array(Dr([p,l,d,v])),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],w=0,k=b[0]/x[0],S=b[1]/x[1],_=0;_<p;_++)for(var T=0;T<l;T++){var E=void 0;E=i?k*(T+.5)-.5:k*T;for(var C=Math.max(0,Math.floor(E)),I=E-C,N=Math.min(h-1,Math.ceil(E)),j=_*u[0]+C*u[1],R=_*u[0]+N*u[1],A=0;A<d;A++){var M=void 0;M=i?S*(A+.5)-.5:S*A;for(var O=Math.max(0,Math.floor(M)),L=M-O,D=Math.min(m-1,Math.ceil(M)),P=j+O*u[2],F=R+O*u[2],z=j+D*u[2],B=R+D*u[2],U=0;U<v;U++){var V=y[P+U],G=y[F+U],W=V+(y[z+U]-V)*L,H=W+(G+(y[B+U]-G)*L-W)*I;g[w++]=H}}}return n.makeTensorInfo([p,l,d,v],"float32",g)}};var CP={kernelName:Hi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;_A([o,a],"resizeBilinearGrad");for(var s=sa(a.shape),u=(0,X.Z)(a.shape,4),c=u[0],l=u[1],d=u[2],f=u[3],p=(0,X.Z)(o.shape,3),h=p[1],m=p[2],v=new Float32Array(c*l*d*f),y=[i&&h>1?l-1:l,i&&m>1?d-1:d],g=[i&&h>1?h-1:h,i&&m>1?m-1:m],b=y[0]/g[0],x=y[1]/g[1],w=n.data.get(o.dataId).values,k=0,S=0;S<c;S++)for(var _=S*s[0],T=0;T<h;T++)for(var E=T*b,C=Math.floor(E),I=Math.min(Math.ceil(E),l-1),N=_+C*s[1],j=_+I*s[1],R=E-C,A=1-R,M=0;M<m;M++)for(var O=M*x,L=Math.floor(O),D=Math.min(Math.ceil(O),d-1),P=O-L,F=1-P,z=N+L*s[2],B=N+D*s[2],U=j+L*s[2],V=j+D*s[2],G=A*F,W=A*P,H=R*F,Z=R*P,q=0;q<f;q++){var K=w[k++];v[z+q]+=K*G,v[B+q]+=K*W,v[U+q]+=K*H,v[V+q]+=K*Z}return n.makeTensorInfo([c,d,l,f],"float32",v)}};var IP={kernelName:Vi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;_A(a,"resizeNearestNeighbor");for(var u=sa(a.shape),c=(0,X.Z)(s,2),l=c[0],d=c[1],f=(0,X.Z)(a.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],y=n.data.get(a.dataId).values,g=new Float32Array(p*l*d*v),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],w=b[0]/x[0],k=b[1]/x[1],S=0,_=0;_<p;_++)for(var T=_*u[0],E=0;E<l;E++){var C=i?w*(E+.5):w*E,I=Math.min(h-1,o?Math.round(C):Math.floor(C));i&&(I=Math.max(0,I));for(var N=T+I*u[1],j=0;j<d;j++){var R=i?k*(j+.5):k*j,A=Math.min(m-1,o?Math.round(R):Math.floor(R));i&&(A=Math.max(0,A));for(var M=N+A*u[2],O=0;O<v;O++){var L=y[M+O];g[S++]=L}}}return n.makeTensorInfo([p,l,d,v],a.dtype,g)}};var NP={kernelName:Gi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;_A([o,a],"resizeNearestNeighborGrad");for(var s=sa(a.shape),u=sa(o.shape),c=(0,X.Z)(a.shape,4),l=c[0],d=c[1],f=c[2],p=c[3],h=(0,X.Z)(o.shape,3),m=h[1],v=h[2],y=new Float32Array(l*d*f*p),g=n.data.get(o.dataId).values,b=[i&&m>1?d-1:d,i&&v>1?f-1:f],x=[i&&m>1?m-1:m,i&&v>1?v-1:v],w=b[0]/x[0],k=b[1]/x[1],S=1/w,_=1/k,T=2*Math.ceil(S)+2,E=2*Math.ceil(_)+2,C=0;C<l;C++)for(var I=C*s[0],N=0;N<d;N++)for(var j=I+N*s[1],R=Math.floor(N*S),A=Math.floor(R-T/2),M=0;M<f;M++)for(var O=j+M*s[2],L=Math.floor(M*_),D=Math.floor(L-E/2),P=0;P<p;P++){for(var F=0,z=0;z<T;z++){var B=z+A;if(!(B<0||B>=m)){var U=I+B*u[1],V=B*w;if(N===Math.min(d-1,i?Math.round(V):Math.floor(V)))for(var G=0;G<E;G++){var W=G+D;if(!(W<0||W>=v)){var H=U+W*u[2],Z=W*k;M===Math.min(f-1,i?Math.round(Z):Math.floor(Z))&&(F+=g[H+P])}}}}y[O+P]=F}return n.makeTensorInfo(a.shape,a.dtype,y)}};var jP={kernelName:qi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;_A(a,"reverse");var i=a.shape.length,s=Zr(o,a.shape);if(0===i)return RA({inputs:{x:a},backend:n});for(var u=new Lu(a.shape,a.dtype),c=n.bufferSync(a),l=function(){var e=u.indexToLoc(d),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),u.set.apply(u,[c.get.apply(c,(0,ee.Z)(t))].concat((0,ee.Z)(e)))},d=0;d<u.size;d++)l();return n.makeTensorInfo(u.shape,u.dtype,u.values)}},RP={kernelName:Ds,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=Xr(a.dtype,Dr(a.shape)),l=(0,X.Z)(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=Og(s,f,p),v=(0,X.Z)(m,2),y=v[0],g=v[1],b=Math.sin(o),x=Math.cos(o),w=u.data.get(a.dataId).values,k=0;k<d;k++)for(var S=k*p*f*h,_=0;_<f;_++)for(var T=_*(p*h),E=0;E<p;E++)for(var C=E*h,I=0;I<h;I++){var N=[d,_,E,I],j=N[2],R=N[1],A=(j-y)*x-(R-g)*b,M=(j-y)*b+(R-g)*x;A=Math.round(A+y),M=Math.round(M+g);var O=i;if("number"!==typeof i&&(O=3===I?255:i[I]),A>=0&&A<p&&M>=0&&M<f)O=w[S+M*(p*h)+A*h+I];c[S+T+C+I]=O}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},AP=CA(Xi,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),MP={kernelName:Xi,backendName:"cpu",kernelFunc:AP},OP=GA((function(e){return 1/Math.sqrt(e)})),LP=IA(Ki,OP),DP={kernelName:Ki,backendName:"cpu",kernelFunc:LP};function PP(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return Nl(n,t.dtype);var p=Nl(l,t.dtype);"string"===typeof u||"number"===typeof u?p.values.fill(u):"boolean"===typeof u&&p.values.fill(+u);for(var h=0;h<o;h++){for(var m=[],v=0,y=0;y<i;y++){var g=d[h*i+y];m.push(g),v+=g*s[y]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[v*a+b]+=f[h*a+b]:p.values[v*a+b]=0===t.rank?f[0]:f[h*a+b]}return p}var FP={kernelName:Yi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=Cf(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=PP(n.bufferSync(a),n.bufferSync(o),i,f,l,c,u,d,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}};function zP(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function BP(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var UP={kernelName:Qi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=function(e,t,n,r,a,o){for(var i=Kr("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)i[c+l]="left"===o?zP(u,t[l+c]):BP(u,t[l+c]);return i}(n.data.get(a.dataId).values,n.data.get(o.dataId).values,a.shape[0],a.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",s)}};var VP={kernelName:Ji,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;_A([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=qu(a.dtype,o.dtype),d=fa(Dr(a.shape),l),f=0,p=0===i||i>1||1===a.shape.length?1:Dr(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<p;m++)1===s[h]?d[f++]=u[h]:d[f++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},GP=Bg,WP=Ug,HP=CA($i,(function(e){return e>=0?WP*e:GP*(Math.exp(e)-1)})),ZP={kernelName:$i,backendName:"cpu",kernelFunc:HP},qP=CA(rs,(function(e){return e<0?-1:e>0?1:0})),XP={kernelName:rs,backendName:"cpu",kernelFunc:qP},KP=CA(ts,(function(e){return Math.sin(e)})),YP={kernelName:ts,backendName:"cpu",kernelFunc:KP},QP=CA(ns,(function(e){return Math.sinh(e)})),JP={kernelName:ns,backendName:"cpu",kernelFunc:QP},$P=Math.log(1.1920928955078125e-7)+2,eF=CA(os,(function(e){var t=e>-$P,n=e<$P,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),tF={kernelName:os,backendName:"cpu",kernelFunc:eF};var nF={kernelName:us,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;_A([a],"spaceToBatchND");var s=Dr(o),u=[[0,0]];u.push.apply(u,(0,ee.Z)(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=nP.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=Lg(l.shape,o,s,!1),f=Dg(d.length,o.length,!1),p=Pg(l.shape,o,s,!1),h=uM({inputs:{x:l},backend:n,attrs:{shape:d}}),m=wM({inputs:{x:h},backend:n,attrs:{perm:f}}),v=uM({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}};function rF(e,t,n,r,a,o,i){var s=t[0],u=o[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error(pb(s));return[Kr(n,0),[0,d],Kr(a,0),c,l]}for(var f=!0,p=0,h=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*d];if(v<0)throw new Error(hb(m,v));if(v>=u)throw new Error(mb(m,v,u));++h[v],f=f&&v>=p,p=v}for(var y=!0,g=0;g<u;++g){var b=0===h[g];c[g]=b,y=y&&!b,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(y&&f){for(var x=e,w=r,k=0;k<s;++k)l[k]=k;return[x,[s,d],w,c,l]}for(var S=h[u-1],_=Kr(n,S*d),T=Kr(a,S),E=new Array(u).fill(0),C=0;C<s;++C){var I=e[C*d],N=E[I],j=(0===I?0:h[I-1])+N;E[I]++;for(var R=0;R<d;++R)_[j*d+R]=e[C*d+R];T[j]=r[C],l[C]=j}for(var A=0;A<u;++A){if(0===E[A]){var M=0===A?0:h[A-1];_[M*d+0]=A;for(var O=1;O<d;++O)_[M*d+O]=0;T[M]=i}}return[_,[S,d],T,c,l]}var aF={kernelName:ds,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],d=rF(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,X.Z)(d,5),p=f[0],h=f[1],m=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};function oF(e,t,n,r,a){for(var o=Dr(r),i=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var f=a[d];if(-1===f){if(-1!==l)throw new Error(vb(l,d));l=d,u.push(1)}else{if(f<0)throw new Error(yb(d,f));c*=f,u.push(f)}}if(-1!==l){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var p=Math.trunc(o/c);if(c*p!==o)throw new Error(bb(r,u));u[l]=p}if(Dr(u)!==o)throw new Error(xb(r,u));var h=r.length,m=[];if(h>0){m[h-1]=1;for(var v=h-2;v>=0;--v)m[v]=m[v+1]*r[v+1]}var y=[];if(s>0){y[s-1]=1;for(var g=s-2;g>=0;--g)y[g]=y[g+1]*u[g+1]}for(var b=Kr(n,i*s),x=0;x<i;++x){for(var w=0,k=0;k<h;++k)w+=e[x*h+k]*m[k];for(var S=0;S<s;++S)b[x*s+S]=Math.trunc(w/y[S]),w%=y[S]}return[b,[i,s],u]}var iF={kernelName:fs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),c=oF(s,r.shape,r.dtype,i,u),l=(0,X.Z)(c,3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};function sF(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=l;var f=Kr(n,d.reduce((function(e,t){return e*t}),1));if(0===s)return l>0&&f.fill(i),[f,d];if(l<=0)throw new Error("segment ids must be >= 0");for(var p=0,h=1,m=0,v=a[p];;){var y=0;if(h<s){if(v===(y=a[h])){++h;continue}if(v>=y)throw new Error("segment ids are not increasing")}if(v<0||v>=l)throw new Error(Sb(v,l));v>m&&f.fill(i,m*c,v*c);for(var g=p;g<h;++g){var b=r[g];if(b<0||b>=u[0])throw new Error(_b(g,r[g],u[0]));for(var x=0;x<c;x++)f[v*c+x]+=e[b*c+x]}if(o)for(var w=0;w<c;w++)f[v*c+w]/=h-p;if(p=h,m=v+1,v=y,++h>s)break}return m<l&&f.fill(i,m*c,l*c),[f,d]}var uF={kernelName:ps,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=sF(i,r.shape,r.dtype,s,u,!0),l=(0,X.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var cF={kernelName:hs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=sF(i,r.shape,r.dtype,s,u),l=(0,X.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var lF={kernelName:ms,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.sparseIndices,i=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=Cf(0,o,u),l=c.sliceRank,d=c.numUpdates,f=c.sliceSize,p=c.strides,h=c.outputSize,m=!1,v=r.bufferSync(o);switch(i.dtype){case"bool":t=PP(v,r.bufferSync(i),u,h,f,d,l,p,Boolean(r.data.get(s.dataId).values[0]),m);break;case"float32":t=PP(v,r.bufferSync(i),u,h,f,d,l,p,r.data.get(s.dataId).values[0],m);break;case"int32":t=PP(v,r.bufferSync(i),u,h,f,d,l,p,r.data.get(s.dataId).values[0],m);break;case"string":t=PP(v,r.bufferSync(i),u,h,f,d,l,p,gu(r.data.get(s.dataId).values[0]),m);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var dF={kernelName:cs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=Zr(r.axis,a.shape)[0],s=fb(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,ee.Z)(c);t[i]=e;var r=qM({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},fF=GA((function(e){return Math.sqrt(e)})),pF=CA(is,(function(e){return Math.sqrt(e)})),hF={kernelName:is,backendName:"cpu",kernelFunc:pF},mF={kernelName:ys,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;_A(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},vF=LA((function(e,t){var n=e-t;return n*n})),yF=nM(vs,vF),gF={kernelName:vs,backendName:"cpu",kernelFunc:yF},bF=CA(Os,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),xF={kernelName:Os,backendName:"cpu",kernelFunc:bF};function wF(e,t,n,r){for(var a=Nl(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,ee.Z)(i)))}return a}var kF={kernelName:gs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;_A(a,"stridedSlice");var p,h=Hf(a.shape,o,i,s,u,c,l,d,f),m=h.finalShapeSparse,v=h.finalShape,y=h.isIdentity,g=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,w=h.end,k=h.strides;if(y)p=uM({inputs:{x:a},backend:n,attrs:{shape:v}});else if(g||b){Mr(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=Af(x,w,k),_=qM({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});p=uM({inputs:{x:_},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(_)}else{var T=wF(m,n.bufferSync(a),k,x);p=n.makeTensorInfo(v,T.dtype,T.values)}return p}},SF=function(){function e(t,n,r,a,o,i){vr(this,e),this.separator=yu(t),this.nGramWidths=n,this.leftPad=yu(r),this.rightPad=yu(a),this.padWidth=o,this.preserveShort=i}return br(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(){var s=i.getPadWidth(o),c=Math.max(0,s-u),l=Math.max(0,s-(a-(u+1))),d=o-(c+l),f=t+(c>0?0:u-s),p=0;p+=c*i.leftPad.length;for(var h=0;h<d;++h)p+=e[f+h].length;p+=l*i.rightPad.length,p+=(c+l+d-1)*i.separator.length,n[r+u]=new Uint8Array(p);for(var m=n[r+u],v=0,y=function(e){return e.forEach((function(e){return m[v++]=e}))},g=0;g<c;++g)y(i.leftPad),y(i.separator);for(var b=0;b<d-1;++b)y(e[f+b]),y(i.separator);if(d>0){y(e[f+d-1]);for(var x=0;x<l;++x)y(i.separator),y(i.rightPad)}else{for(var w=0;w<l-1;++w)y(i.rightPad),y(i.separator);y(i.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,c=Kr("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var f=function(){var e=t[p]-t[p-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),c[p]=c[p-1]+r},p=1;p<=u;++p)f();for(var h=new Array(c[u]),m=function(r){var a=t[r],o=c[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===c[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},v=0;v<u;++v)m(v);return[h,c]}}]),e}();function _F(e,t,n,r,a,o,i,s){return new SF(n,r,a,o,i,s).compute(e,t)}var TF={kernelName:bs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=_F(n.data.get(l.dataId).values,n.data.get(d.dataId).values,a,o,i,s,u,c),p=(0,X.Z)(f,2),h=p[0],m=p[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}};function EF(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function CF(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var c=a.length;EF(e[u],t,n,a);var l=a.length-c;s[u]=l,o+=l,i=Math.max(i,l)}for(var d=Kr("int32",2*o),f=new Array(o),p=[r,i],h=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)d[2*h]=m,d[2*h+1]=v,f[h]=a[h],++h;return[d,f,p]}var IF={kernelName:xs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=CF(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),s=(0,X.Z)(i,3),u=s[0],c=s[1],l=s[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function NF(e,t){for(var n=Kr("int32",e.length),r=0;r<e.length;++r)n[r]=fu(e[r]).modulo(t).getLowBitsUnsigned();return n}var jF={kernelName:ws,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=NF(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},RF=CA(Ss,(function(e){return Math.tan(e)})),AF={kernelName:Ss,backendName:"cpu",kernelFunc:RF},MF=CA(_s,(function(e){return Math.tanh(e)}));function OF(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Nl(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}var LF={kernelName:Ts,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;_A(a,"tile");var i=OF(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},DF=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function PF(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2);PF(e,t,Math.max(n,Math.floor(t-o*s/a+u)),Math.min(r,Math.floor(t+(a-o)*s/a+u)))}var c=e[t],l=n,d=r;for(Nr(e,n,t),DF(e[r],c)>0&&Nr(e,n,r);l<d;){for(Nr(e,l,d),l++,d--;DF(e[l],c)<0;)l+=1;for(;DF(e[d],c)>0;)d-=1}0===DF(e[n],c)?Nr(e,n,d):Nr(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function FF(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=Xr(n,i*r),c=Xr("int32",i*r),l=function(){var t=d*s,n=e.subarray(t,t+s),o=new Array(n.length);n.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(PF(o,r),o=o.slice(0,r)),a&&o.sort(DF);for(var i=d*r,l=u.subarray(i,i+r),f=c.subarray(i,i+r),p=0;p<r;p++)l[p]=o[p].value,f[p]=o[p].index},d=0;d<i;d++)l();var f=t.slice();return f[f.length-1]=r,[Nl(f,n,u),Nl(f,"int32",c)]}var zF={kernelName:Es,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted;_A(a,"topk");var s=FF(n.data.get(a.dataId).values,a.shape,a.dtype,o,i),u=(0,X.Z)(s,2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var BF={kernelName:Cs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=(0,X.Z)(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=null!=c?c:[f,p],v=(0,X.Z)(m,2),y=v[0],g=v[1],b=[d,y,g,h],x=sa(a.shape),w=x[0],k=x[1],S=x[2],_=sa(b),T=_[0],E=_[1],C=_[2],I=Xr(a.dtype,Dr(b));I.fill(u);for(var N=r.data.get(a.dataId).values,j=r.data.get(o.dataId).values,R=0;R<d;++R){for(var A=1===o.shape[0]?j:j.subarray(8*R,8*R+8),M=0;M<y;++M)for(var O=0;O<g;++O)for(var L=0;L<h;++L){var D=void 0,P=A[6]*O+A[7]*M+1;if(0!==P){var F=(A[0]*O+A[1]*M+A[2])/P,z=(A[3]*O+A[4]*M+A[5])/P,B=UF(F,p,s),U=UF(z,f,s);switch(i){case"nearest":D=GF(N,f,p,w,k,S,R,U,B,L,u);break;case"bilinear":D=WF(N,f,p,w,k,S,R,U,B,L,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(i))}I[R*T+M*E+O*C+L]=D}}return r.makeTensorInfo(b,a.dtype,I)}return{dataId:r.write(I,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function UF(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return Cr(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return Cr(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Cr(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function VF(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function GF(e,t,n,r,a,o,i,s,u,c,l){return VF(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function WF(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),p=d+1,h=f+1;return(p-s)*((h-u)*VF(e,t,n,r,a,o,i,d,f,c,l)+(u-f)*VF(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*VF(e,t,n,r,a,o,i,p,f,c,l)+(u-f)*VF(e,t,n,r,a,o,i,p,h,c,l))}function HF(e,t,n,r){for(var a=Zr(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new Lu(o,r,e),d=[],f=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(f)h=e[p].toString();else{for(var m=[],v=0;v<o[0];v++)for(var y=0;y<o[2];y++)m.push(l.get(v,p,y));h=m.join(",")}if(void 0!==u[h])c[p]=u[h];else{var g=Object.keys(u).length;u[h]=g,c[p]=g,d.push(p)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new Lu(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:c}}var ZF={kernelName:Ns,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;_A(o,"unique");var i=HF(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var qF={kernelName:js,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),f=a.shape.slice();f[o]=1;for(var p=new Array(s),h=0;h<p.length;h++){d[o]=h;var m=qM({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});p[h]=uM({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var XF={kernelName:Rs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;_A(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var f=rL({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var p=0;p<i;++p){var h=pu(p,"int32"),m=n.makeTensorInfo([],"int32",h),v=WO({inputs:{a:m,b:l},backend:n}),y=eM({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),g=PO({inputs:{a:y,b:a},backend:n}),b=zO({inputs:{x:g},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(y),u.push(g),u.push(b)}var x=eP({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},KF=0,YF=[fM,hM,vM,gM,sM,bM,SM,_M,TM,EM,IM,jM,AM,LM,PM,UM,VM,GM,WM,dM,HM,KM,JM,$M,tM,nO,aO,KA,oO,lO,fO,pO,hO,mO,vO,yO,bO,wO,kO,SO,_O,TO,EO,IO,NO,jO,RO,AO,MO,OO,UO,jA,VO,HO,$O,nL,aL,sL,gL,xL,wL,_L,CL,IL,NL,RL,ML,DL,zL,AA,BL,uO,VL,WL,ZL,OA,KL,JL,eD,rD,oD,uD,lD,pD,hD,mD,gD,wD,kD,SD,_D,TD,ED,CD,ID,RD,AD,LD,FD,FO,BD,VD,WD,ZD,KD,YD,$D,tP,nP,oP,FA,sP,fP,mP,wP,SP,JA,lL,TP,BA,VA,cM,EP,CP,IP,NP,jP,RP,MP,DP,FP,UP,VP,ZP,ZA,XP,YP,JP,XM,PD,tF,nF,aF,iF,uF,cF,lF,dF,hF,mF,gF,xF,kF,TF,IF,jF,hL,BO,AF,{kernelName:_s,backendName:"cpu",kernelFunc:MF},LF,zF,BF,kM,ZF,qF,XF,JD];KF<YF.length;KF++){qs(YF[KF])}var QF,JF,$F,ez={},tz={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function nz(e,t){if(!(e in ez)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete ez[e]}),!1),wa().getBool("SOFTWARE_WEBGL_ENABLED")&&(tz.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",tz)||n.getContext("experimental-webgl",tz);return n.getContext("webgl2",tz)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;ez[e]=n}var r=ez[e];return null==r||r.isContextLost()?(delete ez[e],nz(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),ez[e])}function rz(e,t){return[t,e]}function az(e){var t=Dr(e);return Ur(Math.ceil(t/4))}function oz(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function iz(e,t){var n,r,a,o,i,s,u,c,l,d,f=e;return 2===wa().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,o=f.RGBA32F,i=f.RED,u=4,c=1,l=f.HALF_FLOAT,d=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=f.RGBA,i=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function sz(e,t){var n=t();return wa().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(QF||(QF={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(JF||(JF={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}($F||($F={}));var uz=5.96e-8,cz=65504;function lz(e){return!!(wa().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||uz<Math.abs(e)&&Math.abs(e)<cz)}function dz(e,t){return kz(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var fz,pz,hz=/ERROR: [0-9]+:([0-9]+):/g;function mz(e,t){var n=hz.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return Gr((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Gr(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function vz(e,t){if(sz(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function yz(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(sz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),sz(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),sz(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function gz(e,t,n,r){sz(e,(function(){return function(e,t,n){Sz(e,n),sz(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),sz(e,(function(){return e.uniform1i(n,r)}))}function bz(e,t,n){sz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),sz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function xz(e,t){sz(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),sz(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function wz(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function kz(e,t,n){var r=sz(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Sz(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function _z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Dr(e.slice(0,e.length-t))}function Tz(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Ez(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[_z(e)].concat((0,ee.Z)(Tz(e)))),t}function Cz(e){return e%2===0}function Iz(e,t){if(Fr(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Cz(n)&&Cz(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Cz(e[0])&&Cz(t[0])}function Nz(e,t){return null!=e.getExtension(t)}function jz(t){try{if(null!=nz(t))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Rz(e){if(0===e)return!1;var t=nz(e);if(1!==e){if(Nz(t,"EXT_color_buffer_float"))return Az(t);var n="EXT_color_buffer_half_float";if(Nz(t,n)){var r=t.getExtension(n);return function(e,t){var n=iz(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,r)}return!1}return!!Nz(t,"OES_texture_float")&&(!!Nz(t,"WEBGL_color_buffer_float")&&Az(t))}function Az(e){var t=iz(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Mz(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Mr("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Oz=wa();function Lz(){var e,t,n,r,a,o,i,s,u,c;return 2===wa().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s=wa().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Dz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=sa(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function Pz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=sa(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function Fz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=function(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}(e.map((function(e,t){return t})),t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(r[a]),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(r[a]):"index -= ".concat(e[a]," * ").concat(r[a]);return"".concat(o,"; ").concat(i,";")})).join("")}function zz(e){var t=sa(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Oz.registerFlag("HAS_WEBGL",(function(){return Oz.getNumber("WEBGL_VERSION")>0})),Oz.registerFlag("WEBGL_VERSION",(function(){return jz(2)?2:jz(1)?1:0})),Oz.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Oz.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Oz.get("WEBGL_VERSION")})),Oz.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Oz.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Oz.registerFlag("WEBGL_PACK",(function(){return Oz.getBool("HAS_WEBGL")})),Oz.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_CLIP",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_PACK_REDUCE",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_CONV_IM2COL",(function(){return Oz.getBool("WEBGL_PACK")})),Oz.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==fz){var t=nz(e);fz=t.getParameter(t.MAX_TEXTURE_SIZE)}return fz}(Oz.getNumber("WEBGL_VERSION"))})),Oz.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==pz){var t=nz(e);pz=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,pz)}(Oz.getNumber("WEBGL_VERSION"))})),Oz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Oz.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=nz(e);return Nz(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Nz(t,"EXT_disjoint_timer_query")?1:0}(e)})),Oz.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Oz.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uc()})),Oz.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=nz(e);if(1===e){if(!Nz(t,"OES_texture_float"))return!1}else if(!Nz(t,"EXT_color_buffer_float"))return!1;return Az(t)}(Oz.getNumber("WEBGL_VERSION"))})),Oz.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Oz.getBool("WEBGL_FORCE_F16_TEXTURES")&&Oz.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Oz.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Rz(Oz.getNumber("WEBGL_VERSION"))})),Oz.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Oz.getNumber("WEBGL_VERSION"))&&null!=nz(e).fenceSync;var e})),Oz.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Oz.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Oz.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Oz.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return uc()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Oz.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Oz.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Oz.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Oz.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),Oz.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),Oz.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return Oz.getBool("IS_TEST")})),Oz.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),Oz.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),Oz.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),Oz.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var Bz="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Uz=Ed;function Vz(e,t,n){var r=[];if(e.forEach((function(e){var t=Dr(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(Jz(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?Wz(e,r):Gz(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Uz(e.shapeInfo.logicalShape,t.logicalShape),c=Qz(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f="";f=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var p="return outputValue;",h=1===Dr(e.shapeInfo.logicalShape),m=Dr(t.logicalShape),v=1===m;if(1!==i||h||v){if(h&&!v)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var y=i-2,g=i-1;u.indexOf(y)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(y)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Fr(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=Qz(u),d=Uz(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+f]," = 0;")})).join("\n");var h="";h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+f])})).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Lz(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){var t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Hz,"\n    ").concat(Zz,"\n    ").concat(qz,"\n  ");return t}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Fr(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Fr(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Pz(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Dz(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Pz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Dz(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Dz(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Dz(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=Xz),[d,l,o,i,a,s,n.userCode].join("\n")}function Gz(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,X.Z)(e.shapeInfo.texShape,2),o=a[0],i=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Kz(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,X.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(Yz(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Kz(n);if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Fr(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],s=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=qr(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){var f=$z(e,d),p=["row","col"];return"\n      ".concat(Gz(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(eB(p,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(Yz(e),"\n      }\n    ");var h=o[0],m=o[1],v=Kz(r);if(1===m)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===h)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(m,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=qr(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=$z(e,l),f=["row","col","depth"];return"\n        ".concat(Gz(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(eB(f,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(Yz(e),"\n      }\n    ");var p=e.shapeInfo.texShape,h=p[0],m=p[1],v=e.shapeInfo.flatOffset;if(m===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(m,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(m===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(m,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var y=Kz(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(y,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=qr(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=$z(e,c),f=["row","col","depth","depth2"];return"\n      ".concat(Gz(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(eB(f,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(Yz(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1],y="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(y,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===o&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var x=Kz(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(y,"\n      ").concat(g,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=qr(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=$z(e,c),f=["row","col","depth","depth2","depth3"];return"\n      ".concat(Gz(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(eB(f,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(Yz(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=Kz(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=qr(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var s=$z(e,o),u=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(Gz(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(eB(u,i),");\n      }\n    ")}var c=t[5],l=t[4]*c,d=t[3]*l,f=t[2]*d,p=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(f,", ").concat(d,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(Yz(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],y=m[1];if(y===p&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(y,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(y===c&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(y,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Kz(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(f," + depth * ").concat(d," +\n          depth2 * ").concat(l," + depth3 * ").concat(c," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(y,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Wz(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Lz();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=Lz();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=Lz();if(null!=o&&Fr(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var s=[1,2],u=$z(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(Wz(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(eB(c,s),");\n        }\n      ")}var l=Lz();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=i[0],f=i[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Lz();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(o[i-1]/2),f=d*Math.ceil(o[i-2]/2),p="int b, int row, int col",h="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<i-1;m++)p="int b".concat(m,", ")+p,f*=o[i-m-1],h="b".concat(m," * ").concat(f," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var Hz="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zz="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",qz="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Xz="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Kz(e){return"offset".concat(e)}function Yz(e){var t=e.name,n=Dr(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function Qz(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Jz(e,t,n){var r=qr(t),a=r.newShape,o=r.keptDims,i=t.length,s=e&&3===i&&1===t[0],u=s?t.slice(1):a,c=!e&&i>1&&!Fr(t,n)&&a.length<i||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:o}}function $z(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function eB(e,t){return t.map((function(t){return e[t]})).join(", ")}function tB(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Vz(a,i,t),u=function(e,t){var n=kz(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(sz(e,(function(){return e.shaderSource(n,t)})),sz(e,(function(){return e.compileShader(n)})),wa().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw mz(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return wa().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:i},nB(e,t,c))}function nB(e,t,n){var r,a,o,i,s={},u={},c={},l=[],d=null;i=e.getUniformLocation(n,"NAN",!1),1===wa().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(n,"INFINITY",!1));for(var f=!1,p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];s[h]=e.getUniformLocation(n,h,f),s["offset".concat(h)]=e.getUniformLocation(n,"offset".concat(h),f),t.enableShapeUniforms&&(u["".concat(h,"Shape")]=e.getUniformLocation(n,"".concat(h,"Shape"),f),c["".concat(h,"TexShape")]=e.getUniformLocation(n,"".concat(h,"TexShape"),f))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",f),o=e.getUniformLocation(n,"outShapeStrides",f),a=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,f)})),{uniformLocations:s,customUniformLocations:l,infLoc:d,nanLoc:i,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:a}}function rB(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!Fr(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Fr(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function aB(e){return wa().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var oB=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=QF.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Lz();this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Pz(["r","c","d"],t):Dz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),iB=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=QF.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Lz();this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Pz(["r","c","d"],t):Dz(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),sB=br((function e(t){vr(this,e),this.variableNames=["A"],this.outTexUsage=JF.DOWNLOAD;var n=Lz();this.outputShape=t,this.userCode="\n      ".concat(Bz,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),uB=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=JF.DOWNLOAD;var n=Lz();this.outputShape=t,this.userCode="\n      ".concat(Bz,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),cB={R:0,G:1,B:2,A:3},lB=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";vr(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=Lz();this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length);var o="result";n&&(o="floor(result * 255. + 0.5)");for(var i="",s=0;s<r.length;s++){var u=r[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(cB[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":zz(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(a.output," = vec4(").concat(o,", 0., 0., 0.);\n      }\n    ")})),dB=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];vr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Lz();this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var s=0;s<=1;s++){var u=2*i+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":zz(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function fB(e){var t=Lz();return function(e,t){var n=kz(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(sz(e,(function(){return e.shaderSource(n,t)})),sz(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function pB(e){return function(e,t){var n=kz(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return sz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),sz(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function hB(e){return function(e,t){var n=kz(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return sz(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),sz(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function mB(e,t,n,r,a,o){!function(e,t){var n=wa().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return kz(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return sz(e,(function(){return e.bindTexture(s,i)})),sz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),sz(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),sz(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),sz(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===wa().getNumber("WEBGL_VERSION")?sz(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})):sz(e,(function(){return e.texStorage2D(s,1,r,t,n)})),sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function vB(e){return e.internalFormatFloat}function yB(e){return e.internalFormatHalfFloat}function gB(e){return e.downloadTextureFormat}function bB(e){return e.internalFormatPackedFloat}function xB(e){return e.internalFormatPackedHalfFloat}function wB(e,t,n,r,a,o,i,s){var u=e,c=new Float32Array(function(e,t){var n=oz(e,t),r=(0,X.Z)(n,2);return r[0]*r[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var kB=function(){function e(t){vr(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=wa().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(e,t){ez[e]=t}(n,t)):this.gl=nz(n),t=this.gl,2===wa().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return sz(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return sz(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return sz(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return sz(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return sz(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return sz(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return sz(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return sz(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var o="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===wa().getNumber("WEBGL_VERSION")){var s="OES_texture_half_float";if(this.textureFloatExtension=dz(this.gl,"OES_texture_float"),Nz(this.gl,s))this.textureHalfFloatExtension=dz(this.gl,s);else if(wa().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),Nz(this.gl,i))this.colorBufferHalfFloatExtension=dz(this.gl,i);else if(wa().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",Nz(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else{if(!Nz(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=pB(this.gl),this.indexBuffer=hB(this.gl),this.framebuffer=function(e){return kz(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=iz(this.gl,this.textureHalfFloatExtension)}return br(e,[{key:"debug",get:function(){return wa().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;sz(t,(function(){return t.finish()})),sz(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),sz(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),sz(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),sz(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),sz(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=rz(t,n),o=(0,X.Z)(a,2);return mB(e,o[0],o[1],vB(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=rz(t,n),o=(0,X.Z)(a,2);return mB(e,o[0],o[1],yB(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=rz(t,n),o=(0,X.Z)(a,2);return mB(e,o[0],o[1],gB(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===wa().getNumber("WEBGL_VERSION")?sz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):sz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===wa().getNumber("WEBGL_VERSION")?sz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):sz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===wa().getNumber("WEBGL_VERSION")?sz(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)})):sz(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),sz(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=oz(t,n),o=(0,X.Z)(a,2);return mB(e,o[0],o[1],xB(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=oz(t,n),o=(0,X.Z)(a,2);return mB(e,o[0],o[1],bB(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(xz(this.gl,this.framebuffer),this.outputTexture=null),sz(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=rz(t,n),o=(0,X.Z)(a,2),i=o[0],s=o[1],u=new Uint8Array(t*n*4);return sz(e,(function(){return e.readPixels(0,0,i,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return wB(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();sz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return sz(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),sz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),sz(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(wa().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return sz(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=fB(n));var r,a=function(e){return kz(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return sz(n,(function(){return n.attachShader(a,t.vertexShader)})),sz(n,(function(){return n.attachShader(a,e)})),function(e,t){if(sz(e,(function(){return e.linkProgram(t)})),!wa().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),r=Object.assign(a,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),sz(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),console.assert(function(e,t,n){return sz(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),yz(e,t,"clipSpacePos",n,3,20,0)&&yz(e,t,"uv",n,2,20,12)}(n,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&vz(n,r),this.setProgram(r),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(sz(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&vz(this.gl,this.program)),sz(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return kz(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),sz(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),gz(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=oz(t,n),a=(0,X.Z)(r,2),o=a[0],i=a[1];this.setOutputMatrixTextureDriver(e,o,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&vz(this.gl,this.program),wz(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}sz(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),sz(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=dz(this.gl,2===wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=mr(pr().mark((function e(t){var n=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wr((function(){return n.disposed||n.isQueryAvailable(t,wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in wa().platform&&(r=wa().platform.setTimeoutCustom.bind(wa().platform)),Wr((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),bz(this.gl,e,this.framebuffer),this.debug&&wz(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(bz(this.gl,this.outputTexture,this.framebuffer),this.debug&&wz(this.gl)):xz(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;bz(r,e,this.framebuffer),this.debug&&wz(r),this.outputTexture=e,sz(r,(function(){return r.viewport(0,0,t,n)})),sz(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),sz(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var SB=aM,_B=YM,TB=QM,EB=$A,CB=eO,IB=iO,NB=GO,jB=eL,RB=oL,AB=kL,MB=jL,OB=AL,LB=OL,DB=PL,PB=qL,FB=YL,zB=$L,BB=tD,UB=vD,VB=bD,GB=ND,WB=LO,HB=zD,ZB=qD,qB=iP,XB=dP,KB=hP,YB=xP,QB=kP,JB=OP,$B=PP,eU=WA,tU=pM,nU=ZM,rU=rF,aU=oF,oU=sF,iU=fF,sU=wF,uU=_F,cU=CF,lU=NF,dU=dL,fU=OF,pU=FF,hU=xM,mU=HF;function vU(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function yU(e,t){return 1===t?[e]:vU(e,t)}var gU=function(){function e(t){if(vr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=aB(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=yU("rc",this.rank),r=Qz(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return br(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),bU=br((function e(t,n){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?Fz(["r","c","d"],"inputShape"):Dz(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":zz(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var xU=function(){function e(t){vr(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return br(e,[{key:"acquireTexture",value:function(e,t,n){var r=kU(t,n),a=SU(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=wU(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===$F.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===$F.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===$F.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===$F.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===$F.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=kU(n,r),o=SU(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=wU(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=wa().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function wU(e,t,n,r,a){var o,i=function(e,t){switch(e){case $F.PACKED_2X2_FLOAT32:return bB(t);case $F.PACKED_2X2_FLOAT16:return xB(t);case $F.UNPACKED_FLOAT32:return vB(t);case $F.UNPACKED_FLOAT16:return yB(t);case $F.PACKED_4X1_UNSIGNED_BYTE:return gB(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=oz(e[0],e[1]),u=(0,X.Z)(s,2);o=u[0]*u[1]}else{var c=rz(e[0],e[1]),l=(0,X.Z)(c,2);o=l[0]*l[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,i);return o*d}function kU(e,t){if(e===JF.UPLOAD)return $F.PACKED_2X2_FLOAT32;if(e===JF.RENDER||null==e)return function(e){return wa().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?$F.PACKED_2X2_FLOAT32:$F.UNPACKED_FLOAT32:e?$F.PACKED_2X2_FLOAT16:$F.UNPACKED_FLOAT16}(t);if(e===JF.DOWNLOAD||e===JF.PIXELS)return $F.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function SU(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var _U=br((function e(t,n){vr(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),TU="if (isnan(x)) return x;",EU="return x;",CU="return abs(x);";var IU="return (x >= 0.0) ? x : (exp(x) - 1.0);",NU=TU+"\n  return (x < 0.0) ? 0.0 : x;\n",jU=TU+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",RU="return x;",AU="return 1.0 / (1.0 + exp(-1.0 * x));",MU="return x;",OU="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",LU="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",DU="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",PU="return 1.0 / (1.0 + exp(-1.0 * x));",FU=br((function e(t,n){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),zU=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length);var n=t.length,r=yU("rc",n),a=Qz(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),BU=qv,UU={};var VU=wa().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),GU=600;var WU=function(e){Su(n,e);var t=Eu(n);function n(e){var r,a,o;if(vr(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!wa().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof kB)a=e;else{var i=nz(wa().getNumber("WEBGL_VERSION"),e);a=new kB(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=nz(wa().getNumber("WEBGL_VERSION"));a=new kB(s),r.binaryCache=((o=wa().getNumber("WEBGL_VERSION"))in UU||(UU[o]={}),UU[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new xU(r.gpgpu),r.numMBBeforeWarning=null==wa().global.screen?1024:wa().global.screen.height*wa().global.screen.width*window.devicePixelRatio*GU/1024/1024,r.texData=new kr(Ft(r),Fl()),r}return br(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,o){var i=this.makeTensorInfo(t,n),s=this.texData.get(i.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=Ez(t),c=new lB(u,!1,o),l=this.runWebGLProgram(c,[i],n,[[r,a]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(i),l.dataId}},{key:"write",value:function(e,t,n){if((wa().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||wa().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:JF.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(wa().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:JF.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new FU(i,RU):new _U(i,RU);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,p=null!=this.activeTimers;(p&&(d=mu()),"complex64"===r)?f=Xg(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=mu()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,v,y,g,b,x,w,k,S,_;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=11;break}return l=c?new FU(o,RU):new _U(o,RU),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),f=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!wa().getBool("DEBUG")){e.next=16;break}if(wa().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==wa().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&wa().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),v=this.texData.get(h.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[v.texture.texture].concat((0,ee.Z)(az(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:g=e.sent,b=g[0],x=g[1],y=Xg(b,x),e.next=32;break;case 31:null==p?y=this.getValuesFromTexture(t):(w=Dr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w));case 32:return null!=h&&this.disposeIntermediateTensorInfo(h),null!=p&&sz(k=this.gpgpu.gl,(function(){return k.deleteBuffer(p)})),S=this.convertAndCacheOnCPU(t,y),_=this.pendingRead.get(t),this.pendingRead.delete(t),_.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Fl().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var c;c=s?new FU(a,RU):new _U(a,RU);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:i}],i),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),p=Fl().makeTensorFromTensorInfo(f),h=this.texData.get(f.dataId);return Object.assign({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return gu(e)}));return Nl(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Nl(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!lz(n)){if(wa().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=Dr(n);if(wa().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture.texture].concat((0,ee.Z)(az(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=wa().getBool("WEBGL_PACK")&&!0===a,d=l?Ez(n):n,f=l?new uB(d):new sB(d),p=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var o=xu(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=xu(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return mr(pr().mark((function e(){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,s.kernelMs=jr(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:mu(),endMs:null}}},{key:"endTimer",value:function(e){return wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=mu(),e)}},{key:"getQueryTime",value:function(){var e=mr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(wa().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VU;return wa().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Dr(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Bs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return BU(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new FU(e.shape,t),a=this.compileAndRun(r,[e],n);return Fl().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=tU(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(wa().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,CU,e.dtype);var n=new _U(e.shape,CU),r=this.compileAndRun(n,[e]);return Fl().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&ta(n[0])){var a=n.map((function(e){return yu(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return Fl().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new zU(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new gU(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[_z(e.shape)].concat((0,ee.Z)(Tz(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[_z(t)].concat((0,ee.Z)(Tz(t))),o=new bU(a,n),i=[n],s=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;null!=t&&Mr(Dr(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var i,s=Ez(a);i=r?new iB(s):new oB(s);var u=[null!=t?t:az(s)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(i,[{shape:s,dtype:o,dataId:e}],o,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===QF.DENSE){var c=null!=i?i:az(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Dr(s.shape))return u.values=Xr(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Dr(t.shape)<=wa().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Iz(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),l.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,p={shape:s.shape,texData:u,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=Jz(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,c=i.keptDims,l="",d="",f="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=sa(u);f="".concat(h[0]===o[1],"_").concat(h[h.length-1]===o[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&Fr(t.shape,o),y=1===Dr(t.shape),g=Ed(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&Fr(o,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(y,"_").concat(g,"_").concat(v,"_").concat(l,"_").concat(d,"_").concat(f,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+"_"+r+"_"+a+"".concat(wa().getNumber("WEBGL_VERSION"))}(e,d,p),m=this.getAndSaveBinary(h,(function(){return tB(a.gpgpu,e,d,p)})),v=null!=this.activeTimers;v&&(f=this.startTimer()),wa().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(rB(t.inShapeInfos,n),rB([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===wa().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=Jz(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(Dr(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=sa(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}(this.gpgpu,m,d,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var y=wa().get("WEBGL_FLUSH_THRESHOLD");if(y>0){var g=mu();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!wa().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!wa().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Ul((function(){if(!wa().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=wa().getBool("DEBUG");wa().set("DEBUG",!1);var n=e.abs(hd(1e-8)).dataSync()[0];if(wa().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=mu());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=wa().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=wa().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&wa().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Ir(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=qr(e);e=a.newShape}var o=Dr(e),i=null;e.length<=1&&o<=n?i=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);var s=null!=i&&Math.max.apply(Math,(0,ee.Z)(i))>r&&Math.min.apply(Math,(0,ee.Z)(i))<=(t?2:1)&&Math.min.apply(Math,(0,ee.Z)(i))>0;if(null==i||s)if(t){var u=_z(e),c=2,l=2;if(e.length){var d=Tz(e),f=(0,X.Z)(d,2);c=f[0],l=f[1]}i=Ur(o=u*(c/2)*(l/2)).map((function(e){return 2*e}))}else i=Ur(o);return i}(n,s),t.texShape=l),null!=a){var d,f=Ez(n),p=l[1],h=l[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!m){var v=oz(l[0],l[1]),y=(0,X.Z)(v,2);p=y[0],h=y[1]}d=s?new dB(f,m):new lB(f,m);var g=m?[h,p]:l,b=this.makeTensorInfo(g,r),x=this.texData.get(b.dataId);x.usage=m?JF.PIXELS:JF.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,h,a);var w=[[h,p]],k=this.runWebGLProgram(d,[b],r,w,!0),S=this.texData.get(k.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,wa().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=mu()-u)}else{var _=this.acquireTexture(l,i,r,s);t.texture=_}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*$r(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,X.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=mr(pr().mark((function e(){var t,n,r,a,o,i,s,u,c=this;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,X.Z)(r[n],2),o=a[1],t.push(this.checkCompletionAsync_(o));return e.abrupt("return",Promise.all(t));case 6:i=pr().mark((function e(){var n,r,a;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,X.Z)(u[s],2),r=n[1],a=new Promise((function(e){try{c.checkCompletion_(r),e(!0)}catch(t){throw t}})),t.push(a);case 3:case"end":return e.stop()}}),e)})),s=0,u=Object.entries(this.binaryCache);case 8:if(!(s<u.length)){e.next=13;break}return e.delegateYield(i(),"t0",10);case 10:s++,e.next=8;break;case 13:return e.abrupt("return",Promise.all(t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=mr(pr().mark((function e(t){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Tg();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw mz(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,X.Z)(t[e],2)[1],r=nB(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,o=r.customUniformLocations,i=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,c=r.inTexShapesLocations,l=r.outShapeLocation,d=r.outShapeStridesLocation,f=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=o,n.infLoc=i,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=c,n.outShapeLocation=l,n.outShapeStridesLocation=d,n.outTexShapeLocation=f}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,o=e.width,i=e.channels,s=Fl().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,o,i);return Fl().makeTensorFromDataId(u,t,n,s)}}]),n}(Sr);WU.nextDataId=0;cc()&&Ql("webgl",(function(){return new WU}),2);var HU="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",ZU=br((function e(t,n,r){vr(this,e),this.variableNames=["A","B"],this.outputShape=Id(n,r),this.enableShapeUniforms=aB(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),qU="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",XU=br((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];vr(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Id(n,r);var o=this.outputShape.length;this.enableShapeUniforms=aB(o);var i="";if(a)if(0===o||1===Dr(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=Qz(o);if(i="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=yU("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function KU(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var YU={kernelName:Uo,backendName:"webgl",kernelFunc:KU};function QU(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=KU({inputs:{x:r},backend:n}),u=KU({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var JU={kernelName:Ja,backendName:"webgl",kernelFunc:QU},$U="return (a < 0.) ? b * a : a;",eV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var tV={kernelName:qo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",pu(o,"float32")),s=wa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new XU(eV,a.shape,i.shape):new ZU($U,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},nV="return (a < 0.) ? b * a : a;",rV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var aV={kernelName:Ai,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=wa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new XU(rV,r.shape,a.shape):new ZU(nV,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}},oV="if (isnan(x)) return x;";function iV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return o=wa().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new FU(u.shape,n):new _U(u.shape,t),c.runWebGLProgram(o,[u],l)}}function sV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,l=r.b,d=o;if(i&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),p=d.texData.get(l.dataId),h=[[f.complexTensorInfos.real,p.complexTensorInfos.real],[f.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,X.Z)(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new ZU(t,c.shape,l.shape);return d.runWebGLProgram(s,[o,i],qu(r.dtype,a.dtype))})),m=(0,X.Z)(h,2),v=m[0],y=m[1],g=QU({inputs:{real:v,imag:y},backend:d});return d.disposeIntermediateTensorInfo(v),d.disposeIntermediateTensorInfo(y),g}var b,x=u||qu(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var w=d.texData.get(c.dataId).values,k=d.texData.get(l.dataId).values,S="string"===c.dtype?Ib(w):w,_="string"===c.dtype?Ib(k):k,T=s(c.shape,l.shape,S,_,x),E=(0,X.Z)(T,2),C=E[0],I=E[1],N=d.makeTensorInfo(I,x);return d.texData.get(N.dataId).values=C,N}return b=wa().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new XU(n,c.shape,l.shape,a):new ZU(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function uV(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?MU:EU;if("relu"===e)return t?LU:NU;if("elu"===e)return t?OU:IU;if("relu6"===e)return t?DU:jU;if("prelu"===e)return t?rV:nV;if("leakyrelu"===e)return t?eV:$U;if("sigmoid"===e)return t?PU:AU;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var cV=br((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];vr(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=aB(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",y="";s&&(v=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var g=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(x="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(x,";\n        for (int i = 0; i < ").concat(d,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),lV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},dV=br((function e(t,n,r){vr(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Id(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),fV="return a * b;";function pV(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=qu(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(o.dataId),c=new dV(lV.REAL,a.shape,o.shape),l=new dV(lV.IMAG,a.shape,o.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],f=r.runWebGLProgram(c,d,"float32"),p=r.runWebGLProgram(l,d,"float32"),h=QU({inputs:{real:f,imag:p},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,o])){var m=r.texData.get(a.dataId),v=r.texData.get(o.dataId),y=WB(a.shape,o.shape,m.values,v.values,i),g=(0,X.Z)(y,2),b=g[0],x=g[1],w=r.makeTensorInfo(x,i);return r.texData.get(w.dataId).values=b,w}return t=wa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new XU(fV,a.shape,o.shape):new ZU(fV,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var hV={kernelName:xi,backendName:"webgl",kernelFunc:pV};function mV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=Dr(a.shape),u=Hr(o,s),c=Dr(u);Mr(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=i.texData.get(a.dataId);return!l.isPacked||Iz(a.shape,u)||null!==l.texture&&Iz(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[_z(e.shape)].concat((0,ee.Z)(Tz(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[_z(t)].concat((0,ee.Z)(Tz(t))),i=new bU(o,r),s=[r],u=n.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,i)}var vV={kernelName:Ui,backendName:"webgl",kernelFunc:mV},yV=br((function e(t,n){vr(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(zr(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),gV=br((function e(t,n){vr(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function bV(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Mg(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u=a[i],c=u.inSize,l=u.windowSize,d=u.outSize,f=void 0;f="mean"===n?0===i?new yV({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new yV({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new gV({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=o,o=r.runWebGLProgram(f,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var xV=br((function e(t,n){vr(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=Qz(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var wV=br((function e(t,n){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=Qz(this.rank),i=vU("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function kV(e,t,n){var r=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wV(e.shape,t):new xV(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function SV(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=Zr(a,e.shape),s=i,u=Mh(s,o),c=null!=u,l=e;c&&(l=kV(e,u,r),s=Lh(s.length,o)),Ah("sum",s,o);var d=jh(l.shape,s),f=(0,X.Z)(d,2),p=f[0],h=f[1],m=p;n&&(m=Rh(p,i));var v=Dr(h),y=mV({inputs:{x:l},attrs:{shape:[Dr(e.shape)/v,v]},backend:r}),g=bV(y,Xu(e.dtype),"sum",r),b=mV({inputs:{x:g},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var _V={kernelName:ss,backendName:"webgl",kernelFunc:SV};function TV(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,f=hU(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=f}else t=kV(o,i,s);return t}var EV={kernelName:Is,backendName:"webgl",kernelFunc:TV},CV=1e3;function IV(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,m=n.shape.length,v=r?t.shape[h-2]:t.shape[h-1],y=a?n.shape[m-1]:n.shape[m-2],g=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=Dr(x),S=Dr(w),_=Id(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([g,b]);Mr(v===y,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(y,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var T,E=r?[k,v,g]:[k,g,v],C=a?[S,b,y]:[S,y,b],I=mV({inputs:{x:t},backend:o,attrs:{shape:E}}),N=mV({inputs:{x:n},backend:o,attrs:{shape:C}}),j=[I,N],R=Math.max(k,S),A=r?I.shape[1]:I.shape[2],M=null!=s,O=null!=c,L="leakyrelu"===p,D=null!=p?uV(p,!0):null;if((1===g||1===b)&&A>CV&&!1===(M||O||L||null!=D)){var P=I,F=N;r&&(P=TV({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),j.push(P)),a&&(F=TV({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),j.push(F));var z=1===b,B=P;1!==b&&(B=mV({inputs:{x:P},backend:o,attrs:{shape:[R,A,1]}}),j.push(B));var U=1===b?2:1,V=F;z&&(V=mV({inputs:{x:F},backend:o,attrs:{shape:[R,1,A]}}),j.push(V));var G=pV({inputs:{a:B,b:V},backend:o});T=SV({inputs:{x:G},backend:o,attrs:{axis:U,keepDims:!0}}),j.push(G)}else{var W=qu(t.dtype,n.dtype),H=new cV(E,C,[R,g,b],r,a,M,D,O,L),Z=[I,N];if(null!=s&&Z.push(s),O&&Z.push(c),L){var q=o.makeTensorInfo([],"float32",pu(d,"float32"));Z.push(q),j.push(q)}T=o.runWebGLProgram(H,Z,W)}var X=mV({inputs:{x:T},backend:o,attrs:{shape:_}});j.push(T);for(var K=0,Y=j;K<Y.length;K++){var Q=Y[K];o.disposeIntermediateTensorInfo(Q)}return X}var NV={kernelName:Ps,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return IV({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},jV="return abs(x);";var RV={kernelName:Ea,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=tU(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=wa().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new FU(a.shape,jV):new _U(a.shape,jV),r.runWebGLProgram(t,[a],a.dtype)}},AV=iV({opSnippet:TU+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),MV={kernelName:Ca,backendName:"webgl",kernelFunc:AV},OV=iV({opSnippet:TU+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),LV={kernelName:Ia,backendName:"webgl",kernelFunc:OV},DV="return a + b;",PV=sV({opSnippet:DV,packedOpSnippet:DV,supportsComplex:!0,cpuKernelImpl:SB}),FV={kernelName:Na,backendName:"webgl",kernelFunc:PV},zV=br((function e(t,n){vr(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),BV=br((function e(t,n){vr(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var UV={kernelName:ja,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return KU({inputs:{x:a[0]},backend:r});if(a.length>wa().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return qu(e,t)})),c=a.map((function(e){return e.shape})),l=wa().getBool("WEBGL_PACK")?new BV(a[0].shape,c):new zV(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var VV={kernelName:Ra,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=Zr(o,a.shape),c=u,l=Mh(c,s),d=a;null!=l&&(d=TV({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Lh(c.length,s)),Ah("all",c,s);var f,p=jh(d.shape,c),h=(0,X.Z)(p,2),m=h[0],v=mV({inputs:{x:d},backend:n,attrs:{shape:[-1,Dr(h[1])]}}),y=bV(v,v.dtype,"all",n);return f=mV(i?{inputs:{x:y},backend:n,attrs:{shape:Rh(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}};var GV={kernelName:Aa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=Zr(o,a.shape),c=u,l=Mh(c,s),d=a;null!=l&&(d=TV({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Lh(c.length,s)),Ah("any",c,s);var f,p=jh(d.shape,c),h=(0,X.Z)(p,2),m=h[0],v=mV({inputs:{x:d},backend:n,attrs:{shape:[-1,Dr(h[1])]}}),y=bV(v,v.dtype,"any",n);return f=mV(i?{inputs:{x:y},backend:n,attrs:{shape:Rh(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}},WV=br((function e(t,n,r){vr(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),HV=br((function e(t,n,r,a){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Mr(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=Qz(l),f=yU("coords",l);if(1===i){var p=Qz(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],v=h.map((function(e){return"int "+e})),y=yU("sourceLocR",u-1).concat("inIdx.r"),g=yU("sourceLocG",u-1).concat("inIdx.g"),b=yU("sourceLocB",u-1).concat("inIdx.b"),x=yU("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),_=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(_,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function ZV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=Mg(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new WV(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=ZV(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function qV(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=Mg(a[a.length-1]),i=new HV(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var c=qV(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function XV(e,t,n,r){var a=[n];if(Ah("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!wa().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=e.texData.get(t.dataId),s=t;null!==i&&i.isPacked&&(s=e.unpackTensor(t),o.push(s));var u=jh(s.shape,a),c=(0,X.Z)(u,2),l=c[0],d=Dr(c[1]),f=mV({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});o.push(f);var p=ZV(e,f,r);o.push(p);var h=mV({inputs:{x:p},backend:e,attrs:{shape:l}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return qV(e,t,r)}var KV={kernelName:Ma,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Zr(r.axis,a.shape),i=Mh(o,a.shape.length),s=a,u=[];null!=i&&(s=TV({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=Lh(o.length,s.shape.length)),Ah("argMax",[o[0]],s.shape.length);var c=XV(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var YV={kernelName:Oa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Zr(r.axis,a.shape),i=Mh(o,a.shape.length),s=a,u=[];null!=i&&(s=TV({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=Lh(o.length,s.shape.length)),Ah("argMin",[o[0]],s.shape.length);var c=XV(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},QV=iV({opSnippet:TU+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),JV={kernelName:La,backendName:"webgl",kernelFunc:QV},$V=iV({opSnippet:TU+"return log(x + sqrt(x * x + 1.0));"}),eG={kernelName:Da,backendName:"webgl",kernelFunc:$V},tG=iV({opSnippet:TU+"\n  return atan(x);\n"}),nG={kernelName:Pa,backendName:"webgl",kernelFunc:tG},rG=sV({opSnippet:HU+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+qU+"\n  return result;\n"}),aG={kernelName:za,backendName:"webgl",kernelFunc:rG},oG=iV({opSnippet:TU+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),iG={kernelName:Fa,backendName:"webgl",kernelFunc:oG},sG=br((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(vr(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="0.0";if(m||(g="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?v:y:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(b="avgValue / max(count, 1.0)");var x=4*Math.floor(i/4),w=i%4,k="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(g,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(g,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(k,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(k,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}})),uG=br((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(vr(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,y=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(y,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / max(count, 1.0)");var k=4*Math.floor(i/4),S=i%4,_="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(y,", ").concat(g,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(_,"\n            }\n\n            int xC = xCCorner + ").concat(k,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(_,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(_,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}}));var cG={kernelName:Ba,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Mz(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;Mr(Mp(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=Sp(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Fr(c.inShape,c.outShape))return KU({inputs:{x:a},backend:n});var l=new sG(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var lG={kernelName:Va,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=_p(a.shape,o,i,[1,1,1],s,u,c),d=new uG(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},dG=br((function e(t){vr(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),fG=br((function e(t){vr(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=f-1-t.padInfo.top,v=p-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var pG={kernelName:Ga,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=_p(o.shape,i,s,[1,1,1],u,c),d=new fG(l);return n.runWebGLProgram(d,[a],o.dtype)}};var hG={kernelName:Ua,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Mz([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=Sp(i.shape,s,u,1,c),d=new dG(l);return n.runWebGLProgram(d,[a],i.dtype)}};var mG={kernelName:Wa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return IV({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},vG=br((function e(t,n,r,a,o,i){vr(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],Id(t,n),Id(t,r);var s="0.0";null!=a&&(Id(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(Id(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),yG=br((function e(t,n,r,a,o,i){vr(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Id(t,n),Id(t,r);var s="vec4(0.0)";null!=a&&(Id(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(Id(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),gG={kernelName:Do,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;Mr(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Mr(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Mr(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var p=wa().getBool("WEBGL_PACK_NORMALIZATION")?new yG(a.shape,o.shape,i.shape,d,f,c):new vG(a.shape,o.shape,i.shape,d,f,c);return n.runWebGLProgram(p,l,l[0].dtype)}},bG=br((function e(t){vr(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=Qz(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return xG.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(xG[t]," = start[").concat(t,"] + coords.").concat(xG[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),xG=["x","y","z","w","u","v"];var wG=br((function e(t){vr(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=Qz(this.rank),r=yU("coords",this.rank),a=yU("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function kG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Wf(a,r.begin,r.size),i=(0,X.Z)(o,2),s=i[0],u=i[1];if(jf(a,s,u),0===Dr(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),l=nU(c.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}var d=n.texData.get(a.dataId).isPacked,f=Vf(a.shape,s,u);if(d||!f){var p=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wG(u):new bG(u),h=[s];return n.runWebGLProgram(p,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=Gf(t,sa(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,s,u,n)}var SG={kernelName:es,backendName:"webgl",kernelFunc:kG},_G={kernelName:Ha,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;Mr(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=Lg(a.shape,o,s),c=Dg(u.length,o.length),l=Pg(a.shape,o,s),d=Fg(i,o.length),f=zg(l,i,o.length),p=[],h=mV({inputs:{x:a},backend:n,attrs:{shape:u}}),m=TV({inputs:{x:h},backend:n,attrs:{perm:c}}),v=mV({inputs:{x:m},backend:n,attrs:{shape:l}}),y=kG({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var TG={kernelName:Za,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=_B(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}};var EG={kernelName:Xa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=Id(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},CG=sV({opSnippet:"return float(a != b);",cpuKernelImpl:ZB,dtype:"bool"}),IG={kernelName:ki,backendName:"webgl",kernelFunc:CG};function NG(e){var t=e.inputs,n=e.backend,r=t.input;return KU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var jG={kernelName:Fi,backendName:"webgl",kernelFunc:NG},RG="return float(int(x));";var AG={kernelName:Ka,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return KU({inputs:{x:o},backend:r});var s=km(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=QU({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=NG({inputs:{input:o},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),d}if(!Jr(o.dtype,i)){var f=KU({inputs:{x:o},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:i}}if(r.shouldExecuteOnCPU([o])){var p=r.texData.get(o.dataId).values,h=EB(p,o.shape,o.dtype,i),m=(0,X.Z)(h,3),v=m[0],y=m[1],g=m[2];return r.makeTensorInfo(v,y,g)}if("int32"===i)return function(e,t){var n=new _U(e.shape,RG),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var b=r.makeTensorInfo([],"bool",Xr("bool",1)),x=CG({inputs:{a:o,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),x}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},MG="return ceil(x);",OG=iV({opSnippet:MG,packedOpSnippet:MG,cpuKernelImpl:CB}),LG={kernelName:Ya,backendName:"webgl",kernelFunc:OG},DG=br((function e(t){vr(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),PG=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var FG={kernelName:Qa,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=wa().getBool("WEBGL_PACK_CLIP")?new PG(o.shape):new DG(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},zG=br((function e(t){vr(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function BG(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var UG={kernelName:$a,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new zG(r.shape),i=[BG(r,a.complexTensorInfos.real),BG(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},VG=br((function e(t){vr(this,e),this.outputShape=[],this.outputShape=Cg(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),GG=br((function e(t,n){vr(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Cg(t,n);var r=this.outputShape,a=r.length,o=Qz(a),i=yU("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];p+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(WG(s,l,m),"),\n            vec2(").concat(WG(d,l,m),"));\n        }")}var v=u.length,y=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(v,"(").concat(WG(s,l,y),"),\n          vec2(").concat(WG(d,l,y),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function WG(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function HG(e){var t=e.inputs,n=e.backend,r=t.input;return KU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var ZG={kernelName:Go,backendName:"webgl",kernelFunc:HG};function qG(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return NG({inputs:{input:e},backend:n})})),o=e.map((function(e){return HG({inputs:{input:e},backend:n})})),i=qG(a,t,n),s=qG(o,t,n),u=QU({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Dr(e.shape.slice(t));return mV({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=Cg(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=IB(d,f,r,p),m=Cg(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var y=e.filter((function(e){return Dr(e.shape)>0})),g=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&y[0].shape.length>1;if(1===y.length){var b=g?new _U(e[0].shape,RU):new FU(e[0].shape,RU);return n.runWebGLProgram(b,e,r)}var x=wa().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(y.length>x){for(var w=[],k=0;k<y.length;k+=x){var S=y.slice(k,k+x);w.push(qG(S,t,n))}for(var _=qG(w,t,n),T=0,E=w;T<E.length;T++){var C=E[T];n.disposeIntermediateTensorInfo(C)}return _}if(g){var I=new GG(y.map((function(e){return e.shape})),t);return n.runWebGLProgram(I,y,r)}var N=function(e,t,n){var r=Cg(e.map((function(e){return e.shape})),t),a=e.map((function(e){return mV({inputs:{x:e},attrs:{shape:[-1,Dr(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(y,t,n),j=N.tensors2D,R=N.outShape,A=new VG(j.map((function(e){return e.shape}))),M=n.runWebGLProgram(A,j,r);j.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var O=mV({inputs:{x:M},attrs:{shape:R},backend:n});return n.disposeIntermediateTensorInfo(M),O}function XG(e){var t=e.inputs,n=e.backend,r=Zr(e.attrs.axis,t[0].shape)[0];Eg(t.map((function(e){return e.shape})),r);var a=Cg(t.map((function(e){return e.shape})),r);if(0===Dr(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return Dr(e.shape)>0}));return 1===o.length?KU({inputs:{x:o[0]},backend:n}):qG(o,r,n)}var KG={kernelName:eo,backendName:"webgl",kernelFunc:XG},YG=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,y=v?1:2,g=v?2:3,b=v?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(g,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),QG=br((function e(t){vr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),JG=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vr(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=aB(this.outputShape.length);for(var i=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,d=l,f="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",p=0;p<l;p++)f+="\n           vec4 xTexelC".concat(2*p,";\n           int xTexelC").concat(2*p,"Ready;\n           vec4 xTexelC").concat(2*p+1,";\n           int xTexelC").concat(2*p+1,"Ready;\n           vec4 xC").concat(p,";");f+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var h=0;h<l;h++)f+="\n           xTexelC".concat(2*h," = vec4(0.0);\n           xTexelC").concat(2*h,"Ready = 0;\n           xTexelC").concat(2*h+1," = vec4(0.0);\n           xTexelC").concat(2*h+1,"Ready = 0;\n           xC").concat(h," = vec4(0.0);");f+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(d+1)/2;m++){var v=2*m;if(f+="\n           xC = xCCorner + ".concat(v*u,";\n           "),1===s){if(v<l&&(i%2===1?(f+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n               "),f+=1===u&&v>0?"\n                 xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                   } else {\n                     xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                   }\n                   ")):f+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xC").concat(v," = xTexelC").concat(v,";\n                 "),v+1<l)){var y=i%2===0?Ir(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(f+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                     xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(v+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(v+1,"Ready = 1;\n                   }\n                   "),f+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                     } else {\n                      xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                     }\n                     "):"\n                     xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                     ")):f+=1===y?"\n                     xC".concat(v+1," = xTexelC").concat(v,";\n                     "):"\n                     xCOffset = xC + ".concat(y,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                       xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(v+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(v+1,"Ready = 1;\n                     }\n\n                     xC").concat(v+1," = xTexelC").concat(v+1,";\n                     ")}}else v<l&&(i%2===1?(f+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n               "),v+1<l&&(f+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                 "))):(f+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                   xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(v,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(v,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                   xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(v+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(v+1,"Ready = 1;\n                 }\n\n                 xC").concat(v," = vec4(\n                   xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n               "),v+1<l&&(f+="\n                   xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                 "))));v<l&&(f+="\n             wTexel = getW(r, ".concat(v,", d1, d2);\n             dotProd += xC").concat(v,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(v,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),v+1<l&&(f+="\n               wTexel = getW(r, ".concat(v+1,", d1, d2);\n               dotProd += xC").concat(v+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(v+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}f+="\n     }\n   ",f+="\n     }\n   ",f+="\n     }\n   ";var g="",b="";r&&(g=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(g,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(f,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),$G=br((function e(t,n){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=aB(this.outputShape.length);for(var r=n.dataFormat,a=Lz(),o="channelsLast"===r,i=o?1:2,s=o?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function eW(e,t){var n=e.length;return n>=3?[].concat((0,ee.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function tW(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=n.shape,m=o.texData.get(n.dataId),v=a.inChannels,y=h[0]*h[1]*h[2],g=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var w=eW(c.shape,b);null!=w&&(c=mV({inputs:{x:c},backend:o,attrs:{shape:w}}),x.push(c))}if(null!=s){var k=eW(s.shape,b);null!=k&&(s=mV({inputs:{x:s},backend:o,attrs:{shape:k}}),x.push(s))}if(!((1===y||1===g)&&v>CV)&&m.isPacked&&b&&null!=m.texture&&h[2]%2!==0&&Fr(m.shape.slice(-3),h.slice(-3))){var S=h[0]*h[1]*(h[2]+1),_={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},T=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,Mr(Iz(m.shape,_.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(_.shape," isn't free")}));var E=mV({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var C=IV({a:_,b:E,backend:o,transposeA:!1,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d}),I=o.texData.get(C.dataId);Mr(I.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=T,I.shape=a.outShape,(t=KU({inputs:{x:C},backend:o})).shape=a.outShape,x.push(C)}else{var N=a.outHeight*a.outWidth,j=mV({inputs:{x:n},backend:o,attrs:{shape:b?[a.batchSize,N,a.inChannels]:[a.batchSize,a.inChannels,N]}}),R=mV({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),A=IV({a:b?j:R,b:b?R:j,transposeA:!b,transposeB:false,backend:o,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d});t=mV({inputs:{x:A},backend:o,attrs:{shape:a.outShape}}),x.push(j),x.push(R),x.push(A)}for(var M=0,O=x;M<O.length;M++){var L=O[M];o.disposeIntermediateTensorInfo(L)}return t}function nW(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=r.filterWidth,h=r.filterHeight,m=r.inChannels,v=r.outWidth,y=r.outHeight,g="channelsLast"===r.dataFormat,b=p*h*m,x=y*v,w=[r.batchSize,b,x],k=[];if(null!=u){var S=eW(u.shape,g);null!=S&&(u=mV({inputs:{x:u},backend:a,attrs:{shape:S}}),k.push(u))}if(null!=i){var _=eW(i.shape,g);null!=_&&(i=mV({inputs:{x:i},backend:a,attrs:{shape:_}}),k.push(i))}var T=mV({inputs:{x:n},backend:a,attrs:{shape:[1,b,Dr(n.shape)/b]}});k.push(T);var E=new $G(w,r),C=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],I=a.runWebGLProgram(E,[t],"float32",C),N=mV({inputs:{x:I},backend:a,attrs:{shape:w}});k.push(I),k.push(N);var j=null!=i,R=null!=u,A="leakyrelu"===f,M=f?uV(f,!0):null,O=new cV(g?N.shape:T.shape,g?T.shape:N.shape,g?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,j,M,R,A),L=g?[N,T]:[T,N];if(i&&L.push(i),R&&L.push(u),A){var D=a.makeTensorInfo([],"float32",pu(l,"float32"));L.push(D),k.push(D)}var P=a.runWebGLProgram(O,L,"float32"),F=mV({inputs:{x:P},backend:a,attrs:{shape:r.outShape}});k.push(P);for(var z=0,B=k;z<B.length;z++){var U=B[z];a.disposeIntermediateTensorInfo(U)}return F}var rW={kernelName:to,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=Lp(c),p=Tp(o.shape,i.shape,s,l,u,d,!1,f);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(p.strideWidth<=2&&"channelsLast"===f&&wa().getBool("WEBGL_EXP_CONV")){var h=new JG(p),m=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];t=r.runWebGLProgram(h,[o,i],"float32",m)}else if(wa().getBool("WEBGL_CONV_IM2COL"))t=nW({x:o,filter:i,convInfo:p,backend:r});else{var v=new YG(p);t=r.runWebGLProgram(v,[o,i],"float32")}else t=tW({x:o,filter:i,convInfo:p,backend:r});var y=mV({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),y}},aW=br((function e(t){vr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),oW=br((function e(t){vr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),iW=br((function e(t){vr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),sW=br((function e(t){vr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var uW={kernelName:no,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=Lp(u),f=Tp(a.shape,l,i,1,s,c,!1,d),p=new aW(f);return n.runWebGLProgram(p,[a,o],"float32")}};var cW={kernelName:ro,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=Lp(c),f=Tp(i,o.shape,s,1,u,l,!1,d),p=new oW(f);return n.runWebGLProgram(p,[a,o],"float32")}};var lW={kernelName:ao,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=Ep(a.shape,o.shape,i,u,s),l=new QG(c);return n.runWebGLProgram(l,[a,o],"float32")}};var dW={kernelName:oo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=Ep(a.shape,u,i,1,s),l=new iW(c);return n.runWebGLProgram(l,[a,o],"float32")}};var fW,pW={kernelName:io,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=Ep(r.inputShape,o.shape,s,1,i),c=new sW(u);return n.runWebGLProgram(c,[a,o],"float32")}},hW=iV({opSnippet:oV+"\n  return cos(x);\n"}),mW={kernelName:so,backendName:"webgl",kernelFunc:hW},vW=iV({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),yW={kernelName:uo,backendName:"webgl",kernelFunc:vW},gW=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=(0,X.Z)(t,4),s=i[0],u=i[1],c=i[2],l=i[3],d=(0,X.Z)(n,1)[0],f=(0,X.Z)(r,2),p=f[0],h=f[1];this.outputShape=[d,p,h,l];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),y="".concat(c-1,".0"),g=p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],b=(0,X.Z)(g,3),x=b[0],w=b[1],k=b[2],S=h>1?["".concat((c-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],_=(0,X.Z)(S,3),T=_[0],E=_[1],C=_[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(T,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),bW={kernelName:fo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new gW(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(fW||(fW={}));var xW=br((function e(t,n,r,a){vr(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var o=this.outputShape.length,i=this.op===fW.Prod?"1.0":"0.0",s=r?i:"getX(".concat(wW(o,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(Qz(o)," coords = getOutputCoords();\n        int end = ").concat(kW(o,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(kW(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(wW(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function wW(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function kW(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function SW(e,t,n,r,a,o){var i=t.shape.length,s=Mh([r],i),u=t;null!=s&&(u=TV({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=Lh(1,i)[0];if(c!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],d=KU({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var p=new xW(e,u.shape,!1,o),h=[[f]],m=d;d=n.runWebGLProgram(p,[d],d.dtype,h),n.disposeIntermediateTensorInfo(m)}if(a){var v=new xW(e,u.shape,a,o),y=d;d=n.runWebGLProgram(v,[d],d.dtype),n.disposeIntermediateTensorInfo(y)}if(null!=s){var g=TV({inputs:{x:d},backend:n,attrs:{perm:Oh(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),g}return d}var _W={kernelName:co,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return SW(fW.Prod,a,n,o,i,s)}};var TW={kernelName:lo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return SW(fW.Sum,a,n,o,i,s)}};var EW={kernelName:po,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=_B(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(o),p=TB(d,f,i,s);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},CW=function(){function e(t,n,r){vr(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return br(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var IW={kernelName:ho,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,s=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,c=("NHWC"===i?a.shape[2]:a.shape[3])*o,l=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),d=new CW("NHWC"===i?[s,u,c,l]:[s,l,u,c],o,i);return n.runWebGLProgram(d,[a],a.dtype)}},NW=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vr(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=aB(this.outputShape.length);var i=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),jW=br((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];vr(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=aB(this.outputShape.length);for(var i=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<d;h++)p+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var m=0;m<d;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(f+1)/2;v++){var y=2*v;if(p+="\n          xC = xCCorner + ".concat(y*c,";\n          "),1===u){if(y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),p+=1===c&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<d)){var g=s%2===0?Ir(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),p+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(y+1," = vec4(previous.zw, xTexelC").concat(y+1,".xy);\n                    } else {\n                     xC").concat(y+1," = vec4(0.0, 0.0, xTexelC").concat(y+1,".xy);\n                    }\n                    "):"\n                    xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                    ")):p+=1===g?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(g,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<d&&(p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<d&&(p+="\n            wTexel = getW(r, ".concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<d&&(p+="\n              wTexel = getW(r, ".concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var RW={kernelName:mo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),Mr(Mp(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,f=Tp(a.shape,o.shape,i,l,s,c,!0);d=wa().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new jW(f):new NW(f);var p=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,o],"float32",p)}},AW=br((function e(t){vr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),MW=br((function e(t){vr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var OW={kernelName:vo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=Tp(a.shape,l,i,s,u,c,!0),f=new AW(d);return n.runWebGLProgram(f,[a,o],"float32")}};var LW={kernelName:yo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=Tp(r.inputShape,o.shape,i,s,u,c,!0),d=new MW(l);return n.runWebGLProgram(d,[a,o],"float32")}},DW=br((function e(t){vr(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var PW={kernelName:go,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,ee.Z)(r.shape),(0,ee.Z)(r.shape)),o=Dr(r.shape),i=mV({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new DW(o),u=n.runWebGLProgram(s,[i],i.dtype),c=mV({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},FW=br((function e(t){vr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var zW={kernelName:bo,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=kp(o.shape,i.shape,s,u,"NHWC",c),d=new FW(l),f=mV({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var BW={kernelName:So,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=ib(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;ub(o.length,s,r);for(var u=cb(i,s),c=u.path,l=u.steps,d=l.length,f=null,p=o.length,h=[],m=0;m<d;++m){var v,y=wr(l[m]);try{for(y.s();!(v=y.n()).done;){var g=v.value,b=sb(p,s[g]),x=b.permutationIndices,w=b.expandDims,k=void 0;lb(x)?k=r[g]:(k=TV({inputs:{x:r[g]},backend:n,attrs:{perm:x}}),h.push(k));for(var S=k.shape.slice(),_=0;_<w.length;++_)S.splice(w[_],0,1);Fr(k.shape,S)||(k=mV({inputs:{x:k},backend:n,attrs:{shape:S}}),h.push(k)),null===f?f=k:(f=pV({inputs:{a:k,b:f},backend:n}),h.push(f))}}catch(sQ){y.e(sQ)}finally{y.f()}m<d-1&&(c[m]>=0&&(f=SV({inputs:{x:f},backend:n,attrs:{axis:c[m]-(o.length-p),keepDims:!1}}),h.push(f)),p--)}for(var T=0,E=h;T<E.length;T++){var C=E[T];C!==f&&n.disposeIntermediateTensorInfo(C)}return f}},UW=iV({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),VW={kernelName:_o,backendName:"webgl",kernelFunc:UW},GW={kernelName:To,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=wa().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new XU("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new ZU("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},WW=sV({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:NB}),HW={kernelName:Co,backendName:"webgl",kernelFunc:WW},ZW=iV({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Vg,";\n  float a1 = ").concat(Gg,";\n  float a2 = ").concat(Wg,";\n  float a3 = ").concat(Hg,";\n  float a4 = ").concat(Zg,";\n  float a5 = ").concat(qg,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),qW={kernelName:Eo,backendName:"webgl",kernelFunc:ZW},XW=iV({opSnippet:oV+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:jB,dtype:"float32"}),KW={kernelName:Io,backendName:"webgl",kernelFunc:XW};function YW(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(Mr(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),mV({inputs:{x:o},backend:r,attrs:{shape:s}})}var QW={kernelName:No,backendName:"webgl",kernelFunc:YW},JW="return exp(x) - 1.0;",$W=iV({opSnippet:JW,packedOpSnippet:JW,cpuKernelImpl:RB}),eH={kernelName:jo,backendName:"webgl",kernelFunc:$W},tH=br((function e(t,n,r){vr(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function nH(e,t,n){var r=n.texData.get(e.dataId),a=Dr(e.shape),o=e.shape[e.shape.length-1],i=mV({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new tH("real",s,t),c=new tH("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),p=QU({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var h=mV({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h}var rH={kernelName:Ro,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return nH(t.input,!1,n)}},aH=br((function e(t,n){vr(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function oH(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||aa(a))){var i=Kr(o,Dr(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new aH(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var iH,sH={kernelName:Ao,backendName:"webgl",kernelFunc:oH},uH=br((function e(t){vr(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),cH={kernelName:Mo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new uH(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},lH="return floor(x);",dH=iV({opSnippet:lH,packedOpSnippet:lH,cpuKernelImpl:AB}),fH={kernelName:Oo,backendName:"webgl",kernelFunc:dH},pH=sV({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),hH={kernelName:Lo,backendName:"webgl",kernelFunc:pH},mH=br((function e(t){vr(this,e),this.variableNames=["A"];var n=Lz(),r=(0,X.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),vH=br((function e(t){vr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Lz(),r=(0,X.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),yH={kernelName:Ls,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,X.Z)(u,2),l=c[0],d=c[1],f=[d,l],p=[d,l,o];if(s||i){var h=wa().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=iH&&h===gH||(gH=h,iH=document.createElement("canvas").getContext("2d",{willReadFrequently:gH})),iH.canvas.width=l,iH.canvas.height=d,iH.drawImage(a,0,0,l,d),a=iH.canvas}var m=n.makeTensorInfo(f,"int32");n.texData.get(m.dataId).usage=JF.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(m.dataId),a);var v=wa().getBool("WEBGL_PACK")?new vH(p):new mH(p),y=n.runWebGLProgram(v,[m],"int32");return n.disposeData(m.dataId),y}},gH=wa().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var bH={kernelName:Fs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,p=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,v=Lp(d),y=Tp(o.shape,i.shape,c,f,l,p,!1,v),g=[],b=null!=s,x=null!=u,w="leakyrelu"===h,k=function(){var e=[o,i],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=mV({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return g.push(n),n}return e};if(b&&e.push(t(s,d)),x&&e.push(t(u,d)),w){var n=r.makeTensorInfo([],"float32",pu(m,"float32"));e.push(n),g.push(n)}return e};if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(y.strideWidth<=2&&"channelsLast"===v&&wa().getBool("WEBGL_EXP_CONV")){var S=h?uV(h,!0):null,_=new JG(y,b,S,x,w),T=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],E=k();t=r.runWebGLProgram(_,E,"float32",T)}else if(wa().getBool("WEBGL_CONV_IM2COL"))t=nW({x:o,filter:i,convInfo:y,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var C=h?uV(h,!1):null,I=new YG(y,b,C,x,w),N=k();t=r.runWebGLProgram(I,N,"float32")}else t=tW({x:o,filter:i,convInfo:y,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var j=mV({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return g.push(t),g.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),j}};var xH={kernelName:zs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),Mr(Mp(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,y=Tp(a.shape,o.shape,u,m,c,d,!0),g=wa().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,b=f?uV(f,g):null,x=[a,o],w=null!=i,k=null!=s,S="leakyrelu"===f;if(w&&x.push(i),k&&x.push(s),S){var _=n.makeTensorInfo([],"float32",pu(p,"float32"));x.push(_),h.push(_)}v=g?new jW(y,w,b,k,S):new NW(y,w,b,k,S);var T=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],E=n.runWebGLProgram(v,x,"float32",T);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},wH=br((function e(t,n,r,a){vr(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var o=Qz(r.length),i="\n    int index;",s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var kH={kernelName:Fo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=Dr(r.shape),u=_f(r,a),c=(0,X.Z)(u,4),l=c[0],d=c[1],f=c[2],p=c[3],h=mV({inputs:{x:a},backend:n,attrs:{shape:[d,i]}}),m=mV({inputs:{x:r},backend:n,attrs:{shape:[Dr(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),y=n.bufferSync(r),g=MB(v,y,r.dtype,d,i,f,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,g.values)}var b=new wH(i,p,[d,f],r.shape),x=n.runWebGLProgram(b,[m,h],m.dtype),w=mV({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}},SH=br((function e(t,n){vr(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=Qz(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function _H(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=Zr(i,a.shape)[0];if(wa().get("DEBUG"))for(var c=n.readSync(o.dataId),l=a.shape[u],d=function(){var e=c[f];Mr(e<=l-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d();var p=Cb(a,o,u,s),h=Dr(o.shape),m=[],v=mV({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),y=mV({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,h/p.batchSize]}});m.push(v),m.push(y);var g=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var b=n.bufferSync(y),x=n.bufferSync(v),w=OB(x,b,g);return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p.outputShape,w.dtype,w.values)}var k=new SH(v.shape,g),S=n.runWebGLProgram(k,[v,y],v.dtype);m.push(S);var _=mV({inputs:{x:S},backend:n,attrs:{shape:p.outputShape}});return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}var TH={kernelName:Po,backendName:"webgl",kernelFunc:_H},EH=sV({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:LB,dtype:"bool"}),CH={kernelName:zo,backendName:"webgl",kernelFunc:EH},IH=sV({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:DB}),NH={kernelName:Bo,backendName:"webgl",kernelFunc:IH};var jH={kernelName:Vo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return nH(t.input,!0,n)}},RH=iV({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),AH={kernelName:Wo,backendName:"webgl",kernelFunc:RH},MH=iV({opSnippet:"return float(isinf(x));",dtype:"bool"}),OH={kernelName:Ho,backendName:"webgl",kernelFunc:MH},LH=iV({opSnippet:"return float(isnan(x));",dtype:"bool"}),DH={kernelName:Zo,backendName:"webgl",kernelFunc:LH},PH=sV({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:PB,dtype:"bool"}),FH={kernelName:Xo,backendName:"webgl",kernelFunc:PH},zH=sV({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:FB,dtype:"bool"}),BH={kernelName:Ko,backendName:"webgl",kernelFunc:zH};var UH={kernelName:Yo,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=zB(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},VH=iV({opSnippet:oV+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:BB}),GH={kernelName:Qo,backendName:"webgl",kernelFunc:VH},WH=iV({opSnippet:oV+"\n  return log(1.0 + x);\n"}),HH={kernelName:Jo,backendName:"webgl",kernelFunc:WH},ZH=sV({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),qH={kernelName:$o,backendName:"webgl",kernelFunc:ZH},XH=iV({opSnippet:"return float(!(x >= 1.0));"}),KH={kernelName:ei,backendName:"webgl",kernelFunc:XH},YH=sV({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),QH={kernelName:ti,backendName:"webgl",kernelFunc:YH},JH=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),$H=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),eZ={kernelName:oi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=wa().getBool("WEBGL_PACK_NORMALIZATION")?new $H(a.shape,o,i,s,u):new JH(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},tZ=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),nZ={kernelName:ii,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new tZ(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};function rZ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,u=Zr(o,a.shape),c=u,l=Mh(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),p=a;if(d){if(f){for(var h=n.texData.get(p.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[l[v]];var y=hU(h,a.shape,a.dtype,l,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=y}else p=kV(a,l,n);c=Lh(c.length,s)}Ah("max",c,s);var g,b=jh(p.shape,c),x=(0,X.Z)(b,2),w=x[0],k=x[1],S=w;if(i&&(S=Rh(w,u)),f){var _=n.texData.get(p.dataId).values,T=UB(_,Dr(k),S,a.dtype);g=n.makeTensorInfo(S,a.dtype),n.texData.get(g.dataId).values=T}else g=function(e,t,n,r){var a=Dr(t),o=mV({inputs:{x:e},attrs:{shape:[Dr(e.shape)/a,a]},backend:r}),i=bV(o,e.dtype,"max",r),s=mV({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(p,k,S,n);return d&&n.disposeIntermediateTensorInfo(p),g}var aZ={kernelName:si,backendName:"webgl",kernelFunc:rZ},oZ=sV({opSnippet:HU+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+qU+"\n  return result;\n",cpuKernelImpl:VB}),iZ={kernelName:ui,backendName:"webgl",kernelFunc:oZ};var sZ={kernelName:ci,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Mz(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;Mr(Mp(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=Sp(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Fr(c.inShape,c.outShape))return KU({inputs:{x:a},backend:n});var l=new sG(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var uZ={kernelName:di,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=_p(a.shape,o,i,[1,1,1],s,c,u),d=new uG(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},cZ=br((function e(t){vr(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),lZ=br((function e(t){vr(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,p=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var dZ={kernelName:fi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=_p(o.shape,i,s,[1,1,1],u,c),d=new uG(l,"max",!0),f=n.runWebGLProgram(d,[o],o.dtype),p=new lZ(l),h=n.runWebGLProgram(p,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),h}};var fZ={kernelName:li,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Mz([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=Sp(i.shape,s,u,1,c,l),f=new sG(d,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),h=new cZ(d),m=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};var pZ={kernelName:pi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;Mr(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];Mr(Mp(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(l,"'")}));var d=Sp(a.shape,o,i,l,s),f=function(e,t,n,r){var a=new sG(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new sG(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),p=(0,X.Z)(f,2);return[p[0],p[1]]}};var hZ={kernelName:hi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,u=a.shape.length,c=Zr(i,a.shape),l=c,d=Mh(l,u),f=null!=d,p=s.shouldExecuteOnCPU([a]),h=[],m=a;if(f){if(p){for(var v=s.texData.get(m.dataId).values,y=new Array(u),g=0;g<y.length;g++)y[g]=a.shape[d[g]];var b=hU(v,a.shape,a.dtype,d,y);m=s.makeTensorInfo(y,a.dtype),s.texData.get(m.dataId).values=b}else m=kV(a,d,s);h.push(m),l=Lh(l.length,u)}Ah("sum",l,u);var x=jh(m.shape,l),w=(0,X.Z)(x,2),k=w[0],S=w[1],_=k;o&&(_=Rh(k,c));for(var T=function(e,t,n,r){var a=Dr(t),o=mV({inputs:{x:e},attrs:{shape:[Dr(e.shape)/a,a]},backend:r}),i=bV(o,"float32","mean",r),s=mV({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,S,_,s),E=0,C=h;E<C.length;E++){var I=C[E];s.disposeIntermediateTensorInfo(I)}return T}};var mZ={kernelName:mi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=Zr(o,a.shape),c=u,l=Mh(c,s),d=a;null!=l&&(d=TV({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Lh(c.length,a.shape.length)),Ah("min",c,s);var f,p=jh(d.shape,c),h=(0,X.Z)(p,2),m=h[0],v=mV({inputs:{x:d},backend:n,attrs:{shape:[-1,Dr(h[1])]}}),y=bV(v,v.dtype,"min",n);return f=mV(i?{inputs:{x:y},backend:n,attrs:{shape:Rh(m,u)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}},vZ=sV({opSnippet:HU+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+qU+"\n  return result;\n",cpuKernelImpl:GB}),yZ={kernelName:vi,backendName:"webgl",kernelFunc:vZ},gZ=br((function e(t,n,r){vr(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Qz(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),bZ=br((function e(t,n,r){vr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Qz(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=yU("rc",a),c=yU("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),xZ={kernelName:yi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bZ(a.shape,o,i):new gZ(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},wZ=sV({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+qU+"\n  return result;\n"}),kZ={kernelName:gi,backendName:"webgl",kernelFunc:wZ},SZ=br((function e(t,n,r){vr(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),_Z=sV({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),TZ={kernelName:ko,backendName:"webgl",kernelFunc:_Z},EZ="return a - b;",CZ=sV({opSnippet:EZ,packedOpSnippet:EZ,supportsComplex:!0,cpuKernelImpl:dU}),IZ={kernelName:ks,backendName:"webgl",kernelFunc:CZ};function NZ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=Zr([r.dim],a.shape),i=rZ({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=Rh(i.shape,o),u=mV({inputs:{x:i},backend:n,attrs:{shape:s}}),c=CZ({inputs:{a:a,b:u},backend:n}),l=XW({inputs:{x:c},backend:n}),d=SV({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),f=mV({inputs:{x:d},backend:n,attrs:{shape:s}}),p=_Z({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}var jZ={kernelName:ls,backendName:"webgl",kernelFunc:NZ};var RZ={kernelName:bi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:NZ({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new SZ(c,l,o),f=[[i]],p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}},AZ=TU+"\n  return -x;\n",MZ="\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";var OZ={kernelName:wi,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=HB(o.values,a.shape,a.dtype),s=(0,X.Z)(i,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=wa().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new FU(a.shape,MZ):new _U(a.shape,AZ),r.runWebGLProgram(t,[a],a.dtype)}},LZ=Ny;var DZ={kernelName:Si,backendName:"webgl",kernelFunc:function(e){Bs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=LZ(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},PZ=jy;var FZ={kernelName:_i,backendName:"webgl",kernelFunc:function(e){Bs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=PZ(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},zZ=Ry;var BZ={kernelName:Ti,backendName:"webgl",kernelFunc:function(e){Bs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=zZ(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},UZ=br((function e(t,n,r,a){vr(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),VZ={kernelName:Ci,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue,c=Dr(a.shape),l=new UZ(c,i,s,u),d=mV({inputs:{x:a},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(l,[d],o);n.disposeIntermediateTensorInfo(d);var p=mV({inputs:{x:f},backend:n,attrs:{shape:[].concat((0,ee.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(f),p}};function GZ(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=NG({inputs:{input:r},backend:n}),o=GZ({inputs:{x:a},backend:n}),i=HG({inputs:{input:r},backend:n}),s=GZ({inputs:{x:i},backend:n}),u=QU({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return oH({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var WZ={kernelName:Ms,backendName:"webgl",kernelFunc:GZ};var HZ={kernelName:Ei,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=NG({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=HG({inputs:{input:a},backend:r}),u=GZ({inputs:{x:s},backend:r}),c=QU({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return oH({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var ZZ={kernelName:Ii,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return YW({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){Or(a,e.shape,"All tensors passed to stack must have matching shapes"),Mr(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=XG({inputs:t.map((function(e){var t=YW({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},qZ=br((function e(t,n,r){vr(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=Qz(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),XZ=br((function e(t,n,r){vr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=Qz(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=yU("rc",a),c=yU("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,v=1===a?2:4;m<v;m++)h+="\n        ".concat(f[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),KZ=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===Dr(a.shape)){var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return oH({backend:n,attrs:{shape:s,value:i,dtype:a.dtype}})}var u=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XZ(a.shape,o,i):new qZ(a.shape,o,i),c=[[i]];return n.runWebGLProgram(u,[a],a.dtype,c)},YZ={kernelName:Ni,backendName:"webgl",kernelFunc:KZ},QZ=sV({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+qU+"\n  return result;\n"}),JZ={kernelName:Ri,backendName:"webgl",kernelFunc:QZ};var $Z={kernelName:Mi,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,u=o.shape.length,c=[],l=Zr(i,o.shape),d=l,f=Mh(d,u),p=o;if(null!=f&&(p=TV({inputs:{x:o},backend:r,attrs:{perm:f}}),d=Lh(d.length,u),c.push(p)),Ah("prod",d,u),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,m=qB(p.shape,p.dtype,h,d),v=m.outVals,y=m.outShape,g=m.outDtype;t=r.makeTensorInfo(y,g,v)}else{var b=jh(p.shape,d),x=(0,X.Z)(b,2),w=x[0],k=Dr(x[1]),S=mV({inputs:{x:p},backend:r,attrs:{shape:[-1,k]}}),_=bV(S,Xu(o.dtype),"prod",r);t=mV({inputs:{x:_},backend:r,attrs:{shape:w}}),c.push(S),c.push(_)}if(s){c.push(t);var T=Rh(t.shape,l);t=mV({inputs:{x:t},backend:r,attrs:{shape:T}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var eq={kernelName:Oi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,o=t.paramsDenseValues,i=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(o.dataId),d=n.readSync(i.dataId),f=XB(u,c,l,o.shape,o.dtype,d,i.shape,s),p=(0,X.Z)(f,3),h=p[0],m=p[1],v=p[2],y=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(v,o.dtype,m);return y.concat([g])}};var tq={kernelName:Li,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,o=t.deltas,i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=KB(i,r.shape,r.dtype,s,a.shape,u,o.shape),l=(0,X.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}};var nq={kernelName:Di,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,o=t.values,i=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=n.readSync(i.dataId),f=s.map((function(e){return n.readSync(e.dataId)})),p=s.map((function(e){return e.shape})),h=YB(c,a.shape,l,o.shape,o.dtype,d,i.shape,f,p,u),m=(0,X.Z)(h,2),v=m[0],y=m[1];return n.makeTensorInfo(v,o.dtype,y)}},rq=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=QB(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},aq={kernelName:Pi,backendName:"webgl",kernelFunc:rq},oq=iV({opSnippet:"return 1.0 / x;"}),iq={kernelName:zi,backendName:"webgl",kernelFunc:oq},sq=iV({opSnippet:TU+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),uq={kernelName:Bi,backendName:"webgl",kernelFunc:sq},cq=iV({opSnippet:TU+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),lq={kernelName:Zi,backendName:"webgl",kernelFunc:cq},dq=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["A"],this.outputShape=[];var i=(0,X.Z)(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),fq=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=(0,X.Z)(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var pq={kernelName:Wi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size,u=(0,X.Z)(s,2),c=u[0],l=u[1],d=wa().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fq(a.shape,c,l,o,i):new dq(a.shape,c,l,o,i);return n.runWebGLProgram(d,[a],"float32")}},hq=br((function e(t,n,r){vr(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,X.Z)(n,3),o=a[1],i=a[2],s=(0,X.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,v=2*Math.ceil(h)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var mq={kernelName:Hi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new hq(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},vq=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["A"],this.outputShape=[];var i=(0,X.Z)(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),yq=br((function e(t,n,r,a,o){vr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=(0,X.Z)(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var gq={kernelName:Vi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size,u=(0,X.Z)(s,2),c=u[0],l=u[1],d=wa().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new yq(a.shape,c,l,o,i):new vq(a.shape,c,l,o,i);return n.runWebGLProgram(d,[a],a.dtype)}},bq=br((function e(t,n,r){vr(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,X.Z)(n,3),o=a[1],i=a[2],s=(0,X.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,v=2*Math.ceil(h)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var xq={kernelName:Gi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new bq(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},wq=br((function e(t,n){vr(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=Qz(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),kq=br((function e(t,n){vr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=yU("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=Qz(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var Sq={kernelName:qi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=Zr(o,a.shape);if(0===i)return KU({inputs:{x:a},backend:n});var u=wa().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kq(a.shape,s):new wq(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},_q=br((function e(t,n){vr(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),Tq={kernelName:Ds,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=new _q(a.shape,i),l=Og(s,a.shape[1],a.shape[2]),d=(0,X.Z)(l,2),f=[[d[0],d[1],Math.sin(o),Math.cos(o)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},Eq=iV({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Cq={kernelName:Xi,backendName:"webgl",kernelFunc:Eq},Iq=iV({opSnippet:"return inversesqrt(x);",cpuKernelImpl:JB}),Nq={kernelName:Ki,backendName:"webgl",kernelFunc:Iq},jq=br((function e(t,n,r,a,o,i){vr(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=Qz(o.length),u=Qz(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var Rq={kernelName:Yi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=Cf(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(i,a.dtype);var h=mV({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=mV({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new jq(c,u,h.shape.length,m.shape.length,d,p),g=n.runWebGLProgram(y,[m,h,v],m.dtype),b=mV({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),b}},Aq=br((function e(t,n,r,a){vr(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),i=2===wa().getNumber("WEBGL_VERSION")?"while (left < right) {":o,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var Mq={kernelName:Qi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=new Aq(a.shape[0],a.shape[1],o.shape[1],i),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,o],"int32",u)}},Oq=br((function e(t,n,r){var a,o;if(vr(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=Qz(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var Lq={kernelName:Ji,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new Oq(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],qu(a.dtype,o.dtype))}},Dq=iV({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(Bg,";\n  float scale = ").concat(Ug,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Pq={kernelName:$i,backendName:"webgl",kernelFunc:Dq},Fq=iV({opSnippet:oV+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:eU}),zq={kernelName:as,backendName:"webgl",kernelFunc:Fq},Bq=iV({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Uq={kernelName:rs,backendName:"webgl",kernelFunc:Bq},Vq=iV({opSnippet:oV+"\n  return sin(x);\n"}),Gq={kernelName:ts,backendName:"webgl",kernelFunc:Vq},Wq=iV({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Hq={kernelName:ns,backendName:"webgl",kernelFunc:Wq},Zq=iV({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),qq={kernelName:os,backendName:"webgl",kernelFunc:Zq},Xq={kernelName:us,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;Mr(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,ee.Z)(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=KZ({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=Lg(d.shape,o,s,!1),p=Dg(f.length,o.length,!1),h=Pg(d.shape,o,s,!1),m=mV({inputs:{x:d},backend:n,attrs:{shape:f}}),v=TV({inputs:{x:m},backend:n,attrs:{perm:p}}),y=mV({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(v),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var Kq={kernelName:ds,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],d=rU(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,X.Z)(d,5),p=f[0],h=f[1],m=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var Yq={kernelName:fs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(o.dataId)),c=aU(s,r.shape,r.dtype,i,u),l=(0,X.Z)(c,3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};var Qq={kernelName:ps,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=oU(i,r.shape,r.dtype,s,u,!0),l=(0,X.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var Jq={kernelName:hs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=oU(i,r.shape,r.dtype,s,u),l=(0,X.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var $q={kernelName:ms,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=Cf(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize;if("string"===o.dtype){var h=n.bufferSync(a),m=n.bufferSync(o),v=gu(n.readSync(i.dataId)[0]),y=$B(h,m,s,p,d,l,c,f,v,false);return n.makeTensorInfo(s,y.dtype,y.values)}var g=new jq(l,c,a.shape.length,o.shape.length,f,[p,1],false),b=n.runWebGLProgram(g,[o,a,i],o.dtype),x=mV({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var eX={kernelName:cs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=Zr(r.axis,a.shape)[0],s=fb(a,o,i),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,ee.Z)(l);t[i]=e;var r=kG({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},tX="return sqrt(x);",nX=iV({opSnippet:tX,packedOpSnippet:tX,cpuKernelImpl:iU}),rX={kernelName:is,backendName:"webgl",kernelFunc:nX},aX=iV({opSnippet:"return x * x;"}),oX={kernelName:ys,backendName:"webgl",kernelFunc:aX},iX="return (a - b) * (a - b);",sX=sV({opSnippet:iX,packedOpSnippet:iX}),uX={kernelName:vs,backendName:"webgl",kernelFunc:sX};var cX={kernelName:Os,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=TU+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new _U(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},lX=br((function e(t,n,r){vr(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=Qz(r.length),i=Qz(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var dX={kernelName:gs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=Hf(o.shape,i,s,u,c,l,d,f,p),m=h.finalShapeSparse,v=h.finalShape,y=h.isIdentity,g=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,w=h.end,k=h.strides;if(y)t=mV({inputs:{x:o},backend:r,attrs:{shape:v}});else if(g||b){Mr(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var S=Af(x,w,k),_=kG({inputs:{x:o},backend:r,attrs:{begin:x,size:S}});t=mV({inputs:{x:_},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([o])){var T=r.readSync(o.dataId),E=Nl(o.shape,o.dtype,T),C=sU(m,E,k,x);t=r.makeTensorInfo(v,o.dtype,C.values)}else{var I=new lX(x,k,m);t=r.runWebGLProgram(I,[o],o.dtype)}}var N=mV({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),N}};var fX={kernelName:bs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=n.readSync(l.dataId),p=n.readSync(d.dataId),h=uU(f,p,a,o,i,s,u,c),m=(0,X.Z)(h,2),v=m[0],y=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",y)]}};var pX={kernelName:xs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=n.readSync(a.dataId),s=n.readSync(o.dataId)[0],u=cU(i,s,r),c=(0,X.Z)(u,3),l=c[0],d=c[1],f=c[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var hX={kernelName:ws,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=lU(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},mX=iV({opSnippet:"return tan(x);"}),vX={kernelName:Ss,backendName:"webgl",kernelFunc:mX},yX=iV({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),gX={kernelName:_s,backendName:"webgl",kernelFunc:yX},bX=br((function e(t,n){vr(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=Qz(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function xX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return gu(e)})):i,u=Nl(a.shape,a.dtype,s),c=fU(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new bX(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var wX={kernelName:Ts,backendName:"webgl",kernelFunc:xX},kX=br((function e(t){vr(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),SX=br((function e(t){vr(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function _X(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function TX(e){for(var t=1;t<e;)t*=2;return t}var EX={kernelName:Es,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=wa().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=wa().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||o>u){var d=n.readSync(a.dataId),f=pU(d,c,a.dtype,o,i),p=(0,X.Z)(f,2),h=p[0],m=p[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===o)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,oH({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),y=null!==v&&v.isPacked,g=y?n.unpackTensor(a):a,b=Dr(c)/l,x=mV({inputs:{x:g},attrs:{shape:[b,l]},backend:n});y&&_X(n,g);for(var w=TX(o),k=TX(l),S=null,_=function(){return null===S?[x,x]:[x,S]},T=function(e,t,r){var a=_(),o=new kX(r),i=[[l],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(o,a,"int32",i),_X(n,s)},E=1;E<w;E*=2)for(var C=2*E,I=E;I>=1;I/=2)T(C,I,[b,k]);for(var N=k;N>w;N/=2){var j=_(),R=new SX([b,N/2]),A=[[l],[null===S?1:0],[w]],M=S;S=n.runWebGLProgram(R,j,"int32",A),_X(n,M);for(var O=w/2,L=2*O,D=O;D>=1;D/=2)T(L,D,S.shape)}var P=S;S=kG({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,o]}}),_X(n,P);var F=_H({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});_X(n,x);var z=c.slice(0,-1);z.push(o),P=S,S=mV({inputs:{x:S},attrs:{shape:z},backend:n}),_X(n,P);var B=F;return F=mV({inputs:{x:F},attrs:{shape:z},backend:n}),_X(n,B),[F,S]}},CX=br((function e(t,n,r,a,o,i){vr(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var IX={kernelName:Cs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,X.Z)(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=null!=c?c:[f,p],v=(0,X.Z)(m,2),y=v[0],g=v[1],b=new CX(f,p,i,s,u,[d,y,g,h]);return n.runWebGLProgram(b,[a,o],"float32")}};var NX={kernelName:Ns,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;Mz(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=mU(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var jX={kernelName:js,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var f=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[o]=v;var y=kG({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),g=mV({inputs:{x:y},backend:n,attrs:{shape:c}});m[v]=g,f.push(y)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},RX=br((function e(t,n){vr(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var f="";o%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var AX={kernelName:Rs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=Mh([c],s),d=a;null!=l&&(d=TV({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=Lh(1,s)[0]);var f=Eb(d.shape,c,i),p=Dr([d.shape[c]]),h=mV({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(h);var m=function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=Tb(c,i),d=new RX({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),f=n.compileAndRun(d,[t,a],o);if(u.push(f),f.shape[1]===i)return f;var p=rq({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=xX({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(f,r,h,o,i)}(h,"unsortedSegmentSum",o,Xu(a.dtype),i),v=mV({inputs:{x:m},backend:n,attrs:{shape:f}}),y=v;if(null!=l){u.push(v);var g=Oh(l);y=TV({inputs:{x:y},backend:n,attrs:{perm:g}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}},MX=0,OX=[NV,RV,MV,LV,FV,UV,VV,GV,KV,YV,JV,eG,nG,aG,iG,cG,lG,pG,hG,mG,gG,_G,TG,EG,AG,LG,FG,JU,UG,KG,rW,uW,cW,lW,dW,pW,mW,yW,bW,_W,TW,EW,IW,RW,OW,LW,PW,zW,BW,VW,GW,HW,qW,KW,QW,eH,rH,sH,cH,fH,hH,yH,bH,xH,kH,TH,CH,NH,YU,jH,ZG,AH,OH,DH,tV,FH,BH,UH,GH,HH,qH,KH,QH,eZ,nZ,aZ,iZ,sZ,uZ,dZ,fZ,pZ,hZ,mZ,yZ,xZ,kZ,RZ,hV,OZ,DZ,FZ,BZ,IG,VZ,HZ,ZZ,YZ,JZ,aV,$Z,eq,tq,nq,aq,jG,TZ,iq,uq,lq,vV,pq,mq,gq,xq,Sq,Tq,Cq,Nq,Rq,Mq,Lq,Pq,zq,Uq,Gq,Hq,SG,jZ,qq,Xq,Kq,Yq,Qq,Jq,$q,eX,rX,oX,uX,cX,dX,fX,pX,hX,IZ,_V,vX,gX,wX,EX,IX,EV,NX,jX,AX,WZ];MX<OX.length;MX++){qs(OX[MX])}var LX={"tfjs-core":up,"tfjs-backend-cpu":"4.2.0","tfjs-backend-webgl":"4.2.0","tfjs-data":SA,"tfjs-layers":T_,"tfjs-converter":sR,tfjs:"4.2.0"};function DX(e,t){if(null==e)return{};var n,r,a=(0,Y.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var PX=["architecture"],FX=function(e){return function(e){return Array.isArray(e)}(e)?e[0]:e},zX=function(e){var t=e.scale,n=e.name,r=e.version,a=e.meta,o=a.architecture,i=DX(a,PX),s=e.path;return function(e){var a=s||"models/".concat(t,"x/model.json");if("rdn"===o)return{scale:t,path:a,modelType:"layers",packageInformation:{name:n,version:r},meta:dr({architecture:o},i),inputRange:[0,255],outputRange:[0,255]};var u=e.layers.Layer,c=.2,l=function(t){Su(r,t);var n=Eu(r);function r(){var e;return vr(this,r),e=n.call(this,{}),(0,Pe.Z)(Ft(e),"beta",void 0),e.beta=c,e}return br(r,[{key:"call",value:function(t){return e.mul(FX(t),this.beta)}}]),r}(u);(0,Pe.Z)(l,"className","MultiplyBeta");return[l,function(n){var r=function(t){Su(a,t);var r=Eu(a);function a(){var e;return vr(this,a),e=r.call(this,{}),(0,Pe.Z)(Ft(e),"scale",n),e}return br(a,[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[2],3]}},{key:"call",value:function(t){return e.depthToSpace(FX(t),this.scale,"NHWC")}}]),a}(u);return(0,Pe.Z)(r,"className","PixelShuffle".concat(t,"x")),r}(t)].forEach((function(t){e.serialization.registerClass(t)})),{scale:t,path:a,modelType:"layers",packageInformation:{name:n,version:r},meta:dr({architecture:o},i),inputRange:[0,1],outputRange:[0,1]}}}({scale:2,name:"@upscalerjs/default-model",version:"1.0.0-beta.13",path:"models/model.json",meta:{C:1,D:2,G:4,G0:64,T:10,architecture:"rdn",patchSize:128,size:"slim",artifactReducing:!1,sharpening:!1,dataset:"div2k",modelFileName:"rdn-C1-D2-G4-G064-T10-x2-patchsize128-compress100-sharpen0-datadiv2k-vary_cFalse_best-val_loss_epoch494"}}),BX=zX,UX=function(e){if(!Boolean(e)||!Array.isArray(e)||4!==e.length)return!1;var t,n=wr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null!==r&&"number"!==typeof r)return!1}}catch(sQ){n.e(sQ)}finally{n.f()}return!0};function VX(e){return function(t){try{return t.shape.length===e}catch(sQ){}return!1}}var GX,WX=VX(4),HX=VX(3),ZX=function(e){return e instanceof Fu};!function(e){e.UNDEFINED="undefined",e.INVALID_MODEL_TYPE="invalidModelType",e.MISSING_PATH="missingPath"}(GX||(GX={}));var qX=function(e){Su(n,e);var t=Eu(n);function n(e){var r;return vr(this,n),r=t.call(this,e),(0,Pe.Z)(Ft(r),"type",void 0),r.type=e,r}return br(n)}(Kx(Error)),XX=function(e){if(void 0===e)throw new qX(GX.UNDEFINED);if("string"!==typeof(t=e.modelType||"layers")||!["layers","graph"].includes(t))throw new qX(GX.INVALID_MODEL_TYPE);var t;if(!e.path)throw new qX(GX.MISSING_PATH);return!0},KX=function(e){return"number"===typeof e},YX=function(e){return Array.isArray(e)&&2===e.length&&e.every(KX)},QX=function(e){Su(n,e);var t=Eu(n);function n(){var e;vr(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,Pe.Z)(Ft(e),"message","The upscale request received an abort signal"),e}return br(n)}(Kx(Error)),JX=['You must provide a "path" when providing a model definition',"For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#missing-model-path",".")].join("\n"),$X=function(e){return["You've provided an invalid model type: ".concat(JSON.stringify(e),'. Accepted types are "layers" and "graph".'),"For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#invalid-model-type",".")].join("\n")},eK="There is a bug with the upscaler code. Please report this.",tK=["You have provided a patchSize, but the model definition already includes an input size.","Your patchSize will be ignored.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#input-size-and-patch-size",".")].join("\n");function nK(e,t){switch(e){case GX.MISSING_PATH:return new Error(JX);case GX.INVALID_MODEL_TYPE:return new Error($X(null===t||void 0===t?void 0:t.modelType));default:return new Error(eK)}}var rK=function(e){console.warn(Array.isArray(e)?e.join("\n"):e)};function aK(e){return void 0!==e&&"function"===typeof e}function oK(e){return aK(e)&&e.length<=1}var iK=function(e,t,n){return!(!aK(e)||e.length<=1)&&(void 0===n&&"tensor"===t||"tensor"===n)};function sK(e,t){return uK.apply(this,arguments)}function uK(){return(uK=mr(pr().mark((function e(t,n){var r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:r=e.sent;case 3:if(r.done){e.next=12;break}if(!n){e.next=7;break}return e.next=7,n(r.value);case 7:return e.next=9,t.next();case 9:r=e.sent,e.next=3;break;case 12:return e.abrupt("return",r.value);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cK(e){return null!==e&&void 0!==e}function lK(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.filter(cK);if(a.length){var o=Ul((function(){return a.reduce((function(e,t){return t(e)}),e)}));return e.isDisposed||e===o||e.dispose(),o}return e}function dK(e){return fK.apply(this,arguments)}function fK(){return fK=mr(pr().mark((function e(t){var n=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("graph"!==(n.length>1&&void 0!==n[1]?n[1]:"layers")){e.next=5;break}return e.next=4,rR(t);case 4:case 7:return e.abrupt("return",e.sent);case 5:return e.next=7,nT(t);case 8:case"end":return e.stop()}}),e)}))),fK.apply(this,arguments)}var pK=function(e){return function(e){return e instanceof J_}(e)?e.layers[0].batchInputShape:e.inputs[0].shape},hK=function(e){var t,n=pK(e);if(UX(n))return n;throw new Error((t=n,["Expected model to have a rank-4 compatible input shape. Instead got: ".concat(JSON.stringify(t),"."),"For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#error-with-model-input-shape",".")].join("\n")))},mK=function(e){return function(t){return YX(e)&&1===e[1]?rd(t,1/255):t}},vK=function(e){return Boolean(e)&&UX(e)&&Boolean(e[1])&&Boolean(e[2])},yK=function(e,t){var n=t.patchSize,r=t.padding,a=hK(e);if(vK(a)&&void 0!==n&&rK(tK),vK(a)){if(a[1]!==a[2])throw new Error("Input shape must be square");return{patchSize:a[1]-2*(r||0),padding:r}}return{patchSize:n,padding:r}},gK=function(e){return function(t){var n=t.shape[1],r=t.shape[2];return vK(e)&&(e[1]>n||e[2]>r)?Ul((function(){var a=Math.max(n,e[1]),o=Math.max(r,e[2]),i=km([1,n,o-r,3]),s=km([1,a-n,o,3]),u=Bp([t,i],2);return Bp([u,s],1)})):t}},bK=function(e,t){return function(n){var r=e[1]*t,a=e[2]*t;return r<n.shape[1]||a<n.shape[2]?Ul((function(){return Vp(n,[0,0,0],[1,r,a,3])})):n}},xK=function(e){return function(t){var n=YX(e)?e[1]:255;return t.clipByValue(0,n).mul(1===n?255:1)}},wK=["output","progressOutput"],kK=function(e){return"tensor"===e?"tensor":"base64"};function SK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.output,r=t.progressOutput,a=DX(t,wK);return dr(dr(dr({},a),yK(e,a)),{},{output:kK(n),progressOutput:kK(r||n)})}var _K={jsdelivr:function(e,t,n){return"https://cdn.jsdelivr.net/npm/".concat(e,"@").concat(t,"/").concat(n)},unpkg:function(e,t,n){return"https://unpkg.com/".concat(e,"@").concat(t,"/").concat(n)}},TK=["jsdelivr","unpkg"],EK=function(e,t,n){return new Error(["Could not resolve URL ".concat(e," for package ").concat(t.name,"@").concat(t.version),"Errors include:"].concat((0,ee.Z)(n.map((function(e){var t=(0,X.Z)(e,2),n=t[0],r=t[1];return"- ".concat(n,": ").concat(r.message)})))).join("\n"))},CK=function(){var e=mr(pr().mark((function e(t){var n,r,a,o,i,s,u,c;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.path,r=t.modelType,!(a=t.packageInformation)){e.next=21;break}o=[],i=0;case 4:if(!(i<TK.length)){e.next=20;break}return u=_K[s=TK[i]],e.prev=7,c=u(a.name,a.version,n),e.next=11,dK(c,r);case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(7),o.push([s,e.t0 instanceof Error?e.t0:new Error("There was an unknown error: ".concat(JSON.stringify(e.t0)))]);case 17:i++,e.next=4;break;case 20:throw EK(n,a,o);case 21:return e.next=23,dK(n,r);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),IK=function(){var e=mr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,XX(t),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),e.t0 instanceof qX?nK(e.t0.type,t):new Error(eK);case 7:return e.next=9,CK(t);case 9:return n=e.sent,e.abrupt("return",{model:n,modelDefinition:t});case 11:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}();function NK(e,t){this.v=e,this.k=t}function jK(e){return new NK(e,0)}function RK(e){var t,n;function r(t,n){try{var o=e[t](n),i=o.value,s=i instanceof NK;Promise.resolve(s?i.v:i).then((function(n){if(s){var u="return"===t?"return":"next";if(!i.k||n.done)return r(u,n);n=e[u](n).value}a(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(sQ){a("throw",sQ)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(o,i){var s={key:e,arg:a,resolve:o,reject:i,next:null};n?n=n.next=s:(t=n=s,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function AK(e){return function(){return new RK(e.apply(this,arguments))}}RK.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},RK.prototype.next=function(e){return this._invoke("next",e)},RK.prototype.throw=function(e){return this._invoke("throw",e)},RK.prototype.return=function(e){return this._invoke("return",e)};var MK=function(e,t){return function(){var n=mr(pr().mark((function n(r){return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,Tg();case 3:if(!(a=e)||!a.aborted){n.next=6;break}throw Array.isArray(r)?r.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()})):ZX(r)&&r.dispose(),new QX;case 6:case"end":return n.stop()}var a}),n)})));return function(e){return n.apply(this,arguments)}}()},OK=function(e){return!(!e||"object"!==typeof e)&&("patchSize"in e&&"number"===typeof e.patchSize)},LK=function(e){return Boolean(e)&&Array.isArray(e)&&2===e.length&&"number"===typeof e[0]&&"number"===typeof e[1]},DK=function(e){return new Error(function(e){return["Invalid value passed to warmup in warmupSizes:",JSON.stringify(e),"For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#invalid-warmup-value",".")].join("\n")}(e))},PK=function(e){if(OK(e)){var t=e.patchSize,n=e.padding,r=t+2*(void 0===n?0:n);return[r,r]}return e};function FK(e,t){return zK.apply(this,arguments)}function zK(){return zK=AK(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p,h,m,v;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jK(t);case 2:r=e.sent,a=r.model,o=r.modelDefinition,i=wr(n),e.prev=6,i.s();case 8:if((s=i.n()).done){e.next=31;break}if(u=s.value,OK(u)||LK(u)){e.next=12;break}throw DK(u);case 12:return c=PK(u),l=(0,X.Z)(c,2),d=l[0],f=l[1],p=km([1,f,d,3]),e.next=16,[p];case 16:h=[o.preprocess,function(e){return a.predict(e)},o.postprocess].filter(Boolean),m=0;case 18:if(!(m<h.length)){e.next=26;break}return v=h[m],p=lK(p,v),e.next=23,[p];case 23:m++,e.next=18;break;case 26:return p.dispose(),void(e.next=29);case 29:e.next=8;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(6),i.e(e.t0);case 36:return e.prev=36,i.f(),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[6,33,36,39]])}))),zK.apply(this,arguments)}var BK=function(e){if(Array.isArray(e)){if(LK(e))return[e];var t,n=wr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!OK(r)&&!LK(r))throw DK(r)}}catch(sQ){n.e(sQ)}finally{n.f()}return e}if(OK(e))return[e];throw DK(e)},UK=function(){var e=mr(pr().mark((function e(t,n){var r,a,o,i,s,u,c,l=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(r=l.length>2&&void 0!==l[2]?l[2]:{}).signal,o=void 0===a?void 0:a,i=r.awaitNextFrame,s=void 0!==i&&i,u=l.length>3?l[3]:void 0,c=MK(o||u.signal,s),e.next=5,c();case 5:return e.next=7,sK(FK(t,BK(n)),c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),VK=function(){return new Error(["Environment does not support a string URL as an input format.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#environment-disallows-string-input",".")].join("\n"))},GK=function(){return new Error(["Environment does not support base64 as an output format.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#environment-disallows-base64",".")].join("\n"))},WK=function(e){return new Error(["Unsupported dimensions for incoming pixels: ".concat(e.shape.length,"."),"Only 3 or 4 rank tensors are supported."].join("\n"))},HK=function(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.crossOrigin="anonymous",r.onload=function(){return t(r)},r.onerror=function(){return n(new Error(["Failed to load image"].join(" ")))}}))},ZK=function(e){return bf(e)},qK=function(){var e=mr(pr().mark((function e(t){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ZX(t)){e.next=2;break}return e.abrupt("return",t);case 2:if("string"!==typeof t){e.next=7;break}return e.next=5,HK(t);case 5:return n=e.sent,e.abrupt("return",ZK(n));case 7:return e.abrupt("return",ZK(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),XK=function(){var e=mr(pr().mark((function e(t){var n,r;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qK(t);case 2:if(n=e.sent,!HX(n)){e.next=7;break}return r=n.expandDims(0),n.dispose(),e.abrupt("return",r);case 7:if(!WX(n)){e.next=9;break}return e.abrupt("return",n);case 9:throw WK(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KK=function(e){var t=function(e){return Ul((function(){var t=(0,X.Z)(e.shape,2),n=xd([t[0],t[1]],255).expandDims(2);return e.clipByValue(0,255).concat([n],2).dataSync()}))}(e),n=(0,X.Z)(e.shape,2),r=n[0],a=n[1],o=new ImageData(a,r);o.data.set(t);var i=document.createElement("canvas");i.width=a,i.height=r;var s=i.getContext("2d");if(!s)throw new Error("No context found");return s.putImageData(o,0,0),i.toDataURL()},YK=function(e){try{new Image&&document}catch(sQ){throw e()}},QK=function(e,t){var n=t.output,r=void 0===n?"base64":n,a=t.progressOutput;"string"===typeof e&&YK(VK),"base64"!==a&&"base64"!==r||YK(GK)},JK=["signal","awaitNextFrame"],$K=['"padding" is undefined, but "patchSize" is explicitly defined.',"Without padding, patches of images often have visible artifacting at the seams. Defining an explicit padding will resolve the artifacting.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#padding-is-undefined","."),'To hide this warning, pass an explicit padding of "0".'].join("\n"),eY=['The "progress" callback was provided but "patchSize" was not defined.','Without a "patchSize", the "progress" callback will never be called.',"For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#progress-specified-without-patch-size",".")].join("\n"),tY=["The model output was not a valid tensor. UpscalerJS only supports models returning valid tensors.","This is likely an error with the model itself, not UpscalerJS.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#invalid-model-prediction",".")].join("\n"),nY=function(){return new Error("No defined tensors were passed to concatTensors")},rY=function(e){if(WX(e))return[e.shape[1],e.shape[2]];if(HX(e))return[e.shape[0],e.shape[1]];throw function(e){return new Error("Invalid shape provided to getWidthAndHeight, expected tensor of rank 3 or 4: ".concat(JSON.stringify(e.shape)))}(e)},aY=function(e,t){var n=rY(e),r=(0,X.Z)(n,2),a=r[0],o=r[1];return{rows:Math.ceil(a/t),columns:Math.ceil(o/t)}},oY=function(e,t,n){if(t[e]<0){var r=0-t[e];t[e]+=r,n[e]-=r}},iY=function(e,t,n,r,a,o){if(n[t]>e){var i=n[t]-e,s=0;r[t]-i<0&&(s=0-(r[t]-i)),r[t]-=i-s,n[t]-=i;var u=i-s;a[t]+=u,o[t]+=u}},sY=function(e,t,n){n[e]>t[e]&&(n[e]=t[e])},uY=new Error("Row is undefined"),cY=new Error("Column is undefined"),lY=new Error("Patch Size is undefined"),dY=new Error("Height is undefined"),fY=new Error("Width is undefined"),pY=function(e){var t=e.row,n=e.col,r=e.patchSize,a=e.height,o=e.width,i=e.padding,s=void 0===i?0:i;if(void 0===t)throw uY;if(void 0===n)throw cY;if(void 0===r)throw lY;if(void 0===a)throw dY;if(void 0===o)throw fY;var u=r,c=r;u>a&&(u=a),c>o&&(c=o);var l=[t*r-s,n*r-s],d=[s,s];oY(0,l,d),oY(1,l,d);var f=[l[0]+u+2*s,l[1]+c+2*s],p=[d[0]+u,d[1]+c];iY(a,0,f,l,d,p),iY(o,1,f,l,d,p);var h=[f[0]-l[0],f[1]-l[1]];return sY(0,h,p),sY(1,h,p),{origin:l,sliceOrigin:d,size:h,sliceSize:[p[0]-d[0],p[1]-d[1]]}};function hY(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<e.length;r++){var a=e[r];void 0!==a&&n.push(a)}if(0===n.length)throw nY();var o=Bp(n,t);return e.forEach((function(e){return null===e||void 0===e?void 0:e.dispose()})),o}var mY=function(e,t,n,r){return(e*n+t+1)/r},vY=function(e,t){var n=e.predict(t);if(!ZX(n))throw new Error(tY);if(WX(n))return n;throw new Error(function(e){return["The tensor returned by the model was not a valid rank-4 tensor. It's shape is ".concat(JSON.stringify(e.shape),".}"),"UpscalerJS only supports models returning valid image-like data in four dimensional form.","For more information, see ".concat("https://upscalerjs.com/documentation/troubleshooting#invalid-predicted-tensor",".")].join("\n")}(n))};function yY(e,t,n,r){return gY.apply(this,arguments)}function gY(){return gY=AK((function(e,t,n,r){var a=t.output,o=t.progress,i=t.patchSize,s=t.padding,u=t.progressOutput,c=n.model,l=n.modelDefinition,d=r.imageSize,f=r.inputSize;return pr().mark((function t(){var n,r,p,h,m,v,y,g,b,x,w,k,S,_,T,E,C,I,N,j,R,A,M,O,L,D,P,F,z,B,U,V,G;return pr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.scale||1,void 0===f&&i&&void 0===s&&rK($K),!i){t.next=58;break}return p=e.shape.slice(1),h=(0,X.Z)(p,2),m=h[0],v=h[1],y=aY(e,i),g=y.rows,b=y.columns,void(t.next=7);case 7:w=g*b,k=0;case 9:if(!(k<g)){t.next=51;break}return S=void 0,t.next=13,[S,x];case 13:_=0;case 14:if(!(_<b)){t.next=44;break}return T=pY({row:k,col:_,patchSize:i,padding:s,height:m,width:v}),E=T.origin,C=T.size,I=T.sliceOrigin,N=T.sliceSize,t.next=18,[x,S];case 18:return j=e.slice([0,E[0],E[1]],[-1,C[0],C[1]]),t.next=21,[x,S,j];case 21:return R=vY(c,j),j.dispose(),t.next=25,[x,S,R];case 25:return A=[0,I[0]*n,I[1]*n],M=[-1,N[0]*n,N[1]*n],O=R.slice(A,M),R.dispose(),t.next=31,[x,S,O];case 31:return L=lK(O,l.postprocess,xK(l.outputRange)),t.next=34,[x,S,L];case 34:return void 0!==o&&aK(o)&&(D=mY(k,_,b,w),oK(o)?o(D):(P=L.squeeze(),iK(o,a,u)?o(D,P,k,_):(F=KK(P),P.dispose(),o(D,F,k,_)))),t.next=37,[x,S,L];case 37:return S=hY([S,L],2),L.dispose(),t.next=41,[x,S];case 41:_++,t.next=14;break;case 44:return x=hY([x,S],1),S.dispose(),t.next=48,[x];case 48:k++,t.next=9;break;case 51:return z=lK(x.clone(),bK(d,n)),null===(r=x)||void 0===r||r.dispose(),t.next=55,[z];case 55:return B=z.squeeze(),z.dispose(),t.abrupt("return",B);case 58:return o&&rK(eY),U=c.predict(e),t.next=62,[U];case 62:return V=lK(U.clone(),l.postprocess,xK(l.outputRange),bK(d,n)),U.dispose(),t.next=66,[V];case 66:return G=V.squeeze(),V.dispose(),t.abrupt("return",G);case 69:case"end":return t.stop()}}),t)}))()})),gY.apply(this,arguments)}var bY=function(e){return ZX(e)?e.clone():e};function xY(e,t,n){return wY.apply(this,arguments)}function wY(){return wY=AK((function(e,t,n){var r=n.model,a=n.modelDefinition;return pr().mark((function n(){var o,i,s,u,c,l,d,f,p;return pr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=bY(e),n.next=3,jK(XK(o));case 3:return i=n.sent,n.next=6,i;case 6:return s=i.shape,u=hK(r),c=lK(i,a.preprocess,mK(a.inputRange),gK(u)),n.next=11,c;case 11:return l=yY(c,t,{model:r,modelDefinition:a},{imageSize:s,inputSize:u}),n.next=14,jK(l.next());case 14:return d=n.sent,n.next=17,d.value;case 17:if(d.done){n.next=35;break}return n.next=20,jK(l.next());case 20:if(d=n.sent,!Array.isArray(d.value)){n.next=26;break}return n.next=24,[].concat((0,ee.Z)(d.value),[c]);case 24:case 29:n.next=33;break;case 26:if(!ZX(d.value)){n.next=31;break}return n.next=29,[d.value,c];case 31:return n.next=33,c;case 33:n.next=17;break;case 35:if(c.dispose(),f=d.value,"tensor"!==t.output){n.next=39;break}return n.abrupt("return",f);case 39:return p=KK(f),f.dispose(),n.abrupt("return",p);case 42:case"end":return n.stop()}}),n)}))()})),wY.apply(this,arguments)}function kY(e,t,n){return SY.apply(this,arguments)}function SY(){return SY=mr(pr().mark((function e(t,n,r){var a,o,i,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.signal,o=n.awaitNextFrame,i=DX(n,JK),QK(t,{output:i.output,progressOutput:i.progressOutput}),s=MK(a||r.signal,o),e.next=5,s();case 5:return e.next=7,sK(xY(t,i,r),s);case 7:return u=e.sent,e.next=10,s();case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)}))),SY.apply(this,arguments)}var _Y,TY,EY=BX,CY=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vr(this,e),(0,Pe.Z)(this,"_opts",void 0),(0,Pe.Z)(this,"_model",void 0),(0,Pe.Z)(this,"ready",void 0),(0,Pe.Z)(this,"_abortController",new AbortController),(0,Pe.Z)(this,"upscale",this.execute.bind(this)),(0,Pe.Z)(this,"warmup",mr(pr().mark((function e(){var n,r,a=arguments;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:[],r=a.length>1?a[1]:void 0,e.next=4,t.ready;case 4:return e.abrupt("return",UK(t._model,n,r,{signal:t._abortController.signal}));case 5:case"end":return e.stop()}}),e)})))),(0,Pe.Z)(this,"abort",(function(){t._abortController.abort(),t._abortController=new AbortController})),(0,Pe.Z)(this,"dispose",mr(pr().mark((function e(){var n;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ready;case 2:return e.next=4,t._model;case 4:n=e.sent,n.model.dispose();case 7:case"end":return e.stop()}}),e)})))),(0,Pe.Z)(this,"getModel",(function(){return t._model})),this._opts=dr({},n),this._model=IK(function(e){return function(e){return"function"===typeof e}(e)?e(H):e}(this._opts.model||EY)),this.ready=new Promise((function(e,n){t._model.then((function(){return UK(t._model,t._opts.warmupSizes||[],void 0,{signal:t._abortController.signal})})).then(e).catch(n)}))}return br(e,[{key:"execute",value:function(){var e=mr(pr().mark((function e(t,n){var r,a,o;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ready;case 2:return e.next=4,this._model;case 4:return r=e.sent,a=r.model,o=r.modelDefinition,e.abrupt("return",kY(t,SK(a,n),{model:a,modelDefinition:o,signal:this._abortController.signal}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),IY=CY;function NY(){var e=(new IY).upscale(TY,{patchSize:20,padding:2});return console.log("successfully passing image"),e}function jY(){function e(e){function t(){e.createCanvas(648,408).id("canvasId"),e.image(_Y,0,0,648,408);var t=document.getElementById("canvasId");TY=t.toDataURL(),NY()}e.setup=function(){(_Y=e.createCapture(e.VIDEO)).size(648,408),e.createButton("Take Photo").id("button").mousePressed(t)}}var t=(0,Z.useRef)();return(0,Z.useEffect)((function(){var n=new(cr())(e,t.current);return function(){n.remove()}}),[]),(0,se.jsx)(nr,{sx:{maxWidth:750,display:"flex"},children:(0,se.jsxs)(ir,{style:{padding:10,margin:10,flex:1},children:[(0,se.jsx)(Un,{variant:"h6",color:"text.primary",gutterBottom:!0,children:"Please provide a picture of your insurance card. Please fill the screen with your insurance card to capture all the necessary information. "}),(0,se.jsx)(Un,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"If you do not have insurance, please skip this step. You will have to manually fill out your information in the next screen."}),(0,se.jsx)("div",{ref:t})]})})}var RY=r(1362);function AY(){var e,t=NY(),n=(new IY,(0,Z.useState)("")),r=(0,X.Z)(n,2),a=r[0],o=r[1];function i(n){n.preload=function(){try{e=n.loadImage(t),console.log("successfully loaded image")}catch(r){console.log(r)}},n.setup=function(){n.createCanvas(e.width,e.height).id("canvas"),e.filter(n.GRAY,.55),n.image(e,0,0);var t=document.getElementById("canvas"),r=[{left:0,top:0,width:t.width/2,height:t.height},{left:t.width/2,top:0,width:t.width/2,height:t.height}];mr(pr().mark((function e(){var n,a,i,s,u;return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,RY.createWorker)({logger:function(e){return console.log(e)}});case 2:return n=e.sent,e.next=5,n.loadLanguage("eng");case 5:return e.next=7,n.initialize("eng");case 7:a=[],console.log(r.length),i=0;case 10:if(!(i<r.length)){e.next=19;break}return e.next=13,n.recognize(t,{rectangle:r[i]});case 13:s=e.sent,u=s.data.text,a.push(u);case 16:i++,e.next=10;break;case 19:return console.log(a),o(a),e.next=23,n.terminate();case 23:case"end":return e.stop()}}),e)})))()}}var s=(0,Z.useRef)();return(0,Z.useEffect)((function(){var e=new(cr())(i,s.current);return function(){e.remove()}}),[]),(0,se.jsx)(nr,{sx:{maxWidth:750,display:"flex"},children:(0,se.jsxs)(ir,{style:{padding:10,margin:10,flex:1},children:[(0,se.jsx)(Un,{variant:"h4",color:"text.primary",gutterBottom:!0,children:"Please Confirm Your Information Below:"}),(0,se.jsx)("div",{style:{width:"500px"},children:a})]})})}var MY=r(3878),OY=r(9199),LY=r(5267);r(8457);var DY=Z.createContext({}),PY=r(8744);function FY(e){return(0,ve.Z)("MuiAccordion",e)}var zY=(0,me.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),BY=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],UY=(0,he.ZP)(Ln,{name:"MuiAccordion",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,Pe.Z)({},"& .".concat(zY.region),t.region),t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r={duration:n.transitions.duration.shortest};return t={position:"relative",transition:n.transitions.create(["margin"],r),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(n.vars||n).palette.divider,transition:n.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&:before":{display:"none"}}},(0,Pe.Z)(t,"&.".concat(zY.expanded),{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}}),(0,Pe.Z)(t,"&.".concat(zY.disabled),{backgroundColor:(n.vars||n).palette.action.disabledBackground}),t}),(function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({},!n.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!n.disableGutters&&(0,Pe.Z)({},"&.".concat(zY.expanded),{margin:"16px 0"}))})),VY=Z.forwardRef((function(e,t){var n,r=(0,pe.Z)({props:e,name:"MuiAccordion"}),a=r.children,o=r.className,i=r.defaultExpanded,s=void 0!==i&&i,u=r.disabled,c=void 0!==u&&u,l=r.disableGutters,d=void 0!==l&&l,f=r.expanded,p=r.onChange,h=r.square,m=void 0!==h&&h,v=r.TransitionComponent,y=void 0===v?Ct:v,g=r.TransitionProps,b=(0,Y.Z)(r,BY),x=(0,PY.Z)({controlled:f,default:s,name:"Accordion",state:"expanded"}),w=(0,X.Z)(x,2),k=w[0],S=w[1],_=Z.useCallback((function(e){S(!k),p&&p(e,!k)}),[k,p,S]),T=Z.Children.toArray(a),E=(n=T,(0,MY.Z)(n)||(0,OY.Z)(n)||(0,xr.Z)(n)||(0,LY.Z)()),C=E[0],I=E.slice(1),N=Z.useMemo((function(){return{expanded:k,disabled:c,disableGutters:d,toggle:_}}),[k,c,d,_]),j=(0,K.Z)({},r,{square:m,disabled:c,disableGutters:d,expanded:k}),R=function(e){var t=e.classes,n={root:["root",!e.square&&"rounded",e.expanded&&"expanded",e.disabled&&"disabled",!e.disableGutters&&"gutters"],region:["region"]};return(0,fe.Z)(n,FY,t)}(j);return(0,se.jsxs)(UY,(0,K.Z)({className:(0,Q.Z)(R.root,o),ref:t,ownerState:j,square:m},b,{children:[(0,se.jsx)(DY.Provider,{value:N,children:C}),(0,se.jsx)(y,(0,K.Z)({in:k,timeout:"auto"},g,{children:(0,se.jsx)("div",{"aria-labelledby":C.props.id,id:C.props["aria-controls"],role:"region",className:R.region,children:I})}))]}))})),GY=VY;function WY(e){return(0,ve.Z)("MuiAccordionSummary",e)}var HY=(0,me.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ZY=["children","className","expandIcon","focusVisibleClassName","onClick"],qY=(0,he.ZP)(xn,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,n=e.theme,r=e.ownerState,a={duration:n.transitions.duration.shortest};return(0,K.Z)((t={display:"flex",minHeight:48,padding:n.spacing(0,2),transition:n.transitions.create(["min-height","background-color"],a)},(0,Pe.Z)(t,"&.".concat(HY.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,Pe.Z)(t,"&.".concat(HY.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,Pe.Z)(t,"&:hover:not(.".concat(HY.disabled,")"),{cursor:"pointer"}),t),!r.disableGutters&&(0,Pe.Z)({},"&.".concat(HY.expanded),{minHeight:64}))})),XY=(0,he.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:function(e,t){return t.content}})((function(e){var t=e.theme,n=e.ownerState;return(0,K.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!n.disableGutters&&(0,Pe.Z)({transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest})},"&.".concat(HY.expanded),{margin:"20px 0"}))})),KY=(0,he.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:function(e,t){return t.expandIconWrapper}})((function(e){var t=e.theme;return(0,Pe.Z)({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},"&.".concat(HY.expanded),{transform:"rotate(180deg)"})})),YY=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiAccordionSummary"}),r=n.children,a=n.className,o=n.expandIcon,i=n.focusVisibleClassName,s=n.onClick,u=(0,Y.Z)(n,ZY),c=Z.useContext(DY),l=c.disabled,d=void 0!==l&&l,f=c.disableGutters,p=c.expanded,h=c.toggle,m=(0,K.Z)({},n,{expanded:p,disabled:d,disableGutters:f}),v=function(e){var t=e.classes,n=e.expanded,r=e.disabled,a=e.disableGutters,o={root:["root",n&&"expanded",r&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,fe.Z)(o,WY,t)}(m);return(0,se.jsxs)(qY,(0,K.Z)({focusRipple:!1,disableRipple:!0,disabled:d,component:"div","aria-expanded":p,className:(0,Q.Z)(v.root,a),focusVisibleClassName:(0,Q.Z)(v.focusVisible,i),onClick:function(e){h&&h(e),s&&s(e)},ref:t,ownerState:m},u,{children:[(0,se.jsx)(XY,{className:v.content,ownerState:m,children:r}),o&&(0,se.jsx)(KY,{className:v.expandIconWrapper,ownerState:m,children:o})]}))}));function QY(e){return(0,ve.Z)("MuiAccordionDetails",e)}(0,me.Z)("MuiAccordionDetails",["root"]);var JY=["className"],$Y=(0,he.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){return{padding:e.theme.spacing(1,2,2)}})),eQ=Z.forwardRef((function(e,t){var n=(0,pe.Z)({props:e,name:"MuiAccordionDetails"}),r=n.className,a=(0,Y.Z)(n,JY),o=n,i=function(e){var t=e.classes;return(0,fe.Z)({root:["root"]},QY,t)}(o);return(0,se.jsx)($Y,(0,K.Z)({className:(0,Q.Z)(i.root,r),ref:t,ownerState:o},a))})),tQ=r(1131);function nQ(){return(0,se.jsx)(nr,{sx:{maxWidth:750,display:"flex"},children:(0,se.jsxs)(ir,{style:{padding:10,margin:10,flex:1},children:[(0,se.jsx)(Un,{variant:"h4",color:"text.primary",gutterBottom:!0,children:"What brings you in today?"}),(0,se.jsxs)(GY,{children:[(0,se.jsx)(YY,{expandIcon:(0,se.jsx)(tQ.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,se.jsx)(Un,{children:"Accordion 1"})}),(0,se.jsx)(eQ,{children:(0,se.jsx)(Un,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget."})})]}),(0,se.jsxs)(GY,{children:[(0,se.jsx)(YY,{expandIcon:(0,se.jsx)(tQ.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,se.jsx)(Un,{children:"Accordion 2"})}),(0,se.jsx)(eQ,{children:(0,se.jsx)(Un,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget."})})]}),(0,se.jsx)(GY,{disabled:!0,children:(0,se.jsx)(YY,{expandIcon:(0,se.jsx)(tQ.Z,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,se.jsx)(Un,{children:"Disabled Accordion"})})})]})})}function rQ(){return(0,se.jsx)("div",{children:"Coming Soon"})}var aQ=[{label:"Welcome",description:(0,se.jsx)(sr,{})},{label:"What Brings You In",description:(0,se.jsx)(nQ,{})},{label:"Basic Vitals",description:(0,se.jsx)(rQ,{})},{label:"Get Insurance Information",description:(0,se.jsx)(jY,{})},{label:"Confirm Checkin",description:(0,se.jsx)(AY,{})}];function oQ(){var e=Z.useState(0),t=(0,X.Z)(e,2),n=t[0],r=t[1],a=function(){r((function(e){return e+1}))},o=function(){r((function(e){return e-1}))};return(0,se.jsxs)(Jn,{maxWidth:"sm",children:[(0,se.jsx)("div",{style:{padding:10},children:"\xa0"}),(0,se.jsxs)(de,{sx:{maxWidth:800},children:[(0,se.jsx)(Ae,{activeStep:n,orientation:"vertical",children:aQ.map((function(e,t){return(0,se.jsxs)(De,{children:[(0,se.jsx)(rt,{optional:4===t?(0,se.jsx)(Un,{variant:"caption",children:"Last step"}):null,children:e.label}),(0,se.jsxs)(At,{children:[(0,se.jsx)(Un,{children:e.description}),(0,se.jsx)(de,{sx:{mb:2},children:(0,se.jsxs)("div",{children:[(0,se.jsx)(Nn,{variant:"contained",onClick:a,sx:{mt:1,mr:1},children:t===aQ.length-1?"Finish":"Continue"}),(0,se.jsx)(Nn,{disabled:0===t,onClick:o,sx:{mt:1,mr:1},children:"Back"})]})})]})]},e.label)}))}),n===aQ.length&&(0,se.jsxs)(Ln,{square:!0,elevation:0,sx:{p:3},children:[(0,se.jsx)(Un,{children:"All steps completed - you're finished! Someone will be with you shortly."}),(0,se.jsx)(Nn,{onClick:function(){r(0),window.location.reload(!1)},sx:{mt:1,mr:1},children:"Complete Check In"})]})]})]})}var iQ=function(e){e&&e instanceof Function&&r.e(787).then(r.bind(r,787)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};q.createRoot(document.getElementById("root")).render((0,se.jsx)(Z.StrictMode,{children:(0,se.jsx)(oQ,{})})),iQ()}()}();
//# sourceMappingURL=main.1926ecde.js.map